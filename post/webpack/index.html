<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><script src="/blogs/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=blogs/livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="webpackÈÖçÁΩÆÂèäÂÖ∂ÂéüÁêÜ">
<title>Webpack</title>

<link rel='canonical' href='http://localhost:1313/blogs/post/webpack/'>

<link rel="stylesheet" href="/blogs/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="Webpack">
<meta property='og:description' content="webpackÈÖçÁΩÆÂèäÂÖ∂ÂéüÁêÜ">
<meta property='og:url' content='http://localhost:1313/blogs/post/webpack/'>
<meta property='og:site_name' content='ÊùúÂç°ÁöÑÂçöÂÆ¢'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='webpack' /><meta property='article:published_time' content='2025-03-12T15:02:09&#43;08:00'/><meta property='article:modified_time' content='2025-03-12T15:02:09&#43;08:00'/><meta property='og:image' content='http://localhost:1313/blogs/post/webpack/877.jpg' />
<meta name="twitter:title" content="Webpack">
<meta name="twitter:description" content="webpackÈÖçÁΩÆÂèäÂÖ∂ÂéüÁêÜ"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='http://localhost:1313/blogs/post/webpack/877.jpg' />
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/blogs/">
                
                    
                    
                    
                        
                        <img src="/blogs/img/avatar_hu_6c7406f7e9b83504.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/blogs">ÊùúÂç°ÁöÑÂçöÂÆ¢</a></h1>
            <h2 class="site-description">Â≠¶‰π†ÂíåÁîüÊ¥ªÁöÑËÆ∞ÂΩï</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/dukkhaybw'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://juejin.cn/user/3465312480538343'
                        target="_blank"
                        title="ÊéòÈáë"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/blogs/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/blogs/page/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫éÊàë</span>
            </a>
        </li>
        
        
        <li >
            <a href='/blogs/page/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/blogs/page/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/blogs/page/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>ÊöóËâ≤Ê®°Âºè</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#webpack">Webpack</a></li>
    <li><a href="#ÊµèËßàÂô®‰ΩøÁî®-es-module">ÊµèËßàÂô®‰ΩøÁî® ES module</a></li>
    <li><a href="#entry">entry</a></li>
    <li><a href="#output">output</a></li>
    <li><a href="#loader">loader</a>
      <ol>
        <li><a href="#oneof">oneOf</a>
          <ol>
            <li><a href="#oneof-1"><strong><code>oneOf</code> ÁöÑÂ∑•‰ΩúÊñπÂºè</strong></a></li>
            <li><a href="#oneof-2"><strong><code>oneOf</code> ÁöÑ‰ºòÁÇπ</strong></a></li>
            <li><a href="#oneof-3"><strong><code>oneOf</code> ÁöÑÊ≥®ÊÑè‰∫ãÈ°π</strong></a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#plugin">plugin</a></li>
    <li><a href="#Ê®°Âºèmode">Ê®°Âºè(mode)</a></li>
    <li><a href="#Âå∫ÂàÜÁéØÂ¢É">Âå∫ÂàÜÁéØÂ¢É</a>
      <ol>
        <li><a href="#windows">Windows</a>
          <ol>
            <li><a href="#cmd">CMD</a></li>
            <li><a href="#powershell">Powershell</a></li>
          </ol>
        </li>
        <li><a href="#mac">Mac</a></li>
        <li><a href="#lunix">Lunix</a></li>
      </ol>
    </li>
    <li><a href="#ÈÖçÁΩÆ-packagejson">ÈÖçÁΩÆ package.json</a>
      <ol>
        <li><a href="#windows-Á≥ªÁªü">Windows Á≥ªÁªü</a></li>
        <li><a href="#mac-Á≥ªÁªü">Mac Á≥ªÁªü</a></li>
        <li><a href="#Ë∑®Âπ≥Âè∞---cross-env">Ë∑®Âπ≥Âè∞ - cross-env</a></li>
      </ol>
    </li>
    <li><a href="#browserlist">Browserlist</a></li>
    <li><a href="#webpack-dev-server">webpack-dev-server</a></li>
    <li><a href="#css-loader-ÈÖçÁΩÆ">css-loader ÈÖçÁΩÆ</a></li>
    <li><a href="#webpack-dev-middleware">webpack-dev-middleware</a></li>
    <li><a href="#css-ÂÖºÂÆπÊÄß">CSS ÂÖºÂÆπÊÄß</a></li>
    <li><a href="#ËµÑÊ∫êÊ®°Âùó">ËµÑÊ∫êÊ®°Âùó</a>
      <ol>
        <li><a href="#query">query</a></li>
        <li><a href="#ÂõæÁâáÂéãÁº©">ÂõæÁâáÂéãÁº©</a></li>
        <li><a href="#ÂõæÁâáÂìçÂ∫îÂºè">ÂõæÁâáÂìçÂ∫îÂºè</a></li>
      </ol>
    </li>
    <li><a href="#js-ÂÖºÂÆπÊÄßÂ§ÑÁêÜ">JS ÂÖºÂÆπÊÄßÂ§ÑÁêÜ</a>
      <ol>
        <li><a href="#babel-polyfill">babel-polyfill</a>
          <ol>
            <li><a href="#usebuiltins-false">useBuiltIns: false</a></li>
            <li><a href="#usebuiltins"><strong>useBuiltIns: &ldquo;entry&rdquo;</strong></a></li>
            <li><a href="#webpackconfigjs">webpack.config.js</a></li>
            <li><a href="#usebuiltins-usage-">**&ldquo;useBuiltIns&rdquo;: &ldquo;usage&rdquo; **</a></li>
          </ol>
        </li>
        <li><a href="#babel-runtime">babel-runtime</a></li>
        <li><a href="#babel-plugin-transform-runtime">babel-plugin-transform-runtime</a>
          <ol>
            <li><a href="#helpers-true">helpers: true</a></li>
            <li><a href="#regenerator-true">regenerator: true</a></li>
            <li><a href="#ÊúÄ‰Ω≥ÂÆûË∑µ">ÊúÄ‰Ω≥ÂÆûË∑µ</a></li>
            <li><a href="#È°πÁõÆÂºÄÂèë">È°πÁõÆÂºÄÂèë</a></li>
            <li><a href="#Á±ªÂ∫ìÂºÄÂèë">Á±ªÂ∫ìÂºÄÂèë</a></li>
            <li><a href="#polyfill-service">polyfill-service</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#ts">TS</a>
      <ol>
        <li><a href="#ÈÄâÊã©">ÈÄâÊã©</a></li>
        <li><a href="#ÊúÄ‰Ω≥ÂÆûË∑µ-1">ÊúÄ‰Ω≥ÂÆûË∑µ</a></li>
      </ol>
    </li>
    <li><a href="#eslint">eslint</a>
      <ol>
        <li><a href="#ÊóßÁâàÈÖçÁΩÆ">ÊóßÁâàÈÖçÁΩÆ</a></li>
        <li><a href="#Êñ∞ÁâàÈÖçÁΩÆ">Êñ∞ÁâàÈÖçÁΩÆ</a></li>
      </ol>
    </li>
    <li><a href="#map-È°πÁõÆÈÖçÁΩÆ">MAP È°πÁõÆÈÖçÁΩÆ</a>
      <ol>
        <li><a href="#chunks"><strong><code>chunks</code> ÈÄâÈ°πÁöÑ‰∏ªË¶ÅÂäüËÉΩ</strong></a></li>
        <li><a href="#chunks-1"><strong><code>chunks</code> ÁöÑ‰ΩøÁî®Âú∫ÊôØ</strong></a>
          <ol>
            <li><a href="#1-Â§öÂÖ•Âè£ÈÖçÁΩÆ">1. Â§öÂÖ•Âè£ÈÖçÁΩÆ</a></li>
            <li><a href="#2-ÂºïÂÖ•Â§ö‰∏™ÂÖ•Âè£Êñá‰ª∂">2. ÂºïÂÖ•Â§ö‰∏™ÂÖ•Âè£Êñá‰ª∂</a></li>
          </ol>
        </li>
        <li><a href="#‰∏ç‰ΩøÁî®"><strong>‰∏ç‰ΩøÁî® <code>chunks</code> ‰ºöÂèëÁîü‰ªÄ‰πàÔºü</strong></a></li>
        <li><a href="#ÂØπÊØî"><strong>ÂØπÊØî <code>chunks</code> Âíå <code>excludeChunks</code></strong></a></li>
        <li><a href="#ÊÄªÁªì">ÊÄªÁªì</a></li>
      </ol>
    </li>
    <li><a href="#webpack-ÂéüÁêÜÈ¢ÑÂ§áÁü•ËØÜ">webpack ÂéüÁêÜÈ¢ÑÂ§áÁü•ËØÜ</a>
      <ol>
        <li><a href="#commonjs-Âä†ËΩΩ-commonjs">common.js Âä†ËΩΩ common.js</a></li>
        <li><a href="#commonjs-Âä†ËΩΩ-es6-modules">common.js Âä†ËΩΩ ES6 modules</a></li>
        <li><a href="#es6-modules-Âä†ËΩΩ-es6-modules">ES6 modules Âä†ËΩΩ ES6 modules</a></li>
        <li><a href="#es6-modules-Âä†ËΩΩ-commonjs">ES6 modules Âä†ËΩΩ common.js</a></li>
      </ol>
    </li>
    <li><a href="#ÂºÇÊ≠•Âä†ËΩΩ">ÂºÇÊ≠•Âä†ËΩΩ</a></li>
    <li><a href="#ast">AST</a>
      <ol>
        <li><a href="#Áî®ÈÄî">Áî®ÈÄî</a></li>
        <li><a href="#ast-ËäÇÁÇπ">AST ËäÇÁÇπ</a></li>
        <li><a href="#ÈÅçÂéÜËØ≠Ê≥ïÊ†ë">ÈÅçÂéÜËØ≠Ê≥ïÊ†ë</a></li>
      </ol>
    </li>
    <li><a href="#babel">Babel</a>
      <ol>
        <li><a href="#babel-Êèí‰ª∂">babel Êèí‰ª∂</a></li>
      </ol>
    </li>
    <li><a href="#ast-ÁöÑÂâçÁΩÆÁü•ËØÜ">AST ÁöÑÂâçÁΩÆÁü•ËØÜ</a>
      <ol>
        <li><a href="#ËÆøÈóÆÂô®Ê®°Âºè">ËÆøÈóÆÂô®Ê®°Âºè</a></li>
        <li><a href="#path">path</a></li>
        <li><a href="#scope">scope</a></li>
        <li><a href="#ËΩ¨Êç¢ÁÆ≠Â§¥ÂáΩÊï∞Êèí‰ª∂">ËΩ¨Êç¢ÁÆ≠Â§¥ÂáΩÊï∞Êèí‰ª∂</a></li>
        <li><a href="#Êó•ÂøóÊèí‰ª∂">Êó•ÂøóÊèí‰ª∂</a></li>
        <li><a href="#Êï∞ÊçÆÂüãÁÇπ">Êï∞ÊçÆÂüãÁÇπ</a></li>
        <li><a href="#Ê®°Êãü-eslint">Ê®°Êãü eslint</a></li>
        <li><a href="#‰ª£Á†ÅÂéãÁº©">‰ª£Á†ÅÂéãÁº©</a></li>
        <li><a href="#ÊåâÈúÄÂä†ËΩΩ">ÊåâÈúÄÂä†ËΩΩ</a></li>
      </ol>
    </li>
    <li><a href="#webpack-Â∑•‰ΩúÊµÅ">webpack Â∑•‰ΩúÊµÅ</a>
      <ol>
        <li><a href="#Ë∞ÉËØï-webpack">Ë∞ÉËØï webpack</a></li>
        <li><a href="#loader-1">loader</a></li>
        <li><a href="#tapable">tapable</a></li>
        <li><a href="#plugin-1">plugin</a></li>
        <li><a href="#webpack-ÁºñËØëÊµÅÁ®ã">webpack ÁºñËØëÊµÅÁ®ã</a></li>
      </ol>
    </li>
    <li><a href="#loader-2">loader</a>
      <ol>
        <li><a href="#loader-ÊâßË°åÊó∂Êú∫">loader ÊâßË°åÊó∂Êú∫</a></li>
        <li><a href="#loader-ÂàÜÁ±ª">loader ÂàÜÁ±ª</a></li>
        <li><a href="#loader-ÁöÑÂ∑•‰Ωú">loader ÁöÑÂ∑•‰Ωú</a></li>
        <li><a href="#ÂÜÖËÅî-loader-ÁöÑÁâπÊÆäÈÖçÁΩÆ">ÂÜÖËÅî loader ÁöÑÁâπÊÆäÈÖçÁΩÆ</a></li>
        <li><a href="#pitch">pitch</a></li>
        <li><a href="#babel-loader">babel-loader</a></li>
        <li><a href="#babel-loaderjs">babel-loader.js</a></li>
        <li><a href="#style-loader">style-loader</a></li>
        <li><a href="#less-loader">less-loader</a></li>
        <li><a href="#loader-runner-ÂÆûÁé∞">loader-runner ÂÆûÁé∞</a></li>
      </ol>
    </li>
    <li><a href="#Ê®°ÊãüÂÆûÁé∞ÂæÆÂûãÁöÑ-webpack">Ê®°ÊãüÂÆûÁé∞ÂæÆÂûãÁöÑ webpack</a>
      <ol>
        <li><a href="#‰ΩøÁî®ÊñπÂºè">‰ΩøÁî®ÊñπÂºè</a>
          <ol>
            <li><a href="#1-ÂÆö‰πâ-loader">1. ÂÆö‰πâ Loader</a></li>
            <li><a href="#2-ÂÆö‰πâÊèí‰ª∂">2. ÂÆö‰πâÊèí‰ª∂</a></li>
            <li><a href="#3-webpack-ÈÖçÁΩÆ">3. Webpack ÈÖçÁΩÆ</a></li>
          </ol>
        </li>
        <li><a href="#ËøêË°åÊâìÂåÖÊµÅÁ®ã">ËøêË°åÊâìÂåÖÊµÅÁ®ã</a></li>
      </ol>
    </li>
    <li><a href="#Êèí‰ª∂">Êèí‰ª∂</a>
      <ol>
        <li><a href="#ÂâçÁΩÆÁü•ËØÜ">ÂâçÁΩÆÁü•ËØÜ</a>
          <ol>
            <li><a href="#Êèí‰ª∂Ê†∏ÂøÉ-tapable">Êèí‰ª∂Ê†∏ÂøÉ tapable</a></li>
            <li><a href="#tapable-ÂàÜÁ±ª">tapable ÂàÜÁ±ª</a></li>
            <li><a href="#tapable-ÂéüÁêÜ">tapable ÂéüÁêÜ</a></li>
          </ol>
        </li>
        <li><a href="#Êèí‰ª∂-1">Êèí‰ª∂</a>
          <ol>
            <li><a href="#Ëá™Âä®Â§ñËÅîÊèí‰ª∂"><strong>Ëá™Âä®Â§ñËÅîÊèí‰ª∂</strong></a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#asyncqueue">AsyncQueue</a>
      <ol>
        <li><a href="#ÊÄªÁªì-1"><strong>ÊÄªÁªì</strong></a></li>
      </ol>
    </li>
    <li><a href="#webpack-‰ºòÂåñ">webpack ‰ºòÂåñ</a></li>
    <li><a href="#webpack-ÊûÑÂª∫Â∫ì">webpack ÊûÑÂª∫Â∫ì</a></li>
    <li><a href="#ÊèêÂèñ-css">ÊèêÂèñ CSS</a></li>
    <li><a href="#ÂºÄÂèëÊ®°Âºè‰∏ãÂéãÁº©Êñá‰ª∂">ÂºÄÂèëÊ®°Âºè‰∏ãÂéãÁº©Êñá‰ª∂</a></li>
    <li><a href="#cdn">CDN</a></li>
    <li><a href="#Êñá‰ª∂ÊåáÁ∫π">Êñá‰ª∂ÊåáÁ∫π</a></li>
    <li><a href="#moduleids--chunkids-ÁöÑ‰ºòÂåñ">moduleIds &amp; chunkIds ÁöÑ‰ºòÂåñ</a></li>
    <li><a href="#Ê®°ÂùóËÅîÈÇ¶">Ê®°ÂùóËÅîÈÇ¶</a></li>
    <li><a href="#‰ª£Á†ÅÂàÜÂâ≤">‰ª£Á†ÅÂàÜÂâ≤</a>
      <ol>
        <li><a href="#ÊñπÂºè‰∏Ä"><strong>ÊñπÂºè‰∏Ä</strong></a></li>
        <li><a href="#ÊñπÂºè‰∫å"><strong>ÊñπÂºè‰∫å</strong></a></li>
        <li><a href="#ÊñπÂºè‰∏â">ÊñπÂºè‰∏â</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/blogs/post/webpack/">
                <img src="/blogs/post/webpack/877_hu_8d90949689e262ee.jpg"
                        srcset="/blogs/post/webpack/877_hu_8d90949689e262ee.jpg 800w, /blogs/post/webpack/877_hu_92f4d2ba33135eb0.jpg 1600w"
                        width="800" 
                        height="533" 
                        loading="lazy"
                        alt="Featured image of post Webpack" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/blogs/categories/webpack/" >
                Webpack
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/blogs/post/webpack/">Webpack</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            webpackÈÖçÁΩÆÂèäÂÖ∂ÂéüÁêÜ
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2025-03-12</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    ÈòÖËØªÊó∂Èïø: 147 ÂàÜÈíü
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="ÂâçÁ´ØÂ∑•Á®ãÂåñ">ÂâçÁ´ØÂ∑•Á®ãÂåñ
</h1><p>webpack ‰ΩøÁî®„ÄÅÂéüÁêÜÂíå‰ºòÂåñ</p>
<h2 id="webpack">Webpack
</h2><p>webpack ÊòØ‰∏Ä‰∏™ JS Â∫îÁî®Á®ãÂ∫èÁöÑÈùôÊÄÅÊñá‰ª∂ÊâìÂåÖÂ∑•ÂÖ∑„ÄÇ</p>
<p>Âú® webpack ‰∏≠‰ºöÂ∞ÜÂêÑÁßçÁ±ªÂûãÁöÑÊñá‰ª∂ÈÉΩÁúã‰Ωú‰∏Ä‰∏™Ê®°ÂùóÔºå‰∏îÊ®°Âùó‰πãÈó¥ÂèØËÉΩÁõ∏‰∫í‰æùËµñ„ÄÇwebpack ÊâìÂåÖÊâÄÊúâÁöÑËøô‰∫õËµÑÊ∫êÊñá‰ª∂Âπ∂ÁºñËØë‰∏∫‰∏Ä‰∫õÂâçÁ´ØÁéØÂ¢É(ÊµèËßàÂô®ÁéØÂ¢É)ËÉΩËØÜÂà´ÁöÑ‰∏Ä‰∫õÊñá‰ª∂ÔºàÈùôÊÄÅËµÑÊ∫êÔºâÔºåÊØîÂ¶Ç jsÔºåcssÔºåpng Á≠â„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm init -y
</span></span><span class="line"><span class="cl">npm install webpack webpack-cli --save-dev
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>webpackÔºöÊ†∏ÂøÉÂåÖ</li>
<li>webpack-cliÔºöÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑Ôºå‰∏ªË¶ÅÊòØÂú®ÊâßË°å webpack ÂëΩ‰ª§Êó∂ÔºåËß£ÊûêÂëΩ‰ª§Ë°å‰∏≠ËÆæÁΩÆÁöÑ‰∏ÄÁ≥ªÂàóÂèÇÊï∞Ôºà‰∏ÄÁªÑÂëΩ‰ª§ÂíåÈÄâÈ°πÔºâÔºåÂä†ËΩΩ webpack ÈÖçÁΩÆÊñá‰ª∂ÔºàÈªòËÆ§ webpack.config.jsÔºâÔºåË∞ÉÁî® webpack Ê†∏ÂøÉÂåÖ‰∏≠ÁöÑÊñπÊ≥ïËøõË°åÊûÑÂª∫ÊâìÂåÖ„ÄÇÈÄöËøá webpack-cliÔºåÂèØ‰ª•Âú®ÂëΩ‰ª§Ë°å‰∏≠ÊåáÂÆö Webpack ÁöÑÈÖçÁΩÆÊñá‰ª∂„ÄÅÊâßË°å‰∏çÂêåÁöÑÊûÑÂª∫Ê®°ÂºèÔºàÂ¶ÇÂºÄÂèëÊ®°ÂºèÊàñÁîü‰∫ßÊ®°ÂºèÔºâ„ÄÅËßÇÂØüÊñá‰ª∂ÂèòÂåñÂπ∂Ëá™Âä®ÈáçÊñ∞ÊûÑÂª∫Á≠â„ÄÇ</li>
</ul>
<p>Âú®ÂëΩ‰ª§Ë°å‰∏≠ËæìÂÖ• <code>webpack</code> Âπ∂ÈôÑÂ∏¶‰∏Ä‰∫õÈÄâÈ°πÊó∂ÔºåWebpack CLI ‰ºöÊâßË°å‰ª•‰∏ãÊ≠•È™§Êù•Â§ÑÁêÜÂëΩ‰ª§Ôºö</p>
<ol>
<li>Ëß£ÊûêÂëΩ‰ª§Ë°åÂèÇÊï∞ÔºöWebpack CLI ‰ºöËß£ÊûêÂëΩ‰ª§Ë°å‰∏≠ËæìÂÖ•ÁöÑÈÄâÈ°πÂíåÂèÇÊï∞ÔºåÂπ∂Ê†πÊçÆÂÆÉ‰ª¨ÁöÑÂÄºËøõË°åÈÖçÁΩÆ„ÄÇ</li>
<li>Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂ÔºöWebpack CLI ‰ºöÂ∞ùËØïÂä†ËΩΩÈªòËÆ§ÁöÑÈÖçÁΩÆÊñá‰ª∂ <code>webpack.config.js</code>ÔºåÂ¶ÇÊûúÂ≠òÂú®ÁöÑËØù„ÄÇÂ¶ÇÊûúÂëΩ‰ª§Ë°å‰∏≠‰ΩøÁî®‰∫Ü <code>--config</code> ÈÄâÈ°πÊåáÂÆö‰∫ÜÂÖ∂‰ªñÈÖçÁΩÆÊñá‰ª∂ÔºåWebpack CLI ‰ºöÂä†ËΩΩËØ•Êñá‰ª∂„ÄÇ</li>
<li>ÂêàÂπ∂ÈÖçÁΩÆÔºöWebpack CLI ‰ºöÂ∞ÜÂëΩ‰ª§Ë°åÈÄâÈ°πÂíåÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑÈÖçÁΩÆÂêàÂπ∂Ôºå‰ª•ÂΩ¢ÊàêÊúÄÁªàÁöÑ Webpack ÈÖçÁΩÆÂØπË±°„ÄÇ</li>
<li>ÂàõÂª∫ Webpack ÁºñËØëÂô®Á±ªÂØπË±°ÔºöWebpack CLI ‰ΩøÁî®ÂêàÂπ∂ÂêéÁöÑÈÖçÁΩÆÂàõÂª∫‰∏Ä‰∏™ Webpack ÁºñËØëÂô®Á±ªÁöÑÂÆû‰æãÂØπË±°ÔºåËØ•ÁºñËØëÂô®ÂØπË±°Â∞ÜË¥üË¥£Â§ÑÁêÜÊâìÂåÖËøáÁ®ã„ÄÇ</li>
<li>ÊâßË°å Webpack ÁºñËØëÂô®ÔºöWebpack ÁºñËØëÂô®ÂºÄÂßãÊâßË°åÊâìÂåÖËøáÁ®ã„ÄÇÂÆÉ‰ºöÊ†πÊçÆÈÖçÁΩÆ‰∏≠ÁöÑÂÖ•Âè£Êñá‰ª∂Âíå‰æùËµñÂÖ≥Á≥ªÔºå<strong>ÈÄíÂΩíÂú∞Ëß£ÊûêÂíåÂ§ÑÁêÜ</strong>ÂêÑ‰∏™Ê®°ÂùóÔºåÂπ∂Â∞ÜÂÆÉ‰ª¨ÊâìÂåÖÊàêÊúÄÁªàÁöÑËæìÂá∫Êñá‰ª∂„ÄÇ</li>
<li>ËæìÂá∫ÊâìÂåÖÁªìÊûúÔºö‰∏ÄÊó¶ Webpack ÁºñËØëÂô®ÂÆåÊàêÊâìÂåÖËøáÁ®ãÔºåÂÆÉ‰ºöÂ∞ÜÁîüÊàêÁöÑËæìÂá∫Êñá‰ª∂ÂÜôÂÖ•ÊåáÂÆöÁöÑËæìÂá∫ÁõÆÂΩï„ÄÇ</li>
</ol>
<p>Âú®ÊâßË°åËøáÁ®ã‰∏≠ÔºåWebpack CLI ËøòÂèØ‰ª•Ê†πÊçÆÂëΩ‰ª§Ë°åÈÄâÈ°πÂíåÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑÂÖ∂‰ªñÈÖçÁΩÆÔºåÊâßË°å‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑÊìç‰ΩúÔºå‰æãÂ¶ÇÂêØÂä®ÂºÄÂèëÊúçÂä°Âô®„ÄÅÁõëÂê¨Êñá‰ª∂ÂèòÂåñÂπ∂Ëá™Âä®ÈáçÊñ∞ÊâìÂåÖÁ≠â„ÄÇ</p>
<h2 id="ÊµèËßàÂô®‰ΩøÁî®-es-module">ÊµèËßàÂô®‰ΩøÁî® ES module
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;./src/index.js&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;module&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">// ÂøÖÈ°ªÊåáÊòétype‰∏∫module
</span></span></code></pre></td></tr></table>
</div>
</div><p>ES6 Ê®°ÂùóÂåñËØ≠Ê≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// index.js:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">sum</span><span class="p">,</span> <span class="nx">mul</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;./js/math.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sum</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">mul</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">math</span><span class="p">.</span><span class="nx">js</span><span class="o">:</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">sum</span> <span class="o">=</span><span class="p">(</span><span class="nx">num1</span><span class="p">,</span><span class="nx">num2</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">num1</span> <span class="o">+</span> <span class="nx">num2</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">mul</span> <span class="o">=</span><span class="p">(</span><span class="nx">num1</span><span class="p">,</span><span class="nx">num2</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">num1</span> <span class="o">*</span> <span class="nx">num2</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ES6 ÁöÑÊ®°ÂùóÂåñËßÑËåÉÂú®ÊµèËßàÂô®‰∏≠ÊòØÈúÄË¶ÅÂèëËµ∑ÁΩëÁªúËØ∑Ê±ÇÔºö</strong></p>
<p><img src="/blogs/post/webpack/images/image-20220310071821033.png"
	width="1914"
	height="757"
	srcset="/blogs/post/webpack/images/image-20220310071821033_hu_e3d6d9ae9765cfa8.png 480w, /blogs/post/webpack/images/image-20220310071821033_hu_302b7e33157f3c41.png 1024w"
	loading="lazy"
	
		alt="image-20220310071821033"
	
	
		class="gallery-image" 
		data-flex-grow="252"
		data-flex-basis="606px"
	
></p>
<p><img src="/blogs/post/webpack/images/image-20220310072112724.png"
	width="1920"
	height="293"
	srcset="/blogs/post/webpack/images/image-20220310072112724_hu_101b7c63591bbd9e.png 480w, /blogs/post/webpack/images/image-20220310072112724_hu_a74530cd382b5b46.png 1024w"
	loading="lazy"
	
		alt="image-20220310072112724"
	
	
		class="gallery-image" 
		data-flex-grow="655"
		data-flex-basis="1572px"
	
></p>
<p>Âú®‰∏äÈù¢ÔºåÁõ¥Êé•‰ΩøÁî® file ÂçèËÆÆÊâìÂºÄÊú¨Âú∞ÁöÑ index.html Êñá‰ª∂Ôºå‰∫ßÁîüË∑®ÂüüËØ∑Ê±ÇÔºåÂêåÊó∂ÁΩëÁªúÈù¢Êùø‰∏≠‰πüÊúâÈíàÂØπ index.js ÁöÑÁΩëÁªúËØ∑Ê±Ç„ÄÇËØ¥Êòé ES6 ÁöÑ import ËØ≠Ê≥ïÊòØÈúÄË¶ÅÂèëËµ∑ÁΩëÁªúËØ∑Ê±ÇÁöÑ„ÄÇ</p>
<h2 id="entry">entry
</h2><ul>
<li>
<p>ÂÖ•Âè£(entry point)ÂëäËØâ webpack ‰ΩøÁî®Âì™‰∏™Ê®°ÂùóÊàñËÄÖÂì™Âá†‰∏™Ê®°ÂùóÔºå‰Ωú‰∏∫ÊûÑÂª∫ÂÖ∂ÂÜÖÈÉ®‰æùËµñÂõæ(dependency graph) ÁöÑÂºÄÂßã„ÄÇËøõÂÖ•ÂÖ•Âè£ÂêéÔºåwebpack ‰ºöÊâæÂá∫ÊúâÂì™‰∫õÊ®°ÂùóÂíåÂ∫ìÊòØÂÖ•Âè£Ëµ∑ÁÇπÔºàÁõ¥Êé•ÂíåÈó¥Êé•Ôºâ‰æùËµñÁöÑ</p>
</li>
<li>
<p>ÈªòËÆ§ÂÄºÊòØ <code>./src/index.js</code>Ôºå‰ΩÜÂèØ‰ª•ÈÄöËøáÂú® <code>webpack configuration</code> ‰∏≠ÈÖçÁΩÆ <code>entry</code> Â±ûÊÄßÔºåÊù•ÊåáÂÆö‰∏Ä‰∏™ÔºàÊàñÂ§ö‰∏™Ôºâ‰∏çÂêå src ÂÖ•Âè£Ëµ∑ÁÇπ</p>
</li>
<li>
<p><strong>entry ‰∏≠ÈÖçÁΩÆÁöÑÁõ∏ÂØπË∑ØÂæÑ‰ºö‰ª•ËÑöÊú¨ÂëΩ‰ª§ÊâßË°åÊó∂ÊâÄÂú®ÁöÑË∑ØÂæÑÔºàprocess.cwd()Ôºâ‰Ωú‰∏∫Âü∫ÂáÜË∑ØÂæÑ„ÄÇ</strong></p>
<p>ÊØîÂ¶ÇÔºöÂΩìÂâçÈ°πÁõÆÊ†πÁõÆÂΩï‰∏∫ testÔºåËØ•ÁõÆÂΩï‰∏ãÊúâ webpack.config.js Êñá‰ª∂ÔºåÂÖ∂‰∏≠ÁöÑ entry Â≠óÊÆµÂÄº‰∏∫Ôºö&rsquo;./src/index.js&rsquo;ÔºåÂ¶ÇÊûúË∑≥ËΩ¨Âà∞ test ÁöÑ‰∏äÁ∫ßÁõÆÂΩï‰∏ãÔºåÊâßË°å webpack &ndash;config ./test/webpack.config.jsÔºåÈÇ£‰πàÂ∞ÜÂõ†‰∏∫Êâæ‰∏çÂà∞ÂÖ•Âè£Êñá‰ª∂ËÄåÊä•Èîô„ÄÇ</p>
<p>Êä•Èîô‰ø°ÊÅØÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">PS C:\Users\Desktop\webpack202208\test&gt; cd ..
</span></span><span class="line"><span class="cl">PS C:\Users\Desktop\webpack202208&gt; npx webpack --config .\test\webpack.config.js
</span></span><span class="line"><span class="cl">Active code page: 65001
</span></span><span class="line"><span class="cl">asset index.html 2.62 KiB [emitted]
</span></span><span class="line"><span class="cl">asset main.js 99 bytes [emitted] (name: main)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ERROR in main
</span></span><span class="line"><span class="cl">Module not found: Error: Can&#39;t resolve &#39;./src/index.js&#39; in &#39;C:\Users\Desktop\webpack202208&#39;
</span></span><span class="line"><span class="cl">resolve &#39;./src/index.js&#39; in &#39;C:\Users\dukkha\Desktop\webpack202208&#39;
</span></span><span class="line"><span class="cl">  using description file: C:\Users\dukkha\package.json (relative path: ./Desktop/webpack202208)
</span></span><span class="line"><span class="cl">    Field &#39;browser&#39; doesn&#39;t contain a valid alias configuration
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">entry</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;url1&#39;</span><span class="p">,</span><span class="s1">&#39;url2&#39;</span><span class="p">]</span>  <span class="c1">// Ëøô‰∏§‰∏™Êñá‰ª∂ÁöÑÂÜÖÂÆπÈÉΩ‰ºöÊâìÂåÖÂà∞‰∏Ä‰∏™main.jsÊñá‰ª∂‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="c1">// ÂçïÂÖ•Âè£Á≠â‰ª∑‰∫é‰∏ãÈù¢ËøôÁßçÂÜôÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">entry</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="o">:</span> <span class="s1">&#39;./src.index.js&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">entry</span><span class="o">:</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">environment</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Context:&#39;</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Environment:&#39;</span><span class="p">,</span> <span class="nx">environment</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Ê†πÊçÆÁéØÂ¢ÉÂèòÈáèÂä®ÊÄÅËøîÂõûÂÖ•Âè£Êñá‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">environment</span><span class="p">.</span><span class="nx">production</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="s1">&#39;./src/index.prod.js&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="s1">&#39;./src/index.dev.js&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//  ‰πüÂèØ‰ª•ËøîÂõûÂØπË±°ÊàñËÄÖÊï∞ÁªÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">main</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="kr">import</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">dependOn</span><span class="o">:</span><span class="s1">&#39;xxx&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">runtime</span><span class="o">:</span><span class="s1">&#39;runtime-name&#39;</span><span class="c1">// ÂçïÁã¨ËÆæÁΩÆËøô‰∏™ÂÖ•Âè£Ê®°ÂùóÁöÑruntime‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûú <code>entry</code> Â≠óÊÆµË¢´ÈÖçÁΩÆ‰∏∫‰∏Ä‰∏™ÂáΩÊï∞ÔºåÈÇ£‰πà Webpack ‰ºöÂú®ËøêË°åÊó∂Ë∞ÉÁî®Ëøô‰∏™ÂáΩÊï∞ÔºåÂπ∂‰º†ÈÄí‰∏Ä‰∫õÁâπÂÆöÁöÑÂèÇÊï∞„ÄÇ</p>
<p>‰ª•‰∏ãÊòØ Webpack ÂÜÖÈÉ®ÂØπ <code>entry</code> ÂáΩÊï∞ÁöÑÂ§ÑÁêÜÈÄªËæëÂèäÂÖ∂‰º†ÂèÇÁöÑËØ¶ÁªÜËß£ÈáäÔºö</p>
<ul>
<li><strong><code>context</code></strong>: Webpack ÁöÑ‰∏ä‰∏ãÊñáË∑ØÂæÑÔºåÈÄöÂ∏∏ÊòØÈÖçÁΩÆ‰∏≠ÁöÑ <code>context</code> Â≠óÊÆµÂÄº„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊòæÂºèËÆæÁΩÆ <code>context</code>ÔºåÈªòËÆ§ÊòØ Webpack ÈÖçÁΩÆÊñá‰ª∂ÊâÄÂú®ÁöÑÁõÆÂΩï„ÄÇ</li>
<li><strong><code>environment</code></strong>: ‰∏Ä‰∏™ÂØπË±°ÔºåÂåÖÂê´ Webpack CLI ÊàñÊûÑÂª∫ËÑöÊú¨‰∏≠‰º†ÈÄíÁöÑ <code>mode</code> ÂíåÂÖ∂‰ªñÁéØÂ¢ÉÂèòÈáè„ÄÇ</li>
</ul>
<h2 id="output">output
</h2><ul>
<li>
<p><code>output</code> Â±ûÊÄßÂëäËØâ webpack Âú®Âì™ÈáåËæìÂá∫ÂÆÉÊâÄÂàõÂª∫ÁöÑ bundleÔºå‰ª•Âèä<strong>Â¶Ç‰ΩïÂëΩÂêçËøô‰∫õÊñá‰ª∂</strong></p>
<p>‰∏ªË¶ÅËæìÂá∫Êñá‰ª∂ÁöÑÈªòËÆ§ÂÄºÊòØÔºö./dist/main.jsÔºåÂÖ∂‰ªñÁîüÊàêÊñá‰ª∂ÈªòËÆ§ÊîæÁΩÆÂú®./dist Êñá‰ª∂Â§π‰∏≠</p>
</li>
<li>
<p>output ‰∏≠ÁöÑ path Ë∑ØÂæÑÂàôÊòØ‰∏Ä‰∏™ÁªùÂØπË∑ØÂæÑÔºåÂÖ∑‰ΩìÊâìÂåÖÂêéÁîüÊàêÁöÑÊâìÂåÖÊñá‰ª∂Â§πÂú®Âì™ÈáåÂèñÂÜ≥‰∫é path ÁöÑÂÄº</p>
</li>
<li>
<p><strong>Â¶ÇÊûú‰∏çÈÖçÁΩÆ output ‰∏≠ÁöÑ path ÈÄâÈ°πÔºåÂàôËØ•È°πÁöÑÈªòËÆ§ÂÄºÊòØÔºöprocess.cwd()ÔºåËÄå‰∏çÊòØ&rsquo;./dist&rsquo;ËøôÁßçÁõ∏ÂØπË∑ØÂæÑÊàñËÄÖ path.resolve(__dirname, &ldquo;dist&rdquo;)</strong>Ôºå‰ΩÜÈªòËÆ§ÁöÑÈÖçÁΩÆÊñá‰ª∂ÊúâÈÖçÁΩÆËøô‰∏™Â±ûÊÄßÁöÑÂÄº</p>
</li>
</ul>
<h2 id="loader">loader
</h2><ul>
<li>webpack Âè™ËÉΩÁêÜËß£ <code>JavaScript</code> Âíå <code>JSON</code> Êñá‰ª∂</li>
<li>loader ËÆ© <code>webpack</code> ËÉΩÂ§üÂéªÂ§ÑÁêÜÂÖ∂‰ªñÁ±ªÂûãÁöÑÊñá‰ª∂ÔºåÂπ∂Â∞ÜÂÆÉ‰ª¨ËΩ¨Êç¢‰∏∫ÊúâÊïàÊ®°ÂùóÔºå‰ª•‰æõÂ∫îÁî®Á®ãÂ∫è‰ΩøÁî®Ôºå‰ª•ÂèäË¢´Ê∑ªÂä†Âà∞ webpack ‰æùËµñÂõæ‰∏≠</li>
</ul>
<p>loader ÁöÑÂá†Áßç‰ΩøÁî®ÊñπÂºèÔºö</p>
<ul>
<li>
<p>import &lsquo;<strong>style-loader!css-loader!</strong>../css/creatediv.css&rsquo; ÔºàÂÜÖËÅîÂºèÔºå‰∏çÊé®ËçêÔºåÂè™Ê≠£ÂØπËøô‰∏™‰∏Ä‰∏™Êñá‰ª∂‰ΩøÁî®ÊåáÂÆöÁöÑ loaderÔºâ</p>
</li>
<li>
<p>CLI ÊñπÂºèÔºà‰∏çÊé®ËçêÔºâ</p>
<p>package.json:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;webpack --module-bind &#39;css=style-loader!css-loader&#39;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>webpack ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂÜô loader</p>
<p>ÂØπÂ∫îËßÑÂàôÁöÑ loader ÊòØ‰ªéÂè≥ÂêëÂ∑¶ÊâßË°åÁöÑÔºåÊúÄÂè≥‰æßÁöÑ loader Êé•Êî∂Âà∞ÊòØÂØπÂ∫îÁ±ªÂûãÁöÑÊñá‰ª∂ÁöÑÊ∫êÁ†ÅÔºåÊúÄÂ∑¶‰æßÁöÑ loader ‰∏ÄÂÆö‰ºöËøîÂõû‰∏Ä‰∏™ js Ê®°Âùó„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;style-loader&#34;</span><span class="p">,</span> <span class="s2">&#34;css-loader&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">context</span><span class="o">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">cwd</span><span class="p">(),</span> <span class="c1">// Â±ûÊÄßÂÄºÂ∞±ÊòØÈ°πÁõÆÊâìÂåÖÁöÑ‰∏ä‰∏ãÊñáÔºàÈ°πÁõÆÊâìÂåÖÁöÑÁõ∏ÂØπË∑ØÂæÑÔºâÔºåÂ∞±ÊòØÈ°πÁõÆÁöÑÁõÆÂΩïË∑ØÂæÑÔºåËØ•ÈÖçÁΩÆÈ°πÂá†‰πé‰∏ç‰ºöÂéªÊîπÔºåÁî®ÈªòËÆ§ÂÄºÂ∞±Ë°å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p>Â¶ÇÊûúÊúâÂêåÁ±ªÂûãÁöÑÊñá‰ª∂ÔºåÂπ∂‰∏îÊÉ≥ÈíàÂØπ‰∏çÂêåÊÉÖÂÜµÊâßË°å‰∏çÂêåÁöÑ loaderÔºåÂèØ‰ª•‰ΩøÁî® Webpack ÁöÑ <code>oneOf</code> ÈÖçÁΩÆ„ÄÇ<code>oneOf</code> ÊòØ Webpack 4 Âèä‰ª•‰∏äÁâàÊú¨‰∏≠ÁöÑ‰∏Ä‰∏™ÂäüËÉΩÔºåÁî®Êù•ÊèêÈ´òÊÄßËÉΩÔºåÁ°Æ‰øùÊØè‰∏™Êñá‰ª∂Âè™ÁªèËøáÂÖ∂‰∏≠‰∏Ä‰∏™ loader Â§ÑÁêÜ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">exclude</span><span class="o">:</span> <span class="sr">/node_modules/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">oneOf</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">resourceQuery</span><span class="o">:</span> <span class="sr">/babel/</span><span class="p">,</span> <span class="c1">// ÈíàÂØπ URL ‰∏≠ÂåÖÂê´ ?babel ÁöÑËµÑÊ∫êÔºå‰ΩøÁî® babel-loader
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">loader</span><span class="o">:</span> <span class="s2">&#34;babel-loader&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">options</span><span class="o">:</span> <span class="p">{</span> <span class="nx">presets</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;@babel/preset-env&#34;</span><span class="p">]</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">loader</span><span class="o">:</span> <span class="s2">&#34;babel-like-loader&#34;</span><span class="p">,</span> <span class="c1">// ÂÖ∂‰ªñÊÉÖÂÜµ‰∏ã‰ΩøÁî®Ëá™ÂÆö‰πâÁöÑ babel-like-loader
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">options</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">          <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="oneof">oneOf
</h3><p><code>oneOf</code> ÊòØÁî®Êù•‰ºòÂåñÊ®°ÂùóËßÑÂàôÂåπÈÖçÁöÑ‰∏Ä‰∏™ÂÖ≥ÈîÆÂ≠ó„ÄÇÂÆÉÂÖÅËÆ∏‰Ω†ÂÆö‰πâ‰∏ÄÁªÑËßÑÂàôÔºå‰ΩÜ <strong>ÊØè‰∏™Êñá‰ª∂Âè™‰ºöÂåπÈÖçÂÖ∂‰∏≠‰∏Ä‰∏™ËßÑÂàô</strong>ÔºåËÄå‰∏ç‰ºöÁªßÁª≠ÂåπÈÖçÂêéÁª≠ËßÑÂàô„ÄÇËøôÁßçÊú∫Âà∂ÂèØ‰ª•ÊèêÂçáÊûÑÂª∫ÊïàÁéáÔºåÈÅøÂÖçÊñá‰ª∂Ë¢´Â§ö‰∏™ËßÑÂàôÈáçÂ§çÂ§ÑÁêÜ„ÄÇ</p>
<h4 id="oneof-1"><strong><code>oneOf</code> ÁöÑÂ∑•‰ΩúÊñπÂºè</strong>
</h4><ul>
<li><code>oneOf</code> ÊòØ <code>module.rules</code> ‰∏≠ÁöÑ‰∏Ä‰∏™Â±ûÊÄßÔºåÂÄºÊòØ‰∏Ä‰∏™ËßÑÂàôÊï∞ÁªÑ„ÄÇ</li>
<li>Webpack ‰ºöÊåâÈ°∫Â∫èÈÅçÂéÜÊï∞ÁªÑ‰∏≠ÁöÑËßÑÂàôÔºåÈÅáÂà∞Á¨¨‰∏Ä‰∏™ÂåπÈÖçÁöÑËßÑÂàôÂêéÂ∞±ÂÅúÊ≠¢ÁªßÁª≠ÂåπÈÖç„ÄÇ</li>
<li>Â¶ÇÊûúÊ≤°ÊúâÂåπÈÖç‰ªª‰ΩïËßÑÂàôÔºåWebpack ‰ºöÊäõÂá∫ÈîôËØØÔºåÈô§ÈùûÊèê‰æõ‰∫ÜÈªòËÆ§ÁöÑÂ§ÑÁêÜÊñπÂºè„ÄÇ</li>
</ul>
<p>‰ª•‰∏ãÊòØ‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑ Webpack ÈÖçÁΩÆÔºå‰ΩøÁî® <code>oneOf</code> ‰ºòÂåñËßÑÂàôÂåπÈÖçÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">exclude</span><span class="o">:</span> <span class="sr">/node_modules/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">use</span><span class="o">:</span> <span class="s2">&#34;babel-loader&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">oneOf</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;style-loader&#34;</span><span class="p">,</span> <span class="s2">&#34;css-loader&#34;</span><span class="p">],</span> <span class="c1">// Â§ÑÁêÜ CSS Êñá‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.scss$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;style-loader&#34;</span><span class="p">,</span> <span class="s2">&#34;css-loader&#34;</span><span class="p">,</span> <span class="s2">&#34;sass-loader&#34;</span><span class="p">],</span> <span class="c1">// Â§ÑÁêÜ SCSS Êñá‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.(png|jpe?g|gif)$/i</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;asset/resource&#34;</span><span class="p">,</span> <span class="c1">// Â§ÑÁêÜÂõæÁâáÊñá‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Ëøô‰∏™ÈÖçÁΩÆ‰∏≠Ôºö</p>
<ul>
<li>Â¶ÇÊûúÊñá‰ª∂ÊòØ <code>.css</code>Ôºå‰ºöÂ∫îÁî® <code>css-loader</code> Âíå <code>style-loader</code>„ÄÇ</li>
<li>Â¶ÇÊûúÊñá‰ª∂ÊòØ <code>.scss</code>Ôºå‰ºöÂ∫îÁî® <code>sass-loader</code>„ÄÇ</li>
<li>Â¶ÇÊûúÊñá‰ª∂ÊòØÂõæÁâáÊ†ºÂºèÔºà<code>.png</code>, <code>.jpg</code>, <code>.gif</code>ÔºâÔºå‰ºö‰ΩøÁî® <code>asset/resource</code>„ÄÇ</li>
</ul>
<p><code>oneOf</code> Á°Æ‰øùÊØè‰∏™Êñá‰ª∂ <strong>Âè™ÂåπÈÖçÁ¨¨‰∏Ä‰∏™Á¨¶ÂêàÊù°‰ª∂ÁöÑËßÑÂàô</strong>ÔºåÂêéÁª≠ËßÑÂàô‰∏çÂÜçÂ§ÑÁêÜËØ•Êñá‰ª∂„ÄÇ</p>
<h4 id="oneof-2"><strong><code>oneOf</code> ÁöÑ‰ºòÁÇπ</strong>
</h4><ol>
<li><strong>ÊÄßËÉΩ‰ºòÂåñÔºö</strong>
<ul>
<li>ÈÅøÂÖçÊñá‰ª∂Ë¢´Â§ö‰∏™ËßÑÂàôÈáçÂ§çÂåπÈÖç„ÄÇ</li>
<li>Webpack Âú®ÊâæÂà∞ÂåπÈÖçËßÑÂàôÂêéÂÅúÊ≠¢ÁªßÁª≠ÂåπÈÖçÔºåÂáèÂ∞ë‰∏çÂøÖË¶ÅÁöÑÂºÄÈîÄ„ÄÇ</li>
</ul>
</li>
<li><strong>ÊòéÁ°ÆÁöÑËßÑÂàô‰ºòÂÖàÁ∫ßÔºö</strong>
<ul>
<li>ÈÄöËøáËßÑÂàôÁöÑÈ°∫Â∫èÔºåÊéßÂà∂‰∏çÂêåËßÑÂàôÁöÑ‰ºòÂÖàÁ∫ß„ÄÇ</li>
</ul>
</li>
<li><strong>Êõ¥Ê∏ÖÊô∞ÁöÑÈÖçÁΩÆÁªìÊûÑÔºö</strong>
<ul>
<li>Â∞ÜÁõ∏ÂÖ≥ÁöÑËßÑÂàôÂΩíÁ∫≥Âà∞‰∏ÄËµ∑ÔºåÈÖçÁΩÆÊõ¥ÂÖ∑ÂèØËØªÊÄß„ÄÇ</li>
</ul>
</li>
</ol>
<hr>
<h4 id="oneof-3"><strong><code>oneOf</code> ÁöÑÊ≥®ÊÑè‰∫ãÈ°π</strong>
</h4><ol>
<li>
<p><strong>È°∫Â∫èÂæàÈáçË¶ÅÔºö</strong></p>
<ul>
<li><code>oneOf</code> ‰∏≠ÁöÑËßÑÂàôÊåâÈ°∫Â∫èÂåπÈÖçÔºåÂÖàÂÆö‰πâÁöÑËßÑÂàô‰ºòÂÖàÁ∫ßÈ´ò„ÄÇ</li>
<li>Â¶ÇÊûúËßÑÂàôÈ°∫Â∫è‰∏çÂêàÁêÜÔºåÂèØËÉΩ‰ºöÂØºËá¥È¢ÑÊúüÂ§ñÁöÑË°å‰∏∫„ÄÇ</li>
</ul>
</li>
<li>
<p><strong>ÈªòËÆ§ËßÑÂàôÔºö</strong></p>
<ul>
<li>Â¶ÇÊûúÊ≤°Êúâ‰ªª‰ΩïËßÑÂàôÂåπÈÖçÔºåWebpack ‰ºöÊäõÂá∫ÈîôËØØ„ÄÇ</li>
<li>ÂèØ‰ª•Âú® <code>oneOf</code> ‰∏≠Ê∑ªÂä†‰∏Ä‰∏™ÈªòËÆ§ËßÑÂàôÔºå‰æãÂ¶Ç <code>file-loader</code> Êàñ <code>asset/resource</code>Ôºå‰ª•Á°Æ‰øùÊâÄÊúâÊñá‰ª∂ÈÉΩÊúâÂ§ÑÁêÜÊñπÂºè„ÄÇ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">oneOf</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ÂâçÈù¢ÁöÑËßÑÂàô...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÈªòËÆ§ËßÑÂàô
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;asset/resource&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>‰∏éÂÖ∂‰ªñÈÖçÁΩÆÁöÑÂÖºÂÆπÊÄßÔºö</strong></p>
<ul>
<li><code>oneOf</code> ÈÄÇÁî®‰∫éÈúÄË¶ÅÊòéÁ°Æ‰ºòÂÖàÁ∫ßÁöÑÂú∫ÊôØÔºå‰ΩÜÊüê‰∫õÂú∫ÊôØÔºàÂ¶Ç <code>include</code> Âíå <code>exclude</code> ÈÖçÁΩÆÔºâÂèØËÉΩÈúÄË¶ÅÈ¢ùÂ§ñÊ≥®ÊÑèËßÑÂàôÁöÑÈÄÇÈÖçÊÄß„ÄÇ</li>
</ul>
</li>
</ol>
<h2 id="plugin">plugin
</h2><p>Êèí‰ª∂ÂèØ‰ª•Áî®‰∫éÊâßË°åËåÉÂõ¥Êõ¥ÂπøÁöÑ‰ªªÂä°„ÄÇÂåÖÊã¨ÔºöÊâìÂåÖ‰ºòÂåñÔºåËµÑÊ∫êÁÆ°ÁêÜÔºåÊ≥®ÂÖ•ÁéØÂ¢ÉÂèòÈáè</p>
<ul>
<li>
<p>clean-webpack-plugin</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">CleanWebpackPlugin</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;clean-webpack-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="k">new</span> <span class="nx">CleanWebpackPlugin</span><span class="p">()];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Áé∞Âú®ÂèØ‰ª•Âú® webpack ÁöÑ output ÈÖçÁΩÆÈ°π‰∏≠ÁºñÂÜô‰∏Ä‰∏™Â≠óÊÆµ cleanÔºöboolean ÂÆûÁé∞ clean-webpack-plugin Êèí‰ª∂ÁöÑËÉΩÂäõ„ÄÇ</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;main.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">clean</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>html-webpack-plugin</p>
<p>html-webpack-plugin Êèí‰ª∂Âú®Ë∞ÉÁî®Êó∂Â¶ÇÊûú‰∏ç‰º†ÈÄíÊ®°ÊùøÂèÇÊï∞ÔºåÂàôËØ•ÂåÖÁöÑÂÜÖÈÉ®Êúâ‰∏Ä‰∏™ÈªòËÆ§ÁöÑ ejs Ê®°ÊùøÂèØ‰æõ‰ΩøÁî®&mdash;-default_index.ejs</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;!DOCTYPE html&gt;
</span></span><span class="line"><span class="cl">&lt;html&gt;
</span></span><span class="line"><span class="cl">  &lt;head&gt;
</span></span><span class="line"><span class="cl">    &lt;meta charset=&#34;utf-8&#34;&gt;
</span></span><span class="line"><span class="cl">    &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;
</span></span><span class="line"><span class="cl">  &lt;/head&gt;
</span></span><span class="line"><span class="cl">  &lt;body&gt;
</span></span><span class="line"><span class="cl">  &lt;/body&gt;
</span></span><span class="line"><span class="cl">&lt;/html&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;html-webpack-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">template</span><span class="o">:</span> <span class="s2">&#34;Ê®°ÊùøhtmlÊñá‰ª∂Ë∑ØÂæÑpath&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;index.html&#34;</span><span class="p">,</span> <span class="c1">//ÊâìÂåÖÂêéÁîüÊàêÁöÑhtmlÊñá‰ª∂Âêç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">minify</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">removeAttributeQuotes</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">//ÁßªÈô§htmlÊñá‰ª∂‰∏≠ÁöÑÂèåÂºïÂè∑
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">collapseWhitespace</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">//ÂéãÁº©html‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">removeComments</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">hash</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">//Âú®ÂºïÂÖ•ÊâìÂåÖÂêéÁöÑjsÊñá‰ª∂Êó∂ÔºåÁªôÂÆÉÂú®scriptÊ†áÁ≠æ‰∏≠srcÊñá‰ª∂ÂêçÁöÑÂêéÈù¢Âä†‰∏ähashÂÄºÔºåËÄå‰∏çÊòØÊâìÂåÖÂêéÁöÑjsÊñá‰ª∂ÊúâhashÂÄº &lt;script type=text/javascript src=boundle.js?fd7b1ef895541b8c9717&gt;&lt;/script&gt;ÔºåËß£ÂÜ≥ÊµèËßàÂô®ÁºìÂ≠òÁöÑÈóÆÈ¢òÔºåÂèØ‰ª•‰∏çÁî®ËØ•ÊñπÊ≥ïËÄåÁªôjsÊâìÂåÖÊñá‰ª∂Âä†hashÂÄº„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">//chunks:[]  Ê≤°ÊúâËØ•Â≠óÊÆµÊó∂ÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂú®Â§öÂÖ•Âè£Êó∂ÔºåÁîüÊàêÁöÑÂ§ö‰∏™chunkÈÉΩ‰ºöË¢´ÂºïÂÖ•Âà∞‰∏äÈù¢ÁöÑtemplateÂ≠óÊÆµÂºïÂÖ•ÊåáÂÆöÁöÑhtmlÊ®°ÊùøÊñá‰ª∂ÁöÑÊúÄÂêéÈù¢ÔºåÂêåÊó∂ÂºïÂÖ•ÁöÑÈ°∫Â∫èÊòØ‰ª•entryÂ≠óÊÆµ‰∏≠ÂêÑ‰∏™ÂÖ•Âè£Ê®°ÂùóÁöÑÂæ™Â∫è‰∏∫ÂáÜÔºåÊâÄ‰ª•Â¶ÇÊûúÊ®°ÂùóÊâìÂåÖÂêéÁöÑÁªìÊûúÂ≠òÂú®‰æùËµñÂÖ≥Á≥ªÁöÑËØùÔºåÂøÖÈ°ª‰øùËØÅÂÆÉ‰ª¨ÁöÑÈ°∫Â∫èÊ≠£Á°Æ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="nx">chunks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;login&#34;</span><span class="p">,</span> <span class="s2">&#34;index&#34;</span><span class="p">],</span> <span class="c1">//Ë°®Á§∫Âè™Âç≥‰ΩøÊúâÂæàÂ§öÊâìÂåÖÂÖ•Âè£Ê®°ÂùóÔºåÈÉΩÂè™Âú®ÊâìÂåÖÂêéhtmlÊ®°ÊùøÁöÑ‰∏≠ÂºïÂÖ•loginÂíåindex‰∏§‰∏™chunkÔºå‰∏îÈ°∫Â∫è‰ª•entryÊó∂Âá∫Áé∞ÁöÑÈ°∫Â∫èÂºïÂÖ•„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="nx">chunksSortMode</span><span class="o">:</span> <span class="s2">&#34;manual&#34;</span><span class="p">,</span> <span class="c1">//Ë°®Á§∫ÈááÁî®chunks‰∏≠ÁöÑÈ°∫Â∫èÂºïÂÖ•ËÄå‰∏çÁî®entry‰∏≠ÁöÑÂºïÂÖ•È°∫Â∫è
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}),</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// webpack.config.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">entry</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">index</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">index1</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;./src/index1.js&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">index2</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;./src/index2.js&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="p">...</span>
</span></span><span class="line"><span class="cl">        <span class="nx">chunks</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">,</span><span class="s1">&#39;index2&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>chunks ÈÄâÈ°πÁöÑ‰ΩúÁî®‰∏ªË¶ÅÊòØÈíàÂØπÂ§öÂÖ•Âè£(entry)Êñá‰ª∂„ÄÇÂΩìÊúâÂ§ö‰∏™ÂÖ•Âè£Êñá‰ª∂ÁöÑÊó∂ÂÄôÔºåÂØπÂ∫îÂ∞±‰ºöÁîüÊàêÂ§ö‰∏™ÁºñËØëÂêéÁöÑ js Êñá‰ª∂„ÄÇÈÇ£‰πà chunks ÈÄâÈ°πÂ∞±ÂèØ‰ª•ÂÜ≥ÂÆöÊòØÂê¶ÈÉΩ‰ΩøÁî®Ëøô‰∫õÁîüÊàêÁöÑ js Êñá‰ª∂„ÄÇchunks ÈªòËÆ§‰ºöÂú®ÁîüÊàêÁöÑ html Êñá‰ª∂‰∏≠ÂºïÁî®ÊâÄÊúâÁöÑ js Êñá‰ª∂ÔºåÂΩìÁÑ∂‰πüÂèØ‰ª•ÊåáÂÆöÂºïÂÖ•Âì™‰∫õÁâπÂÆöÁöÑÊñá‰ª∂„ÄÇ</p>
<p>ÊâßË°å webpack ÂëΩ‰ª§‰πãÂêéÔºå‰ºöÁúãÂà∞ÁîüÊàêÁöÑ index.html Êñá‰ª∂‰∏≠ÔºåÂè™ÂºïÁî®‰∫Ü index.js Âíå index2.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">text/javascript</span> <span class="na">src</span><span class="o">=</span><span class="s">index.js</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">text/javascript</span> <span class="na">src</span><span class="o">=</span><span class="s">index2.js</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>chunksSortMode Ëøô‰∏™ÈÄâÈ°πÂÜ≥ÂÆö‰∫Ü script Ê†áÁ≠æÁöÑÂºïÁî®È°∫Â∫è„ÄÇÈªòËÆ§ÊúâÂõõ‰∏™ÈÄâÈ°πÔºå&rsquo;none&rsquo;, &lsquo;auto&rsquo;, &lsquo;dependency&rsquo;, &lsquo;{function}&rsquo;„ÄÇ</p>
<ul>
<li>&lsquo;dependency&rsquo; ÊåâÁÖß‰∏çÂêåÊñá‰ª∂ÁöÑ‰æùËµñÂÖ≥Á≥ªÊù•ÊéíÂ∫è„ÄÇ</li>
<li>&lsquo;auto&rsquo; ÈªòËÆ§ÂÄºÔºåÊèí‰ª∂ÁöÑÂÜÖÁΩÆÁöÑÊéíÂ∫èÊñπÂºè</li>
<li>&rsquo;none&rsquo; Êó†Â∫è</li>
<li>{function} Êèê‰æõ‰∏Ä‰∏™ÂáΩÊï∞</li>
</ul>
</li>
<li>
<p>copy-webpack-plugin</p>
<p>Áî®‰∫éÂ∞ÜÊñá‰ª∂ÊàñÊñá‰ª∂Â§π‰ªéÊ∫êÁõÆÂΩïÂ§çÂà∂Âà∞ÊûÑÂª∫ÁõÆÂΩï„ÄÇÂÆÉÂèØ‰ª•Áî®‰∫éÂ§çÂà∂‰ªª‰ΩïÁ±ªÂûãÁöÑÊñá‰ª∂ÔºåÂåÖÊã¨ JavaScript Êñá‰ª∂„ÄÇcopy-webpack-plugin Êú¨Ë∫´Âπ∂‰∏ç‰ºöËá™Âä®Â∞ÜÂ§çÂà∂ÁöÑ JavaScript Êñá‰ª∂ÊèíÂÖ•Âà∞ÊâìÂåÖÂêéÁöÑ HTML Êñá‰ª∂‰∏≠„ÄÇÂÆÉÁöÑ‰∏ªË¶ÅÂäüËÉΩÊòØÂ§çÂà∂Êñá‰ª∂ÔºåËÄå‰∏çÊ∂âÂèä HTML Êñá‰ª∂ÁöÑ‰øÆÊîπÊàñÂ§ÑÁêÜ„ÄÇÊâÄ‰ª•Âú®Ê∫êÁ†Å‰∏≠‰ΩøÁî®Êó∂Ôºå‰∏ÄÂÆöË¶ÅÊ≥®ÊÑèÊ∫êÁ†Å‰∏≠ÂºïÁî®ÁöÑÁõ∏ÂØπË∑ØÂæÑÂíåÊâìÂåÖÂêéÊñá‰ª∂Èó¥ÁöÑÁõ∏ÂØπË∑ØÂæÑÂøÖÈ°ªÁªü‰∏ÄÔºå‰∏çÁÑ∂Êó†Ê≥ïÊâæÂà∞ÂØπÂ∫îÁöÑËµÑÊ∫êÊñá‰ª∂„ÄÇ</p>
<p><strong>Ê≥®ÊÑèÔºåËØ•Êèí‰ª∂Âè™ÊòØÂ∞ÜÊåáÂÆöÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂Êã∑Ë¥ù‰∏Ä‰ªΩÂà∞ÊâìÂåÖËæìÂá∫ÁöÑÊñá‰ª∂Â§π‰∏≠Ôºå‰ΩÜÊòØÂπ∂‰∏çÂ∞ÜÊã∑Ë¥ùÂêéÁöÑÊñá‰ª∂Ëá™Âä®ÂºïÂÖ•Âà∞ÊâìÂåÖÁîüÊàêÁöÑ html ‰∏≠</strong>„ÄÇ</p>
<p><a class="link" href="https://www.webpackjs.com/plugins/copy-webpack-plugin#root"  target="_blank" rel="noopener"
    >ÊñáÊ°£</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">CopyWebpackPlugin</span>  <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;copy-webpack-plugin&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">plugins</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">CopyWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">patterns</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">from</span><span class="o">:</span><span class="s1">&#39;src/public&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">to</span><span class="o">:</span> <span class="s1">&#39;public&#39;</span>  <span class="c1">// Â∞Üsrc/publicÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂Â§çÂà∂Âà∞ÊûÑÂª∫ÁõÆÂΩïÁöÑpublicÁõÆÂΩï‰∏ã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">globOptions</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">ignore</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="s2">&#34;**/index.html&#34;</span><span class="p">,</span>   <span class="c1">// ÊéíÈô§public‰∏ãÁöÑindex.html
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="s2">&#34;**/.DS_Store&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="p">...</span>
</span></span><span class="line"><span class="cl">                    <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p>‰∏ãÂõæÊòØÊ∫êÁ†Å‰∏≠ÔºåÁõ¥Êé•‰ª•Áõ∏ÂØπË∑ØÂæÑÂºïÁî®ÂõæÁâáËµÑÊ∫êÁöÑÊÉÖÂÜµÔºö</p>
<p><img src="/blogs/post/webpack/images/image-20231215095204895.png"
	width="1049"
	height="646"
	srcset="/blogs/post/webpack/images/image-20231215095204895_hu_db88c4b087110352.png 480w, /blogs/post/webpack/images/image-20231215095204895_hu_199121267f01379.png 1024w"
	loading="lazy"
	
		alt="image-20231215095204895"
	
	
		class="gallery-image" 
		data-flex-grow="162"
		data-flex-basis="389px"
	
></p>
<p>‰∏ãÂõæÊòØÊâìÂåÖÂêéÁîüÊàêÊñá‰ª∂ÁöÑÁõ∏ÂØπË∑ØÂæÑÁöÑÊÉÖÂÜµÔºö</p>
<p><img src="/blogs/post/webpack/images/image-20231215095243255.png"
	width="1507"
	height="894"
	srcset="/blogs/post/webpack/images/image-20231215095243255_hu_9ce4bd1649bd8529.png 480w, /blogs/post/webpack/images/image-20231215095243255_hu_4600f7105e4498fc.png 1024w"
	loading="lazy"
	
		alt="image-20231215095243255"
	
	
		class="gallery-image" 
		data-flex-grow="168"
		data-flex-basis="404px"
	
></p>
<p>ÂèØ‰ª•ÁúãÂá∫‰ªñ‰ª¨ÂøÖÈ°ª‰øùÊåÅ‰∏ÄËá¥ÊâçÂèØ‰ª•Ê≠£Â∏∏Â∑•‰Ωú„ÄÇ</p>
<p>Â¶ÇÊûúÂ∞ÜÊèí‰ª∂ÁöÑÈÖçÁΩÆÊîπ‰∏∫‰∏ãÈù¢ËøôÊ†∑Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">CopyWebpackPlugin</span>  <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;copy-webpack-plugin&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">plugins</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="k">new</span> <span class="nx">CopyWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">patterns</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">from</span><span class="o">:</span><span class="s1">&#39;src/public&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// to: &#39;public&#39;  ÂèñÊ∂àË°å‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">globOptions</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">ignore</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;**/index.html&#34;</span><span class="p">,</span>   <span class="c1">// ÊéíÈô§public‰∏ãÁöÑindex.html
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s2">&#34;**/.DS_Store&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">...</span>
</span></span><span class="line"><span class="cl">          <span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâìÂåÖÁªìÊûúÂ¶Ç‰∏ãÔºö</p>
<p><img src="/blogs/post/webpack/images/image-20231215095528253.png"
	width="437"
	height="507"
	srcset="/blogs/post/webpack/images/image-20231215095528253_hu_6e3bb0d8a8bcd173.png 480w, /blogs/post/webpack/images/image-20231215095528253_hu_ae0552b039110924.png 1024w"
	loading="lazy"
	
		alt="image-20231215095528253"
	
	
		class="gallery-image" 
		data-flex-grow="86"
		data-flex-basis="206px"
	
></p>
<p>Áõ∏ÂØπ‰ΩçÁΩÆÂèëÁîüÊîπÂèòÔºåÂàô‰ΩøÁî®ÊâìÂåÖÂêéÁöÑÊñá‰ª∂ÂèëÂ∏É‰∏äÁ∫øÁöÑËØùÔºåÂàôÊâæ‰∏çÂà∞ÂØπÂ∫îÁöÑÂõæÁâáËµÑÊ∫ê„ÄÇ</p>
<h2 id="Ê®°Âºèmode">Ê®°Âºè(mode)
</h2><ul>
<li>
<p>ÂºÄÂèëÊûÑÂª∫ÁªìÊûúÁî®‰∫éÊú¨Âú∞ÂºÄÂèëË∞ÉËØïÔºå‰∏çËøõË°å‰ª£Á†ÅÂéãÁº©ÔºåÊâìÂç∞ debug ‰ø°ÊÅØÔºåÈúÄË¶Å sourcemap Êñá‰ª∂ÔºåÁÉ≠Êõ¥Êñ∞</p>
</li>
<li>
<p>Áîü‰∫ßÊûÑÂª∫ÁîüÊàêÊâìÂåÖÊñá‰ª∂Áõ¥Êé•Â∫îÁî®‰∫éÁ∫ø‰∏äÁöÑÔºåÂç≥‰ª£Á†ÅÈÉΩÊòØÂéãÁº©ÂêéÔºåËøêË°åÊó∂‰∏çÊâìÂç∞ debug ‰ø°ÊÅØÔºå‰∏çÂåÖÊã¨ sourcemapÔºåÂèØËÉΩÈúÄË¶ÅÂàÜÁ¶ª CSS ÊàêÂçïÁã¨ÁöÑÊñá‰ª∂Ôºå‰ª•‰æøÂ§ö‰∏™È°µÈù¢ÂÖ±‰∫´Âêå‰∏Ä‰∏™ CSS Êñá‰ª∂</p>
</li>
<li>
<p>webpack 4.x ÂºïÂÖ•ÁöÑ <a class="link" href="https://webpack.docschina.org/configuration/mode/"  target="_blank" rel="noopener"
    >mode</a></p>
</li>
<li>
<p>ÂΩìÊåáÂÆö‰ΩøÁî® production mode Êó∂ÔºåÈªòËÆ§‰ºöÂêØÁî®ÂêÑÁßçÊÄßËÉΩ‰ºòÂåñÁöÑÂäüËÉΩÔºåÂåÖÊã¨ÊûÑÂª∫ÁªìÊûú‰ºòÂåñ‰ª•Âèä webpack ËøêË°åÊÄßËÉΩ‰ºòÂåñ</p>
</li>
<li>
<p>Â¶ÇÊûúÊòØ development mode ÁöÑËØùÔºåÂàô‰ºöÂºÄÂêØ debug Â∑•ÂÖ∑ÔºåËøêË°åÊó∂ÊâìÂç∞ËØ¶ÁªÜÁöÑÈîôËØØ‰ø°ÊÅØÔºå‰ª•ÂèäÊõ¥Âä†Âø´ÈÄüÁöÑÂ¢ûÈáèÁºñËØëÊûÑÂª∫</p>
</li>
</ul>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">ÈÄâÈ°π</th>
          <th style="text-align: left">ÊèèËø∞</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">development</td>
          <td style="text-align: left">‰ºöÂ∞Ü process.env.NODE_ENV ÁöÑÂÄºËÆæ‰∏∫ development„ÄÇÂêØÁî® NamedChunksPlugin Âíå NamedModulesPlugin</td>
      </tr>
      <tr>
          <td style="text-align: left">production</td>
          <td style="text-align: left">‰ºöÂ∞Ü process.env.NODE_ENV ÁöÑÂÄºËÆæ‰∏∫ production„ÄÇÂêØÁî® FlagDependencyUsagePlugin, FlagIncludedChunksPlugin, ModuleConcatenationPlugin, NoEmitOnErrorsPlugin, OccurrenceOrderPlugin, SideEffectsFlagPlugin Âíå UglifyJsPlugin</td>
      </tr>
  </tbody>
</table></div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="kr">export</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s2">&#34;development&#34;</span><span class="p">,</span> <span class="c1">// Á≠â‰∫éÂºÄÂêØ‰∏ãÈù¢ÁöÑËøô‰∫õÈÖçÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="nx">devtool</span><span class="o">:</span> <span class="s2">&#34;eval&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">cache</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">performace</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">hints</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">pathinfo</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">optimization</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">moduleIds</span><span class="o">:</span> <span class="s2">&#34;named&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">chunkIds</span><span class="o">:</span> <span class="s2">&#34;named&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">mangleExports</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">nodeEnv</span><span class="o">:</span> <span class="s2">&#34;development&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">flagIncludedOrder</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">concatenateModules</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">splitChunks</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">hidePathInfo</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">minSize</span><span class="o">:</span> <span class="mi">10000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">maxAsyncRequests</span><span class="o">:</span> <span class="kc">Infinity</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">maxInitialRequests</span><span class="o">:</span> <span class="kc">Infinity</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">emitOnErrors</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">checkWasmTypes</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">removeAvailableModules</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">DefinePlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;process.env.NODE_ENV&#34;</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="s2">&#34;development&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">      <span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="kr">export</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s2">&#34;production&#34;</span><span class="p">,</span> <span class="c1">// Á≠â‰∫éÂºÄÂêØ‰∏ãÈù¢ÁöÑËøô‰∫õÈÖçÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="nx">devtool</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">cache</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">performace</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">hints</span><span class="o">:</span> <span class="s2">&#34;warning&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">pathinfo</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">optimization</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">moduleIds</span><span class="o">:</span> <span class="s2">&#34;deterministic&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">chunkIds</span><span class="o">:</span> <span class="s2">&#34;deterministic&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">mangleExports</span><span class="o">:</span> <span class="s2">&#34;deterministic&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">nodeEnv</span><span class="o">:</span> <span class="s2">&#34;production&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">flagIncludedOrder</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">concatenateModules</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">splitChunks</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">hidePathInfo</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">minSize</span><span class="o">:</span> <span class="mi">10000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">maxAsyncRequests</span><span class="o">:</span> <span class="kc">Infinity</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">maxInitialRequests</span><span class="o">:</span> <span class="kc">Infinity</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">emitOnErrors</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">checkWasmTypes</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">removeAvailableModules</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">DefinePlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;process.env.NODE_ENV&#34;</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="s2">&#34;production&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">      <span class="p">}),</span>
</span></span><span class="line"><span class="cl">      <span class="k">new</span> <span class="nx">TerserPlugin</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Âå∫ÂàÜÁéØÂ¢É">Âå∫ÂàÜÁéØÂ¢É
</h2><p>ËØªÂèñÂèòÈáèÁöÑ‰∏§‰∏™Âú∞ÊñπÔºö</p>
<ul>
<li>
<p>webpack ÈÖçÁΩÆÊñá‰ª∂Ë¢´ËØªÂèñÊó∂ÊâÄÂú®ÁöÑ node ÁéØÂ¢ÉÔºåËØ•ÁéØÂ¢ÉÁöÑÂÖ®Â±ÄÂØπË±°‰∏äÊúâ process ËøõÁ®ãÂØπË±°</p>
</li>
<li>
<p>È°πÁõÆÁöÑÊ∫êÁ†ÅÊñá‰ª∂ÂÆûÈôÖËøêË°åÊâÄÂú®ÁöÑÊµèËßàÂô®ÁéØÂ¢É‰∏≠ÔºåÊµèËßàÂô®ÂÖ®Â±ÄÂØπË±°‰∏äÊ≤°Êúâ process ËøõÁ®ãÂØπË±°ÔºåËÆøÈóÆÂàôÊä•Èîô</p>
</li>
</ul>
<ol>
<li><strong><code>--mode</code>Áî®Êù•Èó¥Êé•ËÆæÁΩÆÊ®°ÂùóÂÜÖÔºàÊ∫ê‰ª£Á†Å‰∏≠ÔºâÁöÑ<code>process.env.NODE_ENV</code></strong></li>
</ol>
<ul>
<li>ÂèØ‰ª•Âú®Ê®°ÂùóÂÜÖ(<strong>È°πÁõÆÊ∫êÊñá‰ª∂‰ª£Á†Å‰∏≠Ôºå‰∏çÂåÖÊã¨ webpack ÈÖçÁΩÆÊñá‰ª∂</strong>)ÈÄöËøá<code>process.env.NODE_ENV</code>Ëé∑ÂèñËØ•<code>process.env.NODE_ENV</code>ÂØπÂ∫îÁöÑÂ≠óÁ¨¶‰∏≤ÂÄºÔºàdevelopment ÊàñËÄÖ productionÔºâÂπ∂ËøõË°åÊõøÊç¢ÔºåËøôÊòØÂú®<strong>ÁºñËØëÈò∂ÊÆµ</strong>ÂÅöÁöÑ<strong>ÊõøÊç¢Â∑•‰Ωú</strong>ÔºåÂÆÉÂíå webpack ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈÄöËøáËøõÁ®ãÂØπË±°ÔºàprocessÔºâ‰∏≠ÁöÑÁéØÂ¢ÉÂèòÈáèÂØπË±°(env) ‰∏äÁöÑ NODE_ENV ÊòØ‰∏§‰∏™ÂÆåÂÖ®‰∏çÂêåÁöÑÊ¶ÇÂøµ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;script&#34;</span><span class="err">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;build&#34;</span><span class="p">:</span><span class="s2">&#34;webpack --mode=development&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∑‰ΩìËøáÁ®ãÔºö<code>webpack --mode=development</code> =&gt; ËÆæÁΩÆ webpack.config.js Êñá‰ª∂‰∏≠ mode ÁöÑÂÄº‰∏∫ development =&gt; mode ‰∏∫ÂºÄÂèëÊ®°ÂºèÔºàdevelopment Ôºâ‰∏ãÊó∂Ôºåwebpack ÂÜÖÈÉ®ÈÄöËøá webpack.definePlugin Êèí‰ª∂ËÆæÁΩÆÂ≠óÁ¨¶‰∏≤ process.env.NODE_ENV Âú®È°πÁõÆÊ∫êÁ†Å‰∏≠ÁöÑ‰ª£Ë°®ÁöÑÂÆûÈôÖÂÄº‰∏∫ developmentÔºå <strong>Âú®ÁºñËØëÈò∂ÊÆµÔºåÂΩìËß£ÊûêÂà∞È°πÁõÆÊ∫êÁ†Å‰∏≠ÊúâÁî®Âà∞ÂèòÈáèÔºöprocess.env.NODE_ENV Êó∂ÔºåÁõ¥Êé•Â∞ÜÂÆÉÊõøÊç¢‰∏∫Â≠óÁ¨¶‰∏≤ÔºàdevelopmentÔºâ</strong>Ôºåprocess.env.NODE_ENV Â≠óÁ¨¶‰∏≤Èô§Â§ñ„ÄÇ webpack &ndash;mode=production ‰πüÊòØ‰∏ÄÊ†∑ÁöÑÂéüÁêÜ„ÄÇ</p>
<p>ÂÖ∂‰∏≠ÈÄöËøáÂëΩ‰ª§Ë°åÁöÑ&ndash;mode ÂíåÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑ mode ÂèñÊåáÂÆöÁéØÂ¢ÉÔºåÈÉΩÊòØ‰∏Ä‰∏™ÂéüÁêÜÔºåÂ¶ÇÊûú‰∏§ËÄÖÂêåÊó∂Â≠òÂú®ÔºåÂàôÂëΩ‰ª§Ë°å&ndash;mode ÁöÑ‰ºòÂÖàÁ∫ßÊõ¥È´ò„ÄÇ</p>
<ol start="2">
<li><strong><code>--env</code>Áî®Êù•ËÆæÁΩÆ webpack ÈÖçÁΩÆÊñá‰ª∂ÁöÑÂáΩÊï∞ÂèÇÊï∞</strong></li>
</ol>
<ul>
<li>Êó†Ê≥ïÂú®Ê®°ÂùóÂÜÖÈÄöËøá<code>process.env.NODE_ENV</code>ËÆøÈóÆ</li>
<li>ÂèØ‰ª•Âú® webpack ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈÄöËøáÈÖçÁΩÆÊñá‰ª∂ÂØºÂá∫ÁöÑ<strong>ÂáΩÊï∞</strong>Ëé∑ÂèñÂΩìÂâçÁéØÂ¢ÉÂèòÈáè</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;script&#34;</span><span class="err">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;build&#34;</span><span class="p">:</span><span class="s2">&#34;webpack --env=development&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>webpack.config.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">webpack</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;webpack&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span><span class="p">)</span>   <span class="c1">// ÂÄº‰∏∫undefined
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">env</span><span class="p">,</span> <span class="nx">argv</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">env</span><span class="p">)</span>  <span class="c1">// development:true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">argv</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;production&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">entry</span><span class="o">:</span><span class="s1">&#39;./src/index.js&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;./dist&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;[name].js&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;style-loader&#39;</span><span class="p">,</span> <span class="s1">&#39;css-loader&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;./public/index.html&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;index.html&#39;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}),</span>
</span></span><span class="line"><span class="cl">      <span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">DefinePlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">FIRTS_VAR</span><span class="o">:</span> <span class="s2">&#34;&#39;wuyibo&#39;&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong><code>--env</code> Áî®Êù•ËÆæÁΩÆ‰º†Áªô webpack ÈÖçÁΩÆÊñá‰ª∂ÂØºÂá∫ÁöÑÂáΩÊï∞ÁöÑÂèÇÊï∞</strong>ÔºåÂπ∂‰∏çÁõ¥Êé•Âú®È°πÁõÆÁöÑÊ®°ÂùóÊñá‰ª∂‰∏≠ÁîüÊïà„ÄÇ</p>
<p>Âú® script ËÑöÊú¨‰∏≠‰ΩøÁî® &ndash;env=development ÁöÑÊïàÊûúÊòØ‰∏∫ webpack ÈÖçÁΩÆÊñá‰ª∂ÈªòËÆ§ÂØºÂá∫ÁöÑÊòØÂáΩÊï∞Êó∂ÔºåÂèØ‰ª•Âú®ÂáΩÊï∞ÁöÑÂèÇÊï∞‰∏≠Ëé∑ÂèñÂà∞ËØ•ÂëΩ‰ª§Ë°å‰∏≠ËÆæÁΩÆÁöÑÂèÇÊï∞„ÄÇ‰æãÂ¶Ç script ËÑöÊú¨‰∏≠Ôºö<code>&quot;build&quot;: &quot;webpack --env=development&quot;</code> ÈÇ£‰πà‰∏ãÈù¢‰ª£Á†Å‰∏≠ÁöÑ env Â∞±ÊòØÔºö<code>{ WEBPACK_BUNDLE: true, WEBPACK_BUILD: true, development: true }</code>„ÄÇargv ÁöÑÁªìÊûÑÂàôÊòØÔºö<code>{ env: { WEBPACK_BUNDLE: true, WEBPACK_BUILD: true, development: true } }</code>Ôºå‰ΩÜÊòØÂõ†‰∏∫ mode ÈªòËÆ§Ê≤°ÊúâËÆæÁΩÆÊó∂‰ΩøÁî®ÁöÑÊòØ production Ê®°ÂºèÔºåÊâÄ‰ª•ÊâìÂåÖÂá∫Êù•ÁöÑÊ∫ê‰ª£Á†Å‰∏≠ÁöÑ process.env.NODE_ENV ÂèòÈáèÁöÑÂèñÂÄº‰ªçÊóßÊòØ production Â≠óÁ¨¶‰∏≤„ÄÇ</p>
<ol start="3">
<li><strong><code>cross-env</code>Áî®Êù•ËÆæÁΩÆ node ÁéØÂ¢ÉÁöÑ<code>process.env.NODE_ENV</code></strong></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&#34;scripts&#34;: {
</span></span><span class="line"><span class="cl">  &#34;build&#34;: &#34;cross-env NODE_ENV=development webpack&#34;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>&ndash;env=development Âè™ÊòØÂú®ÊâßË°åËÑöÊú¨Êó∂ÔºåÁªô<strong>ÂáΩÊï∞Á±ªÂûã</strong>ÁöÑ webpack ÈÖçÁΩÆ‰º†ÂÖ•ÂèÇÊï∞„ÄÇÂ¶ÇÊûúÂú® webpack ÈÖçÁΩÆÊñá‰ª∂‰∏≠ËÆøÈóÆ process.env.NODE_ENV ÁöÑËØùÔºåÊòØÊ≤°ÊúâÂÄºÁöÑÔºå‰∏∫ undefined„ÄÇÂ¶ÇÊûúÊÉ≥‰øÆÊîπ webpack ÈÖçÁΩÆÊñá‰ª∂‰∏≠ËÆøÈóÆÁöÑÂèòÈáèÁöÑÂÄºÔºåÂèØ‰ª•Âú®ÂëΩ‰ª§Ë°å‰∏≠ËÆæÁΩÆ webpack ÈÖçÁΩÆÊñá‰ª∂ËøêË°åÁöÑÁéØÂ¢ÉÁöÑÁéØÂ¢ÉÂèòÈáè„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;scripts&#34;</span><span class="err">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;set NODE_ENV=development webpack&#34;</span><span class="p">,</span>  <span class="c1">// windows‰∏ãÁöÑÂÜôÊ≥ï„ÄÇwebpack ÈÖçÁΩÆÊñá‰ª∂‰∏≠ËÆøÈóÆ process.env.NODE_ENV ÔºåÂàôÂÆÉÁöÑÂÄºÂ∞±‰∏∫development
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;cross-env NODE_ENV=development webpack&#34;</span>  <span class="c1">// Ëß£ÂÜ≥Êìç‰ΩúÁ≥ªÁªüÂ±ÇÈù¢ÁöÑÂëΩ‰ª§ÂÖºÂÆπÊÄßÂåÖ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="p">}</span><span class="err">,</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>webpack ÈÖçÁΩÆÊñá‰ª∂‰∏≠ËØªÂèñÁöÑÊòØ node ÈÖçÁΩÆÁöÑÁéØÂ¢ÉÂèòÈáèÔºåÂèØ‰ª•ÈÄöËøá cross-env key=value Êù•ËÆæÁΩÆ„ÄÇ ÁÑ∂ÂêéÂú® webpack ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂèØ‰ª•ËÆøÈóÆÂà∞ËÆæÁΩÆÁöÑÁéØÂ¢ÉÂèòÈáèÔºåÁÑ∂ÂêéÂÜçÁî®Ëøô‰∏™ÁéØÂ¢ÉÂèòÈáè‰Ωú‰∏∫ webpack.DefinePlugin Êèí‰ª∂ÈÖçÁΩÆÈ°π‰∏≠ÁöÑÂÄºÔºå‰ªéËÄåÊù•ÊîπÂèòÈ°πÁõÆÊ®°ÂùóÂÜÖÁöÑÂèòÈáèÁöÑÂÄºÊàñËÄÖÊâìÂåÖÊñπÂºè„ÄÇ</p>
<p>cross-env ËÆæÁΩÆÁöÑÁéØÂ¢ÉÂèòÈáèÂú®È°πÁõÆÁöÑÊ®°ÂùóÊñá‰ª∂‰∏≠ÊòØÊó†Ê≥ïËÆøÈóÆÂà∞ÁöÑ„ÄÇ</p>
<p>‰æãÂ≠êÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;scripts&#34;</span><span class="err">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;cross-env NODE_ENV=production FIRST_ENV=one webpack&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® webpack ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂèØ‰ª•ËÆøÈóÆÂà∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">console.log(process.env.NODE_ENV);  // production
</span></span><span class="line"><span class="cl">console.log(process.env.FIRST_ENV);   // one
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®È°πÁõÆ‰∏≠ÁöÑÊñá‰ª∂ index.jsÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span><span class="p">);</span> <span class="c1">// production,ÊòØÁî±mode‰∏∫productionÊ®°Âºè‰∏ãÁöÑDefinePluginÊèí‰ª∂ËÆæÁΩÆÁöÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">FIRST_ENV</span><span class="p">);</span> <span class="c1">//  process.env.FIRST_ENVÂàôÁõ¥Êé•Âú®ÊâìÂåÖÂêéÊñá‰ª∂‰∏≠Â≠òÂú®ÔºåËøêË°åÊó∂Êä•Èîô
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>vueÔºåreact ËÑöÊâãÊû∂È°πÁõÆ‰∏≠ÂèØ‰ª•ÈÄöËøá.env Ê†ºÂºèÁöÑÊñá‰ª∂Âêë node ÁéØÂ¢É‰∏≠ËÆæÁΩÆÂèòÈáè„ÄÇÂÄüÂä©ÁöÑÊòØ‰∏Ä‰∏™Á¨¨‰∏âÊñπÂ∫ìÔºödotenv-expand„ÄÇ</strong></p>
<ol start="4">
<li><strong><code>DefinePlugin</code>Áî®Êù•ËÆæÁΩÆÊ®°ÂùóÂÜÖ(Ê∫êÁ†Å‰∏≠)ÁöÑÂÖ®Â±ÄÂèòÈáè</strong></li>
</ol>
<ul>
<li>ËÆæÁΩÆÊâÄÊúâÊ®°ÂùóÈÉΩËÉΩËØªÂèñÂà∞ÁöÑÂÄº</li>
<li>ÂèØ‰ª•Âú®‰ªªÊÑèÊ®°ÂùóÂÜÖÈÄöËøá <code>process.env.xxx</code>ÊàñËÄÖÂÖ∂‰ªñ<strong>‰ªªÊÑèÂ≠óÊÆµ</strong>Ë°®Á§∫Ëá™Â∑±ËÆæÁΩÆÂ•ΩÁöÑÂÄº</li>
<li>Êó†Ê≥ïÂú®<code>nodeÁéØÂ¢É</code>(webpack ÈÖçÁΩÆÊñá‰ª∂‰∏≠)‰∏ãËé∑ÂèñÂΩìÂâçÁöÑÂèòÈáè</li>
<li>Ê≥®ÊÑèÂú®ÂÄº‰∏∫Â≠óÁ¨¶‰∏≤ÊòØÈúÄË¶ÅÁî®ÂºïÂè∑ÂåÖË£π‰ª£ÂºïÂè∑ÁöÑÂ≠óÁ¨¶‰∏≤</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">plugins</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">   <span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">DefinePlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="s1">&#39;process.env.NODE_ENV&#39;</span><span class="o">:</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span><span class="p">)</span><span class="err">Ôºå</span>
</span></span><span class="line"><span class="cl">       <span class="s1">&#39;back_end_url&#39;</span><span class="o">:</span><span class="s1">&#39;&#34;http://xxxx.xxx/xxx&#34;&#39;</span>
</span></span><span class="line"><span class="cl">   <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøáÊèí‰ª∂ DefinePlugin ËÆæÁΩÆÁöÑ key ÂèØ‰ª•Áõ¥Êé•Âú®Êï¥‰∏™È°πÁõÆÁöÑÊ∫êÁ†Å‰∏≠Áõ¥ËÆøÈóÆ„ÄÇÊØîÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">webpack</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;webpack&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;html-webpack-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">env</span><span class="p">,</span> <span class="nx">argv</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">mode</span><span class="o">:</span> <span class="s2">&#34;production&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">template</span><span class="o">:</span> <span class="s2">&#34;./public/index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">}),</span>
</span></span><span class="line"><span class="cl">      <span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">DefinePlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">FIRTS_VAR</span><span class="o">:</span> <span class="s2">&#34;&#39;wuyibo&#39;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê∫êÁ†Å index.js ‰∏≠Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">FIRTS_VAR</span><span class="p">);</span> <span class="c1">// Âú®ÊâìÂåÖÁºñËØëÂêéÁöÑÊñá‰ª∂‰∏≠Áõ¥Êé•Â∞±Áî®  wuyibo Â≠óÁ¨¶‰∏≤ËøõË°åÁöÑÊõøÊç¢
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® vue È°πÁõÆ‰∏≠ÁöÑ index.html Êñá‰ª∂‰∏≠Êúâ: <code>&lt;% BASE_URL %&gt; favicon.ico</code> ,ÂÖ∂‰∏≠ BASE_URL ÊòØË¶ÅÂèñÂÖ®Â±Ä‰∏ãÁöÑËØ•ÂèòÈáèÂØπÂ∫îÁöÑÂÄº„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">DefinePlugin</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;webpack&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="k">new</span> <span class="nx">DefinePlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">BASE_URL</span><span class="o">:</span> <span class="s2">&#34;&#39;./&#39;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}),</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>webpack ÁöÑÈÖçÁΩÆÊñá‰ª∂ÁöÑÊ®°ÂùóÂØºÂá∫ÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÂáΩÊï∞Ôºå‰πüÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÈÖçÁΩÆÂØπË±°„ÄÇÂÖ∂‰∏≠ÂáΩÊï∞ÂèØ‰ª•Êé•ÂèóÂëΩ‰ª§Ë°å‰º†ÈÄíÁöÑÂèÇÊï∞„ÄÇ</strong></p>
<h3 id="windows">Windows
</h3><h4 id="cmd">CMD
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># Êü•ÁúãÊâÄÊúâÁéØÂ¢ÉÂèòÈáè
</span></span><span class="line"><span class="cl">set
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Êü•ÁúãÂçï‰∏™ÁéØÂ¢ÉÂèòÈáèÔºà‰ª• NODE_ENV ‰∏∫‰æãÔºâ
</span></span><span class="line"><span class="cl">set NODE_ENV
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># ËÆæÁΩÆÂçï‰∏™ÁéØÂ¢ÉÂèòÈáèÔºà‰ª• NODE_ENV ‰∏∫‰æãÔºâ
</span></span><span class="line"><span class="cl">set NODE_ENV=production
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Âà†Èô§Âçï‰∏™ÁéØÂ¢ÉÂèòÈáèÔºà‰ª• NODE_ENV ‰∏∫‰æãÔºâ
</span></span><span class="line"><span class="cl">set NODE_ENV=
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûú <code>NODE_ENV</code> Ê≤°ÊúâËÆæÁΩÆÔºåÂàôÈÄöËøá <code>set NODE_ENV</code> ÂëΩ‰ª§Êü•ÁúãÊó∂Ôºå‰ºöÊèêÁ§∫ <code>ÁéØÂ¢ÉÂèòÈáè NODE_ENV Ê≤°ÊúâÂÆö‰πâ</code>„ÄÇ</p>
<p>ÂΩìËÆæÁΩÆÂÆå <code>NODE_ENV</code>ÔºàÂÅáËÆæËÆæÁΩÆÂÄº‰∏∫ <code>production</code>ÔºâÔºåÂÜçÈÄöËøá <code>set NODE_ENV</code> ÂëΩ‰ª§Êü•ÁúãÊó∂Ôºå‰ºöËøîÂõû <code>NODE_ENV=production</code>„ÄÇ</p>
<h4 id="powershell">Powershell
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># Êü•ÁúãÊâÄÊúâÁéØÂ¢ÉÂèòÈáè
</span></span><span class="line"><span class="cl">ls env:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Êü•ÁúãÂçï‰∏™ÁéØÂ¢ÉÂèòÈáèÔºà‰ª• NODE_ENV ‰∏∫‰æãÔºâ
</span></span><span class="line"><span class="cl">$env:NODE_ENV
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># ËÆæÁΩÆÂçï‰∏™ÁéØÂ¢ÉÂèòÈáèÔºà‰ª• NODE_ENV ‰∏∫‰æãÔºâ
</span></span><span class="line"><span class="cl">$env:NODE_ENV=&#34;production&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Âà†Èô§Âçï‰∏™ÁéØÂ¢ÉÂèòÈáèÔºà‰ª• NODE_ENV ‰∏∫‰æãÔºâ
</span></span><span class="line"><span class="cl">del env:NODE_ENV
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® Powershell ÂëΩ‰ª§Èù¢ÊùøÁöÑÊìç‰Ωú‰∏≠ÔºåËã• <code>NODE_ENV</code> Ê≤°ÊúâËÆæÁΩÆÔºåÂàôÈÄöËøá <code>set NODE_ENV</code> ÂëΩ‰ª§Êü•ÁúãÂÆÉÊó∂ÔºåÊ≤°Êúâ‰ªª‰ΩïÊèêÁ§∫„ÄÇ</p>
<p>ÂΩìËÆæÁΩÆÂÆå <code>NODE_ENV</code>ÔºàÂÅáËÆæËÆæÁΩÆÂÄº‰∏∫ <code>production</code>ÔºâÔºåÂÜçÈÄöËøá <code>set NODE_ENV</code> ÂëΩ‰ª§Êü•ÁúãÂÆÉÊó∂Ôºå‰ºöËøîÂõû <code>production</code>„ÄÇ</p>
<p><strong>Ê≥®ÊÑèÁÇπ</strong></p>
<p>‰∏äÈù¢ÁöÑÁéØÂ¢ÉËÆæÁΩÆÂè™ÊòØ‰∏¥Êó∂ÁöÑÔºåÂç≥Âè™ÈíàÂØπÂΩìÂâçËøêË°åÁ™óÂè£ÁöÑÁéØÂ¢ÉÊúâÊïà„ÄÇÂΩì CLI ËøêË°åÁ™óÂè£ÂÖ≥Èó≠‰ª•ÂêéÔºåÁõ∏ÂÖ≥ËÆæÁΩÆÈÉΩ‰ºö‰∏¢Â§±„ÄÇ</p>
<p>Âè¶Â§ñÔºåËôΩÁÑ∂ÈÄöËøá CMD Âíå Powershell ÈÉΩËÉΩ‰øÆÊîπÁéØÂ¢ÉÂèòÈáèÔºå‰ΩÜÂÆÉ‰ª¨‰πãÈó¥ËÆæÁΩÆÁöÑÁéØÂ¢ÉÂèòÈáèÂπ∂‰∏ç‰ºöÁõ∏‰∫íÂΩ±ÂìçÔºåÂç≥‰Ω†Âú® CMD ÂèØ‰ª•ËÆæÁΩÆ <code>NODE_ENV</code> ‰∏∫ <code>production</code>ÔºåÂêåÊó∂‰πüÂèØ‰ª•Âú® Powershell ‰∏≠ËÆæÁΩÆ <code>NODE_ENV</code> ‰∏∫ <code>development</code>ÔºåËøô‰πüÂç∞ËØÅ‰∫Ü‰∏äÈù¢ÁöÑÊèèËø∞ÔºåËÆæÁΩÆÂè™ÈíàÂØπÂΩìÂâçËøêË°åÁ™óÂè£ÊúâÊïà „ÄÇ</p>
<p>Â¶ÇÊûúÂ∏åÊúõËÆæÁΩÆ‰∏ÄÁõ¥ÁîüÊïàÔºàÂç≥ Êú¨Âú∞ËÆæÁΩÆÔºâÔºåÂèØÈÄöËøá <code>ÊéßÂà∂Èù¢Êùø -&gt; Á≥ªÁªüÂíåÂÆâÂÖ® -&gt; Á≥ªÁªü -&gt; È´òÁ∫ßÁ≥ªÁªüËÆæÁΩÆ -&gt; È´òÁ∫ß -&gt; ÁéØÂ¢ÉÂèòÈáè</code> ËøôÊ†∑ËøõË°åËÆæÁΩÆÔºàWindows10„ÄÅÂèØËÉΩÈúÄË¶ÅÈáçÂêØÔºâ„ÄÇ</p>
<h3 id="mac">Mac
</h3><p>Âõ†‰∏∫Âè™ÈõÜÊàê‰∏ÄÁßçÂëΩ‰ª§Ë°åÁªàÁ´ØÔºåÂÆÉËÆæÁΩÆ Nodejs ÁéØÂ¢ÉÂèòÈáèÁöÑËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1"># Êü•ÁúãÊâÄÊúâÁéØÂ¢ÉÂèòÈáè</span>
</span></span><span class="line"><span class="cl"><span class="n">env</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Êü•ÁúãÂçï‰∏™ÁéØÂ¢ÉÂèòÈáèÔºà‰ª• NODE_ENV ‰∏∫‰æãÔºâ</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">NODE_ENV</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ËÆæÁΩÆÂçï‰∏™ÁéØÂ¢ÉÂèòÈáèÔºà‰ª• NODE_ENV ‰∏∫‰æãÔºâ</span>
</span></span><span class="line"><span class="cl"><span class="k">export</span> <span class="n">NODE_ENV</span><span class="o">=</span><span class="n">production</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Âà†Èô§Âçï‰∏™ÁéØÂ¢ÉÂèòÈáèÔºà‰ª• NODE_ENV ‰∏∫‰æãÔºâ</span>
</span></span><span class="line"><span class="cl"><span class="n">unset</span> <span class="n">NODE_ENV</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®ÈÖçÁΩÆÂÆå Nodejs ÁéØÂ¢ÉÂèòÈáèÂêéÔºå‰Ω†Â∞±ÂèØ‰ª•ÁªßÁª≠ËøêË°åÈ°πÁõÆ‰∏≠ÁöÑÊâìÂåÖÂëΩ‰ª§‰∫Ü„ÄÇ</p>
<h3 id="lunix">Lunix
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1"># Êü•ÁúãÊâÄÊúâÁéØÂ¢ÉÂèòÈáè</span>
</span></span><span class="line"><span class="cl"><span class="n">env</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Êü•ÁúãÂçï‰∏™ÁéØÂ¢ÉÂèòÈáèÔºà‰ª• NODE_ENV ‰∏∫‰æãÔºâ</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">NODE_ENV</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ËÆæÁΩÆÂçï‰∏™ÁéØÂ¢ÉÂèòÈáèÔºà‰ª• NODE_ENV ‰∏∫‰æãÔºâ</span>
</span></span><span class="line"><span class="cl"><span class="k">export</span> <span class="n">NODE_ENV</span><span class="o">=</span><span class="n">production</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Âà†Èô§Âçï‰∏™ÁéØÂ¢ÉÂèòÈáèÔºà‰ª• NODE_ENV ‰∏∫‰æãÔºâ</span>
</span></span><span class="line"><span class="cl"><span class="n">unset</span> <span class="n">NODE_ENV</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®ÂëΩ‰ª§Ë°åÊìç‰Ωú‰∏≠ÔºåËã• <code>NODE_ENV</code> Ê≤°ÊúâËÆæÁΩÆÔºåÂàôÈÄöËøá <code>echo $NODE_ENV</code> ÂëΩ‰ª§Êü•ÁúãÂÆÉÊó∂ÔºåÊ≤°Êúâ‰ªª‰ΩïÊèêÁ§∫„ÄÇ</p>
<p>ÂΩìËÆæÁΩÆÂÆå <code>NODE_ENV</code>ÔºàÂÅáËÆæËÆæÁΩÆÂÄº‰∏∫ <code>production</code>ÔºâÔºåÂÜçÈÄöËøá <code>set NODE_ENV</code> ÂëΩ‰ª§Êü•ÁúãÂÆÉÊó∂Ôºå‰ºöËøîÂõû <code>production</code>„ÄÇ</p>
<p>‰ΩÜÊòØÔºåÈááÁî® ÂëΩ‰ª§Ë°åÔºàCLIÔºâËÆæÁΩÆ ÁöÑÊñπÂºèÊù•‰øÆÊîπ Nodejs ÁéØÂ¢ÉÂèòÈáèÊúâ‰∏Ä‰∏™‰∏çÂ•ΩÂú∞Êñπ„ÄÇÂç≥ÊØèÊ¨°Âú®ËøêË°åÊâìÂåÖÂëΩ‰ª§ÂâçÔºåÈÉΩË¶ÅÂÖàÈÄöËøá <code>set NODE_ENV=xx</code> ÊàñËÄÖ <code>export NODE_ENV=xx</code> Á≠âÁ±ª‰ººÁöÑÂëΩ‰ª§Êù•ËÆæÁΩÆÊàñËÄÖÂàáÊç¢ÁéØÂ¢ÉÂèòÈáèÔºàËøôÈáåÊåáÁöÑÊòØÈáçÂºÄ‰∫ÜÂëΩ‰ª§Á™óÂè£ÔºåÊàñËÄÖÂàáÊç¢ÊâìÂåÖÁéØÂ¢ÉÁöÑÊÉÖÂÜµ‰∏ãÔºâ„ÄÇ</p>
<p>Á¨¨‰∫åÁßçÂÅöÊ≥ïÔºåÂç≥ÈÖçÁΩÆ package.json„ÄÇ</p>
<h2 id="ÈÖçÁΩÆ-packagejson">ÈÖçÁΩÆ package.json
</h2><p>Âú®È°πÁõÆÈÖçÁΩÆÊñá‰ª∂ package.json ‰∏≠ÔºåÊ†πÊçÆ‰∏çÂêåÁöÑÊâìÂåÖÂëΩ‰ª§ÂéªËÆæÁΩÆÁõ∏Â∫îÁöÑ Nodejs ÁéØÂ¢ÉÂèòÈáèÔºåÊòØ‰∏ÄÁßçÈùûÂ∏∏‰∏ªÊµÅÁöÑÂÅöÊ≥ï„ÄÇÂÖ∂ÂÆûÊú¨Ë¥®‰∏äÊù•ËØ¥ÔºåÂè™ÊòØÂ∞ÜÂú®ÂëΩ‰ª§Ë°åÈù¢ÊùøËÆæÁΩÆÁéØÂ¢ÉÂèòÈáèÁöÑÂëΩ‰ª§ËØ≠Âè•ÊîæÂà∞‰∫Ü <code>package.json</code> Êñá‰ª∂‰∏≠ÔºåÊää ËÆæÁΩÆÁéØÂ¢ÉÂèòÈáè Âíå ÊâìÂåÖ ‰∏§‰∏™ÂëΩ‰ª§ÂêàÂπ∂ËøêË°åËÄåÂ∑≤„ÄÇ</p>
<p>ËøôÁßçÊñπÂºèÔºåÂ∞±ÊòØÂ∞Ü <code>NODE_ENV</code> Ê≥®ÂÖ•Âà∞ <code>process.env</code> ÂØπË±°„ÄÇ‰∏çÂêåÁéØÂ¢É‰∏ãÔºåËÆæÁΩÆÂ¶Ç‰∏ãÔºö</p>
<h3 id="windows-Á≥ªÁªü">Windows Á≥ªÁªü
</h3><p>Âú®ËøôÁßçÊñπÂºè‰∏ãÔºåÊó†ËÆ∫‰Ω†ÊòØ‰ΩøÁî® CMD (ÂëΩ‰ª§ÊèêÁ§∫Á¨¶) ËøòÊòØ Powershell ÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑Ôºå‰Ω†ÈÉΩÂèØ‰ª•Âú® <code>package.json</code> ËøôÊ†∑ÈÖçÁΩÆÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">// package.json
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  ...
</span></span><span class="line"><span class="cl">  &#34;scripts&#34;: {
</span></span><span class="line"><span class="cl">    &#34;build&#34;: &#34;set NODE_ENV=production&amp;&amp; npm run clean &amp;&amp; webpack&#34;,
</span></span><span class="line"><span class="cl">    &#34;clean&#34;: &#34;rimraf ./build &amp;&amp; mkdirp build&#34;,
</span></span><span class="line"><span class="cl">  }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÖçÁΩÆÂÆåÂêéÔºà<code>mkdirp</code> ÊòØ‰∏Ä‰∏™ÁîüÊàêÊñá‰ª∂Â§πÁöÑÁ¨¨‰∏âÊñπÂåÖÔºâÔºå‰Ω†Âè™ÈúÄË¶ÅÂú®ÂëΩ‰ª§Ë°åÈù¢ÊùøËøêË°å <code>npm run build</code> Âç≥ÂèØÂÆåÊàêÊâìÂåÖ„ÄÇ</p>
<p><strong>Ê≥®ÊÑèÁÇπ</strong></p>
<p>Âú® Windows Á≥ªÁªü‰∏≠Ôºå‰Ω†ÂøÖÈ°ªÁßªÈô§ÁéØÂ¢ÉÂèòÈáèÂëΩ‰ª§‰∏é <code>&amp;&amp;</code> Á¨¶Âè∑‰πãÈó¥ÁöÑÁ©∫ÁôΩ„ÄÇÂê¶ËÄÖÔºåÈÖçÁΩÆÁöÑÂëΩ‰ª§‰∏çËÉΩÁîüÊïàÔºÅ</p>
<h3 id="mac-Á≥ªÁªü">Mac Á≥ªÁªü
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="o">//</span> <span class="n">package</span><span class="o">.</span><span class="n">json</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;export NODE_ENV=production &amp;&amp; npm run clean &amp;&amp; webpack&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;clean&#34;</span><span class="p">:</span> <span class="s2">&#34;rimraf ./build &amp;&amp; mkdirp build&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ªé‰∏äÈù¢ÊèèËø∞ÂèØ‰ª•ÁúãÂà∞Ôºå‰∏çËÆ∫ÊòØ‰∏çÂêåÁöÑÊìç‰ΩúÁ≥ªÁªüÔºåËøòÊòØ‰∏çÂêåÁöÑÂëΩ‰ª§Ë°åÁªàÁ´ØÔºåËôΩÁÑ∂ÁõÆÁöÑÈÉΩÊòØËÆæÁΩÆ Nodejs ÁéØÂ¢ÉÂèòÈáèÔºå‰ΩÜÂÆÉ‰ª¨ÁöÑËØ≠Ê≥ïÈÉΩ‰∏çÂ∞ΩÁõ∏Âêå„ÄÇËøôÂ∞±Â∏¶Êù•‰∏§‰∏™ÈóÆÈ¢òÔºö</p>
<ul>
<li>Âú® Windows ÂºÄÂèëÈÉ®ÁΩ≤ÁöÑÈ°πÁõÆÔºåÂèØËÉΩÂú® Mac Á≥ªÁªüÊó†Ê≥ïÊ≠£Â∏∏ÊâìÂåÖ</li>
<li>Âú®Ë∑®Âπ≥Âè∞ÂºÄÂèëÁöÑÈ°πÁõÆ‰∏äÔºå‰Ω†ËøòÂæóËÆ∞‰ΩèÊØè‰∏™ÂëΩ‰ª§Ë°åÁªàÁ´ØÊâÄ‰ΩøÁî®ÁöÑËØ≠Ê≥ïÔºå‰πüÈ∫ªÁÉ¶</li>
</ul>
<p>‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏ÄÈóÆÈ¢òÔºåÊúâ‰∫∫ÂºÄÂèë‰∫Ü <code>cross-env</code>„ÄÇ</p>
<h3 id="Ë∑®Âπ≥Âè∞---cross-env">Ë∑®Âπ≥Âè∞ - cross-env
</h3><p><a class="link" href="https://www.npmjs.com/package/cross-env"  target="_blank" rel="noopener"
    >cross-env</a> ÊòØ‰∏Ä‰∏™Ë∑®Âπ≥Âè∞ËÆæÁΩÆÁéØÂ¢ÉÂèòÈáèÁöÑÁ¨¨‰∏âÊñπÂåÖÔºåÂÆÉÂèØ‰ª•ËÆ©‰Ω†Âè™ÈÖçÁΩÆ‰∏ÄË°åÂëΩ‰ª§ÔºåÂ∞±ËÉΩËΩªÊùæÂú∞Âú®Â§ö‰∏™Âπ≥Âè∞ËÆæÁΩÆÁéØÂ¢ÉÂèòÈáè„ÄÇ</p>
<p>È¶ñÂÖàÔºåÂÆâË£ÖÂÆÉÔºàÁî±‰∫éÂ§ö‰∏™È°πÁõÆÂú®Áî®ÔºåÊâÄ‰ª•Â∞±ÂÖ®Â±ÄÂÆâË£Ö‰∫ÜÔºâÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">npm install -g cross-env
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÔºåÂú® <code>package.json</code> Êñá‰ª∂‰∏≠ËøõË°åËÆæÁΩÆÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">// package.json
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  ...
</span></span><span class="line"><span class="cl">  &#34;scripts&#34;: {
</span></span><span class="line"><span class="cl">    &#34;build&#34;: &#34;npm run clean &amp;&amp; cross-env NODE_ENV=production webpack&#34;,
</span></span><span class="line"><span class="cl">    &#34;clean&#34;: &#34;rimraf ./build &amp;&amp; mkdirp build&#34;,
</span></span><span class="line"><span class="cl">  }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊ†∑Ôºå‰∏çÁÆ°ÁîµËÑëÊòØ Windows Á≥ªÁªüËøòÊòØ Mac Á≥ªÁªü Ôºå‰∏çÁÆ°Áî®ÁöÑ Powershell ËøòÊòØ GitÔºå‰Ω†ÈÉΩÂèØ‰ª•Ê≠£Â∏∏ËÆæÁΩÆ Nodejs ÁéØÂ¢ÉÂèòÈáè‰∫Ü„ÄÇÊ≥®ÊÑèÔºå<code>cross-env NODE_ENV=production &amp;&amp; npm run clean &amp;&amp; webpack</code> Ê≠§Á±ªÁöÑËÆæÁΩÆ‰∏çËÉΩ‰ΩøÁéØÂ¢ÉÂèòÈáèÁîüÊïà„ÄÇÂéüÂõ†ÊòØ <code>&amp;&amp;</code> Á¨¶Âè∑ÊääÂëΩ‰ª§ËØ≠Âè•ÂàÜÁ¶ªÊàê‰∫ÜÂ§ö‰∏™ÔºåÊØè‰∏Ä‰∏™ÂëΩ‰ª§ÊâßË°åÁöÑÁéØÂ¢ÉÈÉΩÊòØÈöîÁ¶ªÁöÑÔºåËÄå <code>cross-env</code> Êó†Ê≥ï‰ΩúÁî®‰∫éÂÖ∂‰ªñÁéØÂ¢ÉÁöÑÂëΩ‰ª§„ÄÇ</p>
<h2 id="browserlist">Browserlist
</h2><p>Âú®‰∏çÂêåÁöÑÂâçÁ´ØÂ∑•ÂÖ∑‰πãÈó¥ÂÖ±Áî®ÁõÆÊ†áÊµèËßàÂô®Âíå node ÁâàÊú¨ÁöÑÈÖçÁΩÆÊñá‰ª∂„ÄÇÂÆÉ‰∏ªË¶ÅË¢´‰ª•‰∏ãÂ∑•ÂÖ∑‰ΩøÁî®(ËÆ∏Â§öÁöÑ webpack Êèí‰ª∂‰ºö‰æùËµñÂÆÉ)Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Autoprefixer
</span></span><span class="line"><span class="cl">Babel
</span></span><span class="line"><span class="cl">post-preset-env
</span></span><span class="line"><span class="cl">eslint-plugin-compat
</span></span><span class="line"><span class="cl">stylelint-unsupported-browser-features
</span></span><span class="line"><span class="cl">postcss-normalize
</span></span></code></pre></td></tr></table>
</div>
</div><p>Browserlist ÂèØ‰ª•ÁºñÂÜôÁöÑÂ≠óÊÆµÔºö</p>
<ul>
<li>defaults : Browserslist ÁöÑÈªòËÆ§ÊµèËßàÂô® (&gt; 0.5%,last 2 versions, Firefox ESR, not dead)„ÄÇ</li>
<li>5%:ÈÄöËøáÂÖ®ÁêÉ‰ΩøÁî®ÊÉÖÂÜµÁªüËÆ°‰ø°ÊÅØÈÄâÊã©ÁöÑÊµèËßàÂô®ÁâàÊú¨„ÄÇ &gt;=Ôºå&lt;Âíå&lt;=Â∑•‰ΩúËøá
<ul>
<li>5% in Us:‰ΩøÁî®ÁæéÂõΩ‰ΩøÁî®ÊÉÖÂÜµÁªüËÆ°‰ø°ÊÅØ„ÄÇÂÆÉÊé•Âèó‰∏§‰∏™Â≠óÊØçÁöÑÂõΩÂÆ∂/Âú∞Âå∫‰ª£Á†Å„ÄÇ</li>
<li>&gt;5%in alt-As:‰ΩøÁî®‰∫öÊ¥≤Âú∞Âå∫‰ΩøÁî®ÊÉÖÂÜµÁªüËÆ°‰ø°ÊÅØÔºåÊúâÂÖ≥ÊâÄÊúâÂå∫Âüü‰ª£Á†ÅÁöÑÂàóË°®ÔºåËØ∑ÂèÇËßÅ aniuse-lite/data/reqions</li>
<li>&gt;5%in my stats:‰ΩøÁî®Ëá™ÂÆö‰πâÁî®Ê≥ïÊï∞ÊçÆ</li>
<li>&gt;5% in browserslist-config-mycompany stats :‰ΩøÁî® Êù•Ëá™ÁöÑËá™ÂÆö‰πâ‰ΩøÁî®ÊÉÖÂÜµÊï∞ÊçÆ browserslist-onfig-mycompany/browserslist-stats,json.</li>
<li>cover 99.5%:Êèê‰æõË¶ÜÁõñÁéáÁöÑÊúÄÂèóÊ¨¢ËøéÁöÑÊµèËßàÂô®</li>
<li>cover 99.5%in us:‰∏é‰∏äËø∞Áõ∏ÂêåÔºå‰ΩÜÂõΩÂÆ∂/Âú∞Âå∫‰ª£Á†ÅÁî±‰∏§‰∏™Â≠óÊØçÁªÑÊàê</li>
<li>cover 99.5%in my stats:‰ΩøÁî®Ëá™ÂÆö‰πâÁî®Ê≥ïÊï∞ÊçÆ</li>
</ul>
</li>
<li>dead:24 ‰∏™ÊúàÂÜÖÊ≤°ÊúâÂÆòÊñπÊîØÊåÅÊàñÊõ¥Êñ∞ÁöÑÊµèËßàÂô®ÔºåÁé∞Âú®ÊòØ E 10 Mob 11 BlackBerry 10Blackery7ÔºåSamsung 4 Âíå OperaMobile 12.1.</li>
<li>last 2versions:ÊØè‰∏™ÊµèËßàÂô®ÁöÑÊúÄÂêé 2 ‰∏™ÁâàÊú¨„ÄÇ
<ul>
<li>last 2 Chrome versions:ÊúÄËøë 2 ‰∏™ÁâàÊú¨ÁöÑ Chrome ÊµèËßàÂô®</li>
<li>last2 major versions Êàñ last 2 ios major versions:ÊúÄËøë 2 ‰∏™‰∏ªË¶ÅÁâàÊú¨ÁöÑÊâÄÊúâÊ¨°Ë¶Å/Ë°•‰∏ÅÁâàÊú¨</li>
</ul>
</li>
<li>not ie&lt;= 8:ÊéíÈô§ÂÖàÂâçÊü•ËØ¢ÈÄâÊã©ÁöÑÊµèËßàÂô®„ÄÇ</li>
<li>browserslist config:Âú® Browserslist ÈÖçÁΩÆ‰∏≠ÂÆö‰πâÁöÑÊµèËßàÂô®„ÄÇÂú®Â∑ÆÂºÇÊúçÂä°‰∏≠ÂæàÊúâÁî®ÔºåÂèØÁî®‰∫é‰øÆÊîπÁî®Êà∑ÁöÑÈÖçÁΩÆ„ÄÇ</li>
</ul>
<p>ÂèØ‰ª•ÁºñÂÜôÁ±ª‰ºº‰∫éËøôÊ†∑ÁöÑÈÖçÁΩÆ:</p>
<blockquote>
<p>&gt; 1% last 2 versions not dead</p></blockquote>
<p>‰πãÂêéËøô‰∫õÂ∑•ÂÖ∑‰ºöÊ†πÊçÆÈÖçÁΩÆÊù•Ëé∑ÂèñÁõ∏ÂÖ≥ÁöÑÊµèËßàÂô®‰ø°ÊÅØÔºå‰ª•Êñπ‰æøÂÜ≥ÂÆöÊòØÂê¶ÈúÄË¶ÅËøõË°åÂÖºÂÆπÊÄßÁöÑÊîØÊåÅ:</p>
<ul>
<li>Êù°‰ª∂Êü•ËØ¢‰ΩøÁî®ÁöÑÊòØ caniuse-lite ÁöÑÂ∑•ÂÖ∑ÔºåËøô‰∏™Â∑•ÂÖ∑ÁöÑÊï∞ÊçÆÊù•Ëá™‰∫é caniuse ÁöÑÁΩëÁ´ô‰∏ä;</li>
</ul>
<p>Áõ¥Êé•‰ΩøÁî® browserslist ÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑Êü•ËØ¢Ê†πÊçÆÊù°‰ª∂ÂåπÈÖçÂà∞ÁöÑÊµèËßàÂô®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">npx browserslist &#34;&gt;1%, last 2 version, not dead&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/blogs/post/webpack/images/image-20220828190451254.png"
	width="877"
	height="638"
	srcset="/blogs/post/webpack/images/image-20220828190451254_hu_7ea9212c0663e781.png 480w, /blogs/post/webpack/images/image-20220828190451254_hu_d90b0d0f404741c3.png 1024w"
	loading="lazy"
	
		alt="image-20220828190451254"
	
	
		class="gallery-image" 
		data-flex-grow="137"
		data-flex-basis="329px"
	
></p>
<p>Browserlist ÂèØ‰ª•ÁºñÂÜôÁöÑ‰ΩçÁΩÆÔºö</p>
<ul>
<li>
<p>Âú® package.json ‰∏≠ÁöÑÈÖçÁΩÆ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;browserslist&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;last 1 version&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&gt; 1%&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;maintained node versions&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;not dead&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">ÊàñËÄÖ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s2">&#34;browserslist&#34;</span><span class="err">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;production&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&gt; 1%&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;ie 10&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;development&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;last 1 chrome version&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;last 1 firefox version&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ÂçïÁã¨ÁöÑ‰∏Ä‰∏™ÈÖçÁΩÆÊñá‰ª∂.browserslistrc Êñá‰ª∂</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># Ê≥®ÈáäÊòØËøôÊ†∑ÂÜôÁöÑÔºå‰ª•#Âè∑ÂºÄÂ§¥
</span></span><span class="line"><span class="cl">&gt; 1%  #‰ª£Ë°®ÂÖ®ÁêÉË∂ÖËøá1%‰ΩøÁî®ÁöÑÊµèËßàÂô®
</span></span><span class="line"><span class="cl">last 1 version #ÊúÄÂêéÁöÑ‰∏Ä‰∏™ÁâàÊú¨
</span></span><span class="line"><span class="cl">maintained node versions #ÊâÄÊúâËøòË¢´ node Âü∫Èáë‰ºöÁª¥Êä§ÁöÑ node ÁâàÊú¨
</span></span><span class="line"><span class="cl">not dead
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ÊàñËÄÖ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[production staging]
</span></span><span class="line"><span class="cl">&gt; 1%
</span></span><span class="line"><span class="cl">last 2 version
</span></span><span class="line"><span class="cl">not dead
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[development]
</span></span><span class="line"><span class="cl">last 1 chrome version
</span></span><span class="line"><span class="cl">last 1 firefox version
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">‰∏çÈÖçÁΩÆÈªòËÆ§‰∏∫Ôºö**&gt; 0.5%, last 2 versions, Firefox ESR, not dead**
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="webpack-dev-server">webpack-dev-server
</h2><div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">Á±ªÂà´</th>
          <th style="text-align: left">ÈÖçÁΩÆÂêçÁß∞</th>
          <th style="text-align: left">ÊèèËø∞</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">output</td>
          <td style="text-align: left">path</td>
          <td style="text-align: left">ÊåáÂÆöÊâìÂåÖÁîüÊàêÁöÑËæìÂá∫Âà∞Á°¨Áõò‰∏äÁöÑÁõÆÂΩï</td>
      </tr>
      <tr>
          <td style="text-align: left">output</td>
          <td style="text-align: left">publicPath</td>
          <td style="text-align: left">Ë°®Á§∫ÁöÑÊòØÊâìÂåÖÁîüÊàêÁöÑ index.html Êñá‰ª∂ÈáåÈù¢ÂºïÁî®ËµÑÊ∫êÁöÑÂâçÁºÄÔºåÂêåÊó∂Âä®ÊÄÅÂºïÂÖ•ÁöÑÂÖ∂‰ªñËÑöÊú¨‰πüÊòØÂü∫‰∫éËøô‰∏™Ë∑ØÂæÑÂéªËØ∑Ê±ÇÁöÑ</td>
      </tr>
      <tr>
          <td style="text-align: left">devServer</td>
          <td style="text-align: left">static</td>
          <td style="text-align: left">Áî®‰∫éÈÖçÁΩÆÊèê‰æõÈ¢ùÂ§ñÈùôÊÄÅÊñá‰ª∂ÂÜÖÂÆπÁöÑÁõÆÂΩï</td>
      </tr>
  </tbody>
</table></div>
<p>ÂÜÖÈÉ®‰æùËµñÁöÑÊòØ express Ê°ÜÊû∂„ÄÇonBeforeSetupMiddleware Âú® webpack-dev-server ÈùôÊÄÅËµÑÊ∫ê‰∏≠Èó¥‰ª∂Â§ÑÁêÜ‰πãÂâçÔºåÂèØ‰ª•Áî®‰∫éÊã¶Êà™ÈÉ®ÂàÜËØ∑Ê±ÇËøîÂõûÁâπÂÆöÂÜÖÂÆπÔºåÊàñËÄÖÂÆûÁé∞ÁÆÄÂçïÁöÑÊï∞ÊçÆ mock„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">static</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;public&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">port</span><span class="o">:</span> <span class="mi">8080</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">open</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">compress</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// ÂêØÂä®gzipÂéãÁº©
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">hot</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// ÂêØÂä®Ê®°ÂùóÁÉ≠Êõ¥Êñ∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">watchFiles</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;path&#34;</span><span class="p">],</span> <span class="c1">// ‰∏çÂÜôÂ∞±ÁõëÊéßÊâÄÊúâÊñá‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">historyApiFallback</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// ÂèÇÊï∞Áî®‰∫éËÆæÁΩÆÊòØÂê¶ÂêØÁî® HTML5 ÂéÜÂè≤ËÆ∞ÂΩï APIÔºåÁî®‰∫éÂ§ÑÁêÜÂçïÈ°µÂ∫îÁî®ÁöÑË∑ØÁî±ÈóÆÈ¢ò„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂΩì‰ΩøÁî®ÊµèËßàÂô®ÁöÑÂâçËøõ/ÂêéÈÄÄÊåâÈíÆÊó∂ÔºådevServer ‰ºöÂ∞ùËØïÊ†πÊçÆ URL Ë∑ØÂæÑÊü•ÊâæÂØπÂ∫îÁöÑÈùôÊÄÅËµÑÊ∫êÔºåÂ¶ÇÊûúÊâæ‰∏çÂà∞Â∞±ËøîÂõû 404„ÄÇÂ¶ÇÊûúÂêØÁî®‰∫Ü historyApiFallbackÔºåÂàô‰ºöÂ∞ÜËøô‰∫õËØ∑Ê±ÇÈáçÂÆöÂêëÂà∞ index.htmlÔºåÁÑ∂Âêé‰∫§ÁªôÂâçÁ´ØË∑ØÁî±Êù•Â§ÑÁêÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">proxy</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;/api&#34;</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;/api2&#34;</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">target</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3001&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">pathRewrite</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&#34;^/api2&#34;</span><span class="o">:</span> <span class="s2">&#34;&#34;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// webpack-dev-server ÂÜÖÈÉ®Â∞±ÊòØ‰∏Ä‰∏™expressÊúçÂä°Âô®ÔºådevServerÂ∞±ÊòØexpressÊâßË°åËøîÂõûÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">onBeforeSetupMiddleware</span><span class="p">(</span><span class="nx">devServer</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// express()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// ÁÆÄÂçïÊ®°Êãü‰∏Ä‰∏™ÂêéÁ´ØÊé•Âè£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">devServer</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/api/users&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">([{</span> <span class="nx">id</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}]);</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ΩøÁî® webpack-dev-server Êó∂ÔºåÂÜÖÈÉ®‰ºö‰ΩøÁî® webpack ÁöÑÈÖçÁΩÆÊñá‰ª∂Ê®°ÊãüÊâìÂåÖÔºåÂπ∂Â∞ÜÊâìÂåÖÂêéÁîüÊàêÊñá‰ª∂ÁöÑÊñá‰ª∂Ê†πÁõÆÂΩïÂíå static Â≠óÊÆµÊåáÂÆöÁöÑÊñá‰ª∂Â§πÂêàÂπ∂ÂêéÔºå‰Ωú‰∏∫ web ÊúçÂä°Âô®ÁöÑÊ†πÁõÆÂΩïÔºà/ÔºâÔºåÂΩìËÆøÈóÆËØ•Âú∞ÂùÄÊó∂ÔºåÈªòËÆ§ËÆøÈóÆÁöÑÂ∞±ÊòØÊ†πÁõÆÂΩï‰∏ãÁöÑ index.html Êñá‰ª∂„ÄÇËÄå devServer ÈÖçÁΩÆÈ°πÊåáÂÆöÁöÑÁõÆÂΩï‰∏≠ÁöÑÊñá‰ª∂‰πü‰ºöÁõ¥Êé•ÊîæÂú®Êú¨Âú∞ÊúçÂä°Âô®ÁöÑÊ†πÁõÆÂΩï‰∏ã„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="s2">&#34;http://www.baidu.com&#34;</span><span class="p">;</span> <span class="c1">// Ëøô‰∏™Â∞±ÊòØoutput‰∏≠publicPathÈÖçÁΩÆÈ°πËÆæÁΩÆÁöÑÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">f</span><span class="p">.</span><span class="nx">j</span> <span class="o">=</span> <span class="p">(</span><span class="nx">chunkId</span><span class="p">,</span> <span class="nx">promises</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nx">installedChunkData</span> <span class="o">=</span> <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">promises</span><span class="p">.</span><span class="nx">push</span><span class="p">((</span><span class="nx">installedChunkData</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">promise</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">p</span> <span class="o">+</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">u</span><span class="p">(</span><span class="nx">chunkId</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">l</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="css-loader-ÈÖçÁΩÆ">css-loader ÈÖçÁΩÆ
</h2><p>css-loaderÔºöÂ§ÑÁêÜ CSS ‰∏≠ÁöÑ <code>url</code> ‰∏é <code>@import</code>ÔºåÂπ∂Â∞ÜÂÖ∂ËßÜ‰∏∫Ê®°ÂùóÂºïÂÖ•ÔºåÊ≠§Â§ÑÊòØÈÄöËøá postcss Êù•Ëß£ÊûêÂ§ÑÁêÜ„ÄÇ<code>css-loader</code> ÁöÑÂéüÁêÜÂ∞±ÊòØÂÄüÂä© postcssÔºåÁî® <code>postcss-value-parser</code> Ëß£Êûê CSS ‰∏∫ ASTÔºåÂπ∂Â∞Ü CSS ‰∏≠ÁöÑ <code>url()</code> ‰∏é <code>@import</code> Ëß£Êûê‰∏∫Ê®°Âùó„ÄÇ</p>
<p>Â∞Ü CSS Êñá‰ª∂‰∏≠ÁöÑÊ†∑Âºè‰ª£Á†ÅËΩ¨Êç¢Êàê JavaScript ÂØπË±°ÔºåÂπ∂‰ª• commonjs ÂÜôÊ≥ïÂØºÂá∫Ôºå‰ª•‰æø‰∫éÂÖ∂‰ªñ Loader ÊàñÊèí‰ª∂ËøõË°åÂ§ÑÁêÜ„ÄÇ</p>
<p>style-loaderÔºö‰ΩøÁî® DOM API Âä†ËΩΩ CSS ËµÑÊ∫êÔºå‰ΩøÂæó CSS ÈúÄË¶ÅÂú® JS ËµÑÊ∫êÂä†ËΩΩÂÆåÂêéÈÄöËøáÊâßË°å js Âä®ÊÄÅÂàõÂª∫ style Ê†áÁ≠æÔºåÂÆπÊòìÂá∫Áé∞È°µÈù¢ÊäñÂä®ÔºåÊÄßËÉΩ‰Ωé‰∏îÂØπ‰∫é SSR ‰∏çÂèãÂ•Ω„ÄÇÁî±‰∫éÊÄßËÉΩÈúÄË¶ÅÔºåÂú®Á∫ø‰∏äÈÄöÂ∏∏ÈúÄË¶ÅÂçïÁã¨Âä†ËΩΩ CSS ËµÑÊ∫êÔºåËøôË¶ÅÊ±ÇÊâìÂåÖÂô®ËÉΩÂ§üÂ∞Ü CSS ÊâìÂåÖÔºåÊ≠§Êó∂ÈúÄË¶ÅÂÄüÂä©‰∫é <a class="link" href="https://github.com/webpack-contrib/mini-css-extract-plugin"  target="_blank" rel="noopener"
    >mini-css-extract-plugin(opens in a new tab)</a> Â∞Ü CSS ÂçïÁã¨ÊäΩÁ¶ªÂá∫Êù•„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">test</span><span class="o">:</span><span class="sr">/\.css$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">use</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;style-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">loader</span><span class="o">:</span><span class="s1">&#39;css-loader&#39;</span><span class="p">,</span>  <span class="c1">//‰ºöËØªÂèñÊ∫êCSSÊñá‰ª∂ÔºåÂπ∂‰∏îËá™Âä®ÂèØ‰ª•ËØÜÂà´ÈáåÈù¢importËØ≠Âè•Âπ∂ÊääÂØπÂ∫îCSSÂÜÖÂÆπÂêàÂπ∂ËøáÊù•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">options</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">url</span><span class="o">:</span> <span class="kr">boolean</span><span class="p">,</span>   <span class="c1">// ÊØîÂ¶ÇËÉåÊôØÂõæ‰∏≠ÁöÑurlËÉΩÂê¶Ë¢´ËØÜÂà´
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="kr">import</span><span class="o">:</span><span class="kr">boolean</span><span class="p">,</span> <span class="c1">// ÊòØÂê¶ÂÖÅËÆ∏css‰∏≠‰ΩøÁî®@import cssËØ≠Ê≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">modules</span><span class="o">:</span><span class="kr">boolean</span><span class="p">,</span>  <span class="c1">// ÊòØÂê¶ÂºÄÂêØcssÊ®°ÂùóÂåñ   import style from &#39;./index.css&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">source</span><span class="o">-</span><span class="nx">map</span><span class="o">:</span><span class="kr">boolean</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">importLoaders</span><span class="o">:</span><span class="kr">boolean</span> <span class="o">|</span> <span class="nx">number</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">esModules</span><span class="o">:</span><span class="kr">boolean</span>  <span class="c1">// import style from &#39;./index.css&#39;   style.defalut.xxx  ÈªòËÆ§‰∏∫true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>importLoaders:boolean | number, // importloaders Allows to enables/disables or setups number of loaders applied before CSS loader for @import at-rules</p></blockquote>
<p>css-loader Âú® css Êñá‰ª∂‰∏≠ÈªòËÆ§ÊîØÊåÅ <strong>~ Á¨¶Âè∑</strong>Ë°®Á§∫ node_modules Êñá‰ª∂Ë∑ØÂæÑÔºå‰∏çÈúÄË¶ÅÁî®Êà∑ÂéªÈÖçÁΩÆ„ÄÇ</p>
<ul>
<li>@ÊòØ webpack ËÆæÁΩÆÁöÑË∑ØÂæÑÂà´ÂêçÔºåÂú® webpack ÈÖçÁΩÆÊñá‰ª∂‰∏≠ËÆæÁΩÆ‰ª•ÂêéÔºå‰πüÂèØ‰ª•Âú® css ‰∏≠‰ΩøÁî®</li>
<li>Starting with version 4.0.0, absolute paths are parsed based on the server root</li>
<li>To import assets from a node modules path (include resolve.modules) and for alias, prefix it with a ~</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">resolve</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">alias</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="err">&#34;@</span><span class="s1">&#39;:path.resolve(&#39;</span><span class="nx">src</span><span class="err">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="nt">bg</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">width</span><span class="p">:</span><span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span><span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-image</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="sx">images/kf.jpg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-image</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="sx">@/images/kf.jpg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-image</span><span class="p">:;</span> <span class="err">url(~module/images/a.jpg)</span><span class="p">;</span>  <span class="err">//</span> <span class="err">Âèñnode_modules/module/images/a.jpg</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏çËÉΩÂú® js Êñá‰ª∂‰∏≠‰∏çÈÖçÁΩÆÂ∞±‰ΩøÁî®‚Äú~‚ÄùÔºåÊØîÂ¶Ç‰∏çËÉΩÔºöimport img from &lsquo;~module/images/a.jpg&rsquo;</p>
<p>node-sass sass-loaderÔºõsassÔºöËÄÅÁâàÂêéÁºÄÔºõscssÔºöÊñ∞ÁâàÊú¨ÂêéÁºÄ</p>
<p>node-sass Ë¥üË¥£Â∞Ü scss ÊàñËÄÖ sass ÁºñËØë‰∏∫ cssÔºåÂéüÂßãÁöÑ sass ÂåÖ‰ΩøÁî® ruby ÂÜôÁöÑÔºåÊú¨Âú∞ÂÆâË£ÖÁöÑËØùÈúÄË¶ÅÁºñËØëÔºånode-sass ÊòØ node ÂÜôÁöÑÔºåÊØîËæÉÂ•ΩÂÆâË£ÖÊâßË°å„ÄÇ</p>
<h2 id="webpack-dev-middleware">webpack-dev-middleware
</h2><p><a class="link" href="https://www.npmjs.com/package/"  target="_blank" rel="noopener"
    >webpack-dev-middleware</a>Â∞±ÊòØÂú® Express ‰∏≠Êèê‰æõ <code>webpack-dev-server</code> ÈùôÊÄÅÊúçÂä°ËÉΩÂäõÁöÑ‰∏Ä‰∏™‰∏≠Èó¥‰ª∂</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install webpack-dev-middleware --save-dev
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;express&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">webpack</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;webpack&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">webpackDevMiddleware</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;webpack-dev-middleware&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">webpackOptions</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./webpack.config&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">compiler</span> <span class="o">=</span> <span class="nx">webpack</span><span class="p">(</span><span class="nx">webpackOptions</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">webpackDevMiddleware</span><span class="p">(</span><span class="nx">compiler</span><span class="p">,</span> <span class="p">{}));</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>webpack-dev-server ÁöÑÂ•ΩÂ§ÑÊòØÁõ∏ÂØπÁÆÄÂçïÔºåÁõ¥Êé•ÂÆâË£Ö‰æùËµñÂêéÊâßË°åÂëΩ‰ª§Âç≥ÂèØ</li>
<li>ËÄå‰ΩøÁî®<code>webpack-dev-middleware</code>ÁöÑÂ•ΩÂ§ÑÊòØÂèØ‰ª•Âú®Êó¢ÊúâÁöÑ Express ‰ª£Á†ÅÂü∫Á°Ä‰∏äÂø´ÈÄüÊ∑ªÂä† webpack-dev-server ÁöÑÂäüËÉΩÔºåÂêåÊó∂Âà©Áî® Express Êù•Ê†πÊçÆÈúÄË¶ÅÊ∑ªÂä†Êõ¥Â§öÁöÑÂäüËÉΩÔºåÂ¶Ç mock ÊúçÂä°„ÄÅ‰ª£ÁêÜ API ËØ∑Ê±ÇÁ≠â</li>
</ul>
<h2 id="css-ÂÖºÂÆπÊÄß">CSS ÂÖºÂÆπÊÄß
</h2><p>PostCSS ÊòØ‰∏Ä‰∏™Áã¨Á´ãÁöÑÂ∑•ÂÖ∑ÔºåÂèØ‰ª•ËÑ±Á¶ª webpack ÂçïÁã¨‰ΩøÁî®Ôºàpostcss-cli Âú®ÂëΩ‰ª§Ë°åÂçïÁã¨‰ΩøÁî® postcss Êó∂ÈúÄË¶ÅÂÆâË£ÖËØ•Êèí‰ª∂Ôºâ„ÄÇÂèØ‰ª•ÈÄöËøá JavaScript Êù•ËΩ¨Êç¢ css Ê†∑ÂºèÔºåcss ÁöÑËΩ¨Êç¢ÂíåÈÄÇÈÖçÔºåËá™Âä®Ê∑ªÂä†ÊµèËßàÂô®ÂéÇÂïÜÂâçÁºÄÔºåcss Ê†∑ÂºèÈáçÁΩÆÔºåcss Âçï‰ΩçËΩ¨Êç¢„ÄÇ</p>
<ul>
<li><code>PostCSS</code> Â∞Ü CSS Ëß£ÊûêÊàê ASTÔºàÊäΩË±°ËØ≠Ê≥ïÊ†ëÔºâÔºåÁÑ∂Âêé‰ΩøÁî®Êèí‰ª∂ÂØπ AST ËøõË°åÂ§ÑÁêÜÔºåÊúÄÂêéÂ∞ÜÂ§ÑÁêÜÂêéÁöÑ AST ËΩ¨Êç¢‰∏∫ CSS ‰ª£Á†Å</li>
<li><a class="link" href="https://github.com/postcss/autoprefixer"  target="_blank" rel="noopener"
    >autoprefixer</a> ÊòØ PostCSS ÁöÑ‰∏Ä‰∏™Êèí‰ª∂ÔºåÂÆÉÂèØ‰ª•Ê†πÊçÆÊåáÂÆöÁöÑÊµèËßàÂô®ÁâàÊú¨Ëá™Âä®Ê∑ªÂä†ÊâÄÈúÄÁöÑÊµèËßàÂô®ÂâçÁºÄ„ÄÇÈÄöËøá‰ΩøÁî® autoprefixerÔºåÊàë‰ª¨ÂèØ‰ª•ÈÅøÂÖçÊâãÂä®Ê∑ªÂä†ÊµèËßàÂô®ÂâçÁºÄÁöÑÈ∫ªÁÉ¶ÔºåÂêåÊó∂‰πüÂèØ‰ª•Á°Æ‰øùÈ°πÁõÆÂú®ÂêÑ‰∏™ÊµèËßàÂô®‰∏≠Ê≠£Á°ÆÂú∞ÊòæÁ§∫</li>
<li><a class="link" href="https://github.com/csstools/postcss-preset-env"  target="_blank" rel="noopener"
    >postcss-preset-env</a> ÊòØ PostCSS ÁöÑ‰∏Ä‰∏™Êèí‰ª∂ÈõÜÂêàÔºåÂÆÉÂèØ‰ª•‰ΩøÁî®Êú™Êù•ÁöÑ CSS ËØ≠Ê≥ïÔºåËÄå‰∏çÈúÄË¶ÅÁ≠âÂæÖÊµèËßàÂô®ÊîØÊåÅ„ÄÇpostcss-preset-env ÂåÖÂê´‰∫Ü‰∏Ä‰∫õÂ∏∏Áî®ÁöÑ CSS È¢ÑÂ§ÑÁêÜÂô®ÁöÑËØ≠Ê≥ïÔºåÂ¶Ç Sass Âíå LessÔºå‰ª•Âèä‰∏Ä‰∫õÊú™Êù•ÁöÑ CSS ËØ≠Ê≥ïÔºåÂ¶Ç CSS Grid„ÄÅCSS Variables Á≠â</li>
<li><a class="link" href="https://github.com/shellscape/postcss-less"  target="_blank" rel="noopener"
    >postcss-less</a> ÊòØ PostCSS ÁöÑ‰∏Ä‰∏™Êèí‰ª∂ÔºåÂÆÉÂèØ‰ª•ËÆ©Êàë‰ª¨‰ΩøÁî® Less È¢ÑÂ§ÑÁêÜÂô®ÁöÑËØ≠Ê≥ïÔºå‰ªéËÄåÂèØ‰ª•Êõ¥Êñπ‰æøÂú∞ÁºñÂÜô CSS ‰ª£Á†Å„ÄÇÈÄöËøá‰ΩøÁî® postcss-lessÔºåÂèØ‰ª•Âú® Webpack ÊûÑÂª∫È°πÁõÆÊó∂Ëá™Âä®Â∞Ü Less ‰ª£Á†ÅËΩ¨Êç¢‰∏∫Ê†áÂáÜÁöÑ CSS ‰ª£Á†Å</li>
</ul>
<p>ËøòÈúÄË¶ÅÁªìÂêà Browserlist ÁöÑÁâàÊú¨ÂÖºÂÆπÈÖçÁΩÆÊñá‰ª∂Êù•‰ΩøÁî®„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm i postcss-loader postcss-preset-env -D
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><a class="link" href="https://github.com/webpack-contrib/postcss-loader"  target="_blank" rel="noopener"
    >postcss-loader</a>ÂèØ‰ª•‰ΩøÁî® PostCSS Â§ÑÁêÜ CSS</li>
<li><a class="link" href="https://github.com/csstools/postcss-preset-env"  target="_blank" rel="noopener"
    >postcss-preset-env</a>ÊääÁé∞‰ª£ÁöÑ CSS ËΩ¨Êç¢ÊàêÂ§ßÂ§öÊï∞ÊµèËßàÂô®ËÉΩÁêÜËß£ÁöÑÊèí‰ª∂ÈõÜÂêà</li>
<li>PostCSS Preset Env Â∑≤ÁªèÂåÖÂê´‰∫Ü<code>autoprefixer</code>Âíå<code>browserlists</code>ÈÄâÈ°π</li>
</ul>
<p>postcss ÈÖçÁΩÆÊñá‰ª∂Ôºö</p>
<p>postcss.config.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">postcssPresetEnv</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;postcss-preset-env&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span><span class="p">[</span><span class="nx">postcssPresetEnv</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">browsers</span><span class="o">:</span> <span class="s1">&#39;last 5 version&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">})]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// require(&#34;autoperfixer&#34;)  or
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// require(&#34;postcss-preset-env&#34;) or
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s2">&#34;postcss-preset-env&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">test</span><span class="o">:</span><span class="sr">/\.css/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">use</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">loader</span><span class="o">:</span><span class="s1">&#39;style-loader&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="s1">&#39;css-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">loader</span><span class="o">:</span><span class="s1">&#39;postcss-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">options</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">postcssOptions</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">plugins</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">              <span class="c1">// require(&#34;autoprefixer&#34;),//Ëøô‰∏™Êèí‰ª∂ÂèØ‰ª•‰∏çÂÜçÂÜô‰∫ÜÔºåÂõ†‰∏∫postcss-preset-env‰∏≠ÂÜÖÁΩÆ‰ΩøÁî®‰∫Üautoprefixer
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>              <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;postcss-preset-env&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">              <span class="c1">//or
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>              <span class="c1">// require(&#39;pluginName&#39;)(‰º†ÂèÇ)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="p">]</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="c1">// plugins:[&#34;postcss-preset-env&#34;]   ËøôÊòØÂè¶‰∏ÄÁßçÂÜôÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>    <span class="c1">//postcss-loaderÂÜÖÈÉ®‰ºöË∞ÉÁî®optionsÈÖçÁΩÆ‰∏≠ÊåáÂÆöÁöÑpostcssÊèí‰ª∂ÂØπÊ†∑ÂºèÊñá‰ª∂Âä†ÂÖºÂÆπÊÄßÂâçÁºÄ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ËµÑÊ∫êÊ®°Âùó">ËµÑÊ∫êÊ®°Âùó
</h2><ul>
<li><a class="link" href="https://webpack.js.org/configuration/module/#rule"  target="_blank" rel="noopener"
    >Rule.type</a></li>
<li><a class="link" href="https://webpack.js.org/guides/asset-modules/"  target="_blank" rel="noopener"
    >asset-modules</a></li>
</ul>
<p>type ÁöÑÂõõÁßçÁ±ªÂûãÔºö</p>
<ol>
<li>asset/resource ÁîüÊàêÂçïÁã¨ÁöÑÊñá‰ª∂Âπ∂ÂØºÂá∫ URLÔºåÂú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå‰ΩøÁî®<code>asset/resource</code>Á±ªÂûãÁöÑÂä†ËΩΩÂô®‰ºöÁîüÊàêÂ∏¶Êúâ<code>[hash][ext][query]</code>ÂêéÁºÄÁöÑÊñá‰ª∂Âêç„ÄÇÂ¶ÇÊûúÈúÄË¶ÅËá™ÂÆö‰πâÊñá‰ª∂ÂêçÔºåÂèØ‰ª•ÈÄöËøáËÆæÁΩÆ<code>output.assetModuleFilename</code>Â±ûÊÄßËøõË°åÊéßÂà∂</li>
<li>asset/source ÂØºÂá∫ËµÑ‰∫ßÁöÑÊ∫ê‰ª£Á†Å</li>
<li>asset/inline ÂØºÂá∫ËµÑ‰∫ßÁöÑÊï∞ÊçÆ URI</li>
<li>asset ‰ºöËá™Âä®ÈÄâÊã©ÂØºÂá∫Êï∞ÊçÆ URI ËøòÊòØÁîüÊàêÂçïÁã¨ÁöÑÊñá‰ª∂,ÂèØ‰ª•ËÆæÁΩÆÊñá‰ª∂Â§ßÂ∞èÈôêÂà∂Êù•ÂÆûÁé∞</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">output</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span><span class="s1">&#39;js/bundle.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="s2">&#34;./build&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">assetModuleFilename</span><span class="o">:</span><span class="s2">&#34;img/[name].[hash:6][ext]&#34;</span>     <span class="c1">//Ëøô‰ºöÊòØ‰∏ãÈù¢ÂõæÁâáËµÑÊ∫êÊâìÂåÖÂêéÂ≠òÊîæ‰∫ÜÁõÆÂΩï,ÊâÄÊúâÈÄöËøá assetModuleÊâìÂåÖÁöÑÊñá‰ª∂ÈÉΩÊîæÂú®ËÆæÁΩÆÁöÑÂÄºÁöÑÁõÆÂΩï‰∏ãÔºåÂΩìÁÑ∂ÂêéÈù¢ÂèØ‰ª•ÈíàÂØπÊØè‰∏™loaderËøõË°å‰∏çÂêåÁöÑÈÖçÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">test</span><span class="o">:</span><span class="sr">/\.(jpg|png|svg|gif|jpeg)$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   	<span class="nx">type</span><span class="o">:</span><span class="s2">&#34;asset/resource&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>ËµÑÊ∫êÊ®°ÂùóÊòØ‰∏ÄÁßçÊ®°ÂùóÁ±ªÂûãÔºåÂÆÉÂÖÅËÆ∏‰ΩøÁî®ËµÑÊ∫êÊñá‰ª∂ÔºàÂ≠ó‰ΩìÔºåÂõæÊ†áÁ≠âÔºâËÄåÊó†ÈúÄÈÖçÁΩÆÈ¢ùÂ§ñ loader</p>
</li>
<li>
<p><code>raw-loader</code> =&gt; <code>asset/source</code> ÂØºÂá∫ËµÑÊ∫êÁöÑÊ∫ê‰ª£Á†Å</p>
</li>
<li>
<p><code>file-loader</code> =&gt; <code>asset/resource</code> ÂèëÈÄÅ‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊñá‰ª∂Âπ∂ÂØºÂá∫ URL</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">output</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span><span class="s1">&#39;bundle.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="s2">&#34;./build&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">test</span><span class="o">:</span><span class="sr">/\.(jpg|png|svg|gif|jpeg)$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">type</span><span class="o">:</span><span class="s2">&#34;asset/resource&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">generator</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filename</span><span class="o">:</span><span class="s2">&#34;img/[name].[hash:6][ext]&#34;</span>   <span class="c1">//img‰ºöÊòØÂõæÁâáËµÑÊ∫êÊâìÂåÖÂêéÂ≠òÊîæ‰∫ÜÁõÆÂΩï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><code>url-loader</code> =&gt; <code>asset/inline</code> ÂØºÂá∫‰∏Ä‰∏™ËµÑÊ∫êÁöÑ base64</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">output</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">filename</span><span class="o">:</span><span class="s1">&#39;bundle.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">path</span><span class="o">:</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="s2">&#34;./build&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">test</span><span class="o">:</span><span class="sr">/\.(jpg|png|svg|gif|jpeg)$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">type</span><span class="o">:</span><span class="s2">&#34;asset/inline&#34;</span>  <span class="c1">// ‰∏çË¶ÅÈÖçÁΩÆÊñá‰ª∂ÊâìÂåÖË∑ØÂæÑÔºåÂõ†‰∏∫Ê≤°ÊúâËæìÂá∫Êñá‰ª∂ÔºåÈÉΩÂú®js‰∏≠‰ª•base64Ë°®Á§∫‰∫Ü
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>asset Âú®ÂØºÂá∫‰∏Ä‰∏™ data URI ÂíåÂèëÈÄÅ‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊñá‰ª∂‰πãÈó¥Ëá™Âä®ÈÄâÊã©„ÄÇ‰πãÂâçÈÄöËøá‰ΩøÁî® <code>url-loader</code>ÔºåÂπ∂‰∏îÈÖçÁΩÆËµÑÊ∫ê‰ΩìÁßØÈôêÂà∂ÂÆûÁé∞</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">output</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">filename</span><span class="o">:</span><span class="s1">&#39;bundle.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">path</span><span class="o">:</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="s2">&#34;./build&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">test</span><span class="o">:</span><span class="sr">/\.(jpg|png|svg|gif|jpeg)$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">type</span><span class="o">:</span><span class="s2">&#34;asset&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">generator</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span><span class="s2">&#34;img/[name].[hash:6][ext]&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">parser</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">dataUrlCondition</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">maxSize</span><span class="o">:</span> <span class="mi">10</span> <span class="o">*</span><span class="mi">1024</span>   <span class="c1">// Â∞è‰∫éËØ•‰ΩìÁßØÔºà10kbÔºâÂàôÊâìÂåÖ‰∏∫base64
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">test</span><span class="o">:</span><span class="sr">/\.(ttf|eot|woff|woff2)$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">type</span><span class="o">:</span><span class="s1">&#39;asset/resource&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">generator</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">filename</span><span class="o">:</span><span class="s2">&#34;font/[name].[ext]&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="query">query
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">assetModuleFilename:&#39;assets/[hash][ext][query]&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p>query Ë°®Á§∫Êü•ËØ¢ÂèÇÊï∞ÔºåÊØîÂ¶ÇÂú®Ê∫êÁ†Å‰∏≠Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">png</span> <span class="nx">from</span> <span class="s2">&#34;./assets/images/logo.png?time=2022-8-21&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÇ£‰πàÊâìÂåÖÂêéÁîüÊàêÁöÑÔºåÂú®ÂºïÂÖ•Ëøô‰∏™Êñá‰ª∂ÁöÑÊó∂ÂÄô‰ºöÂú® url Âú∞ÂùÄÁöÑ query ‰∏≠Âä†‰∏ä‰∏äÈù¢ËÆæÁΩÆÁöÑÂÄº„ÄÇ</p>
<p>È°πÁõÆ‰∏≠‰ΩøÁî®ÂõæÁâáÔºö</p>
<ul>
<li>
<p>css ‰∏≠ background-image</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">#</span><span class="nn">box</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-image</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s2">&#34;../asset/images/xx/xxx.jpg&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>img Ê†áÁ≠æÁöÑ src Â±ûÊÄß</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">imgEl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nx">imgEl</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./src/asset/images/xx/xx.jpg&#34;</span><span class="p">).</span><span class="k">default</span><span class="p">;</span> <span class="c1">//  file-loader 5ÁâàÊú¨‰∏≠ÁöÑÁâπÁÇπ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">imgSrc</span> <span class="nx">from</span> <span class="s2">&#34;./src/asset/images/xx/xx.jpg&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">imgEl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nx">imgEl</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">imgSrc</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p>ÊúâÊó∂ÁªèËøá webpack ÊâìÂåÖÂêéÁöÑÊñá‰ª∂Â∏åÊúõ‰øùÁïôÊ∫êÊñá‰ª∂ÁöÑÂêçÂ≠óÂÜçÂ§ñÂä†‰∏Ä‰∫õÁâπÂà´ÁöÑÊ†áËØÜÁ¨¶ËøõË°åË°®Á§∫„ÄÇËøôÊó∂ÂÄôÂèØ‰ª•ÂÄüÂä© webpack ‰∏≠Âç†‰ΩçÁ¨¶Êù•ÂÆûÁé∞„ÄÇÂ∏∏Áî®ÁöÑÂç†‰ΩçÁ¨¶Ôºö</p>
<ul>
<li>
<p>[ext] Êñá‰ª∂Êâ©Â±ïÂêç</p>
</li>
<li>
<p>[name] ÂéüÊñá‰ª∂Âêç</p>
</li>
<li>
<p>[hash] Êú¨Âú∞ÊâìÂåÖÁöÑ hash ÂÄº</p>
</li>
<li>
<p>[contentHash] ËØ•Êñá‰ª∂ÂÜÖÂÆπÂØπÂ∫îÁöÑ hash ÂÄº</p>
</li>
<li>
<p>[hash:length] ÊåáÂÆöÈïøÂ∫¶ÁöÑ hash ÂÄº</p>
</li>
<li>
<p>[path] Êñá‰ª∂Áõ∏ÂØπ‰∫é webpack ÈÖçÁΩÆÊñá‰ª∂ÁöÑË∑ØÂæÑ</p>
</li>
</ul>
<p>Áé∞Âú®Êó†Ê≥ïÁõ¥Êé•Âú® webpack5 ‰∏≠‰ΩøÁî® file-loaderÔºåurl-loader Êù•ÊâìÂåÖ CSS Êñá‰ª∂‰∏≠ÁöÑÂõæÁâá‰∫ÜÔºåËÄåÈúÄË¶ÅÊîπÂä®Ôºö</p>
<p>ÂÖ∑‰ΩìÂèÇËÄÉÊñáÁ´†https://blog.csdn.net/w184167377/article/details/118930758</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="nx">test</span><span class="o">:</span> <span class="sr">/\.(jpe?g|png|svg|gif)$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">loader</span><span class="o">:</span> <span class="s2">&#34;url-loader&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;[name]-[hash:6].[ext]&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">esModule</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">limit</span><span class="o">:</span> <span class="mi">100</span> <span class="o">*</span> <span class="mi">1024</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"> <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;javascript/auto&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂõæÁâáÂéãÁº©">ÂõæÁâáÂéãÁº©
</h3><ul>
<li>image-webpack-loader ÂèØ‰ª•Âú® Webpack ÊâìÂåÖËøáÁ®ã‰∏≠ÂØπÂõæÁâáËøõË°å‰ºòÂåñÂíåÂéãÁº©Ôºå‰ªéËÄåÂáèÂ∞èÂõæÁâáÊñá‰ª∂ÁöÑÂ§ßÂ∞èÔºåÊèêÈ´òÈ°µÈù¢Âä†ËΩΩÈÄüÂ∫¶ÂíåÂìçÂ∫îÈÄüÂ∫¶</li>
<li>Ëøô‰∏™Â∫ìÁõ¥Êé•ÂÆâË£ÖÁöÑËØùÔºåÊØîËæÉÈöæÂÆâË£ÖÊàêÂäüÔºåÂõ†‰∏∫ÈáåÈù¢‰æùËµñ‰∫Ü‰∏Ä‰∫õ‰∫åËøõÂà∂Êñá‰ª∂ÈúÄË¶ÅÁºñËØëÔºåÁΩëÁªúÁéØÂ¢É‰∏çÂ•ΩÁöÑËØùÔºåÂ∞±ÈöæÂÆâË£Ö‰∏ä</li>
<li>ÂÆÉÁöÑÂ∫ïÂ±Ç‰æùËµñ‰∫é imagemin Âíå‰∏ÄÁ≥ªÂàóÁöÑÂõæÂÉè‰ºòÂåñÂ∑•ÂÖ∑ÔºåÂåÖÊã¨ mozjpeg„ÄÅoptipng„ÄÅpngquant„ÄÅsvgo„ÄÅgifsicle Âíå webp Á≠âÔºåÂèØ‰ª•Ëá™Âä®ÈÄâÊã©ÊúÄ‰ºòÁöÑ‰ºòÂåñÂ∑•ÂÖ∑ÂØπÂõæÁâáËøõË°åÂ§ÑÁêÜ
<ul>
<li>optipngÔºöÁî®‰∫éÂéãÁº© PNG ÂõæÁâáÁöÑÈÖçÁΩÆÈ°π</li>
<li>pngquantÔºöÂêåÊ†∑Áî®‰∫éÂéãÁº© PNG ÂõæÁâáÁöÑÈÖçÁΩÆÈ°πÔºåÂèØ‰ª•ËÆæÁΩÆÂõæÁâáË¥®ÈáèÂíåÂéãÁº©ÈÄüÂ∫¶</li>
<li>svgoÔºöÁî®‰∫éÂéãÁº© SVG ÂõæÁâáÁöÑÈÖçÁΩÆÈ°πÔºåÂåÖÂê´Â§ö‰∏™Êèí‰ª∂</li>
<li>gifsicleÔºöÁî®‰∫éÂéãÁº© Gif ÂõæÁâáÁöÑÈÖçÁΩÆÈ°π</li>
<li>webpÔºöÁî®‰∫éÂ∞Ü JPG/PNG ÂõæÁâáÂéãÁº©Âπ∂ËΩ¨Êç¢‰∏∫ WebP ÂõæÁâáÊ†ºÂºèÁöÑÈÖçÁΩÆÈ°π</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">   {
</span></span><span class="line"><span class="cl">        test: /\.(png)$/,
</span></span><span class="line"><span class="cl">        type: &#39;asset/resource&#39;
</span></span><span class="line"><span class="cl">      },
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        test: /\.(jpg)$/,
</span></span><span class="line"><span class="cl">        type: &#34;asset/inline&#34;
</span></span><span class="line"><span class="cl">      },
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        test: /\.(bmp)$/,
</span></span><span class="line"><span class="cl">        type: &#34;asset&#34;,
</span></span><span class="line"><span class="cl">        parser: {
</span></span><span class="line"><span class="cl">          dataUrlCondition: {
</span></span><span class="line"><span class="cl">            maxSize: 1024
</span></span><span class="line"><span class="cl">          }
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">      },
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        test: /\.svg$/i,
</span></span><span class="line"><span class="cl">       type: &#34;asset/source&#34;
</span></span><span class="line"><span class="cl">      },
</span></span><span class="line"><span class="cl"><span class="gi">+     {
</span></span></span><span class="line"><span class="cl"><span class="gi">+       // ÂåπÈÖçÊñá‰ª∂ÁöÑÊ≠£ÂàôË°®ËææÂºèÔºåËøôÈáåË°®Á§∫ÂåπÈÖçJPG„ÄÅPNG„ÄÅGIFÂíåSVGÊ†ºÂºèÁöÑÂõæÁâáÊñá‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="gi">+       test: /\.(jpe?g|png|gif|svg)$/i,
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>	     type:&#39;xxxx&#39;  // ‰πüÂèØ‰ª•Âú®ËøôÈáåËÆæÁΩÆ
</span></span><span class="line"><span class="cl"><span class="gi">+       use: [
</span></span></span><span class="line"><span class="cl"><span class="gi">+         {
</span></span></span><span class="line"><span class="cl"><span class="gi">+            // ‰ΩøÁî®image-webpack-loaderÂØπÂõæÁâáËøõË°å‰ºòÂåñÂíåÂéãÁº©
</span></span></span><span class="line"><span class="cl"><span class="gi">+           loader: &#39;image-webpack-loader&#39;,
</span></span></span><span class="line"><span class="cl"><span class="gi">+           options: {
</span></span></span><span class="line"><span class="cl"><span class="gi">+             // ÊòØÂê¶Á¶ÅÁî®ÂõæÁâá‰ºòÂåñÂíåÂéãÁº©
</span></span></span><span class="line"><span class="cl"><span class="gi">+             disable: process.env.NODE_ENV === &#39;development&#39;,
</span></span></span><span class="line"><span class="cl"><span class="gi">+             mozjpeg: {
</span></span></span><span class="line"><span class="cl"><span class="gi">+               progressive: true, // ÊòØÂê¶ÂºÄÂêØÊ∏êËøõÂºèJPEGÔºåÂèØ‰ª•ÊúâÊïàÊèêÂçáJPEGÂõæÁâáÂä†ËΩΩÈÄüÂ∫¶
</span></span></span><span class="line"><span class="cl"><span class="gi">+               quality: 65 // ÂéãÁº©JPEGÂõæÁâáÁöÑË¥®ÈáèÔºåÂèñÂÄºËåÉÂõ¥‰∏∫0Âà∞100ÔºåÂÄºË∂äÂ§ßË¥®ÈáèË∂äÂ•Ω‰ΩÜÊñá‰ª∂Ë∂äÂ§ß
</span></span></span><span class="line"><span class="cl"><span class="gi">+             },
</span></span></span><span class="line"><span class="cl"><span class="gi">+             optipng: {
</span></span></span><span class="line"><span class="cl"><span class="gi">+               enabled: true // ÊòØÂê¶ÂºÄÂêØPNGÂõæÁâáÁöÑ‰ºòÂåñÔºåÂèØ‰ª•ÊúâÊïàÊèêÂçáPNGÂõæÁâáÂä†ËΩΩÈÄüÂ∫¶
</span></span></span><span class="line"><span class="cl"><span class="gi">+             },
</span></span></span><span class="line"><span class="cl"><span class="gi">+             pngquant: {
</span></span></span><span class="line"><span class="cl"><span class="gi">+               // ÂéãÁº©PNGÂõæÁâáÁöÑË¥®ÈáèËåÉÂõ¥ÔºåÂèñÂÄºËåÉÂõ¥‰∏∫0Âà∞1ÔºåÂÄºË∂äÂ§ßË¥®ÈáèË∂äÂ•Ω‰ΩÜÊñá‰ª∂Ë∂äÂ§ß
</span></span></span><span class="line"><span class="cl"><span class="gi">+               // Á¨¨‰∏Ä‰∏™Êï∞Â≠óË°®Á§∫ÂéãÁº©Ë¥®ÈáèÁöÑ‰∏ãÈôêÔºåÁ¨¨‰∫å‰∏™Êï∞Â≠óË°®Á§∫ÂéãÁº©Ë¥®ÈáèÁöÑ‰∏äÈôê
</span></span></span><span class="line"><span class="cl"><span class="gi">+               quality: [0.65, 0.9],
</span></span></span><span class="line"><span class="cl"><span class="gi">+               speed: 4 // ÂéãÁº©PNGÂõæÁâáÁöÑÈÄüÂ∫¶ÔºåÂèñÂÄºËåÉÂõ¥‰∏∫1Âà∞10ÔºåÂÄºË∂äÂ§ßÈÄüÂ∫¶Ë∂äÂø´‰ΩÜË¥®ÈáèË∂ä‰Ωé
</span></span></span><span class="line"><span class="cl"><span class="gi">+             },
</span></span></span><span class="line"><span class="cl"><span class="gi">+             svgo: {
</span></span></span><span class="line"><span class="cl"><span class="gi">+               plugins: [ // ÂéãÁº©SVGÂõæÁâáÁöÑÊèí‰ª∂ÂàóË°®ÔºåËøôÈáåÂåÖÂê´removeViewBoxÂíåcleanupIDs‰∏§‰∏™Êèí‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="gi">+                 { //Áî®‰∫éÂà†Èô§SVGÂõæÁâá‰∏≠ÁöÑviewBoxÂ±ûÊÄß
</span></span></span><span class="line"><span class="cl"><span class="gi">+                   //viewBoxÂ±ûÊÄßÊòØÁî®Êù•ÊåáÂÆöSVGËßÜÂè£ËåÉÂõ¥ÁöÑÔºåÂÆÉÁöÑÂÄºÊòØ‰∏Ä‰∏™Áü©ÂΩ¢Ê°ÜÁöÑÂùêÊ†áÂíåÂÆΩÈ´ò
</span></span></span><span class="line"><span class="cl"><span class="gi">+                   removeViewBox: false
</span></span></span><span class="line"><span class="cl"><span class="gi">+                 },
</span></span></span><span class="line"><span class="cl"><span class="gi">+                 { //Áî®‰∫éÂà†Èô§SVGÂõæÁâá‰∏≠ÁöÑÊó†Áî®IDÂ±ûÊÄß
</span></span></span><span class="line"><span class="cl"><span class="gi">+                   cleanupIDs: true
</span></span></span><span class="line"><span class="cl"><span class="gi">+                 }
</span></span></span><span class="line"><span class="cl"><span class="gi">+               ]
</span></span></span><span class="line"><span class="cl"><span class="gi">+             },
</span></span></span><span class="line"><span class="cl"><span class="gi">+             gifsicle: {
</span></span></span><span class="line"><span class="cl"><span class="gi">+               interlaced: true // ÊòØÂê¶ÂºÄÂêØGIFÂõæÁâáÁöÑÈöîË°åÊâ´Êèè,ÂèØ‰ª•ÊúâÊïàÊèêÂçáGIFÂõæÁâáÂä†ËΩΩÈÄüÂ∫¶
</span></span></span><span class="line"><span class="cl"><span class="gi">+             }
</span></span></span><span class="line"><span class="cl"><span class="gi">+           }
</span></span></span><span class="line"><span class="cl"><span class="gi">+         }
</span></span></span><span class="line"><span class="cl"><span class="gi">+       ]
</span></span></span><span class="line"><span class="cl"><span class="gi">+     }
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂõæÁâáÂìçÂ∫îÂºè">ÂõæÁâáÂìçÂ∫îÂºè
</h3><ul>
<li>ÂìçÂ∫îÂºèÂõæÁâáÊòØÊåáËÉΩÂ§üÊ†πÊçÆËÆæÂ§áÂ±èÂπïÂ§ßÂ∞èÂíåÂàÜËæ®ÁéáÁ≠âÂõ†Á¥†Âä®ÊÄÅË∞ÉÊï¥ÊòæÁ§∫Â§ßÂ∞èÂíåÊ∏ÖÊô∞Â∫¶ÁöÑÂõæÁâá</li>
<li>Âú®‰∏çÂêåËÆæÂ§á‰∏äÊòæÁ§∫Âêå‰∏ÄÂº†ÂõæÁâáÊó∂ÔºåÂìçÂ∫îÂºèÂõæÁâáÂèØ‰ª•Ëá™Âä®ÈÄâÊã©ÊúÄ‰ºòÁöÑÂõæÁâáÁâàÊú¨Ôºå‰ªéËÄå‰øùËØÅÂõæÁâáÊòæÁ§∫ÊïàÊûúÁöÑ‰∏ÄËá¥ÊÄßÂíå‰ºòÂåñÁΩëÁ´ôÊÄßËÉΩ</li>
<li>responsive-loader ÊòØ‰∏Ä‰∏™ webpack ÁöÑ loaderÔºåÁî®‰∫éÂÆûÁé∞ÂìçÂ∫îÂºèÂõæÁâáÁöÑÂäüËÉΩ„ÄÇÂÆÉÂèØ‰ª•Ê†πÊçÆËÆæÂ§áÂ±èÂπïÂ§ßÂ∞èÂíåÂÉèÁ¥†ÂØÜÂ∫¶Á≠âÂõ†Á¥†Ëá™Âä®Ë∞ÉÊï¥ÂõæÁâáÂ§ßÂ∞èÂíåÊ∏ÖÊô∞Â∫¶Ôºå‰ªéËÄåÊèêÈ´òÁΩëÁ´ôÁöÑÁî®Êà∑‰ΩìÈ™åÂíåÊÄßËÉΩ
<ul>
<li>sizesÔºöÁî®‰∫éÊåáÂÆö‰∏çÂêåÂ∞∫ÂØ∏ÁöÑÂõæÁâáÂ§ßÂ∞è„ÄÇÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨ÊåáÂÆö‰∫Ü 4 ‰∏™‰∏çÂêåÁöÑÂõæÁâáÂ§ßÂ∞èÔºåÂàÜÂà´ÊòØ 300px„ÄÅ600px„ÄÅ1200px Âíå 2000px„ÄÇÂΩìÂä†ËΩΩÂõæÁâáÊó∂Ôºåresponsive-loader ‰ºöÊ†πÊçÆËÆæÂ§áÁöÑÂ±èÂπïÂ§ßÂ∞èÂíåÂÉèÁ¥†ÂØÜÂ∫¶Á≠âÂõ†Á¥†Ëá™Âä®ÈÄâÊã©ÊúÄÂêàÈÄÇÁöÑÂõæÁâáÂ§ßÂ∞è</li>
<li>adapterÔºöÁî®‰∫éÊåáÂÆöÂõæÁâáÂ§ÑÁêÜÂ∫ì„ÄÇÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨‰ΩøÁî®‰∫Ü sharp Â∫ìÔºåÂÆÉÊòØ‰∏Ä‰∏™È´òÊÄßËÉΩÁöÑÂõæÁâáÂ§ÑÁêÜÂ∫ìÔºåÂèØ‰ª•Áî®Êù•Ëá™Âä®Ë∞ÉÊï¥ÂõæÁâáÂ§ßÂ∞èÂíåÊ∏ÖÊô∞Â∫¶</li>
</ul>
</li>
<li>srcset Âíå sizes ÊòØ HTML ‰∏≠ img Ê†áÁ≠æÁöÑ‰∏§‰∏™Â±ûÊÄßÔºåÁî®‰∫éÂÆûÁé∞ÂìçÂ∫îÂºèÂõæÁâáÁöÑÂäüËÉΩÔºåÂèØ‰ª•Ê†πÊçÆËÆæÂ§áÂ±èÂπïÂ§ßÂ∞èÂíåÂÉèÁ¥†ÂØÜÂ∫¶Á≠âÂõ†Á¥†Ëá™Âä®ÈÄâÊã©ÊúÄÂêàÈÄÇÁöÑÂõæÁâáÁâàÊú¨ÂíåÊòæÁ§∫Â§ßÂ∞èÔºå‰ªéËÄåÊèêÈ´òÁΩëÁ´ôÁöÑÁî®Êà∑‰ΩìÈ™åÂíåÊÄßËÉΩ</li>
<li>srcset Â±ûÊÄßÁî®‰∫éÊåáÂÆö‰∏çÂêåÂ∞∫ÂØ∏ÂíåÊ∏ÖÊô∞Â∫¶ÁöÑÂõæÁâáÁâàÊú¨ÔºåÂÆÉÁöÑÂÄºÊòØ‰∏Ä‰∏™‰ª•ÈÄóÂè∑ÂàÜÈöîÁöÑÂõæÁâáÂàóË°®ÔºåÊØè‰∏™ÂõæÁâáÂÖÉÁ¥†ÂåÖÂê´‰∫ÜÂõæÁâá URL ÂíåÂØπÂ∫îÁöÑÂÆΩÂ∫¶ÊàñÂÉèÁ¥†ÂØÜÂ∫¶Á≠â‰ø°ÊÅØ</li>
<li>sizes Â±ûÊÄßÁî®‰∫éÊåáÂÆöÂõæÁâáÂú®‰∏çÂêåÂ±èÂπïÂ∞∫ÂØ∏‰∏ãÁöÑÊòæÁ§∫Â§ßÂ∞èÔºåÂÆÉÁöÑÂÄºÊòØ‰∏Ä‰∏™‰ª•ÈÄóÂè∑ÂàÜÈöîÁöÑÂ∞∫ÂØ∏ÂàóË°®ÔºåÊØè‰∏™Â∞∫ÂØ∏ÂÖÉÁ¥†ÂåÖÂê´‰∫ÜÂ™í‰ΩìÊü•ËØ¢ÂíåÂØπÂ∫îÁöÑÂ∞∫ÂØ∏‰ø°ÊÅØ</li>
<li>ÊµèËßàÂô®Âä†ËΩΩËøô‰∏™ img Ê†áÁ≠æÊó∂ÔºåÂÆÉ‰ºöÊ†πÊçÆËÆæÂ§áÁöÑÂ±èÂπïÂ§ßÂ∞èÂíåÂÉèÁ¥†ÂØÜÂ∫¶Á≠âÂõ†Á¥†ÔºåÈÄâÊã©ÊúÄÂêàÈÄÇÁöÑÂõæÁâáÁâàÊú¨ÔºåÂπ∂Ê†πÊçÆ sizes Â±ûÊÄßÊåáÂÆöÁöÑÂ∞∫ÂØ∏Â§ßÂ∞èËøõË°åÊòæÁ§∫</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm i responsive-loader sharp --save
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl"><span class="gi">+     {
</span></span></span><span class="line"><span class="cl"><span class="gi">+                test: /\.(jpe?g|png)$/i,
</span></span></span><span class="line"><span class="cl"><span class="gi">+               //oneOfÊòØ‰∏Ä‰∏™‰ºòÂåñÈÄâÈ°πÔºåÁî®‰∫éÊèêÈ´òÊâìÂåÖÁöÑÈÄüÂ∫¶
</span></span></span><span class="line"><span class="cl"><span class="gi">+               oneOf:[
</span></span></span><span class="line"><span class="cl"><span class="gi">+                   {
</span></span></span><span class="line"><span class="cl"><span class="gi">+                       //resourceQueryÊòØ‰∏Ä‰∏™Áî®‰∫éÂåπÈÖçËØ∑Ê±ÇËµÑÊ∫êÁöÑURL‰∏≠Êü•ËØ¢Â≠óÁ¨¶‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="gi">+                       resourceQuery:/sizes/,
</span></span></span><span class="line"><span class="cl"><span class="gi">+                       use:[
</span></span></span><span class="line"><span class="cl"><span class="gi">+                           {
</span></span></span><span class="line"><span class="cl"><span class="gi">+                            loader:&#39;responsive-loader&#39;,
</span></span></span><span class="line"><span class="cl"><span class="gi">+                            options:{
</span></span></span><span class="line"><span class="cl"><span class="gi">+                               // sizes:[300,600,1024],
</span></span></span><span class="line"><span class="cl"><span class="gi">+                               adapter:require(&#39;responsive-loader/sharp&#39;)
</span></span></span><span class="line"><span class="cl"><span class="gi">+                            }
</span></span></span><span class="line"><span class="cl"><span class="gi">+                           }
</span></span></span><span class="line"><span class="cl"><span class="gi">+                        ]
</span></span></span><span class="line"><span class="cl"><span class="gi">+                   },
</span></span></span><span class="line"><span class="cl"><span class="gi">+                   {
</span></span></span><span class="line"><span class="cl"><span class="gi">+                       type: &#39;asset/resource&#39;,
</span></span></span><span class="line"><span class="cl"><span class="gi">+                   }
</span></span></span><span class="line"><span class="cl"><span class="gi">+               ]
</span></span></span><span class="line"><span class="cl"><span class="gi">+           }
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Ê∫êÁ†Å‰∏≠‰ΩøÁî®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">responsiveImg</span> <span class="nx">from</span> <span class="s2">&#34;./images/bg.png?sizes[]=300,sizes[]=600,sizes[]=1024&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">responsiveImg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">image</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nx">image</span><span class="p">.</span><span class="nx">srcset</span> <span class="o">=</span> <span class="nx">responsiveImg</span><span class="p">.</span><span class="nx">srcSet</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">image</span><span class="p">.</span><span class="nx">sizes</span> <span class="o">=</span> <span class="sb">`(min-width: 1024) 1024px,100vw`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">image</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâìÂç∞ÁöÑ responsiveImg ÂèòÈáèÁöÑÂÄº</p>
<p><img src="/blogs/post/webpack/images/image-20241226180902970.png"
	width="1333"
	height="193"
	srcset="/blogs/post/webpack/images/image-20241226180902970_hu_17eabaf660ef9f7a.png 480w, /blogs/post/webpack/images/image-20241226180902970_hu_17a64dc610ae7eb2.png 1024w"
	loading="lazy"
	
		alt="image-20241226180902970"
	
	
		class="gallery-image" 
		data-flex-grow="690"
		data-flex-basis="1657px"
	
></p>
<h2 id="js-ÂÖºÂÆπÊÄßÂ§ÑÁêÜ">JS ÂÖºÂÆπÊÄßÂ§ÑÁêÜ
</h2><ul>
<li>Babel ÈªòËÆ§Âè™ËΩ¨Êç¢Êñ∞ÁöÑ ES ËØ≠Ê≥ïÔºåÊØîÂ¶ÇÁÆ≠Â§¥ÂáΩÊï∞</li>
</ul>
<p>ËÆ© babel ËÉΩËΩ¨Êç¢ÂÖ∂‰ªñÊñ∞ËØ≠Ê≥ïÈúÄË¶ÅÂÄüÂä©ÂåÖÊàñËÄÖ babel Êèí‰ª∂</p>
<ul>
<li><a class="link" href="https://www.npmjs.com/package/babel-loader"  target="_blank" rel="noopener"
    >babel-loader</a>‰ΩøÁî® Babel Âíå webpack ËΩ¨ËØë JavaScript Êñá‰ª∂ÔºåÁî®Êù•ËØªÂèñÂä†ËΩΩÈ°πÁõÆÊ∫êÁ†Å‰∏≠ÁöÑ js Êñá‰ª∂</li>
<li><a class="link" href="https://www.npmjs.com/package/@babel/core"  target="_blank" rel="noopener"
    >@babel/core</a>Babel ÁºñËØëÁöÑÊ†∏ÂøÉÂåÖ,babel-loader ËØªÂèñÁöÑÊ∫êÁ†Å‰º†Áªô@babel/coreÔºåÁî±@babel/core Â∞ÜÊ∫êÁ†ÅËΩ¨‰∏∫ AST ËØ≠Ê≥ïÊ†ëÔºå‰ΩÜÊòØÂÆÉ‰∏çÁü•ÈÅìÊÄé‰πàËΩ¨‰∏∫‰ª£Á†ÅÔºåÂÆÉÈúÄË¶ÅÂ∞Ü‰∏çÂêåÁöÑ ast ÈÉ®ÂàÜËΩ¨ÂèëÁªô‰∏çÂêåÊèí‰ª∂ÊàñËÄÖÈ¢ÑËÆæÂèñÂ§ÑÁêÜ</li>
<li><a class="link" href="https://www.babeljs.cn/docs/babel-preset-env"  target="_blank" rel="noopener"
    >@babel/preset-env</a> ÊòØ Babel ÁöÑ‰∏Ä‰∏™È¢ÑËÆæÔºåÁî®‰∫éËá™Âä®Ê£ÄÊµãÁõÆÊ†áÁéØÂ¢ÉÂπ∂Ê†πÊçÆÈúÄË¶ÅËΩ¨Êç¢ JavaScript ‰ª£Á†Å</li>
<li><a class="link" href="https://www.npmjs.com/package/@babel/preset-react"  target="_blank" rel="noopener"
    >@babel/preset-react</a> React Êèí‰ª∂ÁöÑ Babel È¢ÑËÆæ</li>
<li><code>@babel/preset-typescript</code> ÊòØ Babel ÁöÑ‰∏Ä‰∏™ËßÑÂàôÈõÜÔºåÁî®‰∫éÂ∞Ü TypeScript ‰ª£Á†ÅËΩ¨ËØë‰∏∫ JavaScript ‰ª£Á†Å</li>
<li><a class="link" href="https://babeljs.io/docs/en/babel-plugin-proposal-decorators"  target="_blank" rel="noopener"
    >@babel/plugin-proposal-decorators</a> ÊääÁ±ªÂíåÂØπË±°Ë£ÖÈ•∞Âô®ÁºñËØëÊàê ES5</li>
<li><a class="link" href="https://babeljs.io/docs/en/babel-plugin-proposal-class-properties"  target="_blank" rel="noopener"
    >@babel/plugin-proposal-class-properties</a> ËΩ¨Êç¢ÈùôÊÄÅÁ±ªÂ±ûÊÄß‰ª•Âèä‰ΩøÁî®Â±ûÊÄßÂàùÂßãÂÄºÂåñËØ≠Ê≥ïÂ£∞ÊòéÁöÑÂ±ûÊÄß</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm i babel-loader @babel/core @babel/preset-env @babel/preset-react  -D
</span></span><span class="line"><span class="cl">npm i @babel/plugin-proposal-decorators @babel/plugin-proposal-class-properties @babel/plugin-proposal-private-property-in-object  @babel/plugin-proposal-private-methods -D
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">  module: {
</span></span><span class="line"><span class="cl">    rules: [
</span></span><span class="line"><span class="cl"><span class="gi">+      {
</span></span></span><span class="line"><span class="cl"><span class="gi">+        test: /\.jsx?$/,
</span></span></span><span class="line"><span class="cl"><span class="gi">+        use: {
</span></span></span><span class="line"><span class="cl"><span class="gi">+          loader: &#39;babel-loader&#39;,
</span></span></span><span class="line"><span class="cl"><span class="gi">+          options: {
</span></span></span><span class="line"><span class="cl"><span class="gi">+            presets: [&#34;@babel/preset-env&#34;, &#39;@babel/preset-react&#39;],
</span></span></span><span class="line"><span class="cl"><span class="gi">+            plugins: [
</span></span></span><span class="line"><span class="cl"><span class="gi">+              [&#34;@babel/plugin-proposal-decorators&#34;, { legacy: true }],
</span></span></span><span class="line"><span class="cl"><span class="gi">+              [&#34;@babel/plugin-proposal-private-property-in-object&#34;, { &#34;loose&#34;: true }],
</span></span></span><span class="line"><span class="cl"><span class="gi">+              [&#34;@babel/plugin-proposal-private-methods&#34;, { &#34;loose&#34;: true }],
</span></span></span><span class="line"><span class="cl"><span class="gi">+              [&#34;@babel/plugin-proposal-class-properties&#34;, { loose: true }],
</span></span></span><span class="line"><span class="cl"><span class="gi">+            ],
</span></span></span><span class="line"><span class="cl"><span class="gi">+          },
</span></span></span><span class="line"><span class="cl"><span class="gi">+        },
</span></span></span><span class="line"><span class="cl"><span class="gi">+      },
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>      ]
</span></span><span class="line"><span class="cl">  }
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ë£ÖÈ•∞Âô®ÁöÑÂÜôÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">readonly</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">key</span><span class="p">,</span><span class="nx">descriptor</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">descriptor</span><span class="p">.</span><span class="nx">writable</span> <span class="o">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">Person</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">@</span><span class="nx">readonly</span> <span class="nx">PI</span> <span class="o">=</span><span class="mf">3.14</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nx">person</span><span class="p">.</span><span class="nx">PI</span> <span class="o">=</span> <span class="mf">3.15</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">)</span>  <span class="c1">// PIËøòÊòØ3.14
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">decode</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">key</span><span class="p">,</span><span class="nx">descriptor</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ÂÜôÊ≥ï‰∏ÄÔºö  legacyÔºà‰º†Â•áÔºâ:true Ë°®Á§∫ËÄÅÁöÑËßÑÂàô,ÂèØ‰ª•Ëøô‰πàÂÜô
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">@</span><span class="nx">decode</span>
</span></span><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">Person</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÂÜôÊ≥ï‰∫åÔºàÊñ∞ÂÜôÊ≥ïÔºâÔºö
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">class</span> <span class="err">@</span><span class="nx">decode</span> <span class="nx">Person</span> <span class="p">{}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>looseÔºötrue Ë°®Á§∫ÂèØ‰ª•‰ª• obj.xxx ÁöÑÊñπÂºèÁªôÂØπË±°Ê∑ªÂä†Â±ûÊÄßÔºå‰∏∫ false ÁöÑËØùË°®Á§∫ babel ÊúÄÂêé‰ª• object.defineProperty ÁöÑÊñπÂºèÁªôÂØπË±°Ê∑ªÂä†Â±ûÊÄß„ÄÇ</p>
<h3 id="babel-polyfill">babel-polyfill
</h3><ul>
<li>Babel ÈªòËÆ§Âè™ËΩ¨Êç¢Êñ∞ÁöÑ Javascript ËØ≠Ê≥ïÔºåËÄå‰∏çËΩ¨Êç¢Êñ∞ÁöÑ APIÔºåÊØîÂ¶Ç
<ul>
<li>Iterator, Generator, Set, Maps, Proxy, Reflect,Symbol,Promise Á≠âÂÖ®Â±ÄÂØπË±°</li>
<li>Âú®ÂÖ®Â±ÄÂØπË±°‰∏äÁöÑÊñπÊ≥ïÔºåÊØîÂ¶ÇËØ¥ ES6 Âú® Array ÂØπË±°‰∏äÊñ∞Â¢û‰∫Ü<code>Array.find</code>ÊñπÊ≥ïÔºåBabel Â∞±‰∏ç‰ºöËΩ¨Á†ÅËøô‰∏™ÊñπÊ≥ï</li>
</ul>
</li>
<li>Â¶ÇÊûúÊÉ≥ËÆ©Ëøô‰∏™ÊñπÊ≥ïËøêË°åÔºåÂøÖÈ°ª‰ΩøÁî® <code>babel-polyfill</code>Êù•ËΩ¨Êç¢Á≠â</li>
<li>Babel 7.4 ‰πãÂêé‰∏çÂÜçÊé®Ëçê‰ΩøÁî®@babel/polyfill</li>
<li>babel v7 Êé®Ëçê‰ΩøÁî®@babel/preset-env ‰ª£Êõø‰ª•ÂæÄÁöÑËØ∏Â§ö polyfill ÊñπÊ°à</li>
<li><a class="link" href="https://babeljs.io/docs/en/babel-preset-env"  target="_blank" rel="noopener"
    >babel-preset-env</a></li>
<li><a class="link" href="https://babeljs.io/docs/en/babel-polyfill"  target="_blank" rel="noopener"
    >babel-polyfill</a></li>
<li><a class="link" href="https://babeljs.io/docs/en/babel-runtime"  target="_blank" rel="noopener"
    >babel-runtime</a></li>
<li><a class="link" href="https://babeljs.io/docs/en/babel-plugin-transform-runtime"  target="_blank" rel="noopener"
    >babel-plugin-transform-runtime</a></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm i @babel/polyfill
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>babel-polyfill</code> ÂÆÉÊòØÈÄöËøáÂêëÂÖ®Â±ÄÂØπË±°ÂíåÂÜÖÁΩÆÂØπË±°ÁöÑ<code>prototype</code>‰∏äÊ∑ªÂä†ÊñπÊ≥ïÊù•ÂÆûÁé∞ÁöÑ„ÄÇÊØîÂ¶ÇËøêË°åÁéØÂ¢É‰∏≠‰∏çÊîØÊåÅ<code>Array.prototype.find</code>ÊñπÊ≥ïÔºåÂºïÂÖ•<code>polyfill</code>, Êàë‰ª¨Â∞±ÂèØ‰ª•‰ΩøÁî®<code>ES6</code>ÊñπÊ≥ïÊù•ÁºñÂÜô‰∫ÜÔºå‰ΩÜÊòØÁº∫ÁÇπÂ∞±ÊòØ‰ºöÈÄ†ÊàêÂÖ®Â±ÄÁ©∫Èó¥Ê±°Êüì</li>
<li><a class="link" href="https://www.npmjs.com/package/@babel/preset-env"  target="_blank" rel="noopener"
    >@babel/preset-env</a>‰∏∫ÊØè‰∏Ä‰∏™ÁéØÂ¢ÉÁöÑÈ¢ÑËÆæ</li>
<li><code>@babel/preset-env</code>ÈªòËÆ§Âè™ÊîØÊåÅËØ≠Ê≥ïËΩ¨ÂåñÔºåÈúÄË¶ÅÂºÄÂêØ<code>useBuiltIns</code>ÈÖçÁΩÆÊâçËÉΩËΩ¨Âåñ API ÂíåÂÆû‰æãÊñπÊ≥ï</li>
<li><code>useBuiltIns</code>ÂèØÈÄâÂÄºÂåÖÊã¨Ôºö&ldquo;usage&rdquo; | &ldquo;entry&rdquo; | false, ÈªòËÆ§‰∏∫ falseÔºåË°®Á§∫‰∏çÂØπ<code>polyfills</code> Â§ÑÁêÜÔºåËøô‰∏™ÈÖçÁΩÆÊòØÂºïÂÖ• polyfills ÁöÑÂÖ≥ÈîÆ</li>
<li><code>useBuiltIns: false</code> Ê≠§Êó∂‰∏çÂØπ <code>polyfill</code> ÂÅöÊìç‰Ωú„ÄÇÂ¶ÇÊûúÈ°πÁõÆ‰∏≠ÊâãÂä®ÂºïÂÖ•‰∫Ü <code>@babel/polyfill</code>ÔºåÂàôÊó†ËßÜÈÖçÁΩÆÁöÑÊµèËßàÂô®ÂÖºÂÆπÔºåÂÖ®ÈáèÂºïÂÖ•ÊâÄÊúâÁöÑ <code>polyfill</code>ÔºåÊó†ËßÜÈúÄË¶ÅÂÖºÂÆπÁöÑÊµèËßàÂô®Êù°‰ª∂ÔºåÊâìÂåÖ‰ΩìÁßØÂ§ß</li>
</ul>
<h4 id="usebuiltins-false">useBuiltIns: false
</h4><p>src/index.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;@babel/polyfill&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">].</span><span class="nx">find</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">item</span> <span class="o">===</span> <span class="mi">2</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>webpack.config.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">const path = require(&#39;path&#39;);
</span></span><span class="line"><span class="cl">module.exports = {
</span></span><span class="line"><span class="cl">    mode: &#39;development&#39;,
</span></span><span class="line"><span class="cl">    devtool: false,
</span></span><span class="line"><span class="cl">    entry: &#39;./src/index.js&#39;,
</span></span><span class="line"><span class="cl">    output: {
</span></span><span class="line"><span class="cl">        path: path.resolve(__dirname, &#39;dist&#39;),
</span></span><span class="line"><span class="cl">        filename: &#39;main.js&#39;
</span></span><span class="line"><span class="cl">    },
</span></span><span class="line"><span class="cl">    module: {
</span></span><span class="line"><span class="cl">        rules: [
</span></span><span class="line"><span class="cl">            {
</span></span><span class="line"><span class="cl">                test: /\.js?$/,
</span></span><span class="line"><span class="cl">                exclude: /node_modules/,
</span></span><span class="line"><span class="cl">                use: {
</span></span><span class="line"><span class="cl">                    loader: &#39;babel-loader&#39;,
</span></span><span class="line"><span class="cl">                    options: {
</span></span><span class="line"><span class="cl">                        sourceType: &#34;unambiguous&#34;,
</span></span><span class="line"><span class="cl"><span class="gi">+                       presets: [[&#34;@babel/preset-env&#34;, { useBuiltIns: false }]]
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>                    }
</span></span><span class="line"><span class="cl">                }
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        ]
</span></span><span class="line"><span class="cl">    },
</span></span><span class="line"><span class="cl">    plugins: []
</span></span><span class="line"><span class="cl">};
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="usebuiltins"><strong>useBuiltIns: &ldquo;entry&rdquo;</strong>
</h4><ul>
<li>
<p>Âú®È°πÁõÆÂÖ•Âè£ÂºïÂÖ•‰∏ÄÊ¨°ÔºàÂ§öÊ¨°ÂºïÂÖ•‰ºöÊä•ÈîôÔºâ</p>
</li>
<li>
<p>&ldquo;useBuiltIns&rdquo;: &ldquo;entry&rdquo; Ê†πÊçÆÈÖçÁΩÆÁöÑÊµèËßàÂô®ÂÖºÂÆπÔºåÂºïÂÖ•ÊµèËßàÂô®‰∏çÂÖºÂÆπÁöÑ polyfill„ÄÇÈúÄË¶ÅÂú®ÂÖ•Âè£Êñá‰ª∂ÊâãÂä®Ê∑ªÂä† <code>import '@babel/polyfill'</code>Ôºå‰ºöËá™Âä®Ê†πÊçÆ browserslist ÊõøÊç¢ÊàêÊµèËßàÂô®‰∏çÂÖºÂÆπÁöÑÊâÄÊúâ polyfillÔºå‰∏çÁÆ°Ëá™Â∑±ÁºñÂÜôÁöÑÊ∫ê‰ª£Á†Å‰∏≠ÊòØÂê¶ÈúÄË¶ÅÂÖºÂÆπÂì™‰∫õ APIÔºåÈÉΩÊ†πÊçÆÊù°‰ª∂Áªü‰∏ÄÊâìÂåÖÂà∞Ê∫êÁ†Å‰∏≠</p>
</li>
<li>
<p>ËøôÈáåÈúÄË¶ÅÊåáÂÆö core-js ÁöÑÁâàÊú¨,<code>corejs</code>ÈªòËÆ§ÊòØ 2</p>
</li>
<li>
<p>Â¶ÇÊûúÈÖçÁΩÆ <code>corejs: 3</code>, Âàô<code>import '@babel/polyfill'</code> ÈúÄË¶ÅÊîπÊàê <code>import 'core-js/stable';import 'regenerator-runtime/runtime';</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm install --save core-js@2    npm install --save core-js@3
</span></span></code></pre></td></tr></table>
</div>
</div><p>core-js@2</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;@babel/polyfill&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">].</span><span class="nx">find</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">item</span> <span class="o">===</span> <span class="mi">2</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>core-js@3</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;core-js/stable&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;regenerator-runtime/runtime&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">].</span><span class="nx">find</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">item</span> <span class="o">===</span> <span class="mi">2</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="webpackconfigjs">webpack.config.js
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">test: /\.js?$/,
</span></span><span class="line"><span class="cl">exclude: /node_modules/,
</span></span><span class="line"><span class="cl">use: {
</span></span><span class="line"><span class="cl">    loader: &#39;babel-loader&#39;,
</span></span><span class="line"><span class="cl">    options: {
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<ul>
<li>
<pre><code>    presets: [[&quot;@babel/preset-env&quot;, { useBuiltIns: 'entry', corejs: { version: 3 } }]]
  }
</code></pre>
<p>}
}</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h4 id="usebuiltins-usage-">**&ldquo;useBuiltIns&rdquo;: &ldquo;usage&rdquo; **
</h4><ul>
<li>&ldquo;useBuiltIns&rdquo;: &ldquo;usage&rdquo; <code>usage</code> ‰ºöÊ†πÊçÆÈÖçÁΩÆÁöÑÊµèËßàÂô®ÂÖºÂÆπÔºå‰ª•Âèä‰Ω†‰ª£Á†Å‰∏≠Áî®Âà∞ÁöÑ API Êù•ËøõË°å polyfillÔºåÂÆûÁé∞‰∫ÜÊåâÈúÄÊ∑ªÂä†</li>
<li>ÂΩìËÆæÁΩÆ‰∏∫ usage Êó∂Ôºåpolyfill ‰ºöËá™Âä®ÊåâÈúÄÊ∑ªÂä†Ôºå‰∏çÂÜçÈúÄË¶ÅÊâãÂ∑•ÂºïÂÖ•<code>@babel/polyfill</code></li>
</ul>
<h3 id="babel-runtime">babel-runtime
</h3><ul>
<li>‰∏∫‰∫ÜËß£ÂÜ≥ babel-folyfill ÂÖ®Â±ÄÁ©∫Èó¥Ê±°ÊüìÁöÑÈóÆÈ¢òÔºåÊèê‰æõ‰∫ÜÂçïÁã¨ÁöÑÂåÖ<a class="link" href="https://babeljs.io/docs/en/babel-runtime"  target="_blank" rel="noopener"
    >babel-runtime</a>Áî®‰ª•Êèê‰æõÁºñËØëÊ®°ÂùóÁöÑÂ∑•ÂÖ∑ÂáΩÊï∞</li>
<li>ÁÆÄÂçïËØ¥ <code>babel-runtime</code> Êõ¥ÂÉèÊòØ‰∏ÄÁßçÊåâÈúÄÂä†ËΩΩÁöÑÂÆûÁé∞ÔºåÊØîÂ¶Ç‰Ω†Âì™ÈáåÈúÄË¶Å‰ΩøÁî® <code>Promise</code>ÔºåÂè™Ë¶ÅÂú®Ëøô‰∏™Êñá‰ª∂Â§¥ÈÉ®<code>import Promise from 'babel-runtime/core-js/promise'</code>Â∞±Ë°å‰∫Ü</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm i babel-runtime --save-dev
</span></span></code></pre></td></tr></table>
</div>
</div><p>src/index.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nb">Promise</span> <span class="nx">from</span> <span class="s2">&#34;babel-runtime/core-js/promise&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="babel-plugin-transform-runtime">babel-plugin-transform-runtime
</h3><ul>
<li>@babel/plugin-transform-runtime Êèí‰ª∂ÊòØ‰∏∫‰∫ÜËß£ÂÜ≥
<ul>
<li>Â§ö‰∏™Êñá‰ª∂ÈáçÂ§çÂºïÁî® Áõ∏Âêå helpers(Â∏ÆÂä©ÂáΩÊï∞)=&gt;ÊèêÂèñËøêË°åÊó∂</li>
<li>Êñ∞ API ÊñπÊ≥ïÂÖ®Â±ÄÊ±°Êüì -&gt; Â±ÄÈÉ®ÂºïÂÖ•</li>
</ul>
</li>
<li>ÂêØÁî®Êèí‰ª∂<code>babel-plugin-transform-runtime</code>ÂêéÔºåBabel Â∞±‰ºö‰ΩøÁî®<code>babel-runtime</code>‰∏ãÁöÑÂ∑•ÂÖ∑ÂáΩÊï∞</li>
<li><code>babel-plugin-transform-runtime</code>Êèí‰ª∂ËÉΩÂ§üÂ∞ÜËøô‰∫õÂ∑•ÂÖ∑ÂáΩÊï∞ÁöÑ‰ª£Á†ÅËΩ¨Êç¢Êàê<code>require</code>ËØ≠Âè•ÔºåÊåáÂêë‰∏∫ÂØπ<code>babel-runtime</code>ÁöÑÂºïÁî®</li>
<li>babel-plugin-transform-runtime Â∞±ÊòØÂèØ‰ª•Âú®Êàë‰ª¨‰ΩøÁî®Êñ∞ API Êó∂Ëá™Âä® importbabel-runtime ÈáåÈù¢ÁöÑ polyfill
<ul>
<li>ÂΩì‰ΩøÁî® <code>async/await</code> Êó∂ÔºåËá™Âä®ÂºïÂÖ• <code>babel-runtime/regenerator</code></li>
<li>ÂΩì‰ΩøÁî® ES6 ÁöÑÈùôÊÄÅ‰∫ã‰ª∂ÊàñÂÜÖÁΩÆÂØπË±°Êó∂ÔºåËá™Âä®ÂºïÂÖ• <code>babel-runtime/core-js</code></li>
<li>ÁßªÈô§ÂÜÖËÅî<code>babel helpers</code>Âπ∂ÊõøÊç¢‰ΩøÁî®<code>babel-runtime/helpers</code> Êù•ÊõøÊç¢</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm i @babel/plugin-transform-runtime @babel/runtime-corejs3 --save-dev
</span></span></code></pre></td></tr></table>
</div>
</div><p>webpack.config.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js?$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">exclude</span><span class="o">:</span> <span class="sr">/node_modules/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">use</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;babel-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">sourceType</span><span class="o">:</span> <span class="s2">&#34;unambiguous&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">presets</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&#34;@babel/preset-env&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useBuiltIns</span><span class="o">:</span> <span class="s1">&#39;usage&#39;</span><span class="p">,</span> <span class="nx">corejs</span><span class="o">:</span> <span class="p">{</span> <span class="nx">version</span><span class="o">:</span> <span class="mi">3</span> <span class="p">}</span> <span class="p">}]],</span>
</span></span><span class="line"><span class="cl">            <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;@babel/plugin-transform-runtime&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">corejs</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">helpers</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">regenerator</span><span class="o">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"> <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂΩìÊàë‰ª¨‰ΩøÁî® ES6 ÁöÑÈùôÊÄÅ‰∫ã‰ª∂ÊàñÂÜÖÁΩÆÂØπË±°Êó∂Ëá™Âä®ÂºïÂÖ• babel-runtime/core-js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//var _Promise = __webpack_require__(&#34;./node_modules/@babel/runtime-corejs3/core-js-stable/promise.js&#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{});</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="helpers-true">helpers: true
</h4><ul>
<li>ÁßªÈô§ÂÜÖËÅî babel helpers Âπ∂ÊõøÊç¢‰ΩøÁî®<code>babel-runtime/helpers</code> Êù•ÊõøÊç¢</li>
<li>ÈÅøÂÖçÂÜÖËÅîÁöÑ helper ‰ª£Á†ÅÂú®Â§ö‰∏™Êñá‰ª∂ÈáçÂ§çÂá∫Áé∞</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">A</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">B</span> <span class="kr">extends</span> <span class="nx">A</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nx">B</span><span class="p">());</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="regenerator-true">regenerator: true
</h4><ul>
<li>ÊòØÂê¶ÂºÄÂêØ<code>generator</code>ÂáΩÊï∞ËΩ¨Êç¢Êàê‰ΩøÁî®<code>regenerator runtime</code>Êù•ÈÅøÂÖçÊ±°ÊüìÂÖ®Â±ÄÂüü</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//var _regeneratorRuntime = __webpack_require__(/*! @babel/runtime-corejs3/regenerator */ &#34;./node_modules/@babel/runtime-corejs3/regenerator/index.js&#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span><span class="o">*</span> <span class="nx">gen</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">gen</span><span class="p">());</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ÊúÄ‰Ω≥ÂÆûË∑µ">ÊúÄ‰Ω≥ÂÆûË∑µ
</h4><ul>
<li>@babel/preset-env Âíå plugin-transform-runtime ‰∫åËÄÖÈÉΩÂèØ‰ª•ËÆæÁΩÆ‰ΩøÁî® corejs Êù•Â§ÑÁêÜ polyfill</li>
</ul>
<h4 id="È°πÁõÆÂºÄÂèë">È°πÁõÆÂºÄÂèë
</h4><ul>
<li>
<p>useBuiltIns ‰ΩøÁî® usage</p>
</li>
<li>
<p>plugin-transform-runtime Âè™‰ΩøÁî®ÂÖ∂ÁßªÈô§ÂÜÖËÅîÂ§çÁî®ÁöÑËæÖÂä©ÂáΩÊï∞ÁöÑÁâπÊÄßÔºåÂáèÂ∞èÊâìÂåÖ‰ΩìÁßØ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;presets&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;@babel/preset-env&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;useBuiltIns&#34;</span><span class="p">:</span> <span class="s2">&#34;usage&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;corejs&#34;</span><span class="p">:</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;plugins&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;@babel/plugin-transform-runtime&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;corejs&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;helpers&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;regenerator&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h4 id="Á±ªÂ∫ìÂºÄÂèë">Á±ªÂ∫ìÂºÄÂèë
</h4><ul>
<li>Á±ªÂ∫ìÂºÄÂèëÂ∞ΩÈáè‰∏ç‰ΩøÁî®Ê±°ÊüìÂÖ®Â±ÄÁéØÂ¢ÉÁöÑ<code>polyfill</code>ÔºåÂõ†Ê≠§<code>@babel/preset-env</code>Âè™ÂèëÊå•ËØ≠Ê≥ïËΩ¨Êç¢ÁöÑÂäüËÉΩ</li>
<li>polyfill Áî±<code>@babel/plugin-transform-runtime</code>Êù•Â§ÑÁêÜÔºåÊé®Ëçê‰ΩøÁî® core-js@3</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;presets&#34;</span><span class="p">:</span> <span class="p">[[</span><span class="s2">&#34;@babel/preset-env&#34;</span><span class="p">]],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;plugins&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;@babel/plugin-transform-runtime&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;corejs&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="polyfill-service">polyfill-service
</h4><ul>
<li><a class="link" href="https://polyfill.io/v3/"  target="_blank" rel="noopener"
    >polyfill.io</a>Ëá™Âä®ÂåñÁöÑ JavaScript Polyfill ÊúçÂä°</li>
<li><a class="link" href="https://polyfill.io/v3/"  target="_blank" rel="noopener"
    >polyfill.io</a>ÈÄöËøáÂàÜÊûêËØ∑Ê±ÇÂ§¥‰ø°ÊÅØ‰∏≠ÁöÑ UserAgent ÂÆûÁé∞Ëá™Âä®Âä†ËΩΩÊµèËßàÂô®ÊâÄÈúÄÁöÑ polyfills</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&#34;https://polyfill.io/v3/polyfill.min.js&#34;</span><span class="o">&gt;&lt;</span><span class="err">/script&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ts">TS
</h2><p>Âú® Webpack ‰∏≠Ôºå<code>ts-loader</code> Âíå <code>babel-loader</code> ÈÉΩÂèØ‰ª•Áî®Êù•Â∞Ü TypeScript ËΩ¨Êç¢‰∏∫ JavaScriptÔºå‰ΩÜÂÆÉ‰ª¨ÁöÑËÆæËÆ°ÁõÆÊ†áÂíåÂ∑•‰ΩúÊñπÂºè‰∏çÂêåÔºåÂõ†Ê≠§Âú®ÂÆûÈôÖ‰ΩøÁî®‰∏≠‰ºöÊúâÊâÄÂå∫Âà´„ÄÇ</p>
<ul>
<li><code>ts-loader</code> ÊòØ Webpack ‰∏≠ÁöÑ‰∏Ä‰∏™Âä†ËΩΩÂô®ÔºåÁî®‰∫éÂ∞Ü TypeScript ‰ª£Á†ÅËΩ¨Êç¢Êàê JavaScript ‰ª£Á†Å„ÄÇÂÆÉÊòØÂü∫‰∫é typescript ÁºñËØëÂô®ÂÆûÁé∞ÁöÑÔºåÊîØÊåÅÊâÄÊúâ TypeScript ÁöÑËØ≠Ê≥ïÂíåÁâπÊÄßÔºåÂèØ‰ª•Â∏ÆÂä©ÂºÄÂèëËÄÖÂú® Webpack ‰∏≠‰ΩøÁî® TypeScript ËøõË°åÂºÄÂèë</li>
<li>Áõ¥Êé•‰ΩøÁî® TypeScript ÁºñËØëÂô® (<code>tsc</code>) ËøõË°åÁºñËØë„ÄÇ</li>
<li>ÂÆåÂÖ®ÈÅµÂæ™ <code>tsconfig.json</code> ÁöÑÈÖçÁΩÆÔºå‰æãÂ¶ÇÊ®°ÂùóËß£Êûê„ÄÅÁ±ªÂûãÊ£ÄÊü•Á≠â„ÄÇ</li>
<li>ÂÜÖÁΩÆÁ±ªÂûãÊ£ÄÊü•ÂäüËÉΩÔºåËÉΩÂú®ÁºñËØëËøáÁ®ã‰∏≠ÂèëÁé∞Á±ªÂûãÈîôËØØ„ÄÇ</li>
<li>ÂèØËÉΩ‰ºöÂØºËá¥ÊûÑÂª∫ÈÄüÂ∫¶ÂèòÊÖ¢ÔºåÂ∞§ÂÖ∂ÊòØÂú®Â§ßÈ°πÁõÆ‰∏≠„ÄÇ</li>
<li>ÂÆåÂÖ®ÊîØÊåÅ TypeScript ÁöÑÊâÄÊúâÂäüËÉΩÂíåÁâπÊÄß„ÄÇ</li>
<li>Â¶ÇÊûúÈ°πÁõÆ‰æùËµñ TypeScript ÁöÑÈ´òÁ∫ßÁâπÊÄßÔºàÂ¶ÇË∑ØÂæÑÊò†Â∞Ñ„ÄÅÂ£∞ÊòéÊñá‰ª∂ÁîüÊàêÁ≠âÔºâÔºå<code>ts-loader</code> Êõ¥ÂêàÈÄÇ„ÄÇ</li>
</ul>
<p>webpack.config.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">const path = require(&#39;path&#39;);
</span></span><span class="line"><span class="cl">module.exports = {
</span></span><span class="line"><span class="cl"><span class="gi">+ entry: &#39;./src/index.ts&#39;,
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>  module: {
</span></span><span class="line"><span class="cl">    rules: [
</span></span><span class="line"><span class="cl"><span class="gi">+     {
</span></span></span><span class="line"><span class="cl"><span class="gi">+       test: /\.ts$/,
</span></span></span><span class="line"><span class="cl"><span class="gi">+       use: &#39;ts-loader&#39;,
</span></span></span><span class="line"><span class="cl"><span class="gi">+       exclude: /node_modules/
</span></span></span><span class="line"><span class="cl"><span class="gi">+     },
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>    ]
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">};
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><code>@babel/preset-typescript</code> ÊòØ Babel ÁöÑ‰∏Ä‰∏™È¢ÑËÆæÔºåÁî®‰∫éÂ∞Ü TypeScript ‰ª£Á†ÅËΩ¨Êç¢‰∏∫ JavaScript ‰ª£Á†Å</p>
</li>
<li>
<p>‰ΩøÁî® Babel ËøõË°åËΩ¨ËØëÔºåÈúÄË¶ÅÂÄüÂä© <code>@babel/preset-typescript</code> Êù•ÊîØÊåÅ TypeScript ËØ≠Ê≥ï„ÄÇ</p>
</li>
<li>
<p>Babel Âè™Ë¥üË¥£ËØ≠Ê≥ïËΩ¨Êç¢Ôºå‰∏çËøõË°åÁ±ªÂûãÊ£ÄÊü•ÔºåÈúÄË¶ÅÈ¢ùÂ§ñËøêË°å TypeScript Á±ªÂûãÊ£ÄÊü•Â∑•ÂÖ∑Ôºà‰æãÂ¶Ç <code>tsc --noEmit</code> Êàñ <code>fork-ts-checker-webpack-plugin</code>ÔºâÊù•ÊçïÊçâÁ±ªÂûãÈîôËØØ„ÄÇ</p>
</li>
<li>
<p>ÈÄÇÂêàÊõ¥È´òÊïàÁöÑËΩ¨ËØëÊµÅÁ®ãÔºåÂ∞§ÂÖ∂ÊòØÂú®Â§ßÂûãÈ°πÁõÆ‰∏≠„ÄÇ</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        test: /\.ts$/,
</span></span><span class="line"><span class="cl">        use:
</span></span><span class="line"><span class="cl"><span class="gi">+       [
</span></span></span><span class="line"><span class="cl"><span class="gi">+         {
</span></span></span><span class="line"><span class="cl"><span class="gi">+           loader: &#39;babel-loader&#39;,
</span></span></span><span class="line"><span class="cl"><span class="gi">+           options: {
</span></span></span><span class="line"><span class="cl"><span class="gi">+             presets: [&#39;@babel/preset-typescript&#39;]
</span></span></span><span class="line"><span class="cl"><span class="gi">+           }
</span></span></span><span class="line"><span class="cl"><span class="gi">+         }
</span></span></span><span class="line"><span class="cl"><span class="gi">+       ],
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>        exclude: /node_modules/
</span></span><span class="line"><span class="cl">      },
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÈÄâÊã©">ÈÄâÊã©
</h3><ul>
<li><strong>Âè™Áî® TypeScript ÁöÑÈ°πÁõÆÔºö</strong>
<ul>
<li>Êé®Ëçê‰ΩøÁî® <code>ts-loader</code>ÔºåÂõ†‰∏∫ÂÆÉÂÆåÂÖ®ÈÅµÂæ™ TypeScript ÁöÑÈÖçÁΩÆÔºå‰∏îÊõ¥ÈÄÇÂêàÂ§ÑÁêÜ TypeScript ‰∏ìÂ±ûÁâπÊÄß„ÄÇ</li>
</ul>
</li>
<li><strong>TypeScript + Babel ÁöÑÈ°πÁõÆÔºö</strong>
<ul>
<li>Êé®Ëçê‰ΩøÁî® <code>babel-loader</code>ÔºåÂπ∂ÁªìÂêà Babel ÁöÑÁîüÊÄÅ„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÁ±ªÂûãÊ£ÄÊü•ÔºåÂèØ‰ª•Êê≠ÈÖç <code>fork-ts-checker-webpack-plugin</code> ÊàñÂçïÁã¨ËøêË°å <code>tsc</code>„ÄÇ</li>
</ul>
</li>
<li><strong>Â§ßÂûãÈ°πÁõÆÔºö</strong>
<ul>
<li>Â¶ÇÊûúÊûÑÂª∫ÊÄßËÉΩÊòØÂÖ≥ÈîÆÂõ†Á¥†ÔºåÂèØ‰ª•ÈÄâÊã© <code>babel-loader</code> ËøõË°åÂø´ÈÄüËØ≠Ê≥ïËΩ¨ËØëÔºåÂêåÊó∂‰ΩøÁî®Áã¨Á´ãÁöÑÁ±ªÂûãÊ£ÄÊü•ÊµÅÁ®ãÔºàÂ¶Ç <code>tsc --noEmit</code>Ôºâ„ÄÇ</li>
</ul>
</li>
</ul>
<h3 id="ÊúÄ‰Ω≥ÂÆûË∑µ-1">ÊúÄ‰Ω≥ÂÆûË∑µ
</h3><p>Â¶ÇÊûúÈúÄË¶ÅÂú®È°πÁõÆ‰∏≠ÁªìÂêà‰∏§ËÄÖÁöÑ‰ºòÂäøÔºåÂèØ‰ª•ËøôÊ†∑ÈÖçÁΩÆÔºö</p>
<ol>
<li>‰ΩøÁî® <code>babel-loader</code> ËΩ¨ËØë TypeScript ‰ª£Á†Å„ÄÇ</li>
<li>‰ΩøÁî® <code>fork-ts-checker-webpack-plugin</code> Êàñ <code>tsc --noEmit</code> ËøõË°åÁ±ªÂûãÊ£ÄÊü•„ÄÇ</li>
</ol>
<p>‰æãÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">ForkTsCheckerWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;fork-ts-checker-webpack-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.tsx?$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">use</span><span class="o">:</span> <span class="s2">&#34;babel-loader&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">exclude</span><span class="o">:</span> <span class="sr">/node_modules/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="k">new</span> <span class="nx">ForkTsCheckerWebpackPlugin</span><span class="p">()],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">extensions</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;.tsx&#34;</span><span class="p">,</span> <span class="s2">&#34;.ts&#34;</span><span class="p">,</span> <span class="s2">&#34;.js&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊ†∑Êó¢ËÉΩ‰∫´Âèó Babel ÁöÑÈ´òÊÄßËÉΩÂíåÁîüÊÄÅÔºåÂèàËÉΩÁ°Æ‰øù TypeScript ÁöÑÁ±ªÂûãÂÆâÂÖ®„ÄÇ</p>
<h2 id="eslint">eslint
</h2><ul>
<li>ESLint ÊòØ JavaScript ‰ª£Á†ÅÊ£ÄÊü•Â∑•ÂÖ∑ÔºåÂú®ÁºñÂÜô‰ª£Á†ÅÊó∂Ëá™Âä®Ê£ÄÊü•‰ª£Á†ÅÈ£éÊ†º(Ëøô‰∏™‰∏ÄËà¨‰∫§Áªô prettier ÂéªÂÅö)ÂíåËØ≠Ê≥ïÈîôËØØ„ÄÇ‰∏∫‰∫ÜÊª°Ë∂≥‰∏çÂêåÂõ¢ÈòüÂíåÈ°πÁõÆÁöÑ‰ª£Á†ÅËßÑËåÉÈúÄÊ±ÇÔºåESLint ÁîüÊÄÅ‰∏≠Âá∫Áé∞‰∫ÜËÆ∏Â§öÂü∫‰∫é‰∏çÂêå‰ª£Á†ÅËßÑËåÉÁöÑËßÑÂàôÈõÜÂêàÂíåÊèí‰ª∂</li>
<li><code>eslint-config-airbnb</code> ÊòØ Airbnb Êèê‰æõÁöÑ‰ª£Á†ÅÈ£éÊ†ºËßÑÂàôÈõÜ„ÄÇÂÆÉÁöÑ‰ºòÁÇπÂú®‰∫éÊèê‰æõ‰∫Ü‰∏ÄÂ•óÂÆåÊï¥ÁöÑ„ÄÅÂèØËá™ÂÆö‰πâÁöÑ‰ª£Á†ÅËßÑËåÉÔºåÊó®Âú®Â∏ÆÂä©ÂºÄÂèëËÄÖÁºñÂÜôÂÖ∑Êúâ‰∏ÄËá¥ÊÄßÂíåÂèØËØªÊÄßÁöÑ‰ª£Á†Å</li>
<li><code>eslint-config-standard</code>ÈÅµÂæ™ Standard.js ‰ª£Á†ÅÈ£éÊ†ºËßÑËåÉÔºåÊèê‰æõ‰∫ÜÊúÄ‰æøÊç∑ÁöÑÁªü‰∏Ä‰ª£Á†ÅÈ£éÊ†ºÁöÑÊñπÂºè„ÄÇ‰ΩøÁî®ËØ•ËßÑÂàôÈõÜÂèØ‰ª•ÈÅøÂÖçÂõ†‰ª£Á†ÅÈ£éÊ†º‰∏ç‰∏ÄËá¥ËÄåÂºïËµ∑ÁöÑÈîôËØØÂíåÊ∑∑‰π±</li>
<li><code>eslint-plugin-vue</code>Âíå<code>eslint-plugin-react</code>Êèí‰ª∂Êù•ÂÆûÁé∞ÂØπ SFC Êñá‰ª∂Âíå React ‰ª£Á†ÅÈ£éÊ†ºÁöÑÊ£ÄÊü•</li>
<li>ÈíàÂØπ TypeScript ‰ª£Á†ÅÁöÑÊ£ÄÊü•ÔºåÂèØ‰ª•‰ΩøÁî®<code>@typescript-eslint/eslint-plugin</code>Êèí‰ª∂Êù•Ê£ÄÊü•‰ª£Á†ÅÈ£éÊ†ºÂíåËØ≠Ê≥ïÈîôËØØ</li>
<li><code>eslint-plugin-sonarjs</code>Êèí‰ª∂ÔºåËØ•Êèí‰ª∂Âü∫‰∫é<code>Sonar</code>Êèê‰æõ‰∫Ü‰ª£Á†ÅË¥®ÈáèÊ£ÄÊü•Â∑•ÂÖ∑ÔºåÊèê‰æõÂúàÂ§çÊùÇÂ∫¶„ÄÅ‰ª£Á†ÅÈáçÂ§çÁéáÁ≠âÊ£ÄÊµãÂäüËÉΩ</li>
</ul>
<h3 id="ÊóßÁâàÈÖçÁΩÆ">ÊóßÁâàÈÖçÁΩÆ
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install eslint eslint-loader babel-eslint --D
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">module: {
</span></span><span class="line"><span class="cl">    rules: [
</span></span><span class="line"><span class="cl"><span class="gi">+      {
</span></span></span><span class="line"><span class="cl"><span class="gi">+        test: /\.jsx?$/,
</span></span></span><span class="line"><span class="cl"><span class="gi">+        loader: &#39;eslint-loader&#39;,
</span></span></span><span class="line"><span class="cl"><span class="gi">+        enforce: &#39;pre&#39;,   //   ÂÄºÔºö‰∏çÂÜô  preÂâçÁΩÆ  postÂêéÁΩÆ Á°ÆÂÆöÈíàÂØπÂêå‰∏Ä‰∏™Êñá‰ª∂ÁöÑËßÑÂàôÂåπÈÖçÁöÑ‰ºòÂÖàÁ∫ß
</span></span></span><span class="line"><span class="cl"><span class="gi">+        options: { fix: true },
</span></span></span><span class="line"><span class="cl"><span class="gi">+        exclude: /node_modules/,
</span></span></span><span class="line"><span class="cl"><span class="gi">+      }, // ÂÖàÊ£ÄÊü•‰ª£Á†ÅÈ£éÊ†ºÔºåÂú®ËøõË°åÁºñËØë
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>    ]
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>.eslintrc.jsÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">root</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// ‰∏∫trueËØ¥ÊòéËØ•Êñá‰ª∂ÊòØÊ†πÈÖçÁΩÆÊñá‰ª∂ÔºåÂèØ‰ª•Ë¢´ÂÖ∂‰ªñÈÖçÁΩÆÊñá‰ª∂ÁªßÊâøËßÑÂàôÔºå‰∏∫trueÊòØÂ∞±‰∏çËÉΩÂÜçÂÜôextendsÁªßÊâøÂ≠óÊÆµ‰∫Ü
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">parser</span><span class="o">:</span> <span class="s2">&#34;babel-eslint&#34;</span><span class="p">,</span> <span class="c1">// ‰ª£Á†Å‰∏≠Êúâes6‰ª•ÂêéÁöÑÂÜôÊ≥ïÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂèØËÉΩ‰∏çËÆ§ËØÜÔºåÈúÄË¶Å‰ΩøÁî®babel-eslintËØÜÂà´Êñ∞ËØ≠Ê≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//ÊåáÂÆöËß£ÊûêÂô®ÈÄâÈ°π
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">parserOptions</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sourceType</span><span class="o">:</span> <span class="s2">&#34;module&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ecmaVersion</span><span class="o">:</span> <span class="mi">2015</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//ÊåáÂÆöËÑöÊú¨ÁöÑËøêË°åÁéØÂ¢É
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">env</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">browser</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">node</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ÂêØÁî®ÁöÑËßÑÂàôÂèäÂÖ∂ÂêÑËá™ÁöÑÈîôËØØÁ∫ßÂà´
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">rules</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">indent</span><span class="o">:</span> <span class="s2">&#34;off&#34;</span><span class="p">,</span> <span class="c1">//Áº©ËøõÈ£éÊ†º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">quotes</span><span class="o">:</span> <span class="s2">&#34;off&#34;</span><span class="p">,</span> <span class="c1">//ÂºïÂè∑Á±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s2">&#34;no-console&#34;</span><span class="o">:</span> <span class="s2">&#34;error&#34;</span><span class="p">,</span> <span class="c1">//Á¶ÅÊ≠¢‰ΩøÁî®console
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm i eslint-config-airbnb eslint-loader eslint eslint-plugin-import eslint-plugin-react eslint-plugin-react-hooks eslint-plugin-jsx-a11y -D
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Âà†Èô§rootÊñá‰ª∂ÔºåÂêåÊó∂ÁªßÊâøairbnb
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">parser</span><span class="o">:</span> <span class="s2">&#34;babel-eslint&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="kr">extends</span><span class="o">:</span> <span class="s2">&#34;airbnb&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">rules</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">semi</span><span class="o">:</span> <span class="s2">&#34;error&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;no-console&#34;</span><span class="o">:</span> <span class="s2">&#34;off&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;linebreak-style&#34;</span><span class="o">:</span> <span class="s2">&#34;off&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;eol-last&#34;</span><span class="o">:</span> <span class="s2">&#34;off&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//&#34;indent&#34;:[&#34;error&#34;,2]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">env</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">browser</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">node</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Êñ∞ÁâàÈÖçÁΩÆ">Êñ∞ÁâàÈÖçÁΩÆ
</h3><p>npm install eslint -D</p>
<p>npx eslint. &ndash;init ÈóÆÁ≠îÂºèÈÄâÊã©Áîü‰∫ß.eslintrc.js Êñá‰ª∂ÔºåÂêåÊó∂‰ºöÂÆâË£Ö‰∏Ä‰∫õÈÖçÁΩÆÈ¢ÑËÆæÂíåÊèí‰ª∂„ÄÇ</p>
<p>‰ª•ÂâçÈÄöËøáÈÖçÁΩÆ loader ÂÆûÁé∞Âú®ÁºñËØëÈò∂ÊÆµÂØπÊ∫ê‰ª£Á†ÅËßÑËåÉÁöÑÊ†°È™åÂπ∂Âú®‰∏çËßÑËåÉÁöÑÊÉÖÂÜµ‰∏ãÊä•Èîô„ÄÇ</p>
<p>Áé∞Âú®ÂàôÊîπ‰∏∫Êèí‰ª∂ÁöÑÂΩ¢Âºè„ÄÇÂêåÊó∂ÂéüÊù•ÁöÑËß£ÊûêÂô® babel-eslint Â∑≤ÁªèÂÅúÊ≠¢Áª¥Êä§‰∫ÜÔºåÁé∞Âú®‰ΩøÁî®@babel/eslint-parser„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// webpack.config.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">ESLintPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;eslint-webpack-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="k">new</span> <span class="nx">ESLintPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fix</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}),</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>.eslintrc.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">env</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">browser</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">es2021</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">node</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">parser</span><span class="o">:</span> <span class="s2">&#34;@babel/eslint-parser&#34;</span><span class="p">,</span> <span class="c1">// ‰∏çÁî®Ëøô‰∏™Ëß£ÊûêÂô®ÂàôÊòØÁî®eslintÈªòËÆ§ÁöÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">extends</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;plugin:react/recommended&#34;</span><span class="p">,</span> <span class="s2">&#34;airbnb&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">overrides</span><span class="o">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">parserOptions</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ecmaVersion</span><span class="o">:</span> <span class="s2">&#34;latest&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sourceType</span><span class="o">:</span> <span class="s2">&#34;module&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;react&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">rules</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;no-unused-vars&#34;</span><span class="o">:</span> <span class="s2">&#34;error&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;no-undef&#34;</span><span class="o">:</span> <span class="s2">&#34;error&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="map-È°πÁõÆÈÖçÁΩÆ">MAP È°πÁõÆÈÖçÁΩÆ
</h2><p>Âú® Webpack ‰∏≠ÔºåÂΩìÈ°πÁõÆÊúâÂ§ö‰∏™Ê®°Êùø HTML Êñá‰ª∂‰∏îÊØè‰∏™Ê®°Êùø HTML ÈÉΩÂØπÂ∫î‰∏Ä‰∏™ÂÖ•Âè£Ê®°ÂùóÊó∂ÔºåÈúÄË¶Å‰ΩøÁî®Â§öÂÖ•Âè£ÈÖçÁΩÆÊù•ÊûÑÂª∫„ÄÇ‰ª•‰∏ãÊòØÂÖ∏ÂûãÁöÑ Webpack ÈÖçÁΩÆÊñá‰ª∂Á§∫‰æãÔºåÈÄÇÁî®‰∫éËøôÊ†∑ÁöÑÂú∫ÊôØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;html-webpack-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">index</span><span class="o">:</span> <span class="s2">&#34;./src/index.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">about</span><span class="o">:</span> <span class="s2">&#34;./src/about.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">contact</span><span class="o">:</span> <span class="s2">&#34;./src/contact.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span> <span class="nx">entries</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;dist&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;[name].bundle.js&#34;</span><span class="p">,</span> <span class="c1">// ËæìÂá∫ÁöÑÊñá‰ª∂ÂêçÂØπÂ∫îÂÖ•Âè£ÂêçÁß∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">clean</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// Ê∏ÖÁêÜÊóßÊñá‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">exclude</span><span class="o">:</span> <span class="sr">/node_modules/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">use</span><span class="o">:</span> <span class="s2">&#34;babel-loader&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;style-loader&#34;</span><span class="p">,</span> <span class="s2">&#34;css-loader&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.(png|jpg|jpeg|gif|svg)$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;asset/resource&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">entries</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nx">entryName</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">          <span class="nx">filename</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">entryName</span><span class="si">}</span><span class="sb">.html`</span><span class="p">,</span> <span class="c1">// ÁîüÊàêÁöÑ HTML Êñá‰ª∂Âêç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="nx">template</span><span class="o">:</span> <span class="sb">`./src/templates/</span><span class="si">${</span><span class="nx">entryName</span><span class="si">}</span><span class="sb">.html`</span><span class="p">,</span> <span class="c1">// Ê®°ÊùøË∑ØÂæÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="nx">chunks</span><span class="o">:</span> <span class="p">[</span><span class="nx">entryName</span><span class="p">],</span> <span class="c1">// ÊåáÂÆöÂÖ•Âè£Êñá‰ª∂    chunks Áî®‰∫éÊåáÂÆöÂΩìÂâçÊ®°Êùø‰ΩøÁî®ÁöÑÂÖ•Âè£Ê®°ÂùóÔºåÈò≤Ê≠¢Âä†ËΩΩ‰∏çÁõ∏ÂÖ≥ÁöÑ JS Êñá‰ª∂„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">optimization</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">splitChunks</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">chunks</span><span class="o">:</span> <span class="s2">&#34;all&#34;</span><span class="p">,</span> <span class="c1">// ÊèêÂèñÂÖ¨ÂÖ±Ê®°Âùó   ÈÖçÁΩÆ optimization.splitChunks ÊèêÂèñÂÖ¨ÂÖ±Ê®°ÂùóÔºàÂ¶ÇÁ¨¨‰∏âÊñπÂ∫ìÔºâÔºåÂáèÂ∞ëÈáçÂ§ç‰ª£Á†Å„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">static</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;dist&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">open</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">port</span><span class="o">:</span> <span class="mi">8080</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">project/
</span></span><span class="line"><span class="cl">‚îú‚îÄ‚îÄ src/
</span></span><span class="line"><span class="cl">‚îÇ   ‚îú‚îÄ‚îÄ index.js
</span></span><span class="line"><span class="cl">‚îÇ   ‚îú‚îÄ‚îÄ about.js
</span></span><span class="line"><span class="cl">‚îÇ   ‚îú‚îÄ‚îÄ contact.js
</span></span><span class="line"><span class="cl">‚îÇ   ‚îú‚îÄ‚îÄ templates/
</span></span><span class="line"><span class="cl">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.html
</span></span><span class="line"><span class="cl">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ about.html
</span></span><span class="line"><span class="cl">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ contact.html
</span></span><span class="line"><span class="cl">‚îÇ   ‚îú‚îÄ‚îÄ styles/
</span></span><span class="line"><span class="cl">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.css
</span></span><span class="line"><span class="cl">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ about.css
</span></span><span class="line"><span class="cl">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ contact.css
</span></span><span class="line"><span class="cl">‚îú‚îÄ‚îÄ dist/
</span></span><span class="line"><span class="cl">‚îú‚îÄ‚îÄ webpack.config.js
</span></span><span class="line"><span class="cl">‚îú‚îÄ‚îÄ package.json
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>HtmlWebpackPlugin</code> Êèí‰ª∂‰∏≠ÁöÑ <code>chunks</code> ÈÄâÈ°πÁöÑ‰ΩúÁî®ÊòØÊåáÂÆöÂΩìÂâçÁîüÊàêÁöÑ HTML Êñá‰ª∂‰∏≠ÈúÄË¶ÅÂºïÂÖ•ÁöÑ JavaScript Ê®°ÂùóÔºàÂç≥ Webpack ‰∏≠ÁöÑÂÖ•Âè£Êñá‰ª∂Ôºâ„ÄÇÂÆÉÊèê‰æõ‰∫ÜÁ≤æÁ°ÆÁöÑÊéßÂà∂ÔºåÁ°Æ‰øùÂè™ÂåÖÂê´‰∏éÂΩìÂâç HTML Êñá‰ª∂Áõ∏ÂÖ≥ÁöÑËÑöÊú¨Ôºå‰ªéËÄåÈÅøÂÖçÂä†ËΩΩÂ§ö‰ΩôÁöÑÊñá‰ª∂„ÄÇ</p>
<hr>
<h3 id="chunks"><strong><code>chunks</code> ÈÄâÈ°πÁöÑ‰∏ªË¶ÅÂäüËÉΩ</strong>
</h3><ol>
<li><strong>ÊåáÂÆöÂºïÂÖ•ÁöÑËÑöÊú¨</strong>:
<ul>
<li>ÂΩìÈ°πÁõÆ‰ΩøÁî®Â§öÂÖ•Âè£ÈÖçÁΩÆÊó∂ÔºåÊØè‰∏™ÂÖ•Âè£Êñá‰ª∂ÂèØËÉΩ‰ºöÁîüÊàê‰∏çÂêåÁöÑ JavaScript Êñá‰ª∂„ÄÇÈÄöËøá <code>chunks</code> ÊåáÂÆöÂÖ≥ËÅîÁöÑÂÖ•Âè£Êñá‰ª∂ÔºåÂèØ‰ª•Á°Æ‰øù HTML Êñá‰ª∂Âè™ÂºïÂÖ•Áõ∏ÂÖ≥ÁöÑ JS Êñá‰ª∂„ÄÇ</li>
</ul>
</li>
<li><strong>‰ºòÂåñÂä†ËΩΩÊÄßËÉΩ</strong>:
<ul>
<li>ÈÄöËøáÂè™Âä†ËΩΩÊâÄÈúÄÁöÑÊ®°ÂùóÔºåÂáèÂ∞ë‰∏çÂøÖË¶ÅÁöÑËÑöÊú¨Âä†ËΩΩÔºåÊèêÂçáÈ°µÈù¢ÊÄßËÉΩ„ÄÇ</li>
</ul>
</li>
<li><strong>ÈÅøÂÖçÂÜ≤Á™Å</strong>:
<ul>
<li>ÂΩìÊØè‰∏™È°µÈù¢‰ΩøÁî®‰∏çÂêåÁöÑÊ®°ÂùóÊó∂ÔºåÈÅøÂÖçÂºïÂÖ•ÈîôËØØÊàñ‰∏çÈúÄË¶ÅÁöÑ‰ª£Á†ÅÂØºËá¥ÁöÑÂÜ≤Á™ÅÊàñÈîôËØØ„ÄÇ</li>
</ul>
</li>
</ol>
<hr>
<h3 id="chunks-1"><strong><code>chunks</code> ÁöÑ‰ΩøÁî®Âú∫ÊôØ</strong>
</h3><h4 id="1-Â§öÂÖ•Âè£ÈÖçÁΩÆ">1. Â§öÂÖ•Âè£ÈÖçÁΩÆ
</h4><p>Âú®Â§öÈ°µÈù¢Â∫îÁî®‰∏≠Ôºå‰∏çÂêåÁöÑ HTML Êñá‰ª∂ÂØπÂ∫î‰∏çÂêåÁöÑÂÖ•Âè£Ê®°Âùó„ÄÇ‰æãÂ¶ÇÔºö</p>
<ul>
<li><code>index.html</code> ÂØπÂ∫î <code>index.js</code></li>
<li><code>about.html</code> ÂØπÂ∫î <code>about.js</code></li>
<li><code>contact.html</code> ÂØπÂ∫î <code>contact.js</code></li>
</ul>
<p><strong>ÈÖçÁΩÆÁ§∫‰æã</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;html-webpack-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">index</span><span class="o">:</span> <span class="s2">&#34;./src/index.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">about</span><span class="o">:</span> <span class="s2">&#34;./src/about.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">contact</span><span class="o">:</span> <span class="s2">&#34;./src/contact.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">template</span><span class="o">:</span> <span class="s2">&#34;./src/templates/index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">chunks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;index&#34;</span><span class="p">],</span> <span class="c1">// ‰ªÖÂºïÂÖ• index.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;about.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">template</span><span class="o">:</span> <span class="s2">&#34;./src/templates/about.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">chunks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;about&#34;</span><span class="p">],</span> <span class="c1">// ‰ªÖÂºïÂÖ• about.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;contact.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">template</span><span class="o">:</span> <span class="s2">&#34;./src/templates/contact.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">chunks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;contact&#34;</span><span class="p">],</span> <span class="c1">// ‰ªÖÂºïÂÖ• contact.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="2-ÂºïÂÖ•Â§ö‰∏™ÂÖ•Âè£Êñá‰ª∂">2. ÂºïÂÖ•Â§ö‰∏™ÂÖ•Âè£Êñá‰ª∂
</h4><p>ÊúâÊó∂‰∏Ä‰∏™È°µÈù¢ÈúÄË¶ÅÂºïÂÖ•Â§ö‰∏™ÂÖ•Âè£Êñá‰ª∂ÔºåÂèØ‰ª•Âú® <code>chunks</code> ‰∏≠ÂêåÊó∂ÊåáÂÆöÔºö</p>
<p><strong>ÈÖçÁΩÆÁ§∫‰æã</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;dashboard.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">template</span><span class="o">:</span> <span class="s2">&#34;./src/templates/dashboard.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">chunks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;index&#34;</span><span class="p">,</span> <span class="s2">&#34;about&#34;</span><span class="p">],</span> <span class="c1">// ÂêåÊó∂ÂºïÂÖ• index.js Âíå about.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="‰∏ç‰ΩøÁî®"><strong>‰∏ç‰ΩøÁî® <code>chunks</code> ‰ºöÂèëÁîü‰ªÄ‰πàÔºü</strong>
</h3><p>Â¶ÇÊûú‰∏çËÆæÁΩÆ <code>chunks</code>Ôºå<code>HtmlWebpackPlugin</code> ‰ºöÈªòËÆ§ÂºïÂÖ•ÊâÄÊúâÁöÑÂÖ•Âè£Ê®°ÂùóÔºàÂç≥ <code>entry</code> ‰∏≠ÁöÑÊâÄÊúâÊñá‰ª∂Ôºâ„ÄÇËøôÂèØËÉΩÂØºËá¥‰ª•‰∏ãÈóÆÈ¢òÔºö</p>
<ol>
<li>Âä†ËΩΩÂ§ö‰ΩôËÑöÊú¨:
<ul>
<li>ÊâÄÊúâÁöÑÂÖ•Âè£Êñá‰ª∂ÈÉΩ‰ºöË¢´Âä†ËΩΩÔºåÂèØËÉΩÂåÖÂê´‰∏çÁõ∏ÂÖ≥ÁöÑ‰ª£Á†ÅÔºåÊµ™Ë¥πËµÑÊ∫ê„ÄÇ</li>
</ul>
</li>
<li>ÊΩúÂú®ÁöÑÂÜ≤Á™Å:
<ul>
<li>‰∏çÂêåÈ°µÈù¢ÁöÑËÑöÊú¨ÂèØËÉΩÁõ∏‰∫íÂΩ±ÂìçÔºàÂ¶ÇÂÖ®Â±ÄÂèòÈáèÂÜ≤Á™ÅÔºâ„ÄÇ</li>
</ul>
</li>
</ol>
<hr>
<h3 id="ÂØπÊØî"><strong>ÂØπÊØî <code>chunks</code> Âíå <code>excludeChunks</code></strong>
</h3><ul>
<li><strong><code>chunks</code></strong>: ÊåáÂÆöË¶ÅÂåÖÂê´ÁöÑÂÖ•Âè£Ê®°Âùó„ÄÇ</li>
<li><strong><code>excludeChunks</code></strong>: ÊåáÂÆöË¶ÅÊéíÈô§ÁöÑÂÖ•Âè£Ê®°Âùó„ÄÇ</li>
</ul>
<p><strong>Á§∫‰æã</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// Âè™ÂºïÂÖ•ÊåáÂÆöÊ®°Âùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">chunks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;index&#34;</span><span class="p">],</span> <span class="c1">// ‰ªÖÂºïÂÖ• index.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÊéíÈô§ÊåáÂÆöÊ®°Âùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">excludeChunks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;about&#34;</span><span class="p">,</span> <span class="s2">&#34;contact&#34;</span><span class="p">],</span> <span class="c1">// ÊéíÈô§ about.js Âíå contact.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="ÊÄªÁªì">ÊÄªÁªì
</h3><p><code>chunks</code> ÁöÑ‰ΩúÁî®ÊòØ‰∏∫ÊØè‰∏™ÁîüÊàêÁöÑ HTML Êñá‰ª∂Á≤æÁ°ÆÊåáÂÆöÈúÄË¶ÅÂä†ËΩΩÁöÑÂÖ•Âè£Ê®°ÂùóÔºåÈÅøÂÖçÂºïÂÖ•‰∏çÂøÖË¶ÅÁöÑËÑöÊú¨Êñá‰ª∂ÔºåÊèêÂçáÂä†ËΩΩÊÄßËÉΩÂíå‰ª£Á†ÅÁÆ°ÁêÜÊïàÁéá„ÄÇÂêàÁêÜ‰ΩøÁî® <code>chunks</code> ÂèØ‰ª•Á°Æ‰øù Webpack ÈÖçÁΩÆÊõ¥ÁÅµÊ¥ª„ÄÅÊõ¥È´òÊïà„ÄÇ</p>
<h2 id="webpack-ÂéüÁêÜÈ¢ÑÂ§áÁü•ËØÜ">webpack ÂéüÁêÜÈ¢ÑÂ§áÁü•ËØÜ
</h2><ul>
<li><code>Symbol.toStringTag</code> ÊòØ‰∏Ä‰∏™ÂÜÖÁΩÆ symbolÔºåÂÆÉÈÄöÂ∏∏‰Ωú‰∏∫ÂØπË±°ÁöÑÂ±ûÊÄß‰ΩøÁî®ÔºåÂØπÂ∫îÁöÑÂ±ûÊÄßÂÄºÂ∫îËØ•‰∏∫Â≠óÁ¨¶‰∏≤Á±ªÂûãÔºåËøô‰∏™Â≠óÁ¨¶‰∏≤Áî®Êù•Ë°®Á§∫ËØ•ÂØπË±°ÁöÑËá™ÂÆö‰πâÁ±ªÂûãÊ†áÁ≠æ</li>
<li>ÈÄöÂ∏∏Âè™ÊúâÂÜÖÁΩÆÁöÑ <code>Object.prototype.toString()</code> ÊñπÊ≥ï‰ºöÂéªËØªÂèñËøô‰∏™Ê†áÁ≠æÂπ∂ÊääÂÆÉÂåÖÂê´Âú®Ëá™Â∑±ÁöÑËøîÂõûÂÄºÈáå„ÄÇ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&#34;foo&#34;</span><span class="p">));</span> <span class="c1">// &#34;[object String]&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]));</span> <span class="c1">// &#34;[object Array]&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span> <span class="c1">// &#34;[object Number]&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kc">true</span><span class="p">));</span> <span class="c1">// &#34;[object Boolean]&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kc">undefined</span><span class="p">));</span> <span class="c1">// &#34;[object Undefined]&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kc">null</span><span class="p">));</span> <span class="c1">// &#34;[object Null]&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">myExports</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl"><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">myExports</span><span class="p">,</span> <span class="nx">Symbol</span><span class="p">.</span><span class="nx">toStringTag</span><span class="p">,</span> <span class="p">{</span> <span class="nx">value</span><span class="o">:</span> <span class="s2">&#34;Module&#34;</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">myExports</span><span class="p">));</span> <span class="c1">//[object Module]   Ëá™ÂÆö‰πâÊüê‰∏™Êï∞ÊçÆÁöÑÊ†áËØÜ
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>webpack.config.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">devtool</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;main.js&#39;</span><span class="err">Ôºå</span>
</span></span><span class="line"><span class="cl">    <span class="nx">clean</span><span class="o">:</span><span class="kc">true</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;./src/index.html&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;index.html&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ•Âè£Êñá‰ª∂ index.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./title.js&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>title.js:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="s2">&#34;title&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâìÂåÖÂêéÁîüÊàêÊñá‰ª∂Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// modulesÂ≠òÊîæÈ°πÁõÆ‰∏≠Èô§‰∫ÜÂÖ•Âè£Ê®°Âùó‰πãÂ§ñ‰æùËµñÁöÑÊâÄÊúâÊ®°ÂùóÔºà‰æùËµñÂÖ≥Á≥ªÂõæÁöÑÁîüÊàêÁªìÊûúÔºâÔºå keyÔºàÊ®°ÂùóidÔºâÊòØÊ®°ÂùóÂØπ‰∫éÈ°πÁõÆÁöÑÊâÄÂú®Ê†πÁõÆÂΩïÁöÑÁõ∏ÂØπË∑ØÂæÑÔºåÂÄºÊòØÂáΩÊï∞ÔºåÂáΩÊï∞‰ΩìÂÜÖÂÆπÁî±Ê®°ÂùóÊñá‰ª∂ÁöÑÂÜÖÂÆπÁªÑÊàê
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">modules</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//‰∏çÁÆ°Ê∫êÁ†Å‰∏≠ÊòØÊ®°ÂùóË∑ØÂæÑÔºåÁõ∏ÂØπÊàñÁªùÂØπË∑ØÂæÑÔºåÊúÄÂêéÈÉΩËΩ¨‰∏∫Áõ∏ÂØπ‰∫éÈ°πÁõÆÊ†πÁõÆÂΩïÁöÑÁõ∏ÂØπË∑ØÂæÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="s1">&#39;./src/title.js&#39;</span><span class="o">:</span> <span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="s1">&#39;title&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÁºìÂ≠òÂ∑≤ÁªèË¢´ÂºïÂÖ•ËøáÁöÑÊ®°Âùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">cache</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// requireÊñπÊ≥ïÔºåÁõ∏ÂΩì‰∫éwebpackÂú®ÊµèËßàÂô®Á´ØÂÆûÁé∞‰∏Ä‰∏™requireÁöÑpolyfullÁöÑÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">function</span> <span class="nx">require</span><span class="p">(</span><span class="nx">moduleId</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">cache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">cache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">].</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">module</span> <span class="o">=</span> <span class="nx">cache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">id</span><span class="o">:</span> <span class="nx">moduleId</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">loaded</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">exports</span><span class="o">:</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span><span class="nx">z</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">modules</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">](</span><span class="nx">module</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">exports</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./src/title.js&#39;</span><span class="p">);</span>   <span class="c1">// ÂèØ‰ª•ÁúãÂá∫Êï¥‰∏™‰ª£Á†ÅÊòØÂêåÊ≠•ÊâßË°åÁöÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂΩì index.js ‰∏≠ÂºïÂÖ•‰∏§‰∏™‰æùËµñÊñá‰ª∂ test1.js Âíå test2.js Êó∂ÁöÑÊâìÂåÖÁªìÊûúÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">webpackModules</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;./src/test/test1.js&#34;</span><span class="o">:</span> <span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">unusedWebpackExports</span><span class="p">,</span> <span class="nx">webpackRequire</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">module</span> <span class="o">=</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">nmd</span><span class="p">(</span><span class="nx">module</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">module</span><span class="p">.</span><span class="kr">export</span> <span class="o">=</span> <span class="s2">&#34;test1&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;./src/test/test2.js&#34;</span><span class="o">:</span> <span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">unusedWebpackExports</span><span class="p">,</span> <span class="nx">webpackRequire</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">module</span> <span class="o">=</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">nmd</span><span class="p">(</span><span class="nx">module</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">module</span><span class="p">.</span><span class="kr">export</span> <span class="o">=</span> <span class="s2">&#34;test2&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">webpackModuleCache</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">webpackRequire</span><span class="p">(</span><span class="nx">moduleId</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">cachedModule</span> <span class="o">=</span> <span class="nx">webpackModuleCache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">cachedModule</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">cachedModule</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">module</span> <span class="o">=</span> <span class="p">(</span><span class="nx">webpackModuleCache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">id</span><span class="o">:</span> <span class="nx">moduleId</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">loaded</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">exports</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="nx">webpackModules</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">](</span><span class="nx">module</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">webpackRequire</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="p">.</span><span class="nx">loaded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">nmd</span> <span class="o">=</span> <span class="p">(</span><span class="nx">module</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="p">.</span><span class="nx">paths</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">children</span><span class="p">)</span> <span class="nx">module</span><span class="p">.</span><span class="nx">children</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">module</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">webpackExports</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">test1</span> <span class="o">=</span> <span class="nx">webpackRequire</span><span class="p">(</span><span class="s2">&#34;./src/test/test1.js&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">test2</span> <span class="o">=</span> <span class="nx">webpackRequire</span><span class="p">(</span><span class="s2">&#34;./src/test/test2.js&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">test1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">test2</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® webpack ‰∏≠Êúâ‰∏§ÁßçÊ®°ÂùóÂåñËßÑËåÉÔºåcommonjs Âíå esmoduleÔºå‰ªñ‰ª¨‰πãÈó¥ÂèØ‰ª•Áõ∏‰ºöËΩ¨Êç¢ÂíåÊ∑∑Áî®„ÄÇÂπ∂‰∏îÂú® webpack ÊâìÂåÖÂêéÈÉΩÁªü‰∏Ä‰ΩøÁî® commonJS Ê®°ÂùóËßÑËåÉ„ÄÇ</p>
<h3 id="commonjs-Âä†ËΩΩ-commonjs">common.js Âä†ËΩΩ common.js
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// index.js:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./title&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// title.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">exports</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&#34;title_name&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">exports</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="s2">&#34;title_age&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÊâìÂåÖÁªìÊûú
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">modules</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÂØπË±°ÔºåÂ∞ÜÊØè‰∏Ä‰∏™Âä†ËΩΩÁöÑÊ®°Âùó‰ª•ÂèäÊ®°ÂùóÂØπÂ∫îÁöÑ‰ª£Á†ÅÔºåÊ∑ªÂä†Âà∞ËØ•ÂáΩÊï∞ÂÜÖÈÉ®ÔºåÁÑ∂ÂêéËØ•ÂáΩÊï∞‰Ωú‰∏∫ÂÄºÔºåËÄåÊ®°ÂùóÁöÑË∑ØÂæÑÂØπÂ∫îkey„ÄÇ Âú®commonjs‰∏≠Âπ∂Ê≤°ÊúâÂ∞ÜÂÖ•Âè£Êñá‰ª∂Âä†ÂÖ•Âà∞__webpack_modules__ÂØπË±°ÂÜÖÈÉ®‰Ωú‰∏∫‰∏Ä‰∏™Â±ûÊÄß„ÄÇËÄåÂú®ES6ÁöÑ‰∏≠ÊòØÂÅö‰∫Ü„ÄÇÂèØ‰ª•Áúã‰∏ãÈù¢ÁöÑES6ÊâìÂåÖÊñá‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="s2">&#34;./src/title.js&#34;</span><span class="o">:</span> <span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">exports</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&#34;title_name&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">exports</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="s2">&#34;title_age&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">cache</span> <span class="o">=</span> <span class="p">{};</span> <span class="c1">// ‰∏ÄÊó¶Êï¥‰∏™È°πÁõÆ‰∏≠Êúâ‰∏Ä‰∏™Êñá‰ª∂ÂºïÂÖ•‰∫Ü‰∏Ä‰∏™Ê®°ÂùóÂêéÔºåÂêéÁª≠ËØ•È°πÁõÆ‰∏≠ÁöÑÂÖ∂‰ªñÊñá‰ª∂ÂÜçÂºïÂÖ•Áõ∏ÂêåÁöÑÊñá‰ª∂ÔºåÂàôÂÆûÈôÖ‰∏äÈÉΩÊòØÂêå‰∏Ä‰∏™ÂØºÂá∫„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">require</span><span class="p">(</span><span class="nx">moduleId</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">cachedModule</span> <span class="o">=</span> <span class="nx">cache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">cachedModule</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">cachedModule</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">module</span> <span class="o">=</span> <span class="p">(</span><span class="nx">cache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">exports</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="nx">modules</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">](</span><span class="nx">module</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">exports</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./src/title.js&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="commonjs-Âä†ËΩΩ-es6-modules">common.js Âä†ËΩΩ ES6 modules
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// index.js:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./title&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title</span><span class="p">.</span><span class="k">default</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// title.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="k">default</span> <span class="s1">&#39;title_name&#39;</span><span class="p">;</span> <span class="c1">// ÈªòËÆ§ÂØºÂá∫
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="kr">const</span> <span class="nx">age</span> <span class="o">=</span> <span class="s1">&#39;title_age&#39;</span><span class="p">;</span> <span class="c1">// ÂëΩÂêçÂØºÂá∫
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ÊâìÂåÖÁªìÊûú
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Ê®°ÂùóÂÆö‰πâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">var</span> <span class="nx">modules</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;./src/title.js&#39;</span><span class="o">:</span> <span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// es moduleËΩ¨commonjs
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">_DEFAULT_EXPORT__</span> <span class="o">=</span> <span class="s1">&#39;title_name&#39;</span><span class="p">;</span>  <span class="c1">// Ê≥®ÊÑèËøôÈáåÊòØconstÂÆö‰πâÁöÑÂèòÈáèÔºåÊâÄ‰ª•Âú®ÂØºÂÖ•ËØ•Ê®°ÂùóÁöÑÊñá‰ª∂‰∏≠ÊòØÊó†Ê≥ï‰øÆÊîπËØ•ÂèòÈáèÁöÑÂÄºÁöÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="kr">const</span> <span class="nx">age</span> <span class="o">=</span> <span class="s1">&#39;title_age&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nx">require</span><span class="p">.</span><span class="nx">r</span><span class="p">(</span><span class="nx">exports</span><span class="p">);</span> <span class="c1">// rÂáΩÊï∞Áî®‰∫éÊ†áËØÜexportsÊòØ‰∏Ä‰∏™es moduleÁöÑÂØºÂá∫
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">      <span class="nx">require</span><span class="p">.</span><span class="nx">d</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">default</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">_DEFAULT_EXPORT__</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">age</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">age</span> <span class="c1">// ‰ªéËøôÈáåÂèØ‰ª•ÁúãÂá∫esmoduleÁöÑÂØºÂá∫ÔºåÂØºÂá∫ÁöÑÊòØÂèòÈáèÊú¨Ë∫´ÔºåËøô‰∏çÂêå‰∫écommonjsÂØºÂá∫ÁöÑÊòØÂÄºÊàñËÄÖÂØπË±°ÂºïÁî®ÔºåËÄå‰∏îÂú®ÂÆö‰πâÊó∂ÔºåÂπ∂Ê≤°ÊúâÊèê‰æõÂØπÂ∫îÂ±ûÊÄßÁöÑsetterÊñπÊ≥ïÔºåÊâÄ‰ª•ÂØºÂÖ•ËØ•Ê®°ÂùóÁöÑÂÖ∂‰ªñÊ®°ÂùóÊòØÊó†Ê≥ï‰øÆÊîπËØ•ÂØºÂá∫ÂèòÈáèÁöÑÂÄºÁöÑ„ÄÇ ËÄå‰∏îËØ•Ê®°Âùó‰∏≠Âú®ÂêéÁª≠‰øÆÊîπ‰∫ÜËØ•ÂèòÈáèÂØπÂ∫îÁöÑÂÄºÂêéÔºåÂÖ∂‰ªñÊ®°ÂùóÂÜçÊ¨°ËÆøÈóÆÂØºÂá∫ÁöÑÂèòÈáèÊó∂Ôºå‰ºöÊòØÊúÄÊñ∞ÁöÑÂÄº„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">cache</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">require</span><span class="p">(</span><span class="nx">moduleId</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">cachedModule</span> <span class="o">=</span> <span class="nx">cache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">cachedModule</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="nx">cachedModule</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">module</span> <span class="o">=</span> <span class="p">(</span><span class="nx">cache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">exports</span><span class="o">:</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="nx">modules</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">](</span><span class="nx">module</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ÁªôÂØπË±°ÂÆö‰πâÂ±ûÊÄß
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">require</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">definition</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">definition</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">require</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">definition</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">require</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">key</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="p">{</span> <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">get</span><span class="o">:</span> <span class="nx">definition</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span>   <span class="c1">// Âè™ÂÆö‰πâ‰∫Ügetter
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">require</span><span class="p">.</span><span class="nx">o</span> <span class="o">=</span> <span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">prop</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">prop</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// rÂáΩÊï∞Áî®‰∫éÊ†áËØÜexportsÊòØ‰∏Ä‰∏™es moduleÁöÑÂØºÂá∫
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">require</span><span class="p">.</span><span class="nx">r</span> <span class="o">=</span> <span class="p">(</span><span class="nx">exports</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂÆø‰∏ªÁéØÂ¢ÉÊîØÊåÅsymbolÊï∞ÊçÆÁ±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">Symbol</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">Symbol</span><span class="p">.</span><span class="nx">toStringTag</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">Symbol</span><span class="p">.</span><span class="nx">toStringTag</span><span class="p">,</span> <span class="p">{</span> <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;Module&#39;</span> <span class="p">});</span> <span class="c1">// [object Module]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂÆø‰∏ªÁéØÂ¢É‰∏çÊîØÊåÅsymbolÊï∞ÊçÆÁ±ªÂûãÊó∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="s1">&#39;__esModule&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">value</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span> <span class="c1">// exports.__esModule = trueÔºåÈÄöËøáËØ•Â±ûÊÄßÂ∞±ËÉΩÁü•ÈÅìËØ•Ê®°ÂùóÊñá‰ª∂ÊòØÈááÁî®ÁöÑcommonJSÊ®°ÂùóËøòÊòØesModuleÊ®°ÂùóËßÑËåÉ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./src/title.js&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// titleÈªòËÆ§ÊòØÂºïÂÖ•ÁöÑÈÇ£‰∏™Ê®°Âùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title</span><span class="p">.</span><span class="k">default</span><span class="p">);</span> <span class="c1">// es6‰∏≠ÈªòËÆ§ÂØºÂá∫Âú®commonjs‰∏≠ÊòØÈÄöËøádefaultÂ±ûÊÄßËé∑ÂèñÁöÑ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">})();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="es6-modules-Âä†ËΩΩ-es6-modules">ES6 modules Âä†ËΩΩ ES6 modules
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//  index.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="nx">name</span><span class="p">,</span> <span class="p">{</span> <span class="nx">age</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;./title&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// title.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="k">default</span> <span class="s2">&#34;title_name&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">age</span> <span class="o">=</span> <span class="s2">&#34;title_age&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÊâìÂåÖÁªìÊûú
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">modules</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;./src/title.js&#34;</span><span class="o">:</span> <span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">require</span><span class="p">.</span><span class="nx">r</span><span class="p">(</span><span class="nx">exports</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">_DEFAULT_EXPORT__</span> <span class="o">=</span> <span class="s2">&#34;title_name&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">age</span> <span class="o">=</span> <span class="s2">&#34;title_age&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">age</span> <span class="o">=</span> <span class="s2">&#34;new&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">require</span><span class="p">.</span><span class="nx">d</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">default</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">_DEFAULT_EXPORT__</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">age</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">age</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">cache</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">require</span><span class="p">(</span><span class="nx">moduleId</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">cachedModule</span> <span class="o">=</span> <span class="nx">cache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">cachedModule</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">cachedModule</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">module</span> <span class="o">=</span> <span class="p">(</span><span class="nx">cache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">exports</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="nx">modules</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">](</span><span class="nx">module</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">require</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">definition</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">definition</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">require</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">definition</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">require</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">key</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">get</span><span class="o">:</span> <span class="nx">definition</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">require</span><span class="p">.</span><span class="nx">o</span> <span class="o">=</span> <span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">prop</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">prop</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">require</span><span class="p">.</span><span class="nx">r</span> <span class="o">=</span> <span class="p">(</span><span class="nx">exports</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">Symbol</span> <span class="o">!==</span> <span class="s2">&#34;undefined&#34;</span> <span class="o">&amp;&amp;</span> <span class="nx">Symbol</span><span class="p">.</span><span class="nx">toStringTag</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">Symbol</span><span class="p">.</span><span class="nx">toStringTag</span><span class="p">,</span> <span class="p">{</span> <span class="nx">value</span><span class="o">:</span> <span class="s2">&#34;Module&#34;</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="s2">&#34;__esModule&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">value</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">exports</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">require</span><span class="p">.</span><span class="nx">r</span><span class="p">(</span><span class="nx">exports</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">_title_0__</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./src/title.js&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">_title_0__</span><span class="p">[</span><span class="s2">&#34;default&#34;</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">_title_0__</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="es6-modules-Âä†ËΩΩ-commonjs">ES6 modules Âä†ËΩΩ common.js
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// index.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="nx">name</span><span class="p">,</span> <span class="p">{</span> <span class="nx">age</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;./title&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span> <span class="c1">// ËøôÈáåÁöÑÈªòËÆ§ÂØºÂÖ•ÂÆûÈôÖ‰∏äÂ∞±ÊòØË¢´ÂØºÂÖ•ÁöÑcommonjsÊ®°ÂùóÁöÑmodule.exportsÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// title.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;title_name&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">age</span><span class="o">:</span> <span class="s2">&#34;title_age&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÊâìÂåÖÁªìÊûú
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">modules</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;./src/title.js&#34;</span><span class="o">:</span> <span class="p">(</span><span class="nx">module</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;title_name&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">age</span><span class="o">:</span> <span class="s2">&#34;title_age&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">cache</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">require</span><span class="p">(</span><span class="nx">moduleId</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">cachedModule</span> <span class="o">=</span> <span class="nx">cache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">cachedModule</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="nx">cachedModule</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">module</span> <span class="o">=</span> <span class="p">(</span><span class="nx">cache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">exports</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="nx">modules</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">](</span><span class="nx">module</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">require</span><span class="p">.</span><span class="nx">n</span> <span class="o">=</span> <span class="p">(</span><span class="nx">module</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">getter</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">      <span class="nx">module</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">__esModule</span> <span class="o">?</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">module</span><span class="p">[</span><span class="s2">&#34;default&#34;</span><span class="p">]</span> <span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">module</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">require</span><span class="p">.</span><span class="nx">d</span><span class="p">(</span><span class="nx">getter</span><span class="p">,</span> <span class="p">{</span> <span class="nx">a</span><span class="o">:</span> <span class="nx">getter</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//ÁªôgetterÊ∑ªÂä†‰∏Ä‰∏™aÂ±ûÊÄßÔºåaÁöÑÂÄºÂ∞±ÊòØgetterÁöÑËøîÂõûÂÄº getter.a
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="nx">getter</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">require</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">definition</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">definition</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">require</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">definition</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">require</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">key</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">get</span><span class="o">:</span> <span class="nx">definition</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="p">});</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">require</span><span class="p">.</span><span class="nx">o</span> <span class="o">=</span> <span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">prop</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">prop</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">require</span><span class="p">.</span><span class="nx">r</span> <span class="o">=</span> <span class="p">(</span><span class="nx">exports</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">Symbol</span><span class="p">.</span><span class="nx">toStringTag</span><span class="p">,</span> <span class="p">{</span> <span class="nx">value</span><span class="o">:</span> <span class="s2">&#34;Module&#34;</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="s2">&#34;__esModule&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">value</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">exports</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Âè™Ë¶ÅÊâìÂåÖÂâçÁöÑÊ®°ÂùóÊòØ‰∏Ä‰∏™es module,ÈÇ£‰πàÂ∞±‰ºöË∞ÉÁî®require.rÊñπÊ≥ïËøõË°åÊ†áËØÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">require</span><span class="p">.</span><span class="nx">r</span><span class="p">(</span><span class="nx">exports</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">_title_0__</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./src/title.js&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">_title_0___default</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">n</span><span class="p">(</span><span class="nx">_title_0__</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">_title_0___default</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">_title_0__</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">})();</span>
</span></span><span class="line"><span class="cl"><span class="p">})();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® a Ê®°Âùó‰∏≠‰ΩøÁî® commonjs ÁöÑ require ËØ≠Ê≥ïÂä†ËΩΩ b Ê®°ÂùóÔºåb Ê®°Âùó‰ΩøÁî® ES Module ËøõË°åÈªòËÆ§ÂØºÂá∫ÂíåÂëΩÂêçÂØºÂá∫ÔºåÂàôÂú® a Ê®°Âùó‰∏≠ÂæóÂà∞ÁöÑÊòØ b Ê®°ÂùóÂØπÂ∫îÁöÑÊ®°ÂùóÂØπË±°ÔºåÂÖ∂‰∏≠ÂåÖÂê´ÂëΩÂêçÂØºÂá∫Âíå default ÈªòËÆ§ÂØºÂá∫Â±ûÊÄß„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// index.js:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./title&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span> <span class="c1">// titleÊòØtitle.jsÊ®°ÂùóÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// title.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="k">default</span> <span class="s2">&#34;title_name&#34;</span><span class="p">;</span> <span class="c1">// ÈªòËÆ§ÂØºÂá∫
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="kr">const</span> <span class="nx">age</span> <span class="o">=</span> <span class="s2">&#34;title_age&#34;</span><span class="p">;</span> <span class="c1">// ÂëΩÂêçÂØºÂá∫
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/blogs/post/webpack/images/image-20220522184522377.png"
	width="689"
	height="208"
	srcset="/blogs/post/webpack/images/image-20220522184522377_hu_2a4cf46de15e3b3a.png 480w, /blogs/post/webpack/images/image-20220522184522377_hu_aa1fb1f2eb23bb70.png 1024w"
	loading="lazy"
	
		alt="image-20220522184522377"
	
	
		class="gallery-image" 
		data-flex-grow="331"
		data-flex-basis="795px"
	
></p>
<p>Èù¢ËØïÔºöcommonjs Âíå es Module ÂØºÂá∫ÁöÑÂå∫Âà´Ôºü</p>
<ul>
<li>commonjs ÊòØÂú®ÂØºÂÖ•Ê®°Âùó‰∏≠ÊòØÂÄºÂíåÂºïÁî®</li>
<li>es module ÊòØÂú®ÂØºÂÖ•Ê®°Âùó‰∏≠ÊòØÂØπÂØºÂá∫Ê®°ÂùóÂØºÂá∫ÂØπË±°ÊàñËÄÖÂÄºÁöÑÂÜÖÂ≠òÂºïÁî®</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// index.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="nx">title</span><span class="p">,</span> <span class="p">{</span> <span class="nx">age</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;./title.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">age</span><span class="p">);</span> <span class="c1">// ÊâìÂç∞ 20
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// title.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl"><span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">age</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// index.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./title.js&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span> <span class="c1">// ÊâìÂç∞ 10
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title</span><span class="p">.</span><span class="nx">obj</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> <span class="c1">// 456
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// title.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span><span class="o">:</span> <span class="mi">123</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">age</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">obj</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">age</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">obj</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="mi">456</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÂºÇÊ≠•Âä†ËΩΩ">ÂºÇÊ≠•Âä†ËΩΩ
</h2><p>ÊáíÂä†ËΩΩÂíå‰ª£Á†ÅÂàÜÂâ≤ÔºåÂéüÁîüÁöÑ‰ª£Á†ÅÂàÜÂâ≤ÁÇπÔºåÂèØ‰ª•ÂàÜÂâ≤Ê®°Âùó‰∏∫‰∏Ä‰∏™‰∏™ÂçïÁã¨ÁöÑÊñá‰ª∂‰∏Ä‰∏™‰∏™Âä†ËΩΩ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// index.js  importËøîÂõûÁöÑÁªìÊûúÊòØ‰∏Ä‰∏™promiseÂÆû‰æãÔºåËøîÂõûÁöÑÁªìÊûú‰∏çÁÆ°Ê∫êÊñá‰ª∂ÊòØcommonjsËøòÊòØesmoduleÔºåÈÉΩÂåÖË£Ö‰∏∫esmodule
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span><span class="p">(</span><span class="cm">/* webpackChunkName: &#34;hello&#34; */</span> <span class="s2">&#34;./hello.js&#34;</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="k">default</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// hello.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="k">default</span> <span class="s2">&#34;hello&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâìÂåÖÂêéÔºåÁî®Êà∑ËÆøÈóÆÊâìÂåÖÂêéÁöÑ html Êñá‰ª∂ÔºåËØ•Êñá‰ª∂ÂºïÂÖ•‰∫ÜÊï¥‰∏™È°πÁõÆÁöÑÂêØÂä® js Êñá‰ª∂Ôºàbuild.js ÊàñËÄÖ main.jsÔºâ,‰∏ç‰ºöÂä†ËΩΩÊãÜÂåÖÂêéÊ≤°ÊúâÁî®Âà∞ÁöÑ js Êñá‰ª∂„ÄÇÂΩìÂú®ÊµèËßàÂô®‰∏≠ÊâßË°åÂêØÂä® js Êñá‰ª∂Êó∂ÔºåËØ•Êñá‰ª∂‰ºöÂ∞ÜÁî®Âà∞ÁöÑ js Êñá‰ª∂ÈÄöËøáÂàõÂª∫ script Ê†áÁ≠æÁöÑÂΩ¢ÂºèÂéªÂä†ËΩΩÊãÜÂåÖÁöÑ js Êñá‰ª∂ÔºåËØ∑Ê±ÇÂõûÊù•ÁöÑ js Êñá‰ª∂‰∏ÄËß£ÊûêÊâßË°åÂ∞±‰ºöËß¶ÂèëÂ∑≤ÁªèÂú®ÂâçÁ´ØË¢´ÂÆö‰πâÂ•ΩÁöÑÊñπÊ≥ï‚Äî‚ÄîwebpackJsonpCallbackÔºåËøô‰∏™ÊñπÊ≥ï‰ºöÂ∞ÜËØ∑Ê±ÇÂõûÊù• js ÁöÑÊñá‰ª∂‰æùÊ¨°ÂÜÖÂÆπÊåÇËΩΩÂà∞ modulesÔºåÂêåÊó∂ÊâßË°åÁõ∏Â∫îÊñá‰ª∂‰πãÂâçÂáÜÂ§áÁöÑ promise ÁöÑ resolve ÊñπÊ≥ï„ÄÇÂΩìÊâÄÊúâÊñá‰ª∂ÈÉΩÂä†ËΩΩÂÆåÊàê‰∏î promise ÁöÑ resolve ÊñπÊ≥ïÈÉΩÊàêÂäüË∞ÉÁî®ÂêéÔºåÂ∞ÜËß¶Âèë Promise.allÔºåÁÑ∂ÂêéÂú® promise.all ÁöÑ then ÊñπÊ≥ï‰∏≠‰æùÊ¨°Ëß¶Âèë require ÊñπÊ≥ïÔºåÂä†ËΩΩÂπ∂ÊâßË°åÂ∑≤ÁªèÊåÇËΩΩÂà∞ modules ‰∏äÁöÑËØ∑Ê±ÇÂõûÊù•ÁöÑ js Êñá‰ª∂ÂÜÖÂÆπ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">debugger</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">modules</span> <span class="o">=</span> <span class="p">{};</span> <span class="c1">// Ê®°ÂùóÂÆö‰πâÂ≠òÊîæÂú®Ëøô‰∏™ÂØπË±°‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">cache</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">require</span><span class="p">(</span><span class="nx">moduleId</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">cachedModule</span> <span class="o">=</span> <span class="nx">cache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">cachedModule</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">cachedModule</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">module</span> <span class="o">=</span> <span class="p">(</span><span class="nx">cache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">exports</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="nx">modules</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">](</span><span class="nx">module</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">require</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">definition</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">definition</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">require</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">definition</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">require</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">key</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">get</span><span class="o">:</span> <span class="nx">definition</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">require</span><span class="p">.</span><span class="nx">o</span> <span class="o">=</span> <span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">prop</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">prop</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">require</span><span class="p">.</span><span class="nx">r</span> <span class="o">=</span> <span class="p">(</span><span class="nx">exports</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">Symbol</span> <span class="o">!==</span> <span class="s2">&#34;undefined&#34;</span> <span class="o">&amp;&amp;</span> <span class="nx">Symbol</span><span class="p">.</span><span class="nx">toStringTag</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">Symbol</span><span class="p">.</span><span class="nx">toStringTag</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">value</span><span class="o">:</span> <span class="s2">&#34;Module&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="s2">&#34;__esModule&#34;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">value</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">webpackJsonpCallback</span><span class="p">([</span><span class="nx">chunkIds</span><span class="p">,</span> <span class="nx">moreModules</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">resolves</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">chunkIds</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">chunkId</span> <span class="o">=</span> <span class="nx">chunkIds</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="nx">resolves</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">][</span><span class="mi">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">moduleId</span> <span class="k">in</span> <span class="nx">moreModules</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">modules</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">]</span> <span class="o">=</span> <span class="nx">moreModules</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//‰æùÊ¨°ÂèñÂá∫promiseÁöÑresolveÊñπÊ≥ïÔºåËÆ©ÂÆÉÂØπÂ∫îÁöÑpromiseÂèòÊàêÊàêÂäüÊÄÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">while</span> <span class="p">(</span><span class="nx">resolves</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">resolves</span><span class="p">.</span><span class="nx">shift</span><span class="p">()();</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Â∑≤ÁªèÂÆâË£ÖËøáÁöÑÔºåÊàñËÄÖËØ¥Â∑≤ÁªèÂä†ËΩΩÂ•ΩÁöÑ‰ª£Á†ÅÂùó
</span></span></span><span class="line"><span class="cl"><span class="c1">//keyÊòØ‰ª£Á†ÅÂùóÁöÑÂêçÂ≠óÔºåÂÄºÊòØ‰ª£Á†ÅÂùóÁöÑÁä∂ÊÄÅ
</span></span></span><span class="line"><span class="cl"><span class="c1">//mainÂ∞±ÊòØÈªòËÆ§‰ª£Á†ÅÂùóÁöÑÂêçÁß∞ 0Ë°®Á§∫Â∑≤ÁªèÂä†ËΩΩÂÆåÊàê
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">installedChunks</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//ÂΩì‰∏Ä‰∏™‰ª£Á†ÅÂùóÂÆÉÁöÑÂÄºÊòØ‰∏Ä‰∏™Êï∞ÁªÑÁöÑÊó∂ÂÄôË°®Á§∫Ê≠§‰ª£Á†ÅÂùóÂØπÂ∫îÁöÑJSÊñá‰ª∂Ê≠£Âú®Âä†ËΩΩ‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//&#39;src_hello_js&#39;:[resolve,reject,promise]=&gt;0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">require</span><span class="p">.</span><span class="nx">f</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl"><span class="nx">require</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span><span class="p">;</span> <span class="c1">// Ëøô‰∏™ÂÄºÂèñÁöÑÊòØwebpackÊñá‰ª∂‰∏≠outputÈÖçÁΩÆÈ°π‰∏≠ÁöÑpublicPathÁöÑÂÄº„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">require</span><span class="p">.</span><span class="nx">u</span> <span class="o">=</span> <span class="p">(</span><span class="nx">chunkId</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">chunkId</span> <span class="o">+</span> <span class="s2">&#34;.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">require</span><span class="p">.</span><span class="nx">l</span> <span class="o">=</span> <span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">script</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&#34;script&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">script</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">url</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">document</span><span class="p">.</span><span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">script</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">script</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">script</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//jsonp ÈÄöËøáJSONPÁöÑÊñπÂºèÂä†ËΩΩchunkIdÂØπÂ∫îÁöÑJSÊñá‰ª∂ÔºåÁîüÊàê‰∏Ä‰∏™promiseÊîæÂà∞promisesÊï∞ÁªÑÈáå
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">require</span><span class="p">.</span><span class="nx">f</span><span class="p">.</span><span class="nx">j</span> <span class="o">=</span> <span class="p">(</span><span class="nx">chunkId</span><span class="p">,</span> <span class="nx">promises</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">installedChunkData</span> <span class="o">=</span> <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">installedChunkData</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">installedChunkData</span> <span class="o">=</span> <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="nx">installedChunkData</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">promise</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//installedChunkData=[resolve,reject,promise]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">promises</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">promise</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">p</span> <span class="o">+</span> <span class="nx">require</span><span class="p">.</span><span class="nx">u</span><span class="p">(</span><span class="nx">chunkId</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">require</span><span class="p">.</span><span class="nx">l</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">require</span><span class="p">.</span><span class="nx">e</span> <span class="o">=</span> <span class="p">(</span><span class="nx">chunkId</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">promises</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">  <span class="nx">require</span><span class="p">.</span><span class="nx">f</span><span class="p">.</span><span class="nx">j</span><span class="p">(</span><span class="nx">chunkId</span><span class="p">,</span> <span class="nx">promises</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">promises</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">chunkLoadingGlobal</span> <span class="o">=</span> <span class="p">(</span><span class="nb">window</span><span class="p">[</span><span class="s2">&#34;webpackChunk_2_bundle&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">chunkLoadingGlobal</span><span class="p">.</span><span class="nx">push</span> <span class="o">=</span> <span class="nx">webpackJsonpCallback</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">require</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">e</span><span class="p">(</span><span class="s2">&#34;src_hello_js&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">require</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">require</span><span class="p">,</span> <span class="s2">&#34;./src/hello.js&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="k">default</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//‰ª£Á†ÅÂùóÂÖ∂ÂÆûÂ∞±Ê®°ÂùóÁöÑÈõÜÂêà
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>src_hello_js.js</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">(</span><span class="nx">self</span><span class="p">[</span><span class="s2">&#34;webpackChunk_2_bundle&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">self</span><span class="p">[</span><span class="s2">&#34;webpackChunk_2_bundle&#34;</span><span class="p">]</span> <span class="o">||</span> <span class="p">[]).</span><span class="nx">push</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">  <span class="p">[</span><span class="s2">&#34;src_hello_js&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;./src/hello.js&#34;</span><span class="o">:</span> <span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">require</span><span class="p">.</span><span class="nx">r</span><span class="p">(</span><span class="nx">exports</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nx">require</span><span class="p">.</span><span class="nx">d</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">default</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">_DEFAULT_EXPORT__</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">_DEFAULT_EXPORT__</span> <span class="o">=</span> <span class="s2">&#34;hello&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ª£Á†ÅÂùóÔºöwebpack ‰∏≠ÊØè‰∏™ÂÖ•Âè£ÈÉΩ‰ºöÂØπÂ∫î‰∏Ä‰∏™‰ª£Á†ÅÂùóÔºå‰ª£Á†ÅÂùóÂèàÊòØËÆ∏Â§öÊ®°ÂùóÁöÑÈõÜÂêà„ÄÇ‰ΩÜÊòØ‰ª£Á†ÅÂùóÂèà‰∏çÂ±ÄÈôê‰∫é‰ª•ÂÖ•Âè£ entry Êù•‰Ωú‰∏∫Âå∫ÂàÜÊù°‰ª∂„ÄÇ ‰∫ãÂÆû‰∏äÊØè‰∏™ entry ÂíåÂºÇÊ≠•Âä†ËΩΩÁöÑÊ®°ÂùóÈÉΩ‰ºö‰∫ßÁîü‰∏Ä‰∏™‰ª£Á†ÅÂùóÔºåËØ•‰ª£Á†ÅÂùóÁî±ËØ•ÂÖ•Âè£Êñá‰ª∂ÂèäÂÆÉÁöÑÁõ¥Êé•ÂíåÈó¥Êé•‰æùËµñÁöÑÊ®°ÂùóÊâÄÁªÑÊàê„ÄÇÔºàchunkÔºâ ÊØè‰∏™ chunk ÈÉΩ‰ºöÊúâ‰∏Ä‰∏™ id„ÄÇ id ÂèØËÉΩÊòØ entry ÂÖ•Âè£‰∏≠ËÆæÁΩÆÁöÑÂêçÂ≠óÔºå‰πüËÉΩÊòØÈªòËÆ§Áîü‰∫ßÁöÑÂêçÂ≠ó„ÄÇ</p>
<p>ÊáíÂä†ËΩΩ‰∏ÄÂÆöÊÑèÂë≥ÁùÄ‰ª£Á†ÅÂàÜÂâ≤„ÄÇ</p>
<h2 id="ast">AST
</h2><ul>
<li>ÊäΩË±°ËØ≠Ê≥ïÊ†ëÔºàAbstract Syntax TreeÔºåASTÔºâÊòØÊ∫ê‰ª£Á†ÅÁªìÊûÑÁöÑ‰∏ÄÁßçÊäΩË±°Ë°®Á§∫</li>
<li>ÂÆÉ‰ª•Ê†ëÁä∂ÁöÑÂΩ¢ÂºèË°®Áé∞ÁºñÁ®ãËØ≠Ë®ÄÁöÑ‰ª£Á†ÅÁªìÊûÑÔºåÊ†ë‰∏äÁöÑÊØè‰∏™ËäÇÁÇπÈÉΩË°®Á§∫Ê∫ê‰ª£Á†Å‰∏≠ÁöÑ‰∏ÄÁßçÁªìÊûÑ</li>
<li>ÂéüÁêÜÈÉΩÊòØÈÄöËøá<code>JavaScript Parser</code>Êää‰ª£Á†ÅËΩ¨Âåñ‰∏∫‰∏ÄÈ¢óÊäΩË±°ËØ≠Ê≥ïÊ†ëÔºàASTÔºâÔºåËøôÈ¢óÊ†ëÂÆö‰πâ‰∫Ü‰ª£Á†ÅÁöÑÁªìÊûÑÔºåÈÄöËøáÊìç‰ΩúËøôÈ¢óÊ†ëÔºåÂèØ‰ª•Á≤æÂáÜÁöÑÂÆö‰ΩçÂà∞Â£∞ÊòéËØ≠Âè•„ÄÅËµãÂÄºËØ≠Âè•„ÄÅËøêÁÆóËØ≠Âè•Á≠âÔºåÂÆûÁé∞ÂØπ‰ª£Á†ÅÁöÑÂàÜÊûê„ÄÅ‰ºòÂåñ„ÄÅÂèòÊõ¥Á≠âÊìç‰Ωú</li>
</ul>
<h3 id="Áî®ÈÄî">Áî®ÈÄî
</h3><ul>
<li>‰ª£Á†ÅËØ≠Ê≥ï„ÄÅÈ£éÊ†ºÊ£ÄÊü•Ôºå‰ª£Á†ÅÁöÑÊ†ºÂºèÂåñ„ÄÅÈ´ò‰∫Æ„ÄÅÈîôËØØÊèêÁ§∫„ÄÅËá™Âä®Ë°•ÂÖ®Á≠â</li>
<li>‰ºòÂåñÂèòÊõ¥‰ª£Á†ÅÔºåÊîπÂèò‰ª£Á†ÅÁªìÊûÑ‰ΩøËææÂà∞ÊÉ≥Ë¶ÅÁöÑÁªìÊûÑ</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/ast.jpg"
	
	
	
	loading="lazy"
	
		alt="ast"
	
	
></p>
<p>Á¨¨‰∏ÄÊ≠•ÔºöËØçÊ≥ïËß£ÊûêÔºåÊãÜÊàêÊúÄÂ∞èËØçÊ≥ïÂçïÂÖÉÔºå‰∏Ä‰∏™‰∏™ÂàÜËØçÔºàtokenÔºâÈÉΩÊúâËá™Â∑±ÁöÑÂê´‰πâ„ÄÇ</p>
<p>Á¨¨‰∫åÊ≠•ÔºöËØ≠Ê≥ïÂàÜÊûêÔºåÁîüÊàê astÔºåÁ®ãÂ∫èÁî±‰∏ÄË°åË°å‰ª£Á†ÅÁªÑÊàêÔºåÊØèË°å‰ª£Á†ÅÈÉΩÊòØ body ‰∏≠ÁöÑÊüê‰∏™ÂÖÉÁ¥†Ôºåbody Êú¨Ë∫´ÊòØÊï∞ÁªÑÊ†ºÂºèÔºåÊØè‰∏™ÂÖÉÁ¥†ÈÉΩÊúâ‰∏Ä‰∏™Á±ªÂûãÔºàÂ¶ÇÔºöÂèòÈáèÂ£∞ÊòéÔºâÊòØ‰∏Ä‰∏™ËäÇÁÇπ„ÄÇ</p>
<p><code>JavaScript Parser</code>ÊòØÊää JavaScript Ê∫êÁ†ÅËΩ¨Âåñ‰∏∫ÊäΩË±°ËØ≠Ê≥ïÊ†ëÁöÑËß£ÊûêÂô®</p>
<p>Âú® JavaScript Á§æÂå∫‰∏≠ÔºåÊúâÂá†‰∏™Â∏∏Áî®ÁöÑ JavaScript Ëß£ÊûêÂô®ÔºàParserÔºâ„ÄÇ‰ª•‰∏ãÊòØÂÖ∂‰∏≠‰∏Ä‰∫õÂ∏∏ËßÅÁöÑ JavaScript Ëß£ÊûêÂô®Ôºö</p>
<ol>
<li>Acorn: ‰∏Ä‰∏™ËΩªÈáè„ÄÅÂø´ÈÄüÁöÑ JavaScript Ëß£ÊûêÂô®ÔºåÂÆåÂÖ®Áî± js ‰ª£Á†ÅÂÆûÁé∞ÔºåÂÆÉ‰ª•ÂèØÊâ©Â±ïÁöÑÊñπÂºèËß£Êûê JavaScript ‰ª£Á†ÅÔºåÂπ∂Â∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫ÊäΩË±°ËØ≠Ê≥ïÊ†ëÔºàASTÔºâ„ÄÇAcorn Ë¢´ÂπøÊ≥õÁî®‰∫éÂêÑÁßçÂ∑•ÂÖ∑ÂíåÈ°πÁõÆ‰∏≠Ôºàwebpack„ÄÅrollup ‰∏≠Ôºâ„ÄÇ</li>
<li>Esprima: Esprima ÂèØ‰ª•Â∞Ü JavaScript ‰ª£Á†ÅËß£Êûê‰∏∫Ê†áÂáÜÁöÑ ECMAScript 5.1 ËØ≠Ê≥ïÊ†ë„ÄÇEsprima ‰πüÊîØÊåÅÊâ©Â±ïÔºåÂèØ‰ª•ÈÄöËøáÊèí‰ª∂Êú∫Âà∂ÂÆûÁé∞ÂØπ ECMAScript 6+ ÁöÑËß£Êûê„ÄÇ</li>
<li>Babel Parser: Babel ParserÔºà‰ª•ÂâçÁß∞‰∏∫ BabylonÔºâÊòØ Babel È°πÁõÆ‰∏≠‰ΩøÁî®ÁöÑ JavaScript Ëß£ÊûêÂô®„ÄÇÂÆÉÊîØÊåÅËß£ÊûêÊúÄÊñ∞ÁöÑ ECMAScript ËßÑËåÉÔºåÂπ∂‰∏î‰∏é Babel ÁöÑËΩ¨Êç¢Â∑•ÂÖ∑ÈìæÁ¥ßÂØÜÈõÜÊàê„ÄÇ</li>
<li>Shift Parser: Shift Parser ÊòØ‰∏Ä‰∏™ÂèØÊâ©Â±ïÁöÑ ECMAScript Ëß£ÊûêÂô®Ê°ÜÊû∂ÔºåÂÆÉÊèê‰æõ‰∫Ü‰∏ÄÁªÑ API ÂíåÂ∑•ÂÖ∑ÔºåÁî®‰∫éÊûÑÂª∫Ëá™ÂÆö‰πâÁöÑ JavaScript Ëß£ÊûêÂô®„ÄÇShift Parser ÁöÑÁõÆÊ†áÊòØÊèê‰æõ‰∏Ä‰∏™ÈÄöÁî®ÁöÑËß£ÊûêÂô®Ê°ÜÊû∂ÔºåÈÄÇÁî®‰∫éÂêÑÁßç ECMAScript ÁâàÊú¨ÂíåËØ≠Ë®ÄÊâ©Â±ï„ÄÇ</li>
</ol>
<h3 id="ast-ËäÇÁÇπ">AST ËäÇÁÇπ
</h3><ul>
<li><a class="link" href="https://github.com/estree/estree"  target="_blank" rel="noopener"
    >estree</a>ËßÑËåÉ</li>
<li><a class="link" href="https://github.com/babel/babel/blob/main/packages/babel-parser/ast/spec.md"  target="_blank" rel="noopener"
    >spec.md</a></li>
<li><a class="link" href="https://astexplorer.net/"  target="_blank" rel="noopener"
    >astexplorer</a></li>
<li>AST ËäÇÁÇπÔºànodeÔºâ
<ul>
<li>File Êñá‰ª∂</li>
<li>Program Á®ãÂ∫è</li>
<li>Literal Â≠óÈù¢ÈáèÔºå‰ª£Ë°®‰∏Ä‰∏™ÂÄºÔºå NumericLiteralÔºàÊï∞Â≠óÔºâ StringLiteralÔºàÂ≠óÁ¨¶‰∏≤Ôºâ BooleanLiteralÔºàÂ∏ÉÂ∞îÔºâ</li>
<li>Identifier Ê†áËØÜÁ¨¶Ôºå‰ª£Ë°®‰∏Ä‰∏™ÂèòÈáè</li>
<li>Statement ËØ≠Âè•</li>
<li>Declaration Â£∞ÊòéËØ≠Âè•</li>
<li>Expression Ë°®ËææÂºè</li>
<li>Class Á±ª</li>
<li>VariableDeclaration ÂèòÈáèÂ£∞ÊòéÔºå‰∏Ä‰∏™ VariableDeclaration ‰∏≠ÂèØËÉΩÂ≠òÂú®Â§ö‰∏™ VariableDeclaratorÔºå‰∏ÄË°åÂ£∞ÊòéÂ§ö‰∏™ÂèòÈáè</li>
<li>VariableDeclarator</li>
<li>FunctionDeclarationÔºåÂáΩÊï∞Â£∞Êòé</li>
<li>BlockStatementÔºåÂùóÁ∫ßËØ≠Âè•</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">ast</span> <span class="o">=</span> <span class="s2">&#34;test&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏äÈù¢ÁöÑ js ‰ª£Á†Å‰ΩøÁî® acorn Ëß£ÊûêÂô®ÁîüÊàêÁöÑ ast ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;type&#34;</span><span class="o">:</span> <span class="s2">&#34;Program&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;start&#34;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;end&#34;</span><span class="o">:</span> <span class="mi">16</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;body&#34;</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;type&#34;</span><span class="o">:</span> <span class="s2">&#34;VariableDeclaration&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;start&#34;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;end&#34;</span><span class="o">:</span> <span class="mi">16</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;declarations&#34;</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;type&#34;</span><span class="o">:</span> <span class="s2">&#34;VariableDeclarator&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;start&#34;</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;end&#34;</span><span class="o">:</span> <span class="mi">16</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;id&#34;</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;type&#34;</span><span class="o">:</span> <span class="s2">&#34;Identifier&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;start&#34;</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;end&#34;</span><span class="o">:</span> <span class="mi">7</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;name&#34;</span><span class="o">:</span> <span class="s2">&#34;ast&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;init&#34;</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;type&#34;</span><span class="o">:</span> <span class="s2">&#34;Literal&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;start&#34;</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;end&#34;</span><span class="o">:</span> <span class="mi">16</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;value&#34;</span><span class="o">:</span> <span class="s2">&#34;test&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;raw&#34;</span><span class="o">:</span> <span class="s2">&#34;&#39;test&#39;&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;kind&#34;</span><span class="o">:</span> <span class="s2">&#34;var&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;sourceType&#34;</span><span class="o">:</span> <span class="s2">&#34;module&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÈÅçÂéÜËØ≠Ê≥ïÊ†ë">ÈÅçÂéÜËØ≠Ê≥ïÊ†ë
</h3><p>AST<strong>ÊòØÊ∑±Â∫¶‰ºòÂÖàÈÅçÂéÜ</strong></p>
<p>ÈÄâÁî® esprima Ëß£ÊûêÂô®ÂèäÂÖ∂ÈÖçÂ•óÂ∑•ÂÖ∑„ÄÇ</p>
<p>ÂÆÉ‰ª¨Êèê‰æõ‰∫ÜÂØπ Esprima Ëß£ÊûêÂô®ÁöÑË°•ÂÖÖÂíåÊâ©Â±ïÂäüËÉΩ„ÄÇ‰ª•‰∏ãÊòØ‰∏Ä‰∫õ‰∏é Esprima Ëß£ÊûêÂô®Áõ∏ÂÖ≥ÁöÑÂ∏∏ËßÅÂ∑•ÂÖ∑Â∫ìÔºö</p>
<ol>
<li>Escodegen: Escodegen ÊòØ‰∏Ä‰∏™ JavaScript ‰ª£Á†ÅÁîüÊàêÂô®ÔºåÂÆÉ‰ΩøÁî® esprima Ëß£ÊûêÂô®ÁîüÊàêÁöÑÊäΩË±°ËØ≠Ê≥ïÊ†ëÔºàASTÔºâÔºåÂ∞ÜÂÖ∂ËΩ¨Êç¢ÂõûÁ≠âÊïàÁöÑ JavaScript ‰ª£Á†Å„ÄÇEscodegen ÂÖÅËÆ∏‰Ω†Ê†πÊçÆÈúÄË¶ÅËá™ÂÆö‰πâÁîüÊàêÁöÑ‰ª£Á†ÅÁöÑÊ†ºÂºèÂíåÈ£éÊ†º„ÄÇ</li>
<li>Esquery: Esquery ÊòØ‰∏Ä‰∏™Áî®‰∫éÂú® JavaScript AST ‰∏≠ÊâßË°å CSS È£éÊ†ºÊü•ËØ¢ÁöÑÂ∫ì„ÄÇÂÆÉÂÖÅËÆ∏‰Ω†‰ΩøÁî®ÈÄâÊã©Âô®ËØ≠Ê≥ï‰ªé JavaScript AST ‰∏≠ÈÄâÊã©ÂíåÊèêÂèñÁâπÂÆöÁöÑËäÇÁÇπ„ÄÇEsquery ÂèØ‰ª•‰∏é Esprima Ëß£ÊûêÂô®‰∏ÄËµ∑‰ΩøÁî®Ôºå‰ª•‰æøÂú® AST ‰∏äÊâßË°åÈ´òÁ∫ßÁöÑÊü•ËØ¢Êìç‰Ωú„ÄÇ</li>
<li>Esprima-walk: Esprima-walk ÊòØ‰∏Ä‰∏™Áî®‰∫éÈÅçÂéÜÂíåËÆøÈóÆ JavaScript AST ÁöÑÂ∑•ÂÖ∑Â∫ì„ÄÇÂÆÉÊèê‰æõ‰∫Ü‰∏ÄÁªÑÁÆÄÂçïÁöÑ APIÔºå‰Ωø‰Ω†ËÉΩÂ§üËΩªÊùæÂú∞ËÆøÈóÆ AST ‰∏≠ÁöÑËäÇÁÇπÔºåÂπ∂ÊâßË°åËá™ÂÆö‰πâÁöÑÊìç‰ΩúÊàñÂàÜÊûê„ÄÇ</li>
<li>Estraverse: Estraverse ÊòØ‰∏Ä‰∏™ JavaScript AST ÈÅçÂéÜÂô®ÔºåÂÆÉÊèê‰æõ‰∫ÜÂØπ AST ÁöÑÊ∑±Â∫¶‰ºòÂÖàÈÅçÂéÜÂäüËÉΩ„ÄÇÂÆÉÂÖÅËÆ∏‰Ω†Âú®ÈÅçÂéÜ AST Êó∂ÊâßË°åËá™ÂÆö‰πâÁöÑÂõûË∞ÉÂáΩÊï∞ÔºåÂπ∂ÂØπËäÇÁÇπËøõË°å‰øÆÊîπÊàñÂàÜÊûê„ÄÇ</li>
<li>Eslevels: Eslevels ÊòØ‰∏Ä‰∏™Áî®‰∫éÈùôÊÄÅÂàÜÊûêÂíåÊèêÂèñ JavaScript ‰ª£Á†Å‰∏≠Â£∞ÊòéÁöÑÂèòÈáèÂíåÂáΩÊï∞ÁöÑÂ∫ì„ÄÇÂÆÉ‰ΩøÁî® Esprima Ëß£ÊûêÂô®Ëß£Êûê JavaScript ‰ª£Á†ÅÔºåÂπ∂ÁîüÊàê‰∏ÄÁªÑÂ£∞ÊòéËäÇÁÇπÔºå‰Ωø‰Ω†ËÉΩÂ§üÂàÜÊûê‰ª£Á†Å‰∏≠ÁöÑÂèòÈáè‰ΩúÁî®ÂüüÂíå‰æùËµñÂÖ≥Á≥ª„ÄÇ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install esprima estraverse escodegen -S
</span></span></code></pre></td></tr></table>
</div>
</div><p>esprimaÔºöÊää JS Ê∫ê‰ª£Á†ÅËΩ¨Êàê AST ËØ≠Ê≥ïÊ†ë</p>
<p>estraverseÔºöÈÅçÂéÜËØ≠Ê≥ïÊ†ëÔºå‰øÆÊîπÊ†ë‰∏äÁöÑËäÇÁÇπ</p>
<p>escodegenÔºöÊää AST ËØ≠Ê≥ïÊ†ëÈáçÊñ∞ËΩ¨Êç¢Êàê‰ª£Á†Å</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">esprima</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;esprima&#34;</span><span class="p">);</span> <span class="c1">//ÊääJSÊ∫ê‰ª£Á†ÅËΩ¨ÊàêASTËØ≠Ê≥ïÊ†ë
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">estraverse</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;estraverse&#34;</span><span class="p">);</span> <span class="c1">///ÈÅçÂéÜËØ≠Ê≥ïÊ†ë,ÈÄöËøáÊèí‰ª∂‰øÆÊîπÊ†ë‰∏äÁöÑËäÇÁÇπ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">escodegen</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;escodegen&#34;</span><span class="p">);</span> <span class="c1">//ÊääASTËØ≠Ê≥ïÊ†ëÈáçÊñ∞ËΩ¨Êç¢Êàê‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">code</span> <span class="o">=</span> <span class="sb">`function ast(){}`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">ast</span> <span class="o">=</span> <span class="nx">esprima</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">code</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">indent</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">padding</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="s2">&#34; &#34;</span><span class="p">.</span><span class="nx">repeat</span><span class="p">(</span><span class="nx">indent</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Ê∑±Â∫¶‰ºòÂÖàÈÅçÂéÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">estraverse</span><span class="p">.</span><span class="nx">traverse</span><span class="p">(</span><span class="nx">ast</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">enter</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">padding</span><span class="p">()</span> <span class="o">+</span> <span class="nx">node</span><span class="p">.</span><span class="nx">type</span> <span class="o">+</span> <span class="s2">&#34;ËøõÂÖ•&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&#34;FunctionDeclaration&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">node</span><span class="p">.</span><span class="nx">id</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&#34;newAst&#34;</span><span class="p">;</span> <span class="c1">// ‰øÆÊîπÂáΩÊï∞ÂêçÂ≠ó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">indent</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">leave</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">indent</span> <span class="o">-=</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">padding</span><span class="p">()</span> <span class="o">+</span> <span class="nx">node</span><span class="p">.</span><span class="nx">type</span> <span class="o">+</span> <span class="s2">&#34;Á¶ªÂºÄ&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">escodegen</span><span class="p">.</span><span class="nx">generate</span><span class="p">(</span><span class="nx">ast</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span> <span class="c1">// ÈáçÊñ∞ÁîüÊàê‰ª£Á†Å
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ProgramËøõÂÖ•
</span></span><span class="line"><span class="cl">  FunctionDeclarationËøõÂÖ•
</span></span><span class="line"><span class="cl">    IdentifierËøõÂÖ•
</span></span><span class="line"><span class="cl">    IdentifierÁ¶ªÂºÄ
</span></span><span class="line"><span class="cl">    BlockStatementËøõÂÖ•
</span></span><span class="line"><span class="cl">    BlockStatementÁ¶ªÂºÄ
</span></span><span class="line"><span class="cl">  FunctionDeclarationÁ¶ªÂºÄ
</span></span><span class="line"><span class="cl">ProgramÁ¶ªÂºÄ
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;Program&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;body&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;FunctionDeclaration&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;Identifier&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;ast&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;params&#34;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;body&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;BlockStatement&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;body&#34;</span><span class="p">:</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;generator&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;expression&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;async&#34;</span><span class="p">:</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;sourceType&#34;</span><span class="p">:</span> <span class="s2">&#34;module&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Babel Parser Âíå Esprima ÊòØ‰∏§‰∏™Áã¨Á´ãÁöÑ JavaScript Ëß£ÊûêÂô®ÔºåÂÆÉ‰ª¨ÂÖ∑ÊúâÁõ∏‰ººÁöÑÁõÆÊ†áÔºåÂç≥Ëß£Êûê JavaScript ‰ª£Á†ÅÂπ∂ÁîüÊàêÁõ∏Â∫îÁöÑÊäΩË±°ËØ≠Ê≥ïÊ†ëÔºàASTÔºâ„ÄÇÂ∞ΩÁÆ°ÂÆÉ‰ª¨ÊúâÁõ∏‰ººÁöÑÂäüËÉΩÔºå‰ΩÜÂÆÉ‰ª¨ÊòØÁî±‰∏çÂêåÁöÑÂõ¢ÈòüÂºÄÂèëÂíåÁª¥Êä§ÁöÑÔºåÂπ∂‰∏îÊúâ‰∏Ä‰∫õÂå∫Âà´„ÄÇ</p>
<p>‰∏ãÈù¢ÊòØ Babel Parser Âíå Esprima ‰πãÈó¥ÁöÑ‰∏Ä‰∫õÂÖ≥Á≥ªÂíåÂå∫Âà´Ôºö</p>
<ol>
<li>‰ª£Á†ÅÂü∫Á°ÄÔºöBabel Parser ÊòØ Babel È°πÁõÆ‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂÆÉÊòØ‰Ωú‰∏∫ Babel ÁöÑÈªòËÆ§Ëß£ÊûêÂô®ËÄåÂºÄÂèëÁöÑ„ÄÇÂÆÉÁöÑ‰ª£Á†ÅÂü∫Á°ÄÊòØÂü∫‰∫é Babylon È°πÁõÆÔºåËØ•È°πÁõÆÂú®ÂêéÊù•ÊîπÂêç‰∏∫ Babel Parser„ÄÇËÄå Esprima ÊòØ‰∏Ä‰∏™Áã¨Á´ãÁöÑÈ°πÁõÆÔºåÁî±Áã¨Á´ãÁöÑÂõ¢ÈòüËøõË°åÂºÄÂèëÂíåÁª¥Êä§„ÄÇ</li>
<li>ECMAScript ÁâàÊú¨ÊîØÊåÅÔºöBabel Parser ÁöÑËÆæËÆ°ÁõÆÊ†áÊòØÊîØÊåÅÊúÄÊñ∞ÁöÑ ECMAScript ËØ≠Ê≥ïÂíåÂäüËÉΩÔºåÂåÖÊã¨ ECMAScript 2015+ ÁöÑÁâπÊÄßÔºå‰ª•ÂèäÂ∞öÊú™Ë¢´‰∏ªÊµÅÊµèËßàÂô®ÂÆåÂÖ®ÊîØÊåÅÁöÑÊèêÊ°à„ÄÇEsprima Âàô‰∏ªË¶ÅÊîØÊåÅ ECMAScript 5.1 ÁöÑËØ≠Ê≥ïÔºåËôΩÁÑ∂ÂÆÉ‰πüÂèØ‰ª•ÈÄöËøáÊèí‰ª∂ËøõË°åÊâ©Â±ï‰ª•ÊîØÊåÅ ECMAScript 6+ ÁöÑÁâπÊÄß„ÄÇ</li>
<li>Êèí‰ª∂ÁîüÊÄÅÁ≥ªÁªüÔºöBabel Parser ÈÖçÂêà Babel ÁöÑÊèí‰ª∂ÁîüÊÄÅÁ≥ªÁªü‰ΩøÁî®ÔºåËøô‰ΩøÂæóÂºÄÂèë‰∫∫ÂëòÂèØ‰ª•Ê∑ªÂä†Âíå‰ΩøÁî®ÂêÑÁßçËΩ¨Êç¢ÂíåÊèí‰ª∂Êù•‰øÆÊîπÊàñËΩ¨Êç¢ JavaScript ‰ª£Á†Å„ÄÇEsprima Êú¨Ë∫´Âπ∂Ê≤°ÊúâÊèê‰æõÁ±ª‰ººÁöÑÊèí‰ª∂Á≥ªÁªüÔºå‰ΩÜÂèØ‰ª•‰∏éÂÖ∂‰ªñÂ∑•ÂÖ∑Â∫ìÁªìÂêà‰ΩøÁî®ÔºåÂÆûÁé∞Á±ª‰ººÁöÑÂäüËÉΩ„ÄÇ</li>
</ol>
<h2 id="babel">Babel
</h2><p>Â∑•‰ΩúËøáÁ®ãÂàÜ‰∏∫‰∏â‰∏™ÈÉ®ÂàÜÔºö</p>
<ul>
<li>
<p>Parse(Ëß£Êûê) Â∞ÜÊ∫ê‰ª£Á†ÅËΩ¨Êç¢ÊàêÊäΩË±°ËØ≠Ê≥ïÊ†ëÔºåÊ†ë‰∏äÊúâÂæàÂ§öÁöÑ<a class="link" href="https://github.com/estree/estree"  target="_blank" rel="noopener"
    >estree ËäÇÁÇπ</a></p>
</li>
<li>
<p>Transform(ËΩ¨Êç¢) ÂØπÊäΩË±°ËØ≠Ê≥ïÊ†ëËøõË°åËΩ¨Êç¢</p>
</li>
<li>
<p>Generate(‰ª£Á†ÅÁîüÊàê) Â∞Ü‰∏ä‰∏ÄÊ≠•ÁªèËøáËΩ¨Êç¢ËøáÁöÑÊäΩË±°ËØ≠Ê≥ïÊ†ëÁîüÊàêÊñ∞ÁöÑ‰ª£Á†Å</p>
</li>
</ul>
<img src="http://img.zhufengpeixun.com/ast-compiler-flow.jpg" alt="ast-compiler-flow.jpg" style="zoom:200%;" />
<h3 id="babel-Êèí‰ª∂">babel Êèí‰ª∂
</h3><ul>
<li>
<p><a class="link" href="https://github.com/babel/babel/tree/master/packages/@babel/parser"  target="_blank" rel="noopener"
    >@babel/parser</a> ÂèØ‰ª•ÊääÊ∫êÁ†ÅËΩ¨Êç¢Êàê AST</p>
</li>
<li>
<p><a class="link" href="https://www.npmjs.com/package/babel-traverse"  target="_blank" rel="noopener"
    >@babel/traverse</a>Áî®‰∫éÂØπ AST ÁöÑÈÅçÂéÜÔºåÁª¥Êä§‰∫ÜÊï¥Ê£µÊ†ëÁöÑÁä∂ÊÄÅÔºåÂπ∂‰∏îË¥üË¥£ÊõøÊç¢„ÄÅÁßªÈô§ÂíåÊ∑ªÂä†ËäÇÁÇπ</p>
</li>
<li>
<p><a class="link" href="https://github.com/babel/babel/tree/master/packages/@babel/generate"  target="_blank" rel="noopener"
    >@babel/generate</a> ÂèØ‰ª•Êää AST ÁîüÊàêÊ∫êÁ†ÅÔºåÂêåÊó∂ÁîüÊàê sourcemap</p>
</li>
<li>
<p><a class="link" href="https://github.com/babel/babel/tree/master/packages/babel-types"  target="_blank" rel="noopener"
    >@babel/types</a> Áî®‰∫é AST ËäÇÁÇπÁöÑÂ∑•ÂÖ∑Â∫ì, ÂÆÉÂåÖÂê´‰∫ÜÊûÑÈÄ†ËäÇÁÇπ„ÄÅÈ™åËØÅËäÇÁÇπÁ±ªÂûã‰ª•ÂèäÂèòÊç¢ AST ËäÇÁÇπÁöÑÊñπÊ≥ïÔºåÂ∏ÆÂä©‰øÆÊîπËØ≠Ê≥ïÊ†ë</p>
</li>
<li>
<p><a class="link" href="https://www.npmjs.com/package/@babel/template"  target="_blank" rel="noopener"
    >@babel/template</a>ÂèØ‰ª•ÁÆÄÂåñ AST ÁöÑÂàõÂª∫ÈÄªËæëÔºåÂø´ÈÄüÂàõÂª∫ÁªìÁÇπ</p>
</li>
<li>
<p><a class="link" href="https://www.npmjs.com/package/@babel/code-frame"  target="_blank" rel="noopener"
    >@babel/code-frame</a>ÂèØ‰ª•ÊâìÂç∞‰ª£Á†Å‰ΩçÁΩÆ</p>
</li>
<li>
<p><a class="link" href="https://www.npmjs.com/package/@babel/core"  target="_blank" rel="noopener"
    >@babel/core</a> Babel ÁöÑÁºñËØëÂô®ÔºåÊ†∏ÂøÉ API ÈÉΩÂú®ËøôÈáåÈù¢ÔºåÊØîÂ¶ÇÂ∏∏ËßÅÁöÑ transform„ÄÅparseÔºåÂπ∂ÂÆûÁé∞‰∫ÜÊèí‰ª∂ÂäüËÉΩÔºåÂú® Babel ËΩ¨Êç¢ËøáÁ®ã‰∏≠Ôºå<code>@babel/parser</code> Ë¢´ <code>@babel/core</code> ‰ΩøÁî®ÔºåÁî®‰∫éËß£ÊûêËæìÂÖ•ÁöÑ JavaScript ‰ª£Á†Å„ÄÇ<code>@babel/parser</code> Â∞Ü‰ª£Á†ÅËß£Êûê‰∏∫ ASTÔºåÂπ∂Â∞Ü AST ‰º†ÈÄíÁªô <code>@babel/core</code>ÔºåÂêéËÄÖÂú® AST ‰∏äÂ∫îÁî®ÂêÑÁßç Babel Êèí‰ª∂ÂíåËΩ¨Êç¢ËßÑÂàôÔºåÊâßË°å‰ª£Á†ÅËΩ¨Êç¢Êìç‰Ωú„ÄÇÂõ†Ê≠§Ôºå<code>@babel/parser</code> ÊòØ <code>@babel/core</code> ÁöÑ‰∏Ä‰∏™ÈáçË¶Å‰æùËµñÊ®°ÂùóÔºåÁî®‰∫éÊèê‰æõ‰ª£Á†ÅËß£ÊûêÁöÑÂäüËÉΩ„ÄÇ</p>
</li>
<li>
<p><a class="link" href="https://www.npmjs.com/package/babylon"  target="_blank" rel="noopener"
    >babylon</a> Babel ÁöÑËß£ÊûêÂô®Ôºå‰ª•ÂâçÁöÑ babel parser,ÊòØÂü∫‰∫é acorn Êâ©Â±ïËÄåÊù•ÔºåÊâ©Â±ï‰∫ÜÂæàÂ§öËØ≠Ê≥ï,ÂèØ‰ª•ÊîØÊåÅ es2020„ÄÅjsx„ÄÅtypescript Á≠âËØ≠Ê≥ï</p>
</li>
<li>
<p><a class="link" href="https://babeljs.io/docs/en/next/babel-types.html"  target="_blank" rel="noopener"
    >babel-types-api</a></p>
</li>
<li>
<p><a class="link" href="https://github.com/brigand/babel-plugin-handbook/blob/master/translations/zh-Hans/README.md#asts"  target="_blank" rel="noopener"
    >Babel Êèí‰ª∂ÊâãÂÜå</a></p>
</li>
<li>
<p><a class="link" href="https://babeljs.io/en/repl.html"  target="_blank" rel="noopener"
    >babeljs.io</a> babel ÂèØËßÜÂåñÁºñËØëÂô®</p>
</li>
<li>
<p><a class="link" href="https://babeljs.io/docs/en/babel-types"  target="_blank" rel="noopener"
    >babel-types</a></p>
</li>
<li>
<p><a class="link" href="https://github.com/babel/babel/blob/main/packages/babel-types/src/ast-types/generated/index.ts#L2489-L2535"  target="_blank" rel="noopener"
    >Á±ªÂûãÂà´Âêç</a></p>
</li>
<li>
<p><a class="link" href="https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types"  target="_blank" rel="noopener"
    >DefinitelyTyped</a></p>
</li>
</ul>
<h2 id="ast-ÁöÑÂâçÁΩÆÁü•ËØÜ">AST ÁöÑÂâçÁΩÆÁü•ËØÜ
</h2><h3 id="ËÆøÈóÆÂô®Ê®°Âºè">ËÆøÈóÆÂô®Ê®°Âºè
</h3><ul>
<li>ËÆøÈóÆËÄÖÊ®°Âºè Visitor ÂØπ‰∫éÊüê‰∏™ÂØπË±°ÊàñËÄÖ‰∏ÄÁªÑÂØπË±°Ôºå‰∏çÂêåÁöÑËÆøÈóÆËÄÖÔºå‰∫ßÁîüÁöÑÁªìÊûú‰∏çÂêåÔºåÊâßË°åÊìç‰Ωú‰πü‰∏çÂêå</li>
<li><strong>Visitor ÁöÑÂØπË±°‰∏≠ÂÆö‰πâ‰∫ÜÁî®‰∫é AST ‰∏≠Ëé∑ÂèñÂÖ∑‰ΩìËäÇÁÇπÁöÑÊñπÊ≥ï</strong></li>
<li><strong>Visitor ‰∏äÊåÇËΩΩ‰ª•ËäÇÁÇπÁöÑ <code>type</code> ÂëΩÂêçÁöÑÊñπÊ≥ïÔºåÂΩìÈÅçÂéÜ AST ÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÂåπÈÖç‰∏ä typeÔºåÂ∞±‰ºöÊâßË°åÂØπÂ∫îÁöÑÊñπÊ≥ï</strong></li>
<li><strong>ËØ¥ÁôΩ‰∫Ü Visitor Â∞±ÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåËØ•ÂØπË±°ÂèØ‰ª•Êèê‰æõËÆ∏Â§ö‰∏çÂêåÁöÑÊñπÊ≥ïÔºàËøô‰∫õÊñπÊ≥ïÁöÑÂêçÂ≠óÂ∞±ÊòØ AST ‰∏≠‰∏çÂêåËäÇÁÇπÁöÑÂêçÂ≠óÔºâÔºå‰æõÁªô‰∏çÂêåÁöÑËÆøÈóÆËÄÖË∞ÉÁî®‰∏çÂêåÁöÑÊñπÊ≥ï</strong></li>
<li>Êèí‰ª∂Â∞±ÊòØ‰∏Ä‰∏™ËÆøÈóÆÂô®ÂØπË±°ÔºåÊØè‰∏™Êèí‰ª∂Âè™ÂÖ≥Ê≥®‰∏Ä‰∏™ AST ‰∏≠‰∏çÂêåÁöÑËäÇÁÇπÁ±ªÂûãÔºåÂπ∂ÂØπËøô‰∫õÂÖ≥Ê≥®ÁöÑËäÇÁÇπËøõË°åÊìç‰Ωú</li>
</ul>
<p>javascript ‰∏≠ÁöÑÂè¶‰∏ÄÁßçËÆøÈóÆÂô®Ê®°Âºè‰ª£Á†Å‰æãÂ≠êÔºö</p>
<p>ËÆøÈóÆÂô®Ê®°ÂºèÔºàAccessor PatternÔºâÈÄöËøáÂÆö‰πâËÆøÈóÆÂô®ÊñπÊ≥ïÊù•<strong>Â∞ÅË£ÖÂØπÂØπË±°Â±ûÊÄßÁöÑËÆøÈóÆÂíå‰øÆÊîπÊìç‰Ωú</strong>„ÄÇËÆøÈóÆÂô®Ê®°ÂºèÊèê‰æõ‰∫Ü‰∏ÄÁßçÈó¥Êé•ËÆøÈóÆÂØπË±°Â±ûÊÄßÁöÑÊñπÂºèÔºå‰ª•‰æøÂú®ËÆøÈóÆÂíå‰øÆÊîπÂ±ûÊÄßÊó∂ÂèØ‰ª•ÊâßË°åÈ¢ùÂ§ñÁöÑÈÄªËæëÊàñËøõË°åÈ™åËØÅ„ÄÇ</p>
<p>Âú®ËÆøÈóÆÂô®Ê®°Âºè‰∏≠ÔºåÊúâ‰∏§ÁßçÁ±ªÂûãÁöÑËÆøÈóÆÂô®ÊñπÊ≥ïÔºö</p>
<ol>
<li>GetterÔºàËé∑ÂèñÂô®ÔºâÔºöGetter ÊñπÊ≥ïÁî®‰∫éËé∑ÂèñÂØπË±°Â±ûÊÄßÁöÑÂÄº„ÄÇÂÆÉÈÄöËøáÂÆö‰πâ‰∏Ä‰∏™ÂáΩÊï∞Êù•ËÆøÈóÆÂØπË±°Â±ûÊÄßÔºåÂπ∂Âú®ËÆøÈóÆÊó∂ÊâßË°åÁâπÂÆöÁöÑÈÄªËæë„ÄÇGetter ÊñπÊ≥ïÈÄöÂ∏∏‰ª•<code>get</code>ÂÖ≥ÈîÆÂ≠ó‰∏∫ÂâçÁºÄÔºåÂêéÈù¢Ë∑üÁùÄÂ±ûÊÄßÂêçÔºå‰æãÂ¶Ç<code>get propertyName()</code>„ÄÇ</li>
<li>SetterÔºàËÆæÁΩÆÂô®ÔºâÔºöSetter ÊñπÊ≥ïÁî®‰∫éËÆæÁΩÆÂØπË±°Â±ûÊÄßÁöÑÂÄº„ÄÇÂÆÉÈÄöËøáÂÆö‰πâ‰∏Ä‰∏™ÂáΩÊï∞Êù•‰øÆÊîπÂØπË±°Â±ûÊÄßÔºåÂπ∂Âú®‰øÆÊîπÊó∂ÊâßË°åÁâπÂÆöÁöÑÈÄªËæë„ÄÇSetter ÊñπÊ≥ïÈÄöÂ∏∏‰ª•<code>set</code>ÂÖ≥ÈîÆÂ≠ó‰∏∫ÂâçÁºÄÔºåÂêéÈù¢Ë∑üÁùÄÂ±ûÊÄßÂêçÔºå‰æãÂ¶Ç<code>set propertyName(value)</code>„ÄÇ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">firstName</span><span class="o">:</span> <span class="s2">&#34;John&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">lastName</span><span class="o">:</span> <span class="s2">&#34;Doe&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">get</span> <span class="nx">fullName</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">+</span> <span class="s2">&#34; &#34;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">set</span> <span class="nx">fullName</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">parts</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&#34; &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">fullName</span><span class="p">);</span> <span class="c1">// ËæìÂá∫: &#34;John Doe&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">person</span><span class="p">.</span><span class="nx">fullName</span> <span class="o">=</span> <span class="s2">&#34;Jane Smith&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">firstName</span><span class="p">);</span> <span class="c1">// ËæìÂá∫: &#34;Jane&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">lastName</span><span class="p">);</span> <span class="c1">// ËæìÂá∫: &#34;Smith&#34;
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="path">path
</h3><p>ËØ≠Ê≥ïÊ†ë‰∏äÁöÑÊØè‰∏™ËäÇÁÇπ‰ºöÂØπÂ∫î‰∏Ä‰∏™Ë∑ØÂæÑÔºàpath Âíå node ‰∏Ä‰∏ÄÂØπÂ∫îÔºâ„ÄÇ<a class="link" href="https://github.com/babel/babel/blob/main/packages/babel-traverse/src/path/index.ts"  target="_blank" rel="noopener"
    >path</a></p>
<p>Ë∑ØÂæÑÂØπË±°‰∏äÁöÑÂ±ûÊÄßÊàñËÄÖÊñπÊ≥ïÔºö</p>
<ul>
<li>node ÂΩìÂâç AST ËäÇÁÇπ</li>
<li>parent Áà∂ AST ËäÇÁÇπ</li>
<li>parentPath Áà∂ AST ËäÇÁÇπÁöÑË∑ØÂæÑ</li>
<li>scope ‰ΩúÁî®Âüü</li>
<li>get(key) Ëé∑ÂèñÊüê‰∏™Â±ûÊÄßÁöÑ path</li>
<li>set(key, node) ËÆæÁΩÆÊüê‰∏™Â±ûÊÄß</li>
<li>is Á±ªÂûã(opts) Âà§Êñ≠ÂΩìÂâçËäÇÁÇπÊòØÂê¶ÊòØÊüê‰∏™Á±ªÂûã</li>
<li>find(callback) ‰ªéÂΩìÂâçËäÇÁÇπ‰∏ÄÁõ¥Âêë‰∏äÊâæÂà∞Ê†πËäÇÁÇπ(ÂåÖÊã¨Ëá™Â∑±)</li>
<li>findParent(callback)‰ªéÂΩìÂâçËäÇÁÇπ‰∏ÄÁõ¥Âêë‰∏äÊâæÂà∞Ê†πËäÇÁÇπ(‰∏çÂåÖÊã¨Ëá™Â∑±)</li>
<li>insertBefore(nodes) Âú®‰πãÂâçÊèíÂÖ•ËäÇÁÇπ</li>
<li>insertAfter(nodes) Âú®‰πãÂêéÊèíÂÖ•ËäÇÁÇπ</li>
<li>replaceWith(replacement) Áî®Êüê‰∏™ËäÇÁÇπÊõøÊç¢ÂΩìÂâçËäÇÁÇπ</li>
<li>replaceWithMultiple(nodes) Áî®Â§ö‰∏™ËäÇÁÇπÊõøÊç¢ÂΩìÂâçËäÇÁÇπ</li>
<li>replaceWithSourceString(replacement) ÊääÊ∫ê‰ª£Á†ÅËΩ¨Êàê AST ËäÇÁÇπÂÜçÊõøÊç¢ÂΩìÂâçËäÇÁÇπ</li>
<li>remove() Âà†Èô§ÂΩìÂâçËäÇÁÇπ</li>
<li>traverse(visitor, state) <strong>ÈÅçÂéÜÂΩìÂâçËäÇÁÇπÁöÑÂ≠êËäÇÁÇπ,Á¨¨ 1 ‰∏™ÂèÇÊï∞ÊòØËäÇÁÇπÔºåÁ¨¨ 2 ‰∏™ÂèÇÊï∞ÊòØÁî®Êù•‰º†ÈÄíÊï∞ÊçÆÁöÑÁä∂ÊÄÅ</strong></li>
<li>skip() Ë∑≥ËøáÂΩìÂâçËäÇÁÇπÂ≠êËäÇÁÇπÁöÑÈÅçÂéÜ</li>
<li>stop() ÁªìÊùüÊâÄÊúâÁöÑÈÅçÂéÜ</li>
</ul>
<p>ÊØè‰∏™Ë∑ØÂæÑÂØπÂ∫î‰∏Ä‰∏™ËäÇÁÇπ„ÄÇ</p>
<h3 id="scope">scope
</h3><p><a class="link" href="https://github.com/babel/babel/blob/main/packages/babel-traverse/src/scope/index.ts"  target="_blank" rel="noopener"
    >scope</a>ÂØπË±°‰∏äÁöÑÂ±ûÊÄßÊàñËÄÖÊñπÊ≥ïÔºö</p>
<ul>
<li>scope.bindings ÂΩìÂâç‰ΩúÁî®ÂüüÂÜÖÂ£∞ÊòéÁöÑÊâÄÊúâÂèòÈáè</li>
<li>scope.path ÁîüÊàê‰ΩúÁî®ÂüüÁöÑËäÇÁÇπÂØπÂ∫îÁöÑË∑ØÂæÑ</li>
<li>scope.references ÊâÄÊúâÁöÑÂèòÈáèÂºïÁî®ÁöÑË∑ØÂæÑ</li>
<li>getAllBindings() Ëé∑Âèñ‰ªéÂΩìÂâç‰ΩúÁî®Âüü‰∏ÄÁõ¥Âà∞Ê†π‰ΩúÁî®ÂüüÁöÑÈõÜÂêà</li>
<li>getBinding(name) ‰ªéÂΩìÂâç‰ΩúÁî®ÂüüÂà∞Ê†π‰ΩúÁî®ÂüüÊü•ÊâæÂèòÈáè</li>
<li>getOwnBinding(name) Âú®ÂΩìÂâç‰ΩúÁî®ÂüüÊü•ÊâæÂèòÈáè</li>
<li>parentHasBinding(name, noGlobals) ‰ªéÂΩìÂâçÁà∂‰ΩúÁî®ÂüüÂà∞Ê†π‰ΩúÁî®ÂüüÊü•ÊâæÂèòÈáè</li>
<li>removeBinding(name) Âà†Èô§ÂèòÈáè</li>
<li>hasBinding(name, noGlobals) Âà§Êñ≠ÊòØÂê¶ÂåÖÂê´ÂèòÈáè</li>
<li>moveBindingTo(name, scope) ÊääÂΩìÂâç‰ΩúÁî®ÂüüÁöÑÂèòÈáèÁßªÂä®Âà∞ÂÖ∂ÂÆÉ‰ΩúÁî®Âüü‰∏≠</li>
<li>generateUid(name) ÁîüÊàê‰ΩúÁî®Âüü‰∏≠ÁöÑÂîØ‰∏ÄÂèòÈáèÂêç,Â¶ÇÊûúÂèòÈáèÂêçË¢´Âç†Áî®Â∞±Âú®ÂâçÈù¢Âä†‰∏ãÂàíÁ∫ø</li>
</ul>
<h3 id="ËΩ¨Êç¢ÁÆ≠Â§¥ÂáΩÊï∞Êèí‰ª∂">ËΩ¨Êç¢ÁÆ≠Â§¥ÂáΩÊï∞Êèí‰ª∂
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">core</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/core&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">types</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/types&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">arrowFunctionPlugin</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">  <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/plugin-transform-arrow-functions&#34;</span><span class="p">).</span><span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">arrowFunctionPlugin2</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// visitorÂ±ûÊÄßÊòØÂõ∫ÂÆöÁöÑÔºåbabelÂÜÖÈÉ®Â∞±ÊòØÂÜôÊ≠ªÂèñÁöÑËøô‰∏™Â±ûÊÄß
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">visitor</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Ëøô‰∏™ÁöÑÊñπÊ≥ïÂêçÂ≠óÂ∞±ÊòØÊäΩË±°ËØ≠Ê≥ïÊ†ë‰∏≠ÂêÑÁßçËäÇÁÇπÂØπÂ∫îÁöÑÁ±ªÂûãtype
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">ArrowFunctionExpression</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="p">{</span> <span class="nx">node</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">path</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">node</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s2">&#34;FunctionExpression&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//Âà§Êñ≠bodyËäÇÁÇπÊòØ‰∏çÊòØBlockStatement  (a,b)=&gt;a + b;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">types</span><span class="p">.</span><span class="nx">isBlockStatement</span><span class="p">(</span><span class="nx">body</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//Âø´ÈÄüÊñπ‰æøÁöÑÊûÑÂª∫ËäÇÁÇπ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">node</span><span class="p">.</span><span class="nx">body</span> <span class="o">=</span> <span class="nx">types</span><span class="p">.</span><span class="nx">blockStatement</span><span class="p">([</span><span class="nx">types</span><span class="p">.</span><span class="nx">returnStatement</span><span class="p">(</span><span class="nx">body</span><span class="p">)]);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// Â§ÑÁêÜthisÈúÄË¶ÅÊèêÂçáÁöÑÈóÆÈ¢ò
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">hoistFunctionEnvironment</span><span class="p">(</span><span class="nx">path</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">hoistFunctionEnvironment</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//1.ÁúãÁúãÂΩìÂâçËäÇÁÇπÈáåÊúâÊ≤°Êúâ‰ΩøÁî®Âà∞this
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">thisPaths</span> <span class="o">=</span> <span class="nx">getThisPaths</span><span class="p">(</span><span class="nx">path</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">thisPaths</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//ÂèØ‰ª•Áî®Êù•ÁîüÊàê_thisÂèòÈáèÁöÑË∑ØÂæÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">thisEnv</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">findParent</span><span class="p">((</span><span class="nx">parent</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//Â¶ÇÊûúÊòØÂáΩÊï∞Ôºå‰ΩÜÊòØ‰∏çÊòØÁÆ≠Â§¥ÂáΩÊï∞ÁöÑËØùÂ∞±ËøîÂõûtrue
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">//return types.isFunctionDeclaration(parent)|| parent.isProgram();;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nx">parent</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">parent</span><span class="p">.</span><span class="nx">isArrowFunctionExpress</span><span class="p">())</span> <span class="o">||</span>
</span></span><span class="line"><span class="cl">        <span class="nx">parent</span><span class="p">.</span><span class="nx">isProgram</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">thisBindings</span> <span class="o">=</span> <span class="s2">&#34;_this&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Â¶ÇÊûúÊ≠§Ë∑ØÂæÑÂØπÂ∫îÁöÑ‰ΩúÁî®Âüü‰∏≠Ê≤°_thisËøô‰∏™ÂèòÈáè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">thisEnv</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">hasBinding</span><span class="p">(</span><span class="nx">thisBindings</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//ÂêëÂÆÉÂØπÂ∫îÁöÑ‰ΩúÁî®ÂüüÈáåÊ∑ªÂä†‰∏Ä‰∏™ÂèòÈáè ÔºåÂèòÈáèÂêç_this,ÂèòÈáèÁöÑÂÄºthis
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="kr">const</span> <span class="nx">thisIdentifier</span> <span class="o">=</span> <span class="nx">types</span><span class="p">.</span><span class="nx">identifier</span><span class="p">(</span><span class="nx">thisBindings</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nx">thisEnv</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">id</span><span class="o">:</span> <span class="nx">thisIdentifier</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">init</span><span class="o">:</span> <span class="nx">types</span><span class="p">.</span><span class="nx">thisExpression</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">      <span class="nx">thisPaths</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">thisPath</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">thisPath</span><span class="p">.</span><span class="nx">replaceWith</span><span class="p">(</span><span class="nx">thisIdentifier</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">getThisPaths</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">thisPaths</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//ÈÅçÂéÜÊ≠§Ë∑ØÂæÑÊâÄÊúâÁöÑÂ≠êË∑ØÂæÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">path</span><span class="p">.</span><span class="nx">traverse</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ThisExpression</span><span class="p">(</span><span class="nx">thisPath</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">thisPaths</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">thisPath</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">thisPaths</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//ËøôÊòØJSÊ∫ê‰ª£Á†ÅÔºåÁî®Â≠óÁ¨¶‰∏≤Ë°®Á§∫
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">sourceCode</span> <span class="o">=</span> <span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">const sum = (a,b)=&gt;{
</span></span></span><span class="line"><span class="cl"><span class="sb">  const minis = (a,b)=&gt;{
</span></span></span><span class="line"><span class="cl"><span class="sb">    console.log(this);
</span></span></span><span class="line"><span class="cl"><span class="sb">    return a-b;
</span></span></span><span class="line"><span class="cl"><span class="sb">  }
</span></span></span><span class="line"><span class="cl"><span class="sb">  return a+b;
</span></span></span><span class="line"><span class="cl"><span class="sb">}
</span></span></span><span class="line"><span class="cl"><span class="sb">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">core</span><span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="nx">sourceCode</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="nx">arrowFunctionPlugin2</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">var _this = this;
</span></span></span><span class="line"><span class="cl"><span class="cm">const sum = function (a,b){
</span></span></span><span class="line"><span class="cl"><span class="cm">  console.log(_this);
</span></span></span><span class="line"><span class="cl"><span class="cm">  return a+b;
</span></span></span><span class="line"><span class="cl"><span class="cm">}
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Êó•ÂøóÊèí‰ª∂">Êó•ÂøóÊèí‰ª∂
</h3><p><code>state.file.opts.filename</code> Ë°®Á§∫ÂΩìÂâçÊ≠£Âú®Â§ÑÁêÜÁöÑÊñá‰ª∂ÁöÑË∑ØÂæÑ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">core</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/core&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">types</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/types&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">pathLib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//state‰ª£Ë°®Áä∂ÊÄÅÔºåÁî®Âú®Âú®Êèí‰ª∂Â§ÑÁêÜÁöÑËøáÁ®ã‰º†ÈÄí‰∏Ä‰∫õÂÄºÊàñËÄÖÂèòÈáè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">consolePlugin</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">visitor</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">CallExpression</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">state</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="p">{</span> <span class="nx">node</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">path</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">types</span><span class="p">.</span><span class="nx">isMemberExpression</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">callee</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&#34;console&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">if</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="p">[</span><span class="s2">&#34;log&#34;</span><span class="p">,</span> <span class="s2">&#34;info&#34;</span><span class="p">,</span> <span class="s2">&#34;warn&#34;</span><span class="p">,</span> <span class="s2">&#34;error&#34;</span><span class="p">,</span> <span class="s2">&#34;debug&#34;</span><span class="p">].</span><span class="nx">includes</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="nx">node</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">property</span><span class="p">.</span><span class="nx">name</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//Ëé∑ÂèñËøô‰∏™console.logËäÇÁÇπÊâÄÂú®ÁöÑË°åÂíåÂàó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kr">const</span> <span class="p">{</span> <span class="nx">line</span><span class="p">,</span> <span class="nx">column</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">loc</span><span class="p">.</span><span class="nx">start</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kr">const</span> <span class="nx">filename</span> <span class="o">=</span> <span class="nx">pathLib</span><span class="p">.</span><span class="nx">relative</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="nx">__dirname</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">state</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">opts</span><span class="p">.</span><span class="nx">filename</span>
</span></span><span class="line"><span class="cl">            <span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nx">node</span><span class="p">.</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="nx">types</span><span class="p">.</span><span class="nx">stringLiteral</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">filename</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">line</span><span class="si">}</span><span class="sb">:</span><span class="si">${</span><span class="nx">column</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">FunctionExpression</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span> <span class="c1">// 100
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="c1">//ÂÆûÁé∞‰∏Ä‰∏™Êó•ÂøóÊèí‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">sourceCode</span> <span class="o">=</span> <span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">  console.log(&#39;hello&#39;);
</span></span></span><span class="line"><span class="cl"><span class="sb">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">core</span><span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="nx">sourceCode</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;main.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="nx">consolePlugin</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ë¶ÅÂÆûÁé∞Âú®ÊØè‰∏™ console.log ËØ≠Âè•‰∏≠Ê∑ªÂä†ÊâìÂç∞Êñá‰ª∂„ÄÅË°åÊï∞ÂíåÂàóÊï∞ÁöÑ‰ø°ÊÅØÔºåÂèØ‰ª•ÁºñÂÜô‰∏Ä‰∏™Ëá™ÂÆö‰πâÁöÑ Babel Êèí‰ª∂„ÄÇ‰ª•‰∏ãÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁ§∫‰æãÊèí‰ª∂ÔºåÂèØÂÆûÁé∞ËØ•ÂäüËÉΩÔºö</p>
<p>Âú®È°πÁõÆÊ†πÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫ <code>.babelrc</code> ÁöÑÊñá‰ª∂ÔºåÈÖçÁΩÆ Babel ÁöÑËΩ¨Êç¢ËßÑÂàôÂíåÊèí‰ª∂Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;presets&#34;: [&#34;@babel/preset-env&#34;],
</span></span><span class="line"><span class="cl">  &#34;plugins&#34;: [&#34;console-log-info&#34;]  // ÈúÄË¶ÅÂèëÂ∏ÉËøô‰∏™ÂåÖ
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàñËÄÖÂú® webpack ÈÖçÁΩÆÊñá‰ª∂‰∏≠Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">consolePlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./plugins/consolePlugin.js&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/.jsx?$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">use</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">loader</span><span class="o">:</span> <span class="s2">&#34;babel-loader&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">presets</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;@babel/preset-env&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="nx">consolePlugin</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">          <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// Ëøô‰∏™Êèí‰ª∂ÂèØ‰ª•Áõ¥Êé•Âú®webpack‰∏≠ÁöÑbabel-loader‰∏≠ÈÖçÁΩÆÂç≥ÂèØ‰ΩøÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">pathLib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">({</span> <span class="nx">types</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">visitor</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">CallExpression</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="p">{</span> <span class="nx">node</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">path</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">types</span><span class="p">.</span><span class="nx">isMemberExpression</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">callee</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&#34;console&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="p">[</span><span class="s2">&#34;log&#34;</span><span class="p">,</span> <span class="s2">&#34;info&#34;</span><span class="p">,</span> <span class="s2">&#34;warn&#34;</span><span class="p">,</span> <span class="s2">&#34;error&#34;</span><span class="p">,</span> <span class="s2">&#34;debug&#34;</span><span class="p">].</span><span class="nx">includes</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="nx">node</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">property</span><span class="p">.</span><span class="nx">name</span>
</span></span><span class="line"><span class="cl">              <span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="c1">//Ëé∑ÂèñËøô‰∏™console.logËäÇÁÇπÊâÄÂú®ÁöÑË°åÂíåÂàó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>              <span class="kr">const</span> <span class="p">{</span> <span class="nx">line</span><span class="p">,</span> <span class="nx">column</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">loc</span><span class="p">.</span><span class="nx">start</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">              <span class="kr">const</span> <span class="nx">filename</span> <span class="o">=</span> <span class="nx">pathLib</span><span class="p">.</span><span class="nx">relative</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="nx">__dirname</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">state</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">opts</span><span class="p">.</span><span class="nx">filename</span>
</span></span><span class="line"><span class="cl">              <span class="p">);</span>
</span></span><span class="line"><span class="cl">              <span class="nx">node</span><span class="p">.</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="nx">types</span><span class="p">.</span><span class="nx">stringLiteral</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">filename</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">line</span><span class="si">}</span><span class="sb">:</span><span class="si">${</span><span class="nx">column</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">              <span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâìÂç∞Ë°®Á§∫Ôºö</p>
<img src="images\image-20230824171919123.png" alt="image-20230824171919123" style="zoom:200%;" />
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">pathLib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">({</span> <span class="nx">types</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">visitor</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">CallExpression</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="p">{</span> <span class="nx">node</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">path</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">types</span><span class="p">.</span><span class="nx">isMemberExpression</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">callee</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&#34;console&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="p">[</span><span class="s2">&#34;log&#34;</span><span class="p">,</span> <span class="s2">&#34;info&#34;</span><span class="p">,</span> <span class="s2">&#34;warn&#34;</span><span class="p">,</span> <span class="s2">&#34;error&#34;</span><span class="p">,</span> <span class="s2">&#34;debug&#34;</span><span class="p">].</span><span class="nx">includes</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="nx">node</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">property</span><span class="p">.</span><span class="nx">name</span>
</span></span><span class="line"><span class="cl">              <span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="kr">const</span> <span class="nx">fileInfo</span> <span class="o">=</span> <span class="nx">state</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">opts</span><span class="p">.</span><span class="nx">filename</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&#34;/&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">              <span class="kr">const</span> <span class="nx">fileName</span> <span class="o">=</span> <span class="nx">fileInfo</span><span class="p">[</span><span class="nx">fileInfo</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">              <span class="kr">const</span> <span class="p">{</span> <span class="nx">line</span><span class="p">,</span> <span class="nx">column</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">loc</span><span class="p">.</span><span class="nx">start</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">              <span class="kr">const</span> <span class="nx">logStatement</span> <span class="o">=</span> <span class="nx">types</span><span class="p">.</span><span class="nx">stringLiteral</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="sb">`[</span><span class="si">${</span><span class="nx">fileName</span><span class="si">}</span><span class="sb">:</span><span class="si">${</span><span class="nx">line</span><span class="si">}</span><span class="sb">:</span><span class="si">${</span><span class="nx">column</span><span class="si">}</span><span class="sb">]`</span>
</span></span><span class="line"><span class="cl">              <span class="p">);</span>
</span></span><span class="line"><span class="cl">              <span class="kr">const</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">arguments</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">              <span class="nx">args</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">logStatement</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">              <span class="nx">path</span><span class="p">.</span><span class="nx">replaceWith</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="nx">types</span><span class="p">.</span><span class="nx">callExpression</span><span class="p">(</span><span class="nx">types</span><span class="p">.</span><span class="nx">identifier</span><span class="p">(</span><span class="s2">&#34;console.log&#34;</span><span class="p">),</span> <span class="nx">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">              <span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâìÂç∞Ë°®Á§∫Ôºö</p>
<img src="images\image-20230824172327152.png" alt="image-20230824172327152" style="zoom:200%;" />
<h3 id="Êï∞ÊçÆÂüãÁÇπ">Êï∞ÊçÆÂüãÁÇπ
</h3><p>ÂΩìË∞ÉÁî®ÊñπÊ≥ïÊó∂ÔºåÂêëÊúçÂä°Âô®ÂèëÈÄÅ‰∏Ä‰∏™ËØ∑Ê±ÇÔºåÈÄöÁü•ÊúçÂä°Âô®„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">core</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/core&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">autoTrackerPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./auto-tracker-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">sourceCode</span> <span class="o">=</span> <span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">	function sum(a, b){
</span></span></span><span class="line"><span class="cl"><span class="sb">		return a + b
</span></span></span><span class="line"><span class="cl"><span class="sb">	};
</span></span></span><span class="line"><span class="cl"><span class="sb">	
</span></span></span><span class="line"><span class="cl"><span class="sb">	const multiply = function(a, b){
</span></span></span><span class="line"><span class="cl"><span class="sb">		return a * b 
</span></span></span><span class="line"><span class="cl"><span class="sb">	};
</span></span></span><span class="line"><span class="cl"><span class="sb">	
</span></span></span><span class="line"><span class="cl"><span class="sb">	const minus = (a, b)=&gt;a + b;
</span></span></span><span class="line"><span class="cl"><span class="sb">	
</span></span></span><span class="line"><span class="cl"><span class="sb">	class Calculator{
</span></span></span><span class="line"><span class="cl"><span class="sb">		divide(a, b){
</span></span></span><span class="line"><span class="cl"><span class="sb">			return a/b
</span></span></span><span class="line"><span class="cl"><span class="sb">		}
</span></span></span><span class="line"><span class="cl"><span class="sb">	}
</span></span></span><span class="line"><span class="cl"><span class="sb">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">core</span><span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="nx">sourceCode</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="nx">autoTrackerPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;logger&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">whiteList</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;sum&#34;</span><span class="p">],</span> <span class="c1">// ÈíàÂØπÂè´Ëøô‰∏™ÂáΩÊï∞ÁöÑÂêçÁöÑÂáΩÊï∞Ê∑ªÂä†Êï∞ÊçÆÂüãÁÇπ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êï∞ÊçÆÂüãÁÇπ‰∏≠ÁöÑ babel Êèí‰ª∂Âú®ËøôÈáåÂØºÂá∫ÁöÑÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºåËØ•ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™ÂØπË±°„ÄÇ</p>
<p>auto-tracker-plugin.jsÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">core</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/core&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">types</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/types&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">template</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/template&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">importModule</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/helper-module-imports&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * babelÊèí‰ª∂ÂèØ‰ª•ÂÜô‰∏∫‰∏Ä‰∏™ÂØπË±°Ôºå‰πüÂèØ‰ª•ÂÜô‰∏∫‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂÜô‰∏∫ÂáΩÊï∞ÊòØÔºåÂèØ‰ª•Ë∞ÉÁî®ÂáΩÊï∞Âπ∂‰º†ÂèÇ
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ÂÆûÁé∞Ê≠§Êèí‰ª∂ÈúÄË¶Å‰∫åÊ≠•
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 1.Âà§Êñ≠ÊòØÂê¶Ê∫ê‰ª£Á†ÅÈáåÂ∑≤ÁªèÂºïÂÖ•‰∫ÜloggerÊ®°ÂùóÔºåÂ¶ÇÊûúÂºïÂÖ•‰∫ÜÁõ¥Êé•Áî®ÔºåÂ¶ÇÊûúÊ≤°ÊúâÂºïÂÖ•Ë¶ÅÊâãÂ∑•ÂºïÂÖ•
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 2.ÊâæÂà∞‰ª£Á†Å‰∏≠ÊâÄÊúâÁöÑÂáΩÊï∞ÔºåÂêëÈáåÈù¢Êèí‰ª∂Ë∞ÉÁî®loggerÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">autoTrackerPlugin</span> <span class="o">=</span> <span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">visitor</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">Program</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">enter</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="kd">let</span> <span class="nx">loggerId</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="nx">path</span><span class="p">.</span><span class="nx">traverse</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">            <span class="nx">ImportDeclaration</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="c1">//Ê≠§ÊñπÊ≥ï‰ºöËøõÂÖ•Â§öÊ¨°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>              <span class="kr">const</span> <span class="nx">importedModuleName</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;source&#34;</span><span class="p">).</span><span class="nx">node</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">              <span class="k">if</span> <span class="p">(</span><span class="nx">importedModuleName</span> <span class="o">===</span> <span class="nx">options</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kr">const</span> <span class="nx">specifierPath</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;specifiers.0&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">specifierPath</span><span class="p">.</span><span class="nx">isImportDefaultSpecifier</span><span class="p">()</span> <span class="o">||</span> <span class="c1">//ÈªòËÆ§ÂØºÂÖ• import logger from &#39;logger&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                  <span class="nx">specifierPath</span><span class="p">.</span><span class="nx">isImportSpecifier</span><span class="p">()</span> <span class="o">||</span> <span class="c1">//ÊôÆÈÄöÂØºÂÖ• import {logger} from &#39;logger&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                  <span class="nx">specifierPath</span><span class="p">.</span><span class="nx">ImportNamespaceSpecifier</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="c1">//ÂëΩÂêçÁ©∫Èó¥ÂØºÂÖ•  import * as logger from
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                  <span class="nx">loggerId</span> <span class="o">=</span> <span class="nx">specifierPath</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">local</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="nx">path</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span> <span class="c1">//‰∏çÂÜçÈÅçÂéÜ‰∫ÜÔºåË∑≥ËøáÂêéÁª≠ÁöÑÊâÄÊúâÁöÑÊü•ÊâæÂíåÈÅçÂéÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>              <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">});</span>
</span></span><span class="line"><span class="cl">          <span class="c1">//Â¶ÇÊûúloggerIdÂú®ÈÅçÂéÜÂÆå‰∫Ü‰ª•ÂêéËøòÊòØundefined„ÄÇËØ¥ÊòéÊ∫êÁ†Å‰∏≠Ê≤°Êúâ‰∏ªÂä®ÂºïÂÖ•logger
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">loggerId</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//  import xx from &#39;logger&#39; , ÊûÑÂª∫‰∏Ä‰∏™ÊäΩË±°ËØ≠Ê≥ïÊ†ëËäÇÁÇπ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">loggerId</span> <span class="o">=</span> <span class="nx">importModule</span><span class="p">.</span><span class="nx">addDefault</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">nameHint</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">generateUid</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">name</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="p">});</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="c1">//Á±ª‰ººejs Ê®°ÊùøÂºïÊìé ËøîÂõûÁöÑÊòØ‰∏Ä‰∏™ËØ≠Ê≥ïÊ†ëÁöÑËäÇÁÇπ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="nx">state</span><span class="p">.</span><span class="nx">loggerNode</span> <span class="o">=</span> <span class="nx">template</span><span class="p">.</span><span class="nx">statement</span><span class="p">(</span><span class="sb">`LOGGER();`</span><span class="p">)({</span>
</span></span><span class="line"><span class="cl">            <span class="nx">LOGGER</span><span class="o">:</span> <span class="nx">loggerId</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="p">});</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;FunctionDeclaration|FunctionExpression|ArrowFunctionExpression|ClassMethod&#34;</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nx">path</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">state</span>
</span></span><span class="line"><span class="cl">      <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="p">{</span> <span class="nx">node</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">path</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ÁôΩÂêçÂçï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">id</span> <span class="o">&amp;&amp;</span> <span class="nx">options</span><span class="p">.</span><span class="nx">whiteLists</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">id</span><span class="p">.</span><span class="nx">name</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="c1">///Â¶ÇÊûúÂÆÉÁöÑbodyÂ∑≤ÁªèÊòØ‰∏Ä‰∏™ËØ≠Âè•Âùó‰∫ÜÔºåÁõ¥Êé•Âú®ÂùóÁöÑÂºÄÂßãÊ∑ªÂä†ÊñπÊ≥ïË∞ÉÁî®Âç≥ÂèØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="k">if</span> <span class="p">(</span><span class="nx">types</span><span class="p">.</span><span class="nx">isBlockStatement</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">body</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">node</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">loggerNode</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kr">const</span> <span class="nx">newNode</span> <span class="o">=</span> <span class="nx">types</span><span class="p">.</span><span class="nx">blockStatement</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">              <span class="nx">state</span><span class="p">.</span><span class="nx">loggerNode</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">types</span><span class="p">.</span><span class="nx">expressionStatement</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">body</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="nx">path</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;body&#34;</span><span class="p">).</span><span class="nx">replaceWith</span><span class="p">(</span><span class="nx">newNode</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">autoTrackerPlugin</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËΩ¨ÂåñÂêéÁöÑ‰ª£Á†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">sourceCode</span> <span class="o">=</span> <span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">	import logger from &#39;logger&#39;
</span></span></span><span class="line"><span class="cl"><span class="sb">	
</span></span></span><span class="line"><span class="cl"><span class="sb">	function sum(a, b){
</span></span></span><span class="line"><span class="cl"><span class="sb">		logger()
</span></span></span><span class="line"><span class="cl"><span class="sb">		return a + b
</span></span></span><span class="line"><span class="cl"><span class="sb">	};
</span></span></span><span class="line"><span class="cl"><span class="sb">	
</span></span></span><span class="line"><span class="cl"><span class="sb">	const multiply = function(a, b){
</span></span></span><span class="line"><span class="cl"><span class="sb">		logger()
</span></span></span><span class="line"><span class="cl"><span class="sb">		return a * b 
</span></span></span><span class="line"><span class="cl"><span class="sb">	};
</span></span></span><span class="line"><span class="cl"><span class="sb">	
</span></span></span><span class="line"><span class="cl"><span class="sb">	const minus = (a, b)=&gt;{
</span></span></span><span class="line"><span class="cl"><span class="sb">		logger()
</span></span></span><span class="line"><span class="cl"><span class="sb">		return a + b
</span></span></span><span class="line"><span class="cl"><span class="sb">	};
</span></span></span><span class="line"><span class="cl"><span class="sb">	
</span></span></span><span class="line"><span class="cl"><span class="sb">	class Calculator{
</span></span></span><span class="line"><span class="cl"><span class="sb">		divide(a, b){
</span></span></span><span class="line"><span class="cl"><span class="sb">			logger()
</span></span></span><span class="line"><span class="cl"><span class="sb">			return a/b
</span></span></span><span class="line"><span class="cl"><span class="sb">		}
</span></span></span><span class="line"><span class="cl"><span class="sb">	}
</span></span></span><span class="line"><span class="cl"><span class="sb">`</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Ê®°Êãü-eslint">Ê®°Êãü eslint
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">eslintPlugin</span><span class="p">({</span> <span class="nx">fix</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÈÅçÂéÜËØ≠Ê≥ïÊ†ë‰πãÂâçÊâßË°åËØ•preÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">pre</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">file</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&#34;errors&#34;</span><span class="p">,</span> <span class="p">[]);</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">visitor</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">CallExpression</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="p">{</span> <span class="nx">node</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">path</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">errors</span> <span class="o">=</span> <span class="nx">state</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;errors&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">object</span> <span class="o">&amp;&amp;</span> <span class="nx">node</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&#34;console&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nb">Error</span><span class="p">.</span><span class="nx">stackTraceLimit</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// ËÆæÁΩÆË∞ÉÁî®Ê†àÁöÑÈïøÂ∫¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="nx">errors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="nx">path</span><span class="p">.</span><span class="nx">buildCodeFrameError</span><span class="p">(</span><span class="sb">`‰ª£Á†Å‰∏≠‰∏çËÉΩÂá∫Áé∞console.logËØ≠Âè•`</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="nb">Error</span>
</span></span><span class="line"><span class="cl">          <span class="p">);</span> <span class="c1">// ÊûÑÂª∫‰ª£Á†ÅÈîôËØØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="k">if</span> <span class="p">(</span><span class="nx">fix</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">path</span><span class="p">.</span><span class="nx">parentPath</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">post</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;errors&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">eslintPlugin</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰ª£Á†ÅÂéãÁº©">‰ª£Á†ÅÂéãÁº©
</h3><p>uglifyPlugin.js</p>
<p>ÂÖ∂‰∏≠ÁöÑ Scopable ÊòØÁ±ªÂûãÂà´ÂêçÔºåÂÖ∂ÂÆûÂ∞±ÊòØ‰∏ÄÁ≥ªÂàó ast ËäÇÁÇπÂêçÁöÑÁªÑÂêàÔºåÁ±ª‰ºº‰∫é TS ÁöÑËÅîÂêàÁ±ªÂûã„ÄÇ</p>
<ul>
<li><a class="link" href="https://github.com/babel/babel/blob/main/packages/babel-types/src/ast-types/generated/index.ts#L2174-L2191"  target="_blank" rel="noopener"
    >Á±ªÂûãÂà´Âêç</a></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">uglifyPlugin</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">visitor</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">Scopable</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">Object</span><span class="p">.</span><span class="nx">entries</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">bindings</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(([</span><span class="nx">key</span><span class="p">,</span> <span class="nx">binding</span><span class="p">])</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="c1">//Âú®ÂΩìÂâçÁöÑ‰ΩúÁî®Âüü‰∏≠ÁîüÊàê‰∏Ä‰∏™‰∏çÈáçÂ§çÁöÑÂèòÈáèÂêç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="kr">const</span> <span class="nx">newName</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">generateUid</span><span class="p">(</span><span class="s2">&#34;t&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="c1">// age =&gt; ? name=Ôºü
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="nx">binding</span><span class="p">.</span><span class="nx">path</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">rename</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">newName</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">});</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">uglifyPlugin</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÊåâÈúÄÂä†ËΩΩ">ÊåâÈúÄÂä†ËΩΩ
</h3><p>‰ª• lodash ‰∏∫‰æãÂ≠êÔºåbabel-plugin-importÔºå‰∏îËøô‰∏™Â∫ìÂè™ÊîØÊåÅ antdÔºåantd-mobileÔºålodashÔºåmateria-ui„ÄÇ</p>
<p>webapck.config.js:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s2">&#34;development&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span> <span class="s2">&#34;./src/index.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s2">&#34;dist&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;bundle.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">use</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">loader</span><span class="o">:</span> <span class="s2">&#34;babel-loader&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">              <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;babel-plugin-import&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">libraryName</span><span class="o">:</span> <span class="s2">&#34;lodash&#34;</span><span class="p">,</span> <span class="c1">// Êü•ÁúãlodashÁöÑÊ†∏ÂøÉÂåÖÔºåÂèØ‰ª•ÂèëÁé∞Ôºålodash‰∏≠ÊØè‰∏™ÂäüËÉΩÂáΩÊï∞ÈÉΩÁõ¥Êé•ÊîæÂú®loadshÊñá‰ª∂Â§πÁöÑÊ†πÁõÆÂΩï‰∏≠ÔºåËÄåbabel-plugin-importÊèí‰ª∂ÈªòËÆ§ÊòØÂèñÁõÆÊ†áÂ∫ì‰∏ãÈù¢ÁöÑlibÊñá‰ª∂Â§π‰∏≠ÊâæÂØπÂ∫îÁöÑÊñá‰ª∂ÔºåÊâÄ‰ª•ËøòÈúÄË¶ÅËÆæÁΩÆÂ∫ìÁöÑÁõÆÊ†áÊñá‰ª∂ÊâÄÂú®ÁöÑÁõÆÂΩï„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                  <span class="nx">libraryDirectory</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="c1">// Ëøô‰∏™ÂÄºÈªòËÆ§ÊòØlib
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="p">},</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="cl">          <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊåâÈúÄÂä†ËΩΩÁöÑÊú¨Ë¥®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">flatten</span><span class="p">,</span> <span class="nx">concat</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;lodash&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ËΩ¨‰∏∫‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÂΩ¢Âºè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="nx">flatten</span> <span class="nx">from</span> <span class="s2">&#34;lodash/flatten&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">concat</span> <span class="nx">from</span> <span class="s2">&#34;lodash/flatten&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/blogs/post/webpack/images/image-20230430174616023.png"
	width="781"
	height="1130"
	srcset="/blogs/post/webpack/images/image-20230430174616023_hu_f1fbc86c9d11a86d.png 480w, /blogs/post/webpack/images/image-20230430174616023_hu_cf97697974463b1a.png 1024w"
	loading="lazy"
	
		alt="image-20230430174616023"
	
	
		class="gallery-image" 
		data-flex-grow="69"
		data-flex-basis="165px"
	
></p>
<p>ËΩ¨‰∏∫Ôºö</p>
<p><img src="/blogs/post/webpack/images/image-20230430174629719.png"
	width="769"
	height="685"
	srcset="/blogs/post/webpack/images/image-20230430174629719_hu_e8c6efe0d876d492.png 480w, /blogs/post/webpack/images/image-20230430174629719_hu_b035d0b841b11b8b.png 1024w"
	loading="lazy"
	
		alt="image-20230430174629719"
	
	
		class="gallery-image" 
		data-flex-grow="112"
		data-flex-basis="269px"
	
></p>
<p>ÁºñËØëÈ°∫Â∫è‰∏∫È¶ñÂÖà<code>plugins</code>‰ªéÂ∑¶ÂæÄÂè≥,ÁÑ∂Âêé<code>presets</code>‰ªéÂè≥ÂæÄÂ∑¶„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//babelÊ†∏ÂøÉÊ®°Âùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">core</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/core&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//Áî®Êù•ÁîüÊàêÊàñËÄÖÂà§Êñ≠ËäÇÁÇπÁöÑASTËØ≠Ê≥ïÊ†ëÁöÑËäÇÁÇπ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">types</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/types&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">visitor</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">ImportDeclaration</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="p">{</span> <span class="nx">node</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">path</span><span class="p">;</span> <span class="c1">//Ëé∑ÂèñËäÇÁÇπ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="p">{</span> <span class="nx">specifiers</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span> <span class="c1">//Ëé∑ÂèñÊâπÈáèÂØºÂÖ•Â£∞ÊòéÊï∞ÁªÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="p">{</span> <span class="nx">libraryName</span><span class="p">,</span> <span class="nx">libraryDirectory</span> <span class="o">=</span> <span class="s2">&#34;lib&#34;</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">state</span><span class="p">.</span><span class="nx">opts</span><span class="p">;</span> <span class="c1">//Ëé∑ÂèñÈÄâÈ°π‰∏≠ÁöÑÊîØÊåÅÁöÑÂ∫ìÁöÑÂêçÁß∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//Â¶ÇÊûúËØ¥Ê≠§ËäÇÁÇπÂØºÂÖ•ÁöÑÂåÖÂêçÂíåÈÖçÁΩÆÁöÑÊåâÈúÄÂä†ËΩΩÂåÖÂêçÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂπ∂‰∏î‰∏çÊòØÈªòËÆ§ÂØºÂÖ•ÁöÑËØù
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="nx">node</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">libraryName</span> <span class="o">&amp;&amp;</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//Âπ∂‰∏îÂØºÂÖ•‰∏çÊòØÈªòËÆ§ÂØºÂÖ•Êâç‰ºöËøõÊù•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="o">!</span><span class="nx">types</span><span class="p">.</span><span class="nx">isImportDefaultSpecifier</span><span class="p">(</span><span class="nx">specifiers</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//ÈÅçÂéÜÊâπÈáèÂØºÂÖ•Â£∞ÊòéÊï∞ÁªÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="kr">const</span> <span class="nx">declarations</span> <span class="o">=</span> <span class="nx">specifiers</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">specifier</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ËøîÂõû‰∏Ä‰∏™importDeclarationËäÇÁÇπ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="nx">types</span><span class="p">.</span><span class="nx">importDeclaration</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="c1">//ÂØºÂÖ•Â£∞ÊòéimportDefaultSpecifier flatten
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="p">[</span><span class="nx">types</span><span class="p">.</span><span class="nx">importDefaultSpecifier</span><span class="p">(</span><span class="nx">specifier</span><span class="p">.</span><span class="nx">local</span><span class="p">)],</span>
</span></span><span class="line"><span class="cl">          <span class="c1">//ÂØºÂÖ•Ê®°Âùósource lodash/flatten
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="nx">types</span><span class="p">.</span><span class="nx">stringLiteral</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="nx">libraryDirectory</span>
</span></span><span class="line"><span class="cl">              <span class="o">?</span> <span class="sb">`</span><span class="si">${</span><span class="nx">libraryName</span><span class="si">}</span><span class="sb">/</span><span class="si">${</span><span class="nx">libraryDirectory</span><span class="si">}</span><span class="sb">/</span><span class="si">${</span><span class="nx">specifier</span><span class="p">.</span><span class="nx">imported</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl">              <span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">libraryName</span><span class="si">}</span><span class="sb">/</span><span class="si">${</span><span class="nx">specifier</span><span class="p">.</span><span class="nx">imported</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl">          <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">      <span class="nx">path</span><span class="p">.</span><span class="nx">replaceWithMultiple</span><span class="p">(</span><span class="nx">declarations</span><span class="p">);</span> <span class="c1">//ÊõøÊç¢ÂΩìÂâçËäÇÁÇπ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">visitor</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≥®ÊÑèÔºåÂú® webpack ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈÖçÁΩÆËØ•Êèí‰ª∂ÂêéÔºå‰º†ÁªôÊèí‰ª∂ÁöÑÂèÇÊï∞ÁöÑÊñπÂºèÊòØ‰ª•‰∏ãËøôÁßçÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">use</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">loader</span><span class="o">:</span> <span class="s2">&#34;babel-loader&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">options</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">plugins</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">        	<span class="s1">&#39;babel-plugin-import&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">libraryName</span><span class="o">:</span><span class="s1">&#39;lodash&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">libraryDirectory</span><span class="o">:</span><span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÁßçÊñπÂºè‰º†ÂèÇÊó∂ÔºåÂØπÂ∫îÊèí‰ª∂‰∏≠Ëé∑ÂèñËøô‰∫õÂèÇÊï∞ÁöÑÊñπÂºèÊòØÈÄöËøá‰∏ãÈù¢ËøôÁßçÊñπÂºèËé∑ÂèñÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">const</span> <span class="p">{</span> <span class="n">libraryName</span><span class="p">,</span> <span class="n">libraryDirectory</span> <span class="o">=</span> <span class="s1">&#39;lib&#39;</span> <span class="p">}</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">opts</span><span class="p">;</span><span class="o">//</span><span class="err">Ëé∑ÂèñÈÄâÈ°π‰∏≠ÁöÑÊîØÊåÅÁöÑÂ∫ìÁöÑÂêçÁß∞</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® webpack ‰∏≠‰ΩøÁî®Ëá™Â∑±ÁºñÂÜôÁöÑ bable Êèí‰ª∂Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s2">&#34;development&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span> <span class="s2">&#34;./src/index.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s2">&#34;dist&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;bundle.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">use</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">loader</span><span class="o">:</span> <span class="s2">&#34;babel-loader&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">              <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;plugins/babel-plugin-import.js&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">libraryName</span><span class="o">:</span> <span class="s2">&#34;lodash&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">libraryDirectory</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">              <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;plugins/babel-plugin-import.js&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">libraryName</span><span class="o">:</span> <span class="s2">&#34;antd&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="cl">          <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏≠@babel/types ‰∏§‰∏™‰ΩúÁî®Ôºö</p>
<ol>
<li>Âà§Êñ≠Êüê‰∏™ËäÇÁÇπÊòØ‰∏çÊòØÊüê‰∏™Á±ªÂûã</li>
<li>Âø´ÈÄüÈÄöËøáÂ∑•ÂéÇÊñπÊ≥ïÂàõÂª∫ËäÇÁÇπÂÆû‰æã</li>
</ol>
<p><a class="link" href="https://github.com/brigand/babel-plugin-handbook/blob/master/translations/zh-Hans/README.md#asts"  target="_blank" rel="noopener"
    >Babel Êèí‰ª∂ÊâãÂÜå</a></p>
<p><strong>babel ÂèÇËÄÉËµÑÊñôÔºö</strong></p>
<ul>
<li><a class="link" href="https://github.com/brigand/babel-plugin-handbook/blob/master/translations/zh-Hans/README.md#asts"  target="_blank" rel="noopener"
    >Babel Êèí‰ª∂ÊâãÂÜå</a></li>
<li><a class="link" href="https://github.com/babel/babel/tree/master/packages/babel-types"  target="_blank" rel="noopener"
    >babel-types</a></li>
<li><a class="link" href="https://astexplorer.net/"  target="_blank" rel="noopener"
    >‰∏çÂêåÁöÑ parser Ëß£Êûê js ‰ª£Á†ÅÂêéÂæóÂà∞ÁöÑ AST</a></li>
<li><a class="link" href="http://resources.jointjs.com/demos/javascript-ast"  target="_blank" rel="noopener"
    >Âú®Á∫øÂèØËßÜÂåñÁöÑÁúãÂà∞ AST</a></li>
<li><a class="link" href="https://zhuanlan.zhihu.com/p/28143410"  target="_blank" rel="noopener"
    >babel ‰ªéÂÖ•Èó®Âà∞ÂÖ•Èó®ÁöÑÁü•ËØÜÂΩíÁ∫≥</a></li>
<li><a class="link" href="https://octman.com/blog/2016-08-27-babel-notes/"  target="_blank" rel="noopener"
    >Babel ÂÜÖÈÉ®ÂéüÁêÜÂàÜÊûê</a></li>
<li><a class="link" href="https://github.com/chikara-chan/babel-plugin-react-scope-binding"  target="_blank" rel="noopener"
    >babel-plugin-react-scope-binding</a></li>
<li><a class="link" href="https://www.npmjs.com/package/babel-plugin-transform-runtime"  target="_blank" rel="noopener"
    >transform-runtime</a> Babel ÈªòËÆ§Âè™ËΩ¨Êç¢Êñ∞ÁöÑ JavaScript ËØ≠Ê≥ïÔºåËÄå‰∏çËΩ¨Êç¢Êñ∞ÁöÑ API„ÄÇ‰æãÂ¶ÇÔºåIterator„ÄÅGenerator„ÄÅSet„ÄÅMaps„ÄÅProxy„ÄÅReflect„ÄÅSymbol„ÄÅPromise Á≠âÂÖ®Â±ÄÂØπË±°Ôºå‰ª•Âèä‰∏Ä‰∫õÂÆö‰πâÂú®ÂÖ®Â±ÄÂØπË±°‰∏äÁöÑÊñπÊ≥ïÔºàÊØîÂ¶Ç Object.assignÔºâÈÉΩ‰∏ç‰ºöËΩ¨ËØë,ÂêØÁî®Êèí‰ª∂ <code>babel-plugin-transform-runtime</code> ÂêéÔºåBabel Â∞±‰ºö‰ΩøÁî® babel-runtime ‰∏ãÁöÑÂ∑•ÂÖ∑ÂáΩÊï∞</li>
<li><a class="link" href="https://github.com/babel/babylon/blob/master/ast/spec.md"  target="_blank" rel="noopener"
    >ast-spec</a></li>
<li><a class="link" href="https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/README.md"  target="_blank" rel="noopener"
    >babel-handbook</a></li>
</ul>
<p>Êâ©Â±ïÔºö‰ΩøÁî® babel ‰∏≠ÁöÑ types Â∫ìÂíå template Â∫ìÂàõÂª∫ ast ËäÇÁÇπÁöÑÂ∑ÆÂà´„ÄÇ</p>
<p>ÂΩìÊúâ‰∏Ä‰∏™ÈùûÂ∏∏Â§çÊùÇÊàñËÄÖÊ∫êÁ†ÅÈùûÂ∏∏Â§öÁöÑ‰∏Ä‰∏™‰ª£Á†ÅÊÆµÈúÄË¶ÅÂàõÂª∫ÔºåÈÇ£‰πà types Â∫ìÂè™ËÉΩ‰∏Ä‰∏™‰∏™‰∏ÄÂ±ÇÂ±ÇÁöÑÂàõÂª∫ÁÑ∂ÂêéÂÜç‰∏Ä‰∏™‰∏™‰∏ÄÂ±ÇÂ±ÇÁöÑÁªÑÂêà„ÄÇ ËÄå template Â∫ìÂèØ‰ª•Âü∫‰∫éÊ∫ê‰ª£Á†ÅÂ≠óÁ¨¶‰∏≤Âø´ÈÄüÂàõÂª∫ÂÖ∂ÂØπÂ∫îÁöÑÊäΩË±°ËØ≠Ê≥ïÊ†ë„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">template</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/template&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">astNode</span> <span class="o">=</span> <span class="nx">template</span><span class="p">.</span><span class="nx">statement</span><span class="p">(</span><span class="s2">&#34;xxx&#34;</span><span class="p">)({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">xxx</span><span class="o">:</span> <span class="sb">`Ê∫êÁ†ÅÈÉ®ÂàÜ`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="webpack-Â∑•‰ΩúÊµÅ">webpack Â∑•‰ΩúÊµÅ
</h2><h3 id="Ë∞ÉËØï-webpack">Ë∞ÉËØï webpack
</h3><p><strong>ÊñπÂºè‰∏ÄÔºö</strong></p>
<p>package.json ‰∏≠</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;script&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;webpack&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂΩìÊâßË°åËøô‰∏™ËÑöÊú¨ÂëΩ‰ª§Êó∂ÔºåÊâæÂà∞È°πÁõÆÊ†πÁõÆÂΩï‰∏ã node_modules ÁõÆÂΩï‰∏ãÁöÑ.bin ÁõÆÂΩï‰∏ãÁöÑ webpack.cmdÔºåËØ•Êñá‰ª∂‰∏≠ÊâßË°åÁöÑÊòØ node_modules ÁõÆÂΩï‰∏ãÁöÑ webpack/bin/webpack.js Êñá‰ª∂ÔºåËØ•Êñá‰ª∂‰∏≠‰ºöÂéªË∞ÉÁî® webpack-cli ÁõÆÂΩï‰∏≠ÁöÑ bin ÁõÆÂΩï‰∏≠ÁöÑ cli.js Êñá‰ª∂„ÄÇÊâÄ‰ª•ÂèØ‰ª•Áõ¥Êé•Ë∞ÉËØï cli Êñá‰ª∂Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">node</span> <span class="o">--</span><span class="nx">inspect</span><span class="o">-</span><span class="nx">brk</span> <span class="p">.</span><span class="o">/</span><span class="nx">node_modules</span><span class="o">/</span><span class="nx">webpack</span><span class="o">/</span><span class="nx">bin</span><span class="o">/</span><span class="nx">webpack</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">node</span> <span class="o">--</span><span class="nx">inspect</span><span class="o">-</span><span class="nx">brk</span> <span class="p">.</span><span class="o">/</span><span class="nx">node_modules</span><span class="o">/</span><span class="nx">webpack</span><span class="o">-</span><span class="nx">cli</span><span class="o">/</span><span class="nx">bin</span><span class="o">/</span><span class="nx">cli</span><span class="p">.</span><span class="nx">js</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>ÁÑ∂ÂêéÊâìÂºÄ Chrome ÊµèËßàÂô®ÊéßÂà∂Âè∞Ë∞ÉËØï</p></blockquote>
<img src="images\image-20230213214843358.png" alt="image-20230213214843358" style="zoom:50%;" />
<p><strong>ÊñπÂºè‰∫åÔºö</strong></p>
<p>Âú® vscode ‰∏≠ÈÄöËøáË∞ÉËØïÊñá‰ª∂ËøõË°å webpack Ê∫êÁ†ÅË∞ÉËØï„ÄÇ</p>
<ul>
<li>ÊâìÂºÄÂ∑•Á®ãÁõÆÂΩïÔºåÁÇπÂáªË∞ÉËØïÊåâÈíÆÔºåÂÜçÁÇπÂáªÂ∞èÈΩøËΩÆÁöÑÈÖçÁΩÆÊåâÈíÆÁ≥ªÁªüÂ∞±‰ºöÁîüÊàê <code>launch.json</code> ÈÖçÁΩÆÊñá‰ª∂</li>
<li>‰øÆÊîπÂ•Ω‰∫Ü‰ª•ÂêéÁõ¥Êé•ÁÇπÂáª F5 Â∞±ÂèØ‰ª•ÂêØÂä®Ë∞ÉËØï</li>
</ul>
<p>.vscode\launch.json</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;0.2.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;configurations&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;node&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;request&#34;</span><span class="p">:</span> <span class="s2">&#34;launch&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;debug webpack&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;skipFiles&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;&lt;node_internals&gt;/**&#34;</span><span class="p">],</span> <span class="c1">// Ë∑≥ËøánodeÊ†∏ÂøÉÊ®°Âùó‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nt">&#34;cwd&#34;</span><span class="p">:</span> <span class="s2">&#34;${workspaceFolder}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;program&#34;</span><span class="p">:</span> <span class="s2">&#34;${workspaceFolder}/node_modules/webpack-cli/bin/cli.js&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Âú® webpack-cli ÂåÖ‰∏≠ÁöÑ cli.js Êñá‰ª∂‰∏≠Ê∑ªÂä†Êñ≠ÁÇπÂêé‰æøÂèØ‰ª•ÂºÄÂßãË∞ÉËØï„ÄÇ</p></blockquote>
<p><strong>ÊñπÂºè‰∏âÔºö</strong></p>
<p>vscode ‰∏≠ÂêØÂä®ËØ•Êñá‰ª∂ËøõË°åË∞ÉËØï debugger.js:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">webpack</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;webpack&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">webpackConfig</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./webpack.config&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">dubugger</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">compiler</span> <span class="o">=</span> <span class="nx">webpack</span><span class="p">(</span><span class="nx">webpackConfig</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//4.ÊâßË°åCompilerÂØπË±°ÁöÑ run ÊñπÊ≥ïÂºÄÂßãÊâßË°åÁºñËØë
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">compiler</span><span class="p">.</span><span class="nx">run</span><span class="p">((</span><span class="nx">err</span><span class="p">,</span> <span class="nx">stats</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//stats‰ª£Ë°®ÁªüËÆ°ÁªìÊûúÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="nx">stats</span><span class="p">.</span><span class="nx">toJson</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">assets</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// ÂÖ∂ÂÆûÂÆÉÊòØ‰∏Ä‰∏™‰ª£Á†ÅÂùóÔºàchunkÔºâÂà∞Êñá‰ª∂ÁöÑÂØπÂ∫îÂÖ≥Á≥ª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">chunks</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// ‰ªéÂÖ•Âè£Ê®°ÂùóÂá∫ÂèëÔºåÊâæÂà∞Ê≠§ÂÖ•Âè£Ê®°Âùó‰æùËµñÁöÑÊ®°ÂùóÔºåÊàñËÄÖ‰æùËµñÁöÑÊ®°Âùó‰æùËµñÁöÑÊ®°ÂùóÔºåÂêàÂú®‰∏ÄËµ∑ÁªÑÊàê‰∏Ä‰∏™‰ª£Á†ÅÂùóÔºåÊáíÂä†ËΩΩÊ®°ÂùóÂèäÂÖ∂‰æùËµñ‰πüÊòØ‰∏Ä‰∏™chunk
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">modules</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// ÊâìÂåÖÁöÑÊ®°ÂùóÔºåÈ°πÁõÆÊ∫êÁ†Å‰ªìÂ∫ì‰∏≠ÁöÑÊØè‰∏™Êñá‰ª∂ÈÉΩÊòØ‰∏Ä‰∏™Ê®°ÂùóÔºàjsÊñá‰ª∂ÔºåjsxÊñá‰ª∂ÔºåÂõæÁâáÔºåhtmlÔºåcssÁ≠âÔºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâìÂåÖÂêéÁîü‰∫ßÊñá‰ª∂ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÂú∞Êñπ</p>
<p>index.js Ê∫êÊñá‰ª∂Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./title.js&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;entry1&#34;</span><span class="p">,</span> <span class="nx">title</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>title.js Ê∫êÊñá‰ª∂Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">msg</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./msg.js&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg</span><span class="p">,</span> <span class="s2">&#34;msg&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="s2">&#34;title&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>msg.js Ê∫êÊñá‰ª∂Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="s2">&#34;msg&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>index.js ÊòØÈ°πÁõÆÁöÑÂÖ•Âè£Êñá‰ª∂„ÄÇ</p>
<p>ÊâìÂåÖÂêéÁîüÊàêÁöÑÁªìÊûúÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">modules</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;./src/msg.js&#34;</span><span class="o">:</span> <span class="p">(</span><span class="nx">module</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="s2">&#34;msg&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;./src/title.js&#34;</span><span class="o">:</span> <span class="p">(</span><span class="nx">module</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">msg</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./src/msg.js&#34;</span><span class="p">);</span> <span class="c1">// Ê∫êÁ†Å‰∏≠ÊòØ./msg.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="s2">&#34;title&#34;</span> <span class="o">+</span> <span class="nx">msg</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">cache</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">require</span><span class="p">(</span><span class="nx">moduleId</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">cachedModule</span> <span class="o">=</span> <span class="nx">cache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">cachedModule</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">cachedModule</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">module</span> <span class="o">=</span> <span class="p">(</span><span class="nx">cache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">exports</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="nx">modules</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">](</span><span class="nx">module</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">exports</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./src/title.js&#34;</span><span class="p">);</span> <span class="c1">// Ê∫êÁ†Å‰∏≠ÊòØ./title.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;entry1&#34;</span><span class="p">,</span> <span class="nx">title</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ªé‰∏≠ÂèØ‰ª•ÁúãÂà∞ÔºåÂú®Ê∫êÊñá‰ª∂ÁöÑÊ∫êÁ†Å‰∏≠ÔºåÂºïÂÖ•ÂÖ∂‰ªñÊ®°ÂùóÊñá‰ª∂Êó∂Ôºå‰ΩøÁî®ÁöÑÈÉΩÊòØ‰ªéËØ•Ê®°ÂùóÊñá‰ª∂Âá∫ÂèëÂà∞ÁõÆÊ†áÊñá‰ª∂ÁöÑÁõ∏ÂØπË∑ØÂæÑÔºå<strong>‰ΩÜÊòØ</strong>ÊâìÂåÖÂêéÁîüÊàêÁöÑÊñá‰ª∂‰∏≠ÔºåÊâÄÊúâÊ∫êÁ†Å‰∏≠ÁöÑÊ®°ÂùóÂØºÂÖ•ËØ≠Âè•‰∏≠ÁöÑË∑ØÂæÑÈÉΩÂèòÊàê‰∫Ü‰ª•È°πÁõÆÊ†πÁõÆÂΩï‰∏∫Áªü‰∏ÄÂá∫ÂèëÁÇπÁöÑÁõ∏ÂØπË∑ØÂæÑ„ÄÇ</p>
<h3 id="loader-1">loader
</h3><p>webpack ÁöÑ loder ÁöÑÊú¨Ë¥®Â∞±ÊòØ‰∏Ä‰∏™ JavaScript ÂáΩÊï∞ÔºåÁî®‰∫éËΩ¨Êç¢ÊàñËÄÖÁøªËØë webpack ‰∏çËÉΩËØÜÂà´ÁöÑÊ®°ÂùóËΩ¨‰∏∫ js ÊàñËÄÖ json Ê®°Âùó„ÄÇ</p>
<p>webpack.config.js:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.xxx$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;loaders/loader1.js&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">          <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;loaders/loader2.js&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>loaders/loader1.js:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">loader1</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">source</span> <span class="o">+</span> <span class="s2">&#34;------&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">loader1</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>loaders/loader2.js:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">loader2</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// return source+&#39;++++&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">return</span> <span class="sb">`module.exports = </span><span class="si">${</span><span class="nx">source</span><span class="si">}</span><span class="sb">+++++++`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">loader2</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="tapable">tapable
</h3><ul>
<li>tapable ÊòØ‰∏Ä‰∏™Á±ª‰ºº‰∫é Node.js ‰∏≠ÁöÑ EventEmitter ÁöÑÂ∫ìÔºå‰ΩÜÊõ¥‰∏ìÊ≥®‰∫éËá™ÂÆö‰πâ‰∫ã‰ª∂ÁöÑËß¶ÂèëÂíåÂ§ÑÁêÜ</li>
<li>webpack ÈÄöËøá tapable Â∞Ü ÂÆûÁé∞ ‰∏é ÊµÅÁ®ã Ëß£ËÄ¶ÔºåÊâÄÊúâÂÖ∑‰ΩìÂÆûÁé∞ÈÄöËøáÊèí‰ª∂ÁöÑÂΩ¢ÂºèÂ≠òÂú®</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">SyncHook</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">constructor</span><span class="p">(</span><span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">args</span> <span class="o">=</span> <span class="nx">args</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">argsLength</span> <span class="o">=</span> <span class="nx">args</span> <span class="o">?</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">taps</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">tap</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">taps</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">call</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">args</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">argsLength</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">taps</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">tap</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">tap</span><span class="p">(...</span><span class="nx">args</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">hook</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SyncHook</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">hook</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;some name&#34;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;some name&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">Plugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">apply</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">hook</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;Plugin&#34;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Plugin &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">new</span> <span class="nx">Plugin</span><span class="p">().</span><span class="nx">apply</span><span class="p">();</span> <span class="c1">// Êèí‰ª∂Ê≥®ÂÜåËá™Â∑±ÁöÑÈÄªËæë
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">hook</span><span class="p">.</span><span class="nx">call</span><span class="p">();</span> <span class="c1">// ÁºñËØëÊâìÂåÖËøáÁ®ã‰∏≠Ë∞ÉÁî®Ëá™Â∑±Â∑≤ÁªèÊ≥®ÂÜåÁöÑÈÄªËæë
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="plugin-1">plugin
</h3><p>Âú® webpack ‰∏≠ÔºåÊúâÈùûÂ∏∏Â§öÁ±ª‰ºº SyncHook ËøôÁßçÊûÑÈÄ†ÂáΩÊï∞ÁöÑ<strong>ÂÆû‰æãÂ±ûÊÄßÂÄº</strong>ÔºåÂÜôÊèí‰ª∂Â∞±ÊòØÂú®Ëøô‰∫õÂÆû‰æãÂ±ûÊÄßÂÄºÁöÑËÆ¢ÈòÖÊï∞ÁªÑ‰∏≠Ê∑ªÂä†‰∏ÄÁ≥ªÂàóÁöÑÊñπÊ≥ï„ÄÇÁÑ∂ÂêéÂú® webpack ÂºÄÂßãÊâìÂåÖÁºñËØë‰πãÂêéÂú®ÂêÑ‰∏™Èò∂ÊÆµË∞ÉÁî®Ëøô‰∫õÂÆû‰æãÂ±ûÊÄßÂÄº‰∏≠ËÆ¢ÈòÖÂ•ΩÁöÑÊñπÊ≥ïÔºåÂπ∂ÊâßË°åÈÄªËæë„ÄÇ</p>
<p>webpack Êèí‰ª∂ÁöÑÊ†ºÂºèÊòØÂõ∫ÂÆöÁöÑÔºåÊèí‰ª∂ÊòØ‰∏Ä‰∏™Á±ªÔºåÈúÄË¶ÅÂÆû‰æãÂåñÔºåÂÆû‰æãÂåñÂêéÁöÑÂÄºÊúâ‰∏Ä‰∏™ÂéüÂûãÊñπÊ≥ï apply„ÄÇ</p>
<p><strong>Êèí‰ª∂‰πãÈó¥ÁöÑ‰π¶ÂÜôÈ°∫Â∫èÂπ∂‰∏ç‰ºöÂΩ±ÂìçÂêÑ‰∏™Êèí‰ª∂ÁöÑÊâßË°åÈ°∫Â∫èÔºå‰ΩÜÊòØÂ¶ÇÊûú‰∏§‰∏™Êèí‰ª∂ÁõëÂê¨ÁöÑÊòØ‰∏Ä‰∏™ hookÔºåÈÇ£‰πà‰π¶ÂÜôÈ°∫Â∫èÂ∞±ÂíåÊâßË°åÈ°∫Â∫èÊúâÂÖ≥‰∫Ü„ÄÇ</strong></p>
<p>Êèí‰ª∂ÁöÑÊåÇËΩΩÊàñËÄÖËØ¥ÁõëÂê¨ÊòØÂú® webpack ÂêØÂä®ÁºñËØëÂâçÂÖ®ÈÉ®ÊåÇËΩΩÁöÑ„ÄÇÂÖ∑‰ΩìÁî±Âì™‰∫õ hook ÂÆû‰æãÂ±ûÊÄßÂÄºÔºåÂèØ‰ª•Âú®ÂÆòÁΩë‰∏≠Êü•Áúã„ÄÇ</p>
<p>plugins/run1-plugin.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">RunPlugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">apply</span><span class="p">(</span><span class="nx">compiler</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Âú®Ê≠§Êèí‰ª∂ÈáåÂèØ‰ª•ÁõëÂê¨runËøô‰∏™Èí©Â≠ê
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// compiler‰∏äÈù¢Â∞±ÊúâËÆ∏Â§öÁöÑhookÁ±ªÁöÑÂÆû‰æãÔºåÊØîÂ¶Çrun
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">compiler</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">run</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;RunPlugin&#34;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;run1:ÂºÄÂßãÁºñËØë&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">RunPlugin</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>plugins/run2-plugin.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">RunPlugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">apply</span><span class="p">(</span><span class="nx">compiler</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">compiler</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">run</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;RunPlugin&#34;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;run2:ÂºÄÂßãÁºñËØë&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">RunPlugin</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>plugins/done-plugin.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">DonePlugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">apply</span><span class="p">(</span><span class="nx">compiler</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">compiler</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">done</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;DonePlugin&#34;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;done:ÁªìÊùüÁºñËØë&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">DonePlugin</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/* let compiler = {
</span></span></span><span class="line"><span class="cl"><span class="cm">  hooks: {
</span></span></span><span class="line"><span class="cl"><span class="cm">    run:new Hook(),
</span></span></span><span class="line"><span class="cl"><span class="cm">    done:new Hook()
</span></span></span><span class="line"><span class="cl"><span class="cm">  }
</span></span></span><span class="line"><span class="cl"><span class="cm">} */</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>webpack.config.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Run1Plugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./plugins/run1-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Run2Plugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./plugins/run2-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">DonePlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./plugins/done-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s2">&#34;development&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">devtool</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Êèí‰ª∂ÁöÑÊåÇËΩΩÊàñËÄÖËØ¥ÁõëÂê¨ÊòØÂú®ÁºñËØëÂêØÂä®ÂâçÂÖ®ÈÉ®ÊåÇËΩΩÁöÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">new</span> <span class="nx">Run1Plugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">Run2Plugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">DonePlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>babel Âíå webpack ÁöÑÂÖ≥Á≥ªÊòØ‰ªÄ‰πàÔºü ÊâßË°åÈ°∫Â∫èÊòØÔºü webpack Âú®ÁºñËØëÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÈÅáÂà∞ js Êñá‰ª∂Ôºå‰ºöË∞ÉÁî® babel-loader ËøõË°åÊñá‰ª∂ÂÜÖÂÆπÁöÑËΩ¨Êç¢ÔºåÂú®ËΩ¨Êç¢ÁöÑÊó∂ÂÄô‰ºö‰ΩøÁî® babel Êèí‰ª∂Êù•ËΩ¨Êç¢„ÄÇ</p>
<p>ÂΩìÂ§ö‰∏™ loader ÂåπÈÖçÂà∞Âêå‰∏Ä‰∏™Êñá‰ª∂Êó∂ÔºåWebpack Â∞ÜÊåâÁÖßÈÖçÁΩÆ‰∏≠ loader ËßÑÂàôÁöÑÈ°∫Â∫è‰æùÊ¨°Â∫îÁî®Ëøô‰∫õ loader„ÄÇ</p>
<p>Âú®‰∏ãÈÖçÁΩÆÁâáÊÆµ‰∏≠ÔºåÊúâ‰∏§‰∏™ loader ÈÉΩÂåπÈÖçÂà∞‰∫Ü <code>.txt</code> Êñá‰ª∂ÔºåÂÆÉ‰ª¨ÁöÑÈ°∫Â∫èÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.txt$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="nx">loader1</span><span class="p">],</span> <span class="c1">// Âú®Ê≤°Êúâ‰∏ªÂä®ÈÖçÁΩÆenforceÂ≠óÊÆµÁöÑÊÉÖÂÜµ‰∏ã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.txt$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="nx">loader2</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê†πÊçÆËøô‰∏™ÈÖçÁΩÆÔºåWebpack Â∞ÜÈ¶ñÂÖàÂ∫îÁî® <code>loader1</code>ÔºåÁÑ∂ÂêéÂÜçÂ∫îÁî® <code>loader2</code>„ÄÇ</p>
<p>Êç¢Âè•ËØùËØ¥ÔºåÂÖà‰ΩøÁî® <code>loader1</code> Â§ÑÁêÜ <code>.txt</code> Êñá‰ª∂ÔºåÁÑ∂ÂêéÂ∞ÜÂ§ÑÁêÜÁªìÊûú‰º†ÈÄíÁªô <code>loader2</code>„ÄÇËøôÊ†∑ÂèØ‰ª•ÂΩ¢Êàê‰∏Ä‰∏™ loader ÈìæÔºåÊØè‰∏™ loader ÈÉΩÂèØ‰ª•ÂØπÊñá‰ª∂ËøõË°å‰∏Ä‰∫õÁâπÂÆöÁöÑÂ§ÑÁêÜ„ÄÇ</p>
<p>ËØ∑Ê≥®ÊÑèÔºåloader ÁöÑÂ§ÑÁêÜÈ°∫Â∫èÂèØËÉΩ‰ºöÂØπÊúÄÁªàÁöÑÂ§ÑÁêÜÁªìÊûú‰∫ßÁîüÂΩ±ÂìçÔºåÂõ†Ê≠§Âú®ÈÖçÁΩÆ loader ÁöÑÈ°∫Â∫èÊó∂ÔºåÈúÄË¶ÅÊ†πÊçÆÂÆûÈôÖÈúÄÊ±ÇÂíå loader ÁöÑÂäüËÉΩÊù•Á°ÆÂÆöÈ°∫Â∫è„ÄÇ</p>
<p>Â¶ÇÊûúÂ∏åÊúõ <code>loader2</code> ÂÖàÂ§ÑÁêÜ <code>.txt</code> Êñá‰ª∂ÔºåÁÑ∂ÂêéÂÜçÁî± <code>loader1</code> Â§ÑÁêÜÂ§ÑÁêÜÁªìÊûúÔºåÂè™ÈúÄË∞ÉÊï¥ÈÖçÁΩÆ‰∏≠‰∏§‰∏™ loader ÁöÑÈ°∫Â∫èÂç≥ÂèØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.txt$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="nx">loader2</span><span class="p">],</span> <span class="c1">// Âú®Ê≤°Êúâ‰∏ªÂä®ÈÖçÁΩÆenforceÂ≠óÊÆµÁöÑÊÉÖÂÜµ‰∏ã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.txt$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="nx">loader1</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊ†∑ÔºåWebpack Â∞ÜÈ¶ñÂÖàÂ∫îÁî® <code>loader2</code>ÔºåÁÑ∂ÂêéÂÜçÂ∫îÁî® <code>loader1</code>„ÄÇ</p>
<h3 id="webpack-ÁºñËØëÊµÅÁ®ã">webpack ÁºñËØëÊµÅÁ®ã
</h3><p>ÈÖçÁΩÆÊñá‰ª∂ÂèÇËÄÉÔºö</p>
<p>webpack.config.js:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Run1Plugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./plugins/run1-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Run2Plugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./plugins/run2-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">DonePlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./plugins/done-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s2">&#34;development&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">devtool</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">cache</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;filesystem&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">entry1</span><span class="o">:</span> <span class="s2">&#34;./src/entry1.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">entry2</span><span class="o">:</span> <span class="s2">&#34;./src/entry2.js&#34;</span><span class="p">,</span> <span class="c1">// nameÂ∞±ÊòØÊ≠§Ê®°ÂùóÂ±û‰∫éÂì™‰∏™Ê®°Âùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;dist&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;[name].js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">extensions</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;.js&#34;</span><span class="p">,</span> <span class="s2">&#34;.jsx&#34;</span><span class="p">,</span> <span class="s2">&#34;.ts&#34;</span><span class="p">,</span> <span class="s2">&#34;.tsx&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="c1">//ÊúÄÂ∑¶ÂàôÁöÑloaderÈúÄË¶ÅËøîÂõûÂêàÊ≥ïÁöÑJS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;loaders/loader2.js&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">          <span class="c1">//ÊúÄÂè≥‰æßÁöÑloaderÊãøÂà∞ÁöÑÊòØÊ∫ê‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;loaders/loader1.js&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Êèí‰ª∂ÁöÑÊåÇËΩΩÊàñËÄÖËØ¥ÁõëÂê¨ÊòØÂú®ÁºñËØëÂêØÂä®ÂâçÂÖ®ÈÉ®ÊåÇËΩΩÁöÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">new</span> <span class="nx">Run1Plugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">Run2Plugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">DonePlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>
<p><strong>ÂàùÂßãÂåñÂèÇÊï∞Ôºö‰ªéÈÖçÁΩÆÊñá‰ª∂Âíå Shell ËØ≠Âè•‰∏≠ËØªÂèñÂπ∂ÂêàÂπ∂ÂèÇÊï∞,ÂæóÂá∫ÊúÄÁªàÁöÑÈÖçÁΩÆÂØπË±°</strong></p>
</li>
<li>
<p><strong>Áî®‰∏ä‰∏ÄÊ≠•ÂæóÂà∞ÁöÑÈÖçÁΩÆÂØπË±°ÂàùÂßãÂåñ <code>Compiler</code> ÂØπË±°</strong></p>
</li>
<li>
<p><strong>Âä†ËΩΩ(ÊåÇËΩΩ)ÊâÄÊúâÈÖçÁΩÆÁöÑÊèí‰ª∂ÔºåÊèí‰ª∂ÊòØÂú®ÁºñËØëÂºÄÂßã‰πãÂâçÂÖ®ÈÉ®ÊåÇËΩΩÔºàËÆ¢ÈòÖÔºâÂ•ΩÁöÑÔºåÁ≠âÂà∞ÂêéÈù¢ÁºñËØëËøáÁ®ã‰∏≠Ëß¶ÂèëÊèí‰ª∂ÁöÑ‰∏≠ÂêÑÁßçËÆ¢ÈòÖÂáΩÊï∞</strong></p>
</li>
<li>
<p><strong>ÊâßË°å Compiler ÂØπË±°ÁöÑ run ÊñπÊ≥ïÂºÄÂßãÊâßË°åÁºñËØëÔºåÂÜÖÈÉ®‰ºöÂàõÂª∫Êñ∞Âª∫‰∏Ä‰∏™ Compilation ÂÆû‰æãÂØπË±°ÔºåÁÑ∂ÂêéË∞ÉÁî®ËØ•ÂÆû‰æãÂØπË±°ÁöÑ build ÊñπÊ≥ïÂºÄÂßãÊâìÂåÖÊûÑÂª∫</strong></p>
</li>
<li>
<p><strong>build ÊñπÊ≥ï‰∏≠ÔºåÊ†πÊçÆÈÖçÁΩÆ‰∏≠ÁöÑ<code>entry</code>ÊâæÂá∫ÂÖ•Âè£Êñá‰ª∂</strong></p>
</li>
<li>
<p><strong>‰ªéÂÖ•Âè£Êñá‰ª∂Âá∫Âèë,Ë∞ÉÁî®ÊâÄÊúâÈÖçÁΩÆÁöÑ<code>Loader</code>ÂØπÊ®°ÂùóËøõË°åÁºñËØëÔºåÂæóÂà∞ÂêÑ‰∏™ loader Â§ÑÁêÜÂêéÁöÑÊñá‰ª∂‰ª£Á†ÅÔºåÁÑ∂ÂêéÈÄöËøá bable ÂéªÁîüÊàêÂπ∂Ëß£ÊûêËØ•Êñá‰ª∂ÔºàASTÔºâ‰∏≠ÁöÑ‰ª£Á†ÅÔºåÁõÆÁöÑÊòØÊî∂ÈõÜÂà∞ËØ•Êñá‰ª∂‰æùËµñÁöÑÂÖ∂‰ªñ‰æùËµñÊñá‰ª∂Ê®°ÂùóÔºåÂÖ±Áªô‰∏ã‰∏ÄÊ≠•‰ΩøÁî®</strong></p>
</li>
<li>
<p><strong>Âú®ÁªìÊùüÊú¨Ê®°ÂùóÁöÑ ast ËØ≠Ê≥ïÊ†ëÂàÜÊûêÂêéÔºåÂ∞ÜÊî∂ÈõÜÂà∞ÁöÑÊú¨Ê®°Âùó‰æùËµñÁöÑÂÖ∂‰ªñÊ®°ÂùóÈÄíÂΩíÊú¨Ê≠•È™§Áõ¥Âà∞ÊâÄÊúâÂÖ•Âè£‰æùËµñÁöÑÊñá‰ª∂ÈÉΩÁªèËøá‰∫ÜÊú¨Ê≠•È™§ÁöÑÂ§ÑÁêÜ</strong></p>
</li>
<li>
<p><strong>Ê†πÊçÆÂÖ•Âè£ÂíåÊ®°Âùó‰πãÈó¥ÁöÑ‰æùËµñÂÖ≥Á≥ªÔºåÁªÑË£ÖÊàê‰∏Ä‰∏™‰∏™ÂåÖÂê´Â§ö‰∏™Ê®°ÂùóÁöÑ Chunk</strong></p>
</li>
<li>
<p><strong>ÂÜçÊääÊØè‰∏™ Chunk ËΩ¨Êç¢Êàê‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊñá‰ª∂Âä†ÂÖ•Âà∞ËæìÂá∫ÂàóË°®</strong></p>
</li>
<li>
<p><strong>Âú®Á°ÆÂÆöÂ•ΩËæìÂá∫ÂÜÖÂÆπÂêéÔºåÊ†πÊçÆÈÖçÁΩÆÁ°ÆÂÆöËæìÂá∫ÁöÑË∑ØÂæÑÂíåÊñá‰ª∂ÂêçÔºåÊääÊñá‰ª∂ÂÜÖÂÆπÂÜôÂÖ•Âà∞Êñá‰ª∂Á≥ªÁªü</strong></p>
<pre><code>    Âú®‰ª•‰∏äËøáÁ®ã‰∏≠ÔºåWebpack ‰ºöÂú®ÁâπÂÆöÁöÑÊó∂Èó¥ÁÇπÂπøÊí≠Âá∫ÁâπÂÆöÁöÑ‰∫ã‰ª∂ÔºåÊèí‰ª∂Âú®ÁõëÂê¨Âà∞ÂØπÂ∫îÁöÑ‰∫ã‰ª∂Âêé‰ºöÊâßË°åÁâπÂÆöÁöÑÈÄªËæëÔºåÂπ∂‰∏îÊèí‰ª∂ÂèØ‰ª•Ë∞ÉÁî® Webpack Êèê‰æõÁöÑ API ÊîπÂèò Webpack ÁöÑËøêË°åÁªìÊûú„ÄÇ

    dubugger.js:

    ```js
    const webpack = require(&quot;./webpack&quot;);
    const webpackConfig = require(&quot;./webpack.config&quot;);
    dubugger;
    const compiler = webpack(webpackConfig);
    //4.ÊâßË°å`Compiler`ÂØπË±°ÁöÑ run ÊñπÊ≥ïÂºÄÂßãÊâßË°åÁºñËØë
    compiler.run((err, stats) =&gt; {
      if (err) {
        console.log(err);
      } else {
        //stats‰ª£Ë°®ÁªüËÆ°ÁªìÊûúÂØπË±°
        console.log(
          stats.toJson({
            files: true, //‰ª£Ë°®ÊâìÂåÖÂêéÁîüÊàêÁöÑÊñá‰ª∂
            assets: true, //ÂÖ∂ÂÆÉÊòØ‰∏Ä‰∏™‰ª£Á†ÅÂùóÂà∞Êñá‰ª∂ÁöÑÂØπÂ∫îÂÖ≥Á≥ª
            chunks: true, //‰ªéÂÖ•Âè£Ê®°ÂùóÂá∫ÂèëÔºåÊâæÂà∞Ê≠§ÂÖ•Âè£Ê®°Âùó‰æùËµñÁöÑÊ®°ÂùóÔºåÊàñËÄÖ‰æùËµñÁöÑÊ®°Âùó‰æùËµñÁöÑÊ®°ÂùóÔºåÂêàÂú®‰∏ÄËµ∑ÁªÑÊàê‰∏Ä‰∏™‰ª£Á†ÅÂùó
            modules: true, //ÊâìÂåÖÁöÑÊ®°Âùó
          })
        );
      }
    });
    ```

    webpack.js:

    ```js
    const Compiler = require(&quot;./Compiler&quot;);

    function webpack(options) {
      // 1.ÂàùÂßãÂåñÂèÇÊï∞Ôºö‰ªéÈÖçÁΩÆÊñá‰ª∂Âíå Shell ËØ≠Âè•‰∏≠ËØªÂèñÂπ∂ÂêàÂπ∂ÂèÇÊï∞,ÂæóÂá∫ÊúÄÁªàÁöÑÈÖçÁΩÆÂØπË±°
      //argv[0]ÊòØNodeÁ®ãÂ∫èÁöÑÁªùÂØπË∑ØÂæÑ argv[1] Ê≠£Âú®ËøêË°åÁöÑËÑöÊú¨
      const argv = process.argv.slice(2); // ÁúüÊ≠£ÈúÄË¶ÅÁöÑshellÂèÇÊï∞
      const shellOptions = argv.reduce((shellOptions, options) =&gt; {
        // options = '--mode=development'
        const [key, value] = options.split(&quot;=&quot;);
        shellOptions[key.slice(2)] = value;
        return shellOptions;
      }, {});

      const finalOptions = { ...options, ...shellOptions }; // ËøôÈáåÂ∞±‰ΩìÁé∞ÁöÑshell‰∏≠ËÆæÁΩÆÂèÇÊï∞ÁöÑÊùÉÈáçÊõ¥È´òÁöÑÂéüÂõ†

      //2.Áî®‰∏ä‰∏ÄÊ≠•ÂæóÂà∞ÁöÑÂèÇÊï∞ÂàùÂßãÂåñ `Compiler` ÂØπË±°ÔºåÂçï‰æãÁöÑÔºåcompilerÂÆû‰æãÂØπË±°ÁÆ°ÁêÜÁùÄÊï¥‰∏™ÊâìÂåÖËøáÁ®ã
      const compiler = new Compiler(finalOptions);

      //3.Âä†ËΩΩÊâÄÊúâÈÖçÁΩÆÁöÑÊèí‰ª∂  pluginsËøôÂ∞±ÊòØÊèí‰ª∂Á±ªÁöÑÂÆû‰æãÁªÑÊàêÁöÑÊï∞ÁªÑ
      const { plugins } = finalOptions;
      for (let plugin of plugins) {
        plugin.apply(compiler);
      }
      return compiler;
    }

    module.exports = webpack;
    ```

    Compiler.js:

    ```js
    const { SyncHook } = require(&quot;tapable&quot;);
    const Compilation = require(&quot;./Compilation&quot;);
    const fs = require(&quot;fs&quot;);
    const path = require(&quot;path&quot;);

    // Compiler‰ª£Ë°®Êï¥‰∏™ÁºñËØëËøáÁ®ãÔºåÂú®ÁºñËØë‰∏ÄÂêØÂä®Êó∂ÂàõÂª∫ÔºåË¥ØÁ©øÊï¥‰∏™ÁºñËØëÊâìÂåÖÁöÑÁîüÂëΩÂë®Êúü‰∏îÊòØÂçï‰æãÁöÑÔºåÊï¥‰∏™ÁºñËØëÊâìÂåÖËøáÁ®ã‰∏≠Â∞±‰∏Ä‰∏™ÂÆû‰æã„ÄÇ
    class Compiler {
      constructor(options) {
        this.options = options;
        this.hooks = {
          // Compiler ÂÆû‰æã‰∏äÊúâËÆ∏Â§öÊûÑÈÄ†ÂáΩÊï∞ÂÆû‰æãÂåñÂêéÁöÑÈí©Â≠ê
          run: new SyncHook(), // Âú®ÂºÄÂßãÁºñËØë‰πãÂâçË∞ÉÁî®
          done: new SyncHook(), // Âú®ÁºñËØëÂÆåÊàêÊó∂ÊâßË°å
        };
      }

      run(callback) {
        this.hooks.run.call(); // Âú®ÁºñËØëÂºÄÂßãÂâçËß¶ÂèërunÈí©Â≠êÊâßË°å

        // Âú®ÁºñËØëÁöÑËøáÁ®ã‰∏≠‰ºöÊî∂ÈõÜÊâÄÊúâ‰æùËµñÁöÑÊ®°ÂùóÊàñËÄÖËØ¥Êñá‰ª∂
        // statsÊåáÁöÑÊòØÁªüËÆ°‰ø°ÊÅØ modules chunks  files=bundle assetsÊåáÁöÑÊòØÊñá‰ª∂ÂêçÂíåÊñá‰ª∂ÂÜÖÂÆπÁöÑÊò†Â∞ÑÂÖ≥Á≥ª
        const onCompiled = (err, stats, fileDependencies) =&gt; {
          console.log(&quot;stats&quot;, stats);
          console.log(&quot;fileDependencies&quot;, fileDependencies);
          //10.Âú®Á°ÆÂÆöÂ•ΩËæìÂá∫ÂÜÖÂÆπÂêéÔºåÊ†πÊçÆÈÖçÁΩÆÁ°ÆÂÆöËæìÂá∫ÁöÑË∑ØÂæÑÂíåÊñá‰ª∂ÂêçÔºåÊääÊñá‰ª∂ÂÜÖÂÆπÂÜôÂÖ•Âà∞Êñá‰ª∂Á≥ªÁªü
          for (let filename in stats.assets) {
            let filePath = path.join(this.options.output.path, filename);
            fs.writeFileSync(filePath, stats.assets[filename], &quot;utf8&quot;);
          }
          callback(err, { toJson: () =&gt; stats });
          for (let fileDependency of fileDependencies) {
            //ÁõëÂê¨‰æùËµñÁöÑÊñá‰ª∂ÂèòÂåñÔºåÂ¶ÇÊûú‰æùËµñÁöÑÊñá‰ª∂ÂèòÂåñÂêé‰ºöÂºÄÂßã‰∏ÄÊ¨°Êñ∞ÁöÑÁºñËØë
            fs.watch(fileDependency, () =&gt; this.compile(onCompiled));
          }
          this.hooks.done.call(); // Âú®ÁºñËØëÂÆåÊàêÊó∂Ëß¶ÂèëdoneÈí©Â≠êÊâßË°å
        };

        // Ë∞ÉÁî®compileÊñπÊ≥ïËøõË°åÁºñËØë
        this.compile(onCompiled);
      }

      // ÂºÄÂêØ‰∏ÄÊ¨°Êñ∞ÁöÑÁºñËØë
      compile(callback) {
        // ÊØèÊ¨°ÁºñËØë ÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑCompilationÂÆû‰æã
        let compilation = new Compilation(this.options, this);
        compilation.build(callback);
      }
    }

    module.exports = Compiler;
    ```

    Compilation.js:

    ```js
    const path = require(&quot;path&quot;);
    const fs = require(&quot;fs&quot;);
    const parser = require(&quot;@babel/parser&quot;);
    const types = require(&quot;@babel/types&quot;);
    const traverse = require(&quot;@babel/traverse&quot;).default;
    const generator = require(&quot;@babel/generator&quot;).default;

    const baseDir = normalizePath(process.cwd());
    function normalizePath(path) {
      return path.replace(/\\/g, &quot;/&quot;);
    }

    class Compilation {
      constructor(options, compiler) {
        this.options = options;
        this.compiler = compiler;
        this.modules = []; // ËøôÈáåÊîæÁΩÆÊú¨Ê¨°ÁºñËØëÊ∂âÂèäÁöÑÊâÄÊúâÁöÑÊ®°Âùó
        this.chunks = []; // Êú¨Ê¨°ÁºñËØëÊâÄÁªÑË£ÖÂá∫ÁöÑ‰ª£Á†ÅÂùó
        this.assets = {}; // keyÊòØÊñá‰ª∂Âêç,ÂÄºÊòØÊñá‰ª∂ÂÜÖÂÆπ
        this.files = []; // ‰ª£Ë°®Êú¨Ê¨°ÊâìÂåÖÂá∫Êù•ÁöÑÊñá‰ª∂
        this.fileDependencies = new Set(); // Êú¨Ê¨°ÁºñËØë‰æùËµñÁöÑÊñá‰ª∂ÊàñËÄÖËØ¥Ê®°Âùó
        // Ëøô‰∏™ÂØπË±°‰∏ä‰πüÊúâÂæàÂ§öÁöÑhook
      }

      build(callback) {
        // 5.Ê†πÊçÆÈÖçÁΩÆ‰∏≠ÁöÑentryÊâæÂá∫ÂÖ•Âè£Êñá‰ª∂
        let entry = {};
        if (typeof this.options.entry === &quot;string&quot;) {
          entry.main = this.options.entry;
        } else {
          entry = this.options.entry;
        }

        for (let entryName in entry) {
          //   const baseDir = normalizePath(process.cwd());
          let entryFilePath = path.posix.join(baseDir, entry[entryName]); // Â∞Üentry‰∏≠ÁöÑÁõ∏ÂØπÂú∞ÂùÄËΩ¨‰∏∫‰ªéÁ£ÅÁõòÊ†πË∑ØÂæÑÂá∫ÂèëÁöÑÁªùÂØπÂú∞ÂùÄ

          this.fileDepxendencies.add(entryFilePath);
          // 6.‰ªéÂÖ•Âè£Êñá‰ª∂Âá∫Âèë,Ë∞ÉÁî®ÊâÄÊúâÈÖçÁΩÆÁöÑLoaderÂØπÊ®°ÂùóËøõË°åÁºñËØë
          let entryModule = this.buildModule(entryName, entryFilePath);
          // this.modules.push(entryModule);
          // 8.Ê†πÊçÆÂÖ•Âè£ÂíåÊ®°Âùó‰πãÈó¥ÁöÑ‰æùËµñÂÖ≥Á≥ªÔºå  Chunk
          let chunk = {
            name: entryName,
            entryModule,
            modules: this.modules.filter((module) =&gt;
              module.names.includes(entryName)
            ),
          };
          this.chunks.push(chunk);
        }

        //9.ÂÜçÊääÊØè‰∏™ Chunk ËΩ¨Êç¢Êàê‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊñá‰ª∂Âä†ÂÖ•Âà∞ËæìÂá∫ÂàóË°®
        this.chunks.forEach((chunk) =&gt; {
          const filename = this.options.output.filename.replace(
            &quot;[name]&quot;,
            chunk.name
          );
          this.files.push(filename);
          this.assets[filename] = getSource(chunk);
        });

        callback(
          null,
          {
            modules: this.modules,
            chunks: this.chunks,
            assets: this.assets,
            files: this.files,
          },
          this.fileDependencies
        );
      }
      /**
       * ÁºñËØëÊ®°Âùó
       * @param {*} name Ê®°ÂùóÊâÄÂ±ûÁöÑ‰ª£Á†ÅÂùó(chunk)ÁöÑÂêçÁß∞Ôºå‰πüÂ∞±ÊòØentryÈÖçÁΩÆÈ°πÁöÑkey entry1 entry2
       * @param {*} modulePath Ê®°ÂùóÁöÑË∑ØÂæÑÔºåÁªùÂØπË∑ØÂæÑ
       */
      buildModule(name, modulePath) {
        //1.ËØªÂèñÊñá‰ª∂ÁöÑÂÜÖÂÆπ
        let sourceCode = fs.readFileSync(modulePath, &quot;utf8&quot;); // ÂêåÊ≠•ËØªÂèñÊñá‰ª∂ÂÜÖÂÆπ
        let { rules = [] } = this.options.module;
        //Ê†πÊçÆËßÑÂàôÊâæÂà∞ÊâÄÊúâÁöÑÂåπÈÖçÁöÑloader
        let loaders = [];
        rules.forEach((rule) =&gt; {
          // ‰ªéËøôÊÆµ‰ª£Á†ÅÈÄªËæëÂèØ‰ª•ÁúãÂá∫ÔºåÈíàÂØπÊüê‰∏™Á±ªÂûãÁöÑÊñá‰ª∂‰ºöÈÅçÂéÜwebpackÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑÊâÄÊúâruleÔºåÂëΩ‰∏≠ÂÖ∂‰∏≠Á¨¶ÂêàtestËßÑÂàôÁöÑÊñá‰ª∂ÔºåÁÑ∂ÂêéÁî®loaderËøõË°åÂ§ÑÁêÜÔºåÂ¶ÇÊûúÊúâÂ§ö‰∏™ËßÑÂàôÈÉΩËÉΩÂëΩ‰∏≠Âêå‰∏Ä‰∏™Êñá‰ª∂ÔºåÈÇ£‰πàÈÉΩ‰ºöÂØπÂâçÈù¢ruleÂ§ÑÁêÜËøáÁöÑÊñá‰ª∂Ê∫êÁ†ÅËøõË°åËøõ‰∏ÄÊ≠•Â§ÑÁêÜ„ÄÇ
          if (modulePath.match(rule.test)) {
            loaders.push(...rule.use);
          }
        });
        //Ë∞ÉÁî®ÊâÄÊúâÈÖçÁΩÆÁöÑLoaderÂØπÊ®°ÂùóËøõË°åËΩ¨Êç¢
        sourceCode = loaders.reduceRight((sourceCode, loader) =&gt; {
          return require(loader)(sourceCode);
        }, sourceCode);

        // 7.ÂÜçÊâæÂá∫ËØ•Ê®°Âùó‰æùËµñÁöÑÊ®°ÂùóÔºåÂÜçÈÄíÂΩíÊú¨Ê≠•È™§Áõ¥Âà∞ÊâÄÊúâÂÖ•Âè£‰æùËµñÁöÑÊñá‰ª∂ÈÉΩÁªèËøá‰∫ÜÊú¨Ê≠•È™§ÁöÑÂ§ÑÁêÜ Ôºå ÊâæÂá∫Êüê‰∏™Ê®°ÂùóÊñá‰ª∂‰∏≠‰æùËµñÁöÑÂÖ∂‰ªñÊ®°ÂùóÂàôÊòØÈÄöËøáASTÊü•ÊâæËé∑Âèñ
        // Â£∞ÊòéÂΩìÂâçÊ®°ÂùóÁöÑID
        let moduleId = &quot;./&quot; + path.posix.relative(baseDir, modulePath); // relativeÊñπÊ≥ïËøîÂõû‰∏Ä‰∏™Áõ∏ÂØπÁöÑË∑ØÂæÑ
        //ÂàõÂª∫‰∏Ä‰∏™Ê®°ÂùóÔºåIDÂ∞±ÊòØÁõ∏ÂØπ‰∫éÊ†πÁõÆÂΩïÁöÑÁõ∏ÂØπË∑ØÂæÑÔºådependenciesÂ∞±ÊòØÊ≠§Ê®°Âùó‰æùËµñÁöÑÊ®°Âùó
        //nameÊòØÊ®°ÂùóÊâÄÂ±ûÁöÑ‰ª£Á†ÅÂùóÁöÑÂêçÁß∞, Â¶ÇÊûú‰∏Ä‰∏™Ê®°ÂùóÂ±û‰∫éÂ§ö‰∏™‰ª£Á†ÅÂùóÔºåÈÇ£‰πànameÂ∞±ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºàÊØîÂ¶Ç‰∏Ä‰∏™Ê®°ÂùóË¢´Â§ö‰∏™ÂÖ•Âè£‰∏≠ÁöÑÂÖ∂‰ªñÊ®°ÂùóÈÉΩÂºïÁî®‰∫Ü„ÄÇÔºâ
        let module = { id: moduleId, dependencies: [], names: [name] };
        let ast = parser.parse(sourceCode, { sourceType: &quot;module&quot; });
        //VisitorÊòØbabelÊèí‰ª∂‰∏≠ÁöÑÊ¶ÇÂøµÔºåÊ≠§Â§ÑÊ≤°Êúâ
        traverse(ast, {
          CallExpression: ({ node }) =&gt; {
            if (node.callee.name === &quot;require&quot;) {
              let depModuleName = node.arguments[0].value; // &quot;./title&quot;
              let depModulePath;
              if (depModuleName.startsWith(&quot;.&quot;)) {
                //ÊöÇÊó∂ÂÖà‰∏çËÄÉËôënode_modulesÈáåÁöÑÊ®°ÂùóÔºåÂÖàÂè™ËÄÉËôëÁõ∏ÂØπË∑ØÂæÑ
                const currentDir = path.posix.dirname(modulePath);
                //Ë¶ÅÊâæÂΩìÂâçÊ®°ÂùóÊâÄÊúâÂú®ÁöÑÁõÆÂΩï‰∏ãÈù¢ÁöÑÁõ∏ÂØπË∑ØÂæÑ
                depModulePath = path.posix.join(currentDir, depModuleName);
                //Ê≠§ÁªùÂØπË∑ØÂæÑÂèØËÉΩÊ≤°ÊúâÂêéÁª≠ÔºåÈúÄË¶ÅÂ∞ùËØïÊ∑ªÂä†ÂêéÁºÄ
                const extensions = this.options.resolve.extensions;
                depModulePath = tryExtensions(depModulePath, extensions);
              } else {
                //Â¶ÇÊûú‰∏çÊòØ‰ª•.ÂºÄÂ§¥ÁöÑËØùÔºåÂ∞±ÊòØÁ¨¨‰∏âÊñπÊ®°Âùó
                depModulePath = require.resolve(depModuleName);
              }
              this.fileDependencies.add(depModulePath);
              //Ëé∑Âèñ‰æùËµñÁöÑÊ®°ÂùóÁöÑID,‰øÆÊîπËØ≠Ê≥ïÊ†ëÔºåÊää‰æùËµñÁöÑÊ®°ÂùóÂêçÊç¢ÊàêÊ®°ÂùóID
              let depModuleId =
                &quot;./&quot; + path.posix.relative(baseDir, depModulePath);
              node.arguments[0] = types.stringLiteral(depModuleId);
              //Êää‰æùËµñÁöÑÊ®°ÂùóIDÂíå‰æùËµñÁöÑÊ®°ÂùóË∑ØÂæÑÊîæÁΩÆÂà∞ÂΩìÂâçÊ®°ÂùóÁöÑ‰æùËµñÊï∞ÁªÑ‰∏≠
              module.dependencies.push({
                depModuleId,
                depModulePath,
              });
            }
          },
        });
        //‰ΩøÁî®ÊîπÈÄ†ÂêéÁöÑastËØ≠Ê≥ïË¶ÅÂú∞ÈáçÊñ∞ÁîüÊàêÊñ∞ÁöÑÊ∫ê‰ª£Á†Å
        let { code } = generator(ast);
        module._source = code;

        // ÈÄíÂΩíÂΩìÂâçÊ®°Âùó‰æùËµñÁöÑÂÖ∂‰ªñÊ®°Âùó
        module.dependencies.forEach(({ depModuleId, depModulePath }) =&gt; {
          //Âà§Êñ≠Ê≠§‰æùËµñÁöÑÊ®°ÂùóÊòØÂê¶Â∑≤ÁªèÊâìÂåÖËøá‰∫ÜÊàñËÄÖËØ¥ÁºñËØëËøá‰∫Ü
          let existModule = this.modules.find(
            (module) =&gt; module.id === depModuleId
          );
          if (existModule) {
            existModule.names.push(name);
          } else {
            let depModule = this.buildModule(name, depModulePath); // ËøôÈáåÁöÑname‰ΩøÁî®ÁöÑÊòØÁ¨¨‰∏ÄÊ¨°‰º†ÂÖ•ÁöÑÈÇ£‰∏™ÂÄºÔºåÂ¶Çentry1Âíåentry2
            this.modules.push(depModule);
          }
        });
        return module;
      }
    }

    function tryExtensions(modulePath, extensions) {
      if (fs.existsSync(modulePath)) {
        return modulePath;
      }
      for (let i = 0; i &lt; extensions.length; i++) {
        let filePath = modulePath + extensions[i];
        if (fs.existsSync(filePath)) {
          return filePath;
        }
      }
      throw new Error(`Êâæ‰∏çÂà∞${modulePath}`);
    }

    function getSource(chunk) {
      return `
      (() =&gt; {
        var modules = {
          ${chunk.modules
            .map(
              (module) =&gt; `

&quot;${module.id}&quot;: (module, exports, require) =&gt; {
${module.\_source}
}
`           )
    .join(&quot;,&quot;)}
};
var cache = {};
function require(moduleId) {
  var cachedModule = cache[moduleId];
  if (cachedModule !== undefined) {
    return cachedModule.exports;
  }
  var module = cache[moduleId] = {
    exports: {}
  };
  modules[moduleId](module, module.exports, require);
  return module.exports;
}
var exports = {};
(() =&gt; {
  ${chunk.entryModule._source}
})();
</code></pre>
<p>})();
`;
}
module.exports = Compilation;</p>
<pre><code>```

```
</code></pre>
</li>
</ol>
<p>compiler Âíå compilation Ê¶ÇÂøµËæ®ÊûêÔºö</p>
<p><code>compiler</code>ÂÆû‰æãÂØπË±°‰∏äÊåÇËΩΩÁùÄ webpack ÁéØÂ¢ÉÊâÄÊúâÁöÑÈÖçÁΩÆ‰ø°ÊÅØÔºåÂåÖÊã¨ loaderÔºåpluginsÔºåentry Á≠âÁ≠âÔºå<code>compiler</code>ÂÆû‰æãÂØπË±°ÊòØÂú®ÂêØÂä® webpack ÁöÑÊó∂ÂÄôÂÆû‰æãÂåñÂ•ΩÁöÑÔºåÂÆÉÊòØÂÖ®Â±ÄÂîØ‰∏ÄÁöÑÔºåÂèØ‰ª•ÁêÜËß£‰∏∫ webpack ÂÆû‰æã</p>
<p><code>Compiler</code> Ê®°ÂùóÊòØ webpack ÁöÑ‰∏ªË¶ÅÂºïÊìéÔºåÂÆÉÈÄöËøá <a class="link" href="https://www.webpackjs.com/api/cli"  target="_blank" rel="noopener"
    >CLI</a> ÊàñËÄÖ <a class="link" href="https://www.webpackjs.com/api/node"  target="_blank" rel="noopener"
    >Node API</a> ‰º†ÈÄíÁöÑÊâÄÊúâÈÄâÈ°πÂàõÂª∫Âá∫‰∏Ä‰∏™ Compiler ÂÆû‰æã„ÄÇ ÂÆÉÊâ©Â±ïÔºàextendsÔºâËá™ <code>Tapable</code> Á±ªÔºå<strong>Áî®Êù•Ê≥®ÂÜåÂíåË∞ÉÁî®Êèí‰ª∂</strong>„ÄÇ Â§ßÂ§öÊï∞Èù¢ÂêëÁî®Êà∑ÁöÑÊèí‰ª∂‰ºöÈ¶ñÂÖàÂú® <code>Compiler</code> ‰∏äÊ≥®ÂÜå„ÄÇ</p>
<p>compilation ÂØπË±°‰ª£Ë°®‰∫Ü‰∏ÄÊ¨°ËµÑÊ∫êÁâàÊú¨ÁöÑÊûÑÂª∫„ÄÇÂÆÉÂåÖÂê´‰∫ÜÂΩìÂâçÁöÑÊ®°ÂùóËµÑÊ∫ê(modules)„ÄÅÁºñËØëÁîüÊàêËµÑÊ∫ê(asset)„ÄÅÂèòÂåñÁöÑÊñá‰ª∂(files)„ÄÅ‰ª•ÂèäË¢´Ë∑üË∏™‰æùËµñÁöÑÁä∂ÊÄÅ‰ø°ÊÅØ(fileDependencies)Á≠â„ÄÇÂΩì webpack ‰ª•ÂºÄÂèëÊ®°ÂºèËøêË°åÊó∂ÔºåÊØèÂΩìÊ£ÄÊµãÂà∞‰∏Ä‰∏™‰æùËµñÊñá‰ª∂ÂèëÁîüÂèòÂåñÂèòÂåñÔºå‰∏ÄÊ¨°Êñ∞ÁöÑ compilation Â∞ÜË¢´ÂàõÂª∫„ÄÇcompilation ÂØπË±°‰πüÊèê‰æõ‰∫ÜÂæàÂ§ö‰∫ã‰ª∂ÂõûË∞É‰æõÊèí‰ª∂ÂÅöÊâ©Â±ï„ÄÇÈÄöËøá compilation ‰πüÂèØ‰ª•ËØªÂèñÂà∞ compiler ÂØπË±°„ÄÇ</p>
<p><code>Compilation</code> Ê®°Âùó‰ºöË¢´ <code>Compiler</code> Áî®Êù•ÂàõÂª∫Êñ∞ÁöÑ compilation ÂØπË±°ÔºàÊàñÊñ∞ÁöÑ build ÂØπË±°Ôºâ„ÄÇ <code>compilation</code> ÂÆû‰æãËÉΩÂ§üËÆøÈóÆÊâÄÊúâÁöÑÊ®°ÂùóÂíåÂÆÉ‰ª¨ÁöÑ‰æùËµñÔºàÂ§ßÈÉ®ÂàÜÊòØÂæ™ÁéØ‰æùËµñÔºâ„ÄÇ ÂÆÉ‰ºöÂØπÂ∫îÁî®Á®ãÂ∫èÁöÑ‰æùËµñÂõæ‰∏≠ÊâÄÊúâÊ®°ÂùóÔºå ËøõË°åÂ≠óÈù¢‰∏äÁöÑÁºñËØë(literal compilation)„ÄÇ Âú®ÁºñËØëÈò∂ÊÆµÔºåÊ®°Âùó‰ºöË¢´Âä†ËΩΩ(load)„ÄÅÂ∞ÅÂ≠ò(seal)„ÄÅ‰ºòÂåñ(optimize)„ÄÅ ÂàÜÂùó(chunk)„ÄÅÂìàÂ∏å(hash)ÂíåÈáçÊñ∞ÂàõÂª∫(restore)„ÄÇ</p>
<p><code>Compilation</code> Á±ªÊâ©Â±ï(extend)Ëá™ <code>Tapable</code>ÔºåÂπ∂Êèê‰æõ‰∫Ü‰ª•‰∏ãÁîüÂëΩÂë®ÊúüÈí©Â≠ê„ÄÇ ÂèØ‰ª•ÊåâÁÖß compiler Èí©Â≠êÁöÑÁõ∏ÂêåÊñπÂºèÊù•Ë∞ÉÁî® tap„ÄÇ</p>
<p>Êâ©Â±ïÔºö</p>
<blockquote>
<p>tapable ÊòØ webpack ÁöÑ‰∏Ä‰∏™Ê†∏ÂøÉÂ∑•ÂÖ∑ÔºåÂÆÉÊö¥Èú≤‰∫Ü tap„ÄÅtapAsync„ÄÅtapPromise ÊñπÊ≥ïÔºåÂèØ‰ª•‰ΩøÁî®Ëøô‰∫õÊñπÊ≥ïÊù•Ëß¶Âèë compiler Èí©Â≠êÔºå‰ΩøÂæóÊèí‰ª∂ÂèØ‰ª•ÁõëÂê¨ webpack Âú®ËøêË°åËøáÁ®ã‰∏≠ÂπøÊí≠ÁöÑ‰∫ã‰ª∂ÔºåÁÑ∂ÂêéÈÄöËøá compiler ÂØπË±°ÂéªÊìç‰Ωú webpack„ÄÇ‰πüÂèØ‰ª•‰ΩøÁî®Ëøô‰∫õÊñπÊ≥ïÊ≥®ÂÖ•Ëá™ÂÆö‰πâÁöÑÊûÑÂª∫Ê≠•È™§ÔºåËøô‰∫õÊ≠•È™§Â∞ÜÂú®Êï¥‰∏™ÁºñËØëËøáÁ®ã‰∏≠ÁöÑ‰∏çÂêåÊó∂Êú∫Ëß¶Âèë„ÄÇ</p>
<p>deps ÁöÑÂèòÂåñ‰ºöÂØºËá¥Êï¥‰∏™‰æùËµñÈìæË∑Ø‰∏äÁöÑÂÜÖÂÆπÈÉΩÈáçÊñ∞ÁºñËØëËøòÊòØÂè™ÁºñËØëÂèòÂåñÈÉ®ÂàÜÔºü</p>
<p>Â¶ÇÊûúÊúâÊñá‰ª∂ÂèòÂåñÁöÑËØùÔºåÂú® webpack5 ‰ª•Ââç‰ºöÂÖ®ÈÉ®‰ºöÈáçÊñ∞ÁºñËØëÔºåÊØîËæÉÊÖ¢ÔºåÊâÄ‰ª•Âú® webpack5 ‰ª•ÂâçÂèØ‰ª•‰ΩøÁî®Ôºöcache hardsource dllplugin Á≠âÊñπÊ≥ïÊèêÂçáÊâìÂåÖÊûÑÂª∫ÈÄüÂ∫¶Ôºå‰ΩÜÊòØ webpack5 ‰ª•ÂêéÔºåÂÜÖÁΩÆËøô‰∫õÁºìÂ≠òÊú∫Âà∂„ÄÇ</p></blockquote>
<h2 id="loader-2">loader
</h2><ul>
<li>loader ÊòØ‰∏Ä‰∏™Ê®°ÂùóÊñá‰ª∂ÂØºÂá∫ÁöÑÂáΩÊï∞„ÄÇÂÆÉÊé•Êî∂‰∏ä‰∏Ä‰∏™ loader ‰∫ßÁîüÁöÑÁªìÊûúÊàñËÄÖËµÑÊ∫êÊñá‰ª∂(resource file)‰Ωú‰∏∫ÂÖ•ÂèÇ„ÄÇ‰πüÂèØ‰ª•Áî®Â§ö‰∏™ loader ÂáΩÊï∞ÁªÑÊàê loader chain</li>
<li>compiler ÈúÄË¶ÅÂæóÂà∞ÊúÄÂêé‰∏Ä‰∏™ loader ‰∫ßÁîüÁöÑÂ§ÑÁêÜÁªìÊûú„ÄÇËøô‰∏™Â§ÑÁêÜÁªìÊûúÂ∫îËØ•ÊòØ String ÊàñËÄÖ BufferÔºàË¢´ËΩ¨Êç¢‰∏∫‰∏Ä‰∏™ stringÔºâ</li>
</ul>
<h3 id="loader-ÊâßË°åÊó∂Êú∫">loader ÊâßË°åÊó∂Êú∫
</h3><p><img src="http://img.zhufengpeixun.cn/webpackflowloader.jpg"
	
	
	
	loading="lazy"
	
		alt="webpackflowloader"
	
	
></p>
<h3 id="loader-ÂàÜÁ±ª">loader ÂàÜÁ±ª
</h3><p>loader ÊúâÂõõÁßçÊâßË°åÊó∂Êú∫ÂàÜÁ±ªÔºåÂÆÉ‰ª¨ÁöÑÁªÑÂêàÊòØÊúâÈ°∫Â∫èÁöÑ„ÄÇ</p>
<ul>
<li>post(ÂêéÁΩÆ)</li>
<li>inline(ÂÜÖËÅî)ÔºåÂè™ÈíàÂØπÊåáÂÆöÁöÑËÆæÁΩÆ‰∫ÜÂÜÖËÅî loader ÁöÑÊ®°ÂùóÊñá‰ª∂Ëµ∑‰ΩúÁî®</li>
<li>normal(Ê≠£Â∏∏)</li>
<li>pre(ÂâçÁΩÆ)</li>
</ul>
<p>‰∏Ä‰∏™ loader Âú®Ë¢´ÂÖ∑‰ΩìÈÖçÁΩÆÂà∞ webpack ‰πãÂâçÔºåÊòØÊ≤°ÂäûÊ≥ïÂå∫ÂàÜÂÆÉÊòØÂú®ÂÖ∑‰ΩìÁöÑÂì™‰∏™Êó∂Êú∫Ë¢´Ë∞ÉÁî®ÁöÑ„ÄÇ</p>
<p>Âõ†‰∏∫ loader ÈÖçÁΩÆÂèØ‰ª•ÊòØÁî±Â§ö‰∏™ÈÖçÁΩÆÊñá‰ª∂ÂêàÂπ∂ËÄåÊù•Ôºå‰∏∫‰∫Ü‰øùËØÅÊâßË°åÁöÑÊó∂ÂÄôÊåâÊàë‰ª¨Â∏åÊúõÁöÑÈ°∫Â∫èÊâßË°åÔºåÊâÄ‰ª•ÂèØ‰ª•Áªô loader Âå∫ÂàÜË∞ÉÁî®Êó∂Êú∫„ÄÇ</p>
<p>Â¶Ç‰ΩïË°®Á§∫Êüê‰∏™ loader Ë¢´ÊîæÁΩÆÂú®ËøôÂõõÁßçÊâßË°åÊó∂Êú∫‰∏≠ÁöÑÂì™‰∏ÄÁßçÔºü</p>
<ol>
<li>ÈÄöËøáÊØè‰∏™ rule ËßÑÂàô‰∏≠ÔºåËÆæÁΩÆ enforce ÈÖçÁΩÆÈ°πÁöÑÂÄºÊù•Ëß£ÂÜ≥Ôºå<code>enforce:'pre'|'post'|'normal',</code>‰∏çÂÜôÈªòËÆ§ normal</li>
<li>ÊàñËÄÖÈÄöËøá loader ÁöÑÂÜÖËÅîÂÜôÊ≥ïÂÆûÁé∞Ôºå<code>inline-loader1!inline-loader2!${entryFile}</code></li>
</ol>
<h3 id="loader-ÁöÑÂ∑•‰Ωú">loader ÁöÑÂ∑•‰Ωú
</h3><img src="images\image-20230219130529675.png" alt="image-20230219130529675" style="zoom:200%;" />
<p>loader ÁöÑË∞ÉÁî®ÊòØ‰æùËµñ<strong>loader-runner</strong>Ëøô‰∏™Â∫ìËøõË°åÁöÑ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">runLoaders</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;loader-runner&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;fs&#34;</span><span class="p">);</span> <span class="c1">// webpack-dev-serverÂêØÂºÄÂèëÊúçÂä°Âô®ÁöÑÊó∂ÂÄô memory-fs
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">entryFile</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;src/index.js&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//Â¶Ç‰ΩïÈÖçÁΩÆË°åÂÜÖ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="sb">`inline-loader1!inline-loader2!</span><span class="si">${</span><span class="nx">entryFile</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">rules</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;normal-loader1&#34;</span><span class="p">,</span> <span class="s2">&#34;normal-loader2&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">enforce</span><span class="o">:</span> <span class="s2">&#34;post&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;post-loader1&#34;</span><span class="p">,</span> <span class="s2">&#34;post-loader2&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">enforce</span><span class="o">:</span> <span class="s2">&#34;pre&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;pre-loader1&#34;</span><span class="p">,</span> <span class="s2">&#34;pre-loader2&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">parts</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&#34;!&#34;</span><span class="p">);</span> <span class="c1">// [inline-loader1,inline-loader2, xxx/xxx/xx/src/index.js]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">resource</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span> <span class="c1">// ÂºπÂá∫ÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥† entryFile=src/index.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">inlineLoaders</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">;</span> <span class="c1">// [inline-loader1,inline-loader2]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">preLoaders</span> <span class="o">=</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">postLoaders</span> <span class="o">=</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">normalLoaders</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">rules</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">rule</span> <span class="o">=</span> <span class="nx">rules</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">rule</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">resource</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">rule</span><span class="p">.</span><span class="nx">enforce</span> <span class="o">===</span> <span class="s2">&#34;pre&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">preLoaders</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">rule</span><span class="p">.</span><span class="nx">use</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">rule</span><span class="p">.</span><span class="nx">enforce</span> <span class="o">===</span> <span class="s2">&#34;post&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">postLoaders</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">rule</span><span class="p">.</span><span class="nx">use</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">normalLoaders</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">rule</span><span class="p">.</span><span class="nx">use</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">loaders</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">...</span><span class="nx">postLoaders</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">...</span><span class="nx">inlineLoaders</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">...</span><span class="nx">normalLoaders</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">...</span><span class="nx">preLoaders</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">resolveLoader</span> <span class="o">=</span> <span class="p">(</span><span class="nx">loader</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;loaders-chain&#34;</span><span class="p">,</span> <span class="nx">loader</span><span class="p">);</span> <span class="c1">// loaders-chainÊòØËá™Â∑±ÂàõÂª∫ÁöÑÊñá‰ª∂Â§πÔºåÈáåÈù¢ÊòØËá™Â∑±ÂÜôÁöÑloader
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//ÊääloaderÊï∞ÁªÑ‰ªéÂêçÁß∞ÂèòÊàêÁªùÂØπË∑ØÂæÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">loaders</span> <span class="o">=</span> <span class="nx">loaders</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">resolveLoader</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">runLoaders</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">resource</span><span class="p">,</span> <span class="c1">//‰Ω†Ë¶ÅÂä†ËΩΩÁöÑËµÑÊ∫ê
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">loaders</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">context</span><span class="o">:</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;zhufeng&#34;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">100</span> <span class="p">},</span> <span class="c1">//‰øùÂ≠ò‰∏Ä‰∫õÁä∂ÊÄÅÂíåÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">readResource</span><span class="o">:</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="c1">//ËøêË°åÈîôËØØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span> <span class="c1">//ËøêË°åÁöÑÁªìÊûú
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="nx">result</span><span class="p">.</span><span class="nx">resourceBuffer</span> <span class="o">?</span> <span class="nx">result</span><span class="p">.</span><span class="nx">resourceBuffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="s2">&#34;utf8&#34;</span><span class="p">)</span> <span class="o">:</span> <span class="kc">null</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span> <span class="c1">//ËØªÂà∞ÁöÑÂéüÂßãÁöÑÊñá‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂÜÖËÅî-loader-ÁöÑÁâπÊÆäÈÖçÁΩÆ">ÂÜÖËÅî loader ÁöÑÁâπÊÆäÈÖçÁΩÆ
</h3><ul>
<li><a class="link" href="https://webpack.js.org/concepts/loaders/#configuration"  target="_blank" rel="noopener"
    >loaders/#configuration</a></li>
</ul>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">Á¨¶Âè∑</th>
          <th style="text-align: left">ÂèòÈáè</th>
          <th style="text-align: left">Âê´‰πâ</th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>-!</code></td>
          <td style="text-align: left">noPreAutoLoaders</td>
          <td style="text-align: left">‰∏çË¶ÅÂâçÁΩÆÂíåÊôÆÈÄö loader</td>
          <td>Prefixing with -! will disable all configured preLoaders and loaders but not postLoaders</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>!</code></td>
          <td style="text-align: left">noAutoLoaders</td>
          <td style="text-align: left">‰∏çË¶ÅÊôÆÈÄö loader</td>
          <td>Prefixing with ! will disable all configured normal loaders</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>!!</code></td>
          <td style="text-align: left">noPrePostAutoLoaders</td>
          <td style="text-align: left">‰∏çË¶ÅÂâçÂêéÁΩÆÂíåÊôÆÈÄö loader,Âè™Ë¶ÅÂÜÖËÅî loader</td>
          <td>Prefixing with !! will disable all configured loaders (preLoaders, loaders, postLoaders)</td>
      </tr>
  </tbody>
</table></div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// loaderÂàÜÁ±ªË∑üloaderËá™Â∑±Ê≤°ÊúâÂÖ≥Á≥ªÔºåË∑ü‰ΩøÁî®Êó∂ÂÄôÁöÑÈÖçÁΩÆÊúâÂÖ≥Á≥ª
</span></span></span><span class="line"><span class="cl"><span class="c1">// eslint-loader‰∏≠ÈÖçÁΩÆÁöÑpre  babel-loader=normal
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Auto=Normal
</span></span></span><span class="line"><span class="cl"><span class="cm"> * !  noAuto
</span></span></span><span class="line"><span class="cl"><span class="cm"> * -! noPreAuto
</span></span></span><span class="line"><span class="cl"><span class="cm"> * !! noPrePostAuto
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="sb">`!inline-loader1!inline-loader2!</span><span class="si">${</span><span class="nx">entryFile</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="sb">`-!inline-loader1!inline-loader2!</span><span class="si">${</span><span class="nx">entryFile</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="sb">`!!inline-loader1!inline-loader2!</span><span class="si">${</span><span class="nx">entryFile</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê∫êÁ†ÅÂÆûÁé∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">const { runLoaders } = require(&#34;./loader-runner&#34;);
</span></span><span class="line"><span class="cl">const path = require(&#34;path&#34;);
</span></span><span class="line"><span class="cl">const fs = require(&#34;fs&#34;);//webpack-dev-serverÂêØÂºÄÂèëÊúçÂä°Âô®ÁöÑÊó∂ÂÄô memory-fs
</span></span><span class="line"><span class="cl">const entryFile = path.resolve(__dirname, &#34;src/index.js&#34;);
</span></span><span class="line"><span class="cl">//Â¶Ç‰ΩïÈÖçÁΩÆË°åÂÜÖ
</span></span><span class="line"><span class="cl">let request = `inline-loader1!inline-loader2!${entryFile}`;
</span></span><span class="line"><span class="cl">let rules = [
</span></span><span class="line"><span class="cl">  {
</span></span><span class="line"><span class="cl">    test: /\.js$/,
</span></span><span class="line"><span class="cl">    use: [&#34;normal-loader1&#34;, &#34;normal-loader2&#34;],
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">  {
</span></span><span class="line"><span class="cl">    test: /\.js$/,
</span></span><span class="line"><span class="cl">    enforce: &#34;post&#34;,
</span></span><span class="line"><span class="cl">    use: [&#34;post-loader1&#34;, &#34;post-loader2&#34;],
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">  {
</span></span><span class="line"><span class="cl">    test: /\.js$/,
</span></span><span class="line"><span class="cl">    enforce: &#34;pre&#34;,
</span></span><span class="line"><span class="cl">    use: [&#34;pre-loader1&#34;, &#34;pre-loader2&#34;],
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">];
</span></span><span class="line"><span class="cl"><span class="gi">+ let parts = request.replace(/^-?!+/,&#39;&#39;).split(&#39;!&#39;);
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>let resource = parts.pop();//ÂºπÂá∫ÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥† entryFile=src/index.js
</span></span><span class="line"><span class="cl">let inlineLoaders = parts;//[inline-loader1,inline-loader2]
</span></span><span class="line"><span class="cl">let preLoaders = [],postLoaders=[],normalLoaders=[];
</span></span><span class="line"><span class="cl">for(let i=0;i&lt;rules.length;i++){
</span></span><span class="line"><span class="cl">    let rule = rules[i];
</span></span><span class="line"><span class="cl">    if(rule.test.test(resource)){
</span></span><span class="line"><span class="cl">        if(rule.enforce===&#39;pre&#39;){
</span></span><span class="line"><span class="cl">            preLoaders.push(...rule.use);
</span></span><span class="line"><span class="cl">        }else if(rule.enforce===&#39;post&#39;){
</span></span><span class="line"><span class="cl">            postLoaders.push(...rule.use);
</span></span><span class="line"><span class="cl">        }else{
</span></span><span class="line"><span class="cl">            normalLoaders.push(...rule.use);
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl"><span class="gi">+ let loaders = [];
</span></span></span><span class="line"><span class="cl"><span class="gi">+ if(request.startsWith(&#39;!!&#39;)){
</span></span></span><span class="line"><span class="cl"><span class="gi">+     loaders = [...inlineLoaders];
</span></span></span><span class="line"><span class="cl"><span class="gi">+     //noPreAutoLoaders
</span></span></span><span class="line"><span class="cl"><span class="gi">+ }else if(request.startsWith(&#39;-!&#39;)){
</span></span></span><span class="line"><span class="cl"><span class="gi">+     loaders = [...postLoaders,...inlineLoaders];
</span></span></span><span class="line"><span class="cl"><span class="gi">+ }else if(request.startsWith(&#39;!&#39;)){
</span></span></span><span class="line"><span class="cl"><span class="gi">+     //noAutoLoaders
</span></span></span><span class="line"><span class="cl"><span class="gi">+     loaders = [...postLoaders,...inlineLoaders,...preLoaders];
</span></span></span><span class="line"><span class="cl"><span class="gi">+ }else{
</span></span></span><span class="line"><span class="cl"><span class="gi">+     loaders = [...postLoaders,...inlineLoaders,...normalLoaders,...preLoaders];
</span></span></span><span class="line"><span class="cl"><span class="gi">+ }
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>
</span></span><span class="line"><span class="cl">let resolveLoader = loader=&gt;path.resolve(__dirname,&#39;loaders-chain&#39;,loader)
</span></span><span class="line"><span class="cl">//ÊääloaderÊï∞ÁªÑ‰ªéÂêçÁß∞ÂèòÊàêÁªùÂØπË∑ØÂæÑ
</span></span><span class="line"><span class="cl">loaders= loaders.map(resolveLoader);
</span></span><span class="line"><span class="cl">runLoaders({
</span></span><span class="line"><span class="cl">    resource,//‰Ω†Ë¶ÅÂä†ËΩΩÁöÑËµÑÊ∫ê
</span></span><span class="line"><span class="cl">    loaders,
</span></span><span class="line"><span class="cl">    context:{name:&#39;zhufeng&#39;,age:100},//‰øùÂ≠ò‰∏Ä‰∫õÁä∂ÊÄÅÂíåÂÄº
</span></span><span class="line"><span class="cl">    readResource:fs.readFile.bind(this)
</span></span><span class="line"><span class="cl">},(err,result)=&gt;{
</span></span><span class="line"><span class="cl">    console.log(err);//ËøêË°åÈîôËØØ
</span></span><span class="line"><span class="cl">    console.log(result);//ËøêË°åÁöÑÁªìÊûú
</span></span><span class="line"><span class="cl">    console.log(result.resourceBuffer?result.resourceBuffer.toString(&#39;utf8&#39;):null);//ËØªÂà∞ÁöÑÂéüÂßãÁöÑÊñá‰ª∂
</span></span><span class="line"><span class="cl">});
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="pitch">pitch
</h3><ul>
<li>
<p>ÊØîÂ¶Ç a!b!c!module, Ê≠£Â∏∏Ë∞ÉÁî®È°∫Â∫èÂ∫îËØ•ÊòØ c„ÄÅb„ÄÅaÔºå‰ΩÜÊòØÁúüÊ≠£Ë∞ÉÁî®È°∫Â∫èÊòØ a(pitch)„ÄÅb(pitch)„ÄÅc(pitch)„ÄÅc„ÄÅb„ÄÅaÔºåÂ¶ÇÊûúÂÖ∂‰∏≠‰ªª‰Ωï‰∏Ä‰∏™ pitching loader ËøîÂõû‰∫ÜÈùûÁ©∫ÂÄºÂ∞±Áõ∏ÂΩì‰∫éÂú®ÂÆÉ‰ª•ÂèäÂÆÉÂè≥ËæπÁöÑ loader Â∑≤ÁªèÊâßË°åÂÆåÊØï</p>
</li>
<li>
<p>ÊØîÂ¶ÇÔºåÂ¶ÇÊûú b ÁöÑ pitch ËøîÂõû‰∫ÜÂ≠óÁ¨¶‰∏≤&quot;result b&quot;, Êé•‰∏ãÊù•Âè™Êúâ a ‰ºöË¢´Á≥ªÁªüÊâßË°åÔºå‰∏î a ÁöÑ loader Êî∂Âà∞ÁöÑÂèÇÊï∞ÊòØ result bÔºåÂπ∂‰∏îÊ∫êÊñá‰ª∂‰πüÊ≤°ÊúâË¢´ËØªÂèñËøá</p>
</li>
<li>
<p>loader Ê†πÊçÆËøîÂõûÂÄºÂèØ‰ª•ÂàÜ‰∏∫‰∏§ÁßçÔºå‰∏ÄÁßçÊòØËøîÂõû js ‰ª£Á†ÅÔºà‰∏Ä‰∏™ module ÁöÑ‰ª£Á†ÅÔºåÂê´ÊúâÁ±ª‰ºº module.export ËØ≠Âè•ÔºâÁöÑ loaderÔºåËøòÊúâ‰∏çËÉΩ‰Ωú‰∏∫ÊúÄÂ∑¶Ëæπ loader ÁöÑÂÖ∂‰ªñ loader</p>
</li>
<li>
<p>ÊúâÊó∂ÂÄôÊÉ≥Êää‰∏§‰∏™Á¨¨‰∏ÄÁßçÔºàÈÉΩËøîÂõû‰∏Ä‰∏™Á¨¶Âêà commonjs ËßÑËåÉÁöÑ JS ‰ª£Á†ÅÁöÑ loaderÔºâ loader chain Ëµ∑Êù•ÔºåÊØîÂ¶Ç style-loader!css-loader! ÈóÆÈ¢òÊòØ css-loader ÁöÑËøîÂõûÂÄºÊòØ‰∏Ä‰∏≤ js ‰ª£Á†ÅÔºåÂ¶ÇÊûúÊåâÊ≠£Â∏∏ÊñπÂºèÂÜô style-loader ÁöÑÂèÇÊï∞Â∞±ÊòØ‰∏Ä‰∏≤‰ª£Á†Å‰∏≤Ôºå‰∏∫‰∫ÜËß£ÂÜ≥ËøôÁßçÈóÆÈ¢òÔºåÂ∞±ÈúÄË¶ÅÂú® style-loader ÈáåÊâßË°å require(css-loader!resources)</p>
</li>
</ul>
<p><strong>‰ΩøÁî® pitch ÁöÑÊÉÖÂÜµ</strong>Ôºö</p>
<p>ÂÆûÁé∞ loader ÁöÑ<code>pitch</code>ÊñπÊ≥ïÂèØ‰ª•Âú®ÁâπÂÆöÊÉÖÂÜµ‰∏ãÊèê‰æõÈ¢ùÂ§ñÁöÑÁÅµÊ¥ªÊÄßÂíåÊéßÂà∂ÔºåËøôÂØπ‰∫é‰ºòÂåñÊûÑÂª∫ËøáÁ®ã„ÄÅÊù°‰ª∂ÊÄßÂú∞Â§ÑÁêÜÊ®°Âùó„ÄÅÊàñÂú®ÁâπÂÆöÁöÑÈ¢ÑÂ§ÑÁêÜÊ≠•È™§‰∏≠ÈùûÂ∏∏ÊúâÁî®„ÄÇ‰ª•‰∏ãÊòØ‰∏Ä‰∫õÈúÄË¶ÅÂÆûÁé∞<code>pitch</code>ÊñπÊ≥ïÁöÑÂú∫ÊôØÔºö</p>
<ol>
<li><strong>Êù°‰ª∂ÊÄßË∑≥ËøáÂêéÁª≠ÁöÑ loader</strong>ÔºöÂ¶ÇÊûú‰Ω†ÁöÑ loader ÂèØ‰ª•Ê†πÊçÆÊüê‰∫õÊù°‰ª∂Ôºà‰æãÂ¶ÇÔºåËµÑÊ∫êÁöÑË∑ØÂæÑ„ÄÅÊü•ËØ¢ÂèÇÊï∞„ÄÅÊàñËÄÖÈ°πÁõÆÁöÑÈÖçÁΩÆÔºâÂÜ≥ÂÆö‰∏çÈúÄË¶ÅÊâßË°åÂêéÁª≠ÁöÑ loaderÔºå‰Ω†ÂèØ‰ª•Âú®<code>pitch</code>ÊñπÊ≥ï‰∏≠Ê†πÊçÆËøô‰∫õÊù°‰ª∂ËøîÂõû‰∏Ä‰∏™ÁªìÊûúÔºå‰ªéËÄåË∑≥ËøáÂêéÁª≠ÁöÑ loader Â§ÑÁêÜ„ÄÇ</li>
<li><strong>ÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑÂ§ÑÁêÜ</strong>ÔºöÂΩìÁ°ÆÂÆöÊüê‰∫õËµÑÊ∫ê‰∏çÈúÄË¶ÅÁªèËøáÂ§çÊùÇÁöÑËΩ¨Êç¢ÊàñÂ§ÑÁêÜÊó∂ÔºåÈÄöËøá<code>pitch</code>ÊñπÊ≥ïÁõ¥Êé•ËøîÂõûÁªìÊûúÂèØ‰ª•ÂáèÂ∞ë‰∏çÂøÖË¶ÅÁöÑËÆ°ÁÆóÂíåÂ§ÑÁêÜÊó∂Èó¥Ôºå‰ºòÂåñÊûÑÂª∫ÊÄßËÉΩ„ÄÇ</li>
<li><strong>ËµÑÊ∫êÊõøÊç¢Êàñ‰ª£ÁêÜ</strong>ÔºöÂú®Êüê‰∫õÂú∫ÊôØ‰∏ãÔºåÂèØËÉΩÈúÄË¶ÅÂü∫‰∫éÂºÄÂèëÁéØÂ¢ÉÂíåÁîü‰∫ßÁéØÂ¢ÉÊù•ÊõøÊç¢ËµÑÊ∫êÊàñËÄÖÊèê‰æõËµÑÊ∫êÁöÑ‰ª£ÁêÜÁâàÊú¨„ÄÇÈÄöËøá<code>pitch</code>ÊñπÊ≥ïÔºåÂèØ‰ª•Ê†πÊçÆÁéØÂ¢ÉÊàñÈÖçÁΩÆÊù°‰ª∂Âä®ÊÄÅÂÜ≥ÂÆö‰ΩøÁî®Âì™‰∏™ÁâàÊú¨ÁöÑËµÑÊ∫ê„ÄÇ</li>
<li><strong>ÊèêÂâçÂ§ÑÁêÜÂÖ±‰∫´Êï∞ÊçÆ</strong>ÔºöÂ¶ÇÊûú‰Ω†ÁöÑ loader ÈúÄË¶ÅÂú®ÂÆûÈôÖÂ§ÑÁêÜËµÑÊ∫ê‰πãÂâçÈ¢ÑÂ§ÑÁêÜ‰∏Ä‰∫õÊï∞ÊçÆÔºåÊàñËÄÖÈúÄË¶ÅÂú® loader Èìæ‰∏≠ÁöÑ‰∏çÂêå loader ‰πãÈó¥ÂÖ±‰∫´Êï∞ÊçÆÔºåÂèØ‰ª•‰ΩøÁî®<code>pitch</code>ÊñπÊ≥ïÁöÑ<code>data</code>ÂèÇÊï∞Êù•ÂÆûÁé∞„ÄÇËøôÊ†∑Ôºå‰Ω†ÂèØ‰ª•Âú®<code>pitch</code>Èò∂ÊÆµËÆ°ÁÆóÊàñÂáÜÂ§áÊï∞ÊçÆÔºåÂπ∂Âú®ÂÆûÈôÖÁöÑ loader Â§ÑÁêÜÂáΩÊï∞‰∏≠‰ΩøÁî®Ëøô‰∫õÊï∞ÊçÆ„ÄÇ</li>
<li><strong>ÊèíÂÖ•È¢ùÂ§ñÁöÑËµÑÊ∫êÊàñ‰ª£Á†ÅÁâáÊÆµ</strong>ÔºöÂú®Â§ÑÁêÜÊüê‰∏™ËµÑÊ∫ê‰πãÂâçÔºåÂ¶ÇÊûúÈúÄË¶ÅÂêëÊ®°ÂùóÊ≥®ÂÖ•È¢ùÂ§ñÁöÑ‰ª£Á†ÅÁâáÊÆµÊàñ‰æùËµñÔºå<code>pitch</code>ÊñπÊ≥ïÊèê‰æõ‰∫Ü‰∏Ä‰∏™Êú∫‰ºöÊù•ÂÆûÁé∞Ëøô‰∏ÄÁÇπ„ÄÇÈÄöËøáÂú®<code>pitch</code>Èò∂ÊÆµÂä®ÊÄÅ‰øÆÊîπËØ∑Ê±ÇÊàñÊ∑ªÂä†È¢ùÂ§ñÁöÑËµÑÊ∫êÔºåÂèØ‰ª•ÁÅµÊ¥ªÂú∞ÊéßÂà∂ËµÑÊ∫êÁöÑÂ§ÑÁêÜËøáÁ®ã„ÄÇ</li>
<li><strong>ÊÄßËÉΩ‰ºòÂåñ</strong>ÔºöÂØπ‰∫é‰∏Ä‰∫õÈáçÁöÑÂ§ÑÁêÜËøáÁ®ãÔºåÂ¶ÇÊûúÂèØ‰ª•ÈÄöËøáÁÆÄÂçïÁöÑÊ£ÄÊü•Êù•È¢ÑÂÖàÂà§Êñ≠ÁªìÊûúÔºåÈÇ£‰πàÂú®<code>pitch</code>ÊñπÊ≥ï‰∏≠ÊèêÂâçËøîÂõûËøô‰∏™ÁªìÊûúÂèØ‰ª•ÈÅøÂÖçÂêéÁª≠‰∏çÂøÖË¶ÅÁöÑÂ§ÑÁêÜÔºå‰ªéËÄåËææÂà∞ÊÄßËÉΩ‰ºòÂåñÁöÑÁõÆÁöÑ„ÄÇ</li>
</ol>
<p>ÂÆûÁé∞<code>pitch</code>ÊñπÊ≥ï‰∏çÊÄªÊòØÂøÖË¶ÅÁöÑÔºåÂè™ÊúâÂΩì‰Ω†ÈúÄË¶Å‰∏äËø∞ÊèêÂà∞ÁöÑÈ¢ùÂ§ñÊéßÂà∂Êàñ‰ºòÂåñÊó∂ÔºåÊâçËÄÉËôëÊ∑ªÂä†„ÄÇÊ≠£Á°Æ‰ΩøÁî®<code>pitch</code>ÊñπÊ≥ïÂèØ‰ª•ËÆ©‰Ω†ÁöÑ loader Êõ¥Âä†ÁÅµÊ¥ªÂíåÈ´òÊïàÔºå‰ΩÜ‰πüÈúÄË¶ÅË∞®ÊÖéÂ§ÑÁêÜÔºå‰ª•ÈÅøÂÖçÂºïÂÖ•‰∏çÂøÖË¶ÅÁöÑÂ§çÊùÇÊÄßÊàñÊΩúÂú®ÁöÑÈóÆÈ¢ò„ÄÇ</p>
<p>pitch ‰∏é loader Êú¨Ë∫´ÊñπÊ≥ïÁöÑÊâßË°åÈ°∫Â∫èÂõæ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="o">|-</span><span class="w"> </span><span class="n">a</span><span class="o">-</span><span class="n">loader</span><span class="w"> </span><span class="o">`</span><span class="n">pitch</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">|-</span><span class="w"> </span><span class="n">b</span><span class="o">-</span><span class="n">loader</span><span class="w"> </span><span class="o">`</span><span class="n">pitch</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">|-</span><span class="w"> </span><span class="n">c</span><span class="o">-</span><span class="n">loader</span><span class="w"> </span><span class="o">`</span><span class="n">pitch</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="o">|-</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">picked</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">dependency</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">|-</span><span class="w"> </span><span class="n">c</span><span class="o">-</span><span class="n">loader</span><span class="w"> </span><span class="n">normal</span><span class="w"> </span><span class="n">execution</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">|-</span><span class="w"> </span><span class="n">b</span><span class="o">-</span><span class="n">loader</span><span class="w"> </span><span class="n">normal</span><span class="w"> </span><span class="n">execution</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|-</span><span class="w"> </span><span class="n">a</span><span class="o">-</span><span class="n">loader</span><span class="w"> </span><span class="n">normal</span><span class="w"> </span><span class="n">execution</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/blogs/post/webpack/images/image-20230219154119989.png"
	width="1836"
	height="600"
	srcset="/blogs/post/webpack/images/image-20230219154119989_hu_d2d1350c492d1d64.png 480w, /blogs/post/webpack/images/image-20230219154119989_hu_cad94fde51afe80b.png 1024w"
	loading="lazy"
	
		alt="image-20230219154119989"
	
	
		class="gallery-image" 
		data-flex-grow="306"
		data-flex-basis="734px"
	
></p>
<p><img src="/blogs/post/webpack/images/image-20230219154632771.png"
	width="1822"
	height="826"
	srcset="/blogs/post/webpack/images/image-20230219154632771_hu_1e70539b94a30f35.png 480w, /blogs/post/webpack/images/image-20230219154632771_hu_43eb659a40298886.png 1024w"
	loading="lazy"
	
		alt="image-20230219154632771"
	
	
		class="gallery-image" 
		data-flex-grow="220"
		data-flex-basis="529px"
	
></p>
<p>‰∏ÄÊó¶ÊúâÊüê‰∏™ loader Êúâ pitchÔºåÂπ∂‰∏îË¢´ÊâßË°åÂêéËøîÂõû‰∏ç‰∏∫ÂÅáÂÄºÔºåÂàôÂπ∂‰∏ç‰ºöËøõË°åÊ∫êÊñá‰ª∂ÁöÑËØªÂèñÊìç‰Ωú„ÄÇ</p>
<blockquote>
<p>Âú® Webpack ‰∏≠ÔºåLoader ÁöÑ<code>pitch</code>ÂáΩÊï∞Êé•Êî∂Âõõ‰∏™ÂèÇÊï∞„ÄÇËøô‰∫õÂèÇÊï∞ÂàÜÂà´ÊòØÔºö</p>
<ol>
<li><code>remainingRequest</code>ÔºöË°®Á§∫ÂΩìÂâçÊ®°ÂùóÁöÑÂâ©‰ΩôËØ∑Ê±ÇË∑ØÂæÑ„ÄÇÂÆÉÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåÂåÖÂê´‰∫ÜÂΩìÂâçÊ®°ÂùóÁöÑÁõ∏ÂØπË∑ØÂæÑÔºå‰ª•ÂèäÂú®Â§ÑÁêÜÂΩìÂâçÊ®°Âùó‰πãÂâçËøòÈúÄË¶ÅÂä†ËΩΩÁöÑÂÖ∂‰ªñÊ®°ÂùóÁöÑËØ∑Ê±ÇË∑ØÂæÑ„ÄÇ</li>
<li><code>previousRequest</code>ÔºöË°®Á§∫ÂΩìÂâçÊ®°ÂùóÁöÑÂâç‰∏Ä‰∏™ËØ∑Ê±ÇË∑ØÂæÑ„ÄÇÂÆÉÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåÂåÖÂê´‰∫ÜÂâç‰∏Ä‰∏™Â§ÑÁêÜËØ•Ê®°ÂùóÁöÑ Loader ÁöÑËØ∑Ê±ÇË∑ØÂæÑ„ÄÇ</li>
<li><code>data</code>Ôºö‰∏Ä‰∏™ÂèØÈÄâÁöÑÂèÇÊï∞ÔºåÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåÂèØ‰ª•Áî®‰∫éÂú® Loader ‰πãÈó¥ÂÖ±‰∫´Êï∞ÊçÆ„ÄÇ</li>
<li><code>context</code>ÔºöË°®Á§∫ Loader ÁöÑ‰∏ä‰∏ãÊñáÂØπË±°„ÄÇÂÆÉÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåÂåÖÂê´‰∫Ü‰∏éÂΩìÂâçÊ®°ÂùóÁõ∏ÂÖ≥ÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØÔºåÂ¶ÇÂΩìÂâçÊ®°ÂùóÁöÑÁªùÂØπË∑ØÂæÑ„ÄÅËØ∑Ê±ÇË∑ØÂæÑÁ≠â„ÄÇ</li>
</ol>
<p>Ëøô‰∫õÂèÇÊï∞ÂèØ‰ª•Â∏ÆÂä© Loader Âú®Â§ÑÁêÜÊ®°ÂùóÊó∂ËøõË°åÊõ¥Á≤æÁªÜÁöÑÊéßÂà∂ÂíåÂÜ≥Á≠ñ„ÄÇÈÄöËøáÂàÜÊûêÂíåÊìç‰ΩúËøô‰∫õÂèÇÊï∞ÔºåLoader ÂèØ‰ª•Ê†πÊçÆÈúÄË¶Å‰øÆÊîπÊ®°ÂùóËØ∑Ê±ÇÁöÑÈ°∫Â∫è„ÄÅË∑ØÂæÑÁ≠âÔºå‰ª•Êª°Ë∂≥ÁâπÂÆöÁöÑÈúÄÊ±Ç„ÄÇ</p></blockquote>
<p>ÊØè‰∏™ loader ÂáΩÊï∞Âú® webpack ÂÜÖÈÉ®Ë¢´Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÔºåÈÉΩ‰ºö‰∏∫ËØ• loader ÂáΩÊï∞ÁªëÂÆö‰∏Ä‰∏™ thisÔºåÂèàË¢´Áß∞‰∏∫ loader ‰∏ä‰∏ãÊñáÔºöhttps://www.webpackjs.com/api/loaders/#the-loader-context</p>
<p><strong>Êâ©Â±ïÁü•ËØÜ</strong></p>
<p>runSyncOrAsync Êó¢ÂèØ‰ª•ÊòØÂêåÊ≠•‰πüÂèØ‰ª•ÊòØÂºÇÊ≠•„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">runSyncOrAsync</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">sync</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">global</span><span class="p">.</span><span class="kr">async</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sync</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">callback</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="nx">fn</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">sync</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">callback</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Ëøô‰∏™ÊñπÊ≥ïÊòØÂêåÊ≠•ËøòÊòØÂºÇÊ≠•ÔºåÂèñÂÜ≥‰∫éfn‰∏≠ÁöÑ‰ª£Á†ÅÈÄªËæë
</span></span></span><span class="line"><span class="cl"><span class="c1">// ÂêåÊ≠•ÁöÑ‰ΩøÁî®ÊñπÂºèÔºö
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">function</span> <span class="nx">normal</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ÂáΩÊï∞‰Ωì‰∏≠‰∏çËÉΩÊúâË∞ÉÁî®global.asyncÁöÑËØ≠Âè•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//const callback= global.async();
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;normal&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//setTimeout(callback,3000);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÂºÇÊ≠•ÁöÑ‰ΩøÁî®ÊñπÂºèÔºö
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">function</span> <span class="nx">normal</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">callback</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="kr">async</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;normal&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="mi">3000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">callback</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;callback&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">runSyncOrAsync</span><span class="p">(</span><span class="nx">normal</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="babel-loader">babel-loader
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install @babel/core @babel/preset-env -D
</span></span></code></pre></td></tr></table>
</div>
</div><p>webpack.config.js:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="err">test:/\.js$/,</span>
</span></span><span class="line"><span class="cl">  <span class="err">exclude:/node_modules/,</span>
</span></span><span class="line"><span class="cl">  <span class="err">resolveLoader:{</span>
</span></span><span class="line"><span class="cl">    <span class="err">alias:{</span>
</span></span><span class="line"><span class="cl">      <span class="err">&#39;bable-loader&#39;:path.resolve(__dirname,&#39;/loaders/babel-loader.js&#39;)</span>  <span class="c1">// ÊñπÂºè‰∫åÔºåËµ∑Âà´ÂêçÁöÑÊñπÂºè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="err">modules:</span><span class="p">[</span><span class="err">path.resolve(__dirname</span><span class="p">,</span><span class="err">&#39;loaders&#39;)</span><span class="p">,</span><span class="err">&#39;node_modules&#39;</span><span class="p">]</span>  <span class="c1">// ÊñπÂºè‰∏â
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="err">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="err">use:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">loader:path.resolve(__dirname,&#39;/loaders/babel-loader.js&#39;),</span>  <span class="c1">// ÊñπÂºè‰∏Ä
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="err">loader:&#39;babel-loader&#39;,</span>  <span class="c1">// ÊñπÂºè‰∫åÂíåÊñπÂºè‰∏âÂÖ¨Áî®ÔºåËµ∑Âà´ÂêçÁöÑÊñπÂºè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="err">options:{</span>
</span></span><span class="line"><span class="cl">      <span class="err">presets:[&#39;@babel/preset-env&#39;]</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="err">}</span>
</span></span><span class="line"><span class="cl"><span class="err">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="babel-loaderjs">babel-loader.js
</h3><ul>
<li><a class="link" href="https://github.com/babel/babel-loader/blob/master/src/index.js"  target="_blank" rel="noopener"
    >babel-loader</a></li>
<li><a class="link" href="https://babeljs.io/docs/en/next/babel-core.html"  target="_blank" rel="noopener"
    >@babel/core</a></li>
<li><a class="link" href="https://babeljs.io/docs/en/babel-plugin-transform-react-jsx/"  target="_blank" rel="noopener"
    >babel-plugin-transform-react-jsx</a></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">babel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/core&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">loader</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="nx">inputAst</span><span class="p">,</span> <span class="nx">inputSourceMap</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Âú®loaderÈáåÔºåthisÊòØ‰∏Ä‰∏™Áß∞‰∏∫loaderContextÁöÑÂØπË±°Ôºå‰∏äÈù¢ÊúâÂæàÂ§öÊñπÊ≥ïÂèØ‰ª•‰ΩøÁî®,ÂÖ∂‰∏≠Â∞±ÂåÖÊã¨getOptions
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// ÈúÄË¶ÅÊääloaderÁöÑÊâßË°å‰ªéÂêåÊ≠•ÂèòÊàêÂºÇÊ≠•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">callback</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="kr">async</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getOptions</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Ê£ÄÊü•ÊòØÂê¶Â≠òÂú®ASTÔºåÂ¶ÇÊûúÂ≠òÂú®ÔºåÂàôÁõ¥Êé•‰ΩøÁî®ÔºåÂê¶ÂàôÂ∞Üsource‰Ωú‰∏∫ËΩ¨ËØëËæìÂÖ•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">inputAst</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Ê≤°ÊúâÊèê‰æõASTÔºåÂõûÈÄÄÂà∞‰ΩøÁî®source‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">let</span> <span class="nx">babelOptions</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="p">...</span><span class="nx">options</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">ast</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">sourceMaps</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">inputSourceMap</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">babel</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">transformAsync</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="nx">babelOptions</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">then</span><span class="p">(({</span> <span class="nx">code</span><span class="p">,</span> <span class="nx">map</span><span class="p">,</span> <span class="nx">ast</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Âú®loaderÊâßË°åÂÆåÊàêÂêéÊâçËÆ©Ë∞ÉÁî®callbackË°®Á§∫Êú¨loaderÂ∑≤ÁªèÂÆåÊàê‰∫Ü
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">code</span><span class="p">,</span> <span class="nx">map</span><span class="p">,</span> <span class="nx">ast</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Áõ¥Êé•‰ΩøÁî®Êèê‰æõÁöÑASTËøõË°åËΩ¨ËØë
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">let</span> <span class="nx">babelOptions</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="p">...</span><span class="nx">options</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">ast</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">sourceMaps</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">inputSourceMap</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ‰ΩøÁî®transformFromAstAsyncÁõ¥Êé•ËΩ¨Êç¢AST
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">babel</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">transformFromAstAsync</span><span class="p">(</span><span class="nx">inputAst</span><span class="p">,</span> <span class="nx">source</span><span class="p">,</span> <span class="nx">babelOptions</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">then</span><span class="p">(({</span> <span class="nx">code</span><span class="p">,</span> <span class="nx">map</span><span class="p">,</span> <span class="nx">ast</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Âú®loaderÊâßË°åÂÆåÊàêÂêéÊâçËÆ©Ë∞ÉÁî®callbackË°®Á§∫Êú¨loaderÂ∑≤ÁªèÂÆåÊàê‰∫Ü
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">code</span><span class="p">,</span> <span class="nx">map</span><span class="p">,</span> <span class="nx">ast</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">loader</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">ÂêåÊ≠•ËΩ¨Êç¢
</span></span></span><span class="line"><span class="cl"><span class="cm">function loader(source) {
</span></span></span><span class="line"><span class="cl"><span class="cm">  //Âú®loaderÈáåthisÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™Áß∞‰∏∫loaderContextÁöÑÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="cm">  let options = this.getOptions();
</span></span></span><span class="line"><span class="cl"><span class="cm">  const { code} = babel.transformSync(source,options);  // transformSyncÂêåÊ≠•ÁºñËØë
</span></span></span><span class="line"><span class="cl"><span class="cm">  return code;
</span></span></span><span class="line"><span class="cl"><span class="cm">} */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * babel-loaderÂè™ÊòØÊèê‰æõ‰∏Ä‰∏™ËΩ¨Êç¢ÂáΩÊï∞Ôºå‰ΩÜÊòØÂÆÉÂπ∂‰∏çÁü•ÈÅìË¶ÅÂπ≤Âï•Ë¶ÅËΩ¨Âï•
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @babel/core Ë¥üË¥£ÊääÊ∫ê‰ª£Á†ÅËΩ¨ÊàêASTÔºåÁÑ∂ÂêéÈÅçÂéÜASTÔºåÁÑ∂ÂêéÈáçÊñ∞ÁîüÊàêÊñ∞ÁöÑ‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ‰ΩÜÊòØÂÆÉÂπ∂‰∏çÁü•ÈÅìÂ¶Ç‰ΩïËΩ¨Êç¢ËØ≠Êç¢Ê≥ïÔºåÂÆÉÂπ∂‰∏çËÆ§ËØÜÁÆ≠Â§¥ÂáΩÊï∞Ôºå‰πü‰∏çÁü•ÈÅìÂ¶Ç‰ΩïËΩ¨Êç¢
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @babel/transform-arrow-functions Êèí‰ª∂ÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™ËÆøÈóÆÂô®ÔºåÂÆÉÁü•ÈÅìÂ¶Ç‰ΩïËΩ¨Êç¢ASTËØ≠Ê≥ïÊ†ë
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Âõ†‰∏∫Ë¶ÅËΩ¨Êç¢ÁöÑËØ≠Ê≥ïÂ§™Â§öÔºåÊèí‰ª∂‰πüÂ§™Â§ö„ÄÇÊâÄ‰ª•ÂèØ‰∏ÄÂ†ÜÊèí‰ª∂ÊâìÂåÖÂ§ß‰∏ÄËµ∑ÔºåÊàê‰∏∫È¢ÑËÆæpreset-env
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûúÂú®Â§ö‰∏™ loader ‰∏≠ÈÉΩ‰ΩøÁî®‰∫Ü@babel/core Êù•Ëß£ÊûêÊ∫ê‰ª£Á†ÅÔºå‰∏∫‰∫ÜÊÄßËÉΩËÄÉËôëÂèØ‰ª•Âú®Â§ö‰∏™ loader ‰πãÈó¥‰º†ÈÄíÁ¨¨‰∏Ä‰∏™ babel/core Ëß£ÊûêÊ∫êÁ†ÅÂêéÂæóÂà∞ ast ÂØπË±°ÔºåËÄå‰∏çÂøÖÂú®ÊØè‰∏™ loader ‰∏≠ÈÉΩË∞ÉÁî® babel/core ËΩ¨Êç¢‰∏ÄÈÅçÊ∫ê‰ª£Á†Å„ÄÇ</p>
<p>loader ÂáΩÊï∞Êé•Êî∂‰∏â‰∏™ÂèÇÊï∞Ôºö<code>source</code>ÔºàÊ∫ê‰ª£Á†ÅÊñáÊú¨ÔºâÔºå<code>inputAst</code>ÔºàÂâç‰∏Ä‰∏™ loader ÂèØËÉΩÊèê‰æõÁöÑ ASTÔºâÔºåÂíå<code>inputSourceMap</code>Ôºà‰∏ä‰∏Ä‰∏™ loader Êèê‰æõÁöÑ source mapÔºâ„ÄÇ</p>
<p>‰ªé webpack 5 ÂºÄÂßãÔºå<code>this.getOptions</code> ÂèØ‰ª•Ëé∑ÂèñÂà∞ loader ‰∏ä‰∏ãÊñáÂØπË±°„ÄÇÂÆÉÁî®Êù•Êõø‰ª£Êù•Ëá™ <a class="link" href="https://github.com/webpack/loader-utils#getoptions"  target="_blank" rel="noopener"
    >loader-utils</a> ‰∏≠ÁöÑ <code>getOptions</code> ÊñπÊ≥ï„ÄÇ</p>
<p>Êâ©Â±ïÔºö</p>
<p>Âú® Webpack ÁöÑ loader Èìæ‰∏≠ÔºåÂ¶ÇÊûúÂ§ö‰∏™ loader ÈÉΩ‰ΩøÁî®‰∫Ü Babel ËøõË°å‰ª£Á†ÅËΩ¨Êç¢ÔºåÁêÜËÆ∫‰∏äÂèØ‰ª•ÈÄöËøáÂÖ±‰∫´ Babel ÁîüÊàêÁöÑ ASTÔºàÊäΩË±°ËØ≠Ê≥ïÊ†ëÔºâÊù•ÊèêÈ´òÊÄßËÉΩÔºåÈÅøÂÖçÈáçÂ§çÁöÑËß£ÊûêÊ≠•È™§„ÄÇ<strong>Babel Êú¨Ë∫´ÊòØÊîØÊåÅ AST ÁöÑËæìÂÖ•ÂíåËæìÂá∫ÁöÑ</strong>ÔºåËøôÊÑèÂë≥ÁùÄÂâç‰∏Ä‰∏™ loader ÂèØ‰ª•ÁîüÊàê ASTÔºåËÄåÂêé‰∏Ä‰∏™ loader ÂèØ‰ª•Áõ¥Êé•Â§çÁî®Ëøô‰∏™ ASTÔºåËÄå‰∏çÂøÖÈáçÊñ∞Ëß£Êûê‰ª£Á†Å„ÄÇ</p>
<p>‰∏çËøáÔºåWebpack Êú¨Ë∫´Âπ∂‰∏çËá™Âä®Â§ÑÁêÜ AST ÁöÑ‰º†ÈÄíÔºå<strong>‰Ω†ÈúÄË¶ÅÊâãÂä®ÂÆûÁé∞ AST Âú® loader ‰πãÈó¥ÁöÑÂÖ±‰∫´</strong>„ÄÇÈúÄË¶ÅÂú®ÊØè‰∏™ loader ‰∏≠ÊòæÂºèÂú∞Â§ÑÁêÜ AST ÁöÑËæìÂÖ•ÂíåËæìÂá∫„ÄÇ</p>
<p><strong>Â¶Ç‰ΩïÂÖ±‰∫´ Babel ÁöÑ ASTÔºü</strong></p>
<ol>
<li>
<p><strong>Ââç‰∏Ä‰∏™ loader ËæìÂá∫ AST</strong>Ôºö ‰ΩøÁî® Babel Â§ÑÁêÜÊó∂ÔºåÂèØ‰ª•ËÆ©Á¨¨‰∏Ä‰∏™ loader ËæìÂá∫ ASTÔºåËÄå‰∏çÊòØÊúÄÁªàÁöÑ‰ª£Á†Å„ÄÇ</p>
</li>
<li>
<p><strong>Âêé‰∏Ä‰∏™ loader Â§çÁî® AST</strong>Ôºö ÂêéÁª≠ÁöÑ loader ÂèØ‰ª•Áõ¥Êé•Êé•Âèó AST ‰Ωú‰∏∫ËæìÂÖ•ÔºåËÄå‰∏çÈúÄË¶ÅÂÜçÊ¨°Ëß£ÊûêÊ∫êÁ†Å„ÄÇ</p>
</li>
</ol>
<p><strong>ÂÆûÁé∞Ê≠•È™§</strong></p>
<p>ÂÅáËÆæÊúâ‰∏§‰∏™‰ΩøÁî® Babel ÁöÑ loaderÔºåÂπ∂Â∏åÊúõÂÆÉ‰ª¨ÂÖ±‰∫´ AST„ÄÇÂèØ‰ª•ÈÄöËøáÂú® Webpack ÁöÑ loader ‰∏≠‰º†ÈÄí AST Êù•ÂÆûÁé∞„ÄÇ</p>
<ol>
<li>
<p>Ëá™ÂÆö‰πâ <code>babel-loader</code> Êù•ËæìÂá∫ AST</p>
<p>È¶ñÂÖàÔºå‰øÆÊîπ‰∏Ä‰∏™Ëá™ÂÆö‰πâÁöÑ Babel loaderÔºå‰ΩøÂÖ∂ËæìÂá∫ ASTÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// first-babel-loader.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">babel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/core&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getOptions</span><span class="p">()</span> <span class="o">||</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ËΩ¨Êç¢‰ª£Á†ÅÔºåÂπ∂ËæìÂá∫ AST
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">babel</span><span class="p">.</span><span class="nx">transformSync</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nx">options</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ast</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// ÁîüÊàê AST
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">code</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// ‰∏çÁîüÊàê‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ÈÄöËøá this.callback ‰º†ÈÄí AST
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">this</span><span class="p">.</span><span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">result</span><span class="p">.</span><span class="nx">ast</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>ÂêéÁª≠ loader Êé•Êî∂ AST ‰Ωú‰∏∫ËæìÂÖ•</strong></p>
<p>ÁÑ∂ÂêéÔºåÂÆûÁé∞Á¨¨‰∫å‰∏™ loaderÔºåÂÆÉÊé•Êî∂Âπ∂Â§ÑÁêÜ ASTÔºåËÄå‰∏çÊòØÊ∫êÁ†Å„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// second-babel-loader.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">babel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/core&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁªèÊúâ ASTÔºåÂ¶ÇÊûúÊúâÔºåÁõ¥Êé•‰ΩøÁî® AST
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getOptions</span><span class="p">()</span> <span class="o">||</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">ast</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">source</span> <span class="o">===</span> <span class="s2">&#34;string&#34;</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">source</span><span class="p">;</span> <span class="c1">// Âà§Êñ≠‰º†ÂÖ•ÁöÑÊòØÂê¶ÊòØ AST
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">ast</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Â¶ÇÊûúÊ≤°Êúâ ASTÔºåËß£ÊûêÊ∫êÁ†ÅÔºàËøôÂ∫îËØ•‰∏ç‰ºöÂèëÁîüÔºåÂõ†‰∏∫Á¨¨‰∏Ä‰∏™ loader ‰ºö‰º† ASTÔºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">babel</span><span class="p">.</span><span class="nx">transformSync</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="p">{</span> <span class="p">...</span><span class="nx">options</span><span class="p">,</span> <span class="nx">ast</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ast</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">ast</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Âú®Ê≠§Âü∫Á°Ä‰∏äÂØπ AST ËøõË°å‰∫åÊ¨°Â§ÑÁêÜÔºåÁîüÊàêÊúÄÁªà‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">babel</span><span class="p">.</span><span class="nx">transformFromAstSync</span><span class="p">(</span><span class="nx">ast</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nx">options</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">code</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// ÁîüÊàê‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ËøîÂõûÊúÄÁªàÁöÑ‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">result</span><span class="p">.</span><span class="nx">code</span><span class="p">,</span> <span class="nx">result</span><span class="p">.</span><span class="nx">map</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>Webpack ÈÖçÁΩÆÊñá‰ª∂</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">exclude</span><span class="o">:</span> <span class="sr">/node_modules/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">loader</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;second-babel-loader.js&#34;</span><span class="p">),</span> <span class="c1">// Á¨¨‰∫å‰∏™ loader ‰ΩøÁî® AST
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">presets</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;@babel/preset-env&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">loader</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;first-babel-loader.js&#34;</span><span class="p">),</span> <span class="c1">// Á¨¨‰∏Ä‰∏™ loader ÁîüÊàê AST
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">presets</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;@babel/preset-env&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p><strong>ÂÖ≥ÈîÆÁÇπÔºö</strong></p>
<ul>
<li><strong>Á¨¨‰∏Ä‰∏™ loader (<code>first-babel-loader.js</code>)</strong> Ë¥üË¥£Ëß£ÊûêÊ∫êÁ†ÅÂπ∂ÁîüÊàê ASTÔºåÁÑ∂ÂêéÂ∞Ü AST ‰º†ÈÄíÁªô‰∏ã‰∏Ä‰∏™ loader„ÄÇ</li>
<li><strong>Á¨¨‰∫å‰∏™ loader (<code>second-babel-loader.js</code>)</strong> Áõ¥Êé•Êé•Êî∂ AST Âπ∂Âú®Ê≠§Âü∫Á°Ä‰∏äËøõË°åËøõ‰∏ÄÊ≠•ÁöÑËΩ¨Êç¢„ÄÇ</li>
<li>ÈÄöËøáËøôÁßçÊñπÂºèÔºåÂ§ö‰∏™ loader ‰πãÈó¥ÂèØ‰ª•ÂÖ±‰∫´ ASTÔºåÈÅøÂÖç‰∫ÜÊØè‰∏™ loader ÈáçÊñ∞Ëß£ÊûêÊ∫êÁ†ÅÁöÑÂºÄÈîÄ„ÄÇËøôÂú®ÈúÄË¶ÅËøõË°åÂ§öÊ¨°ËΩ¨Êç¢ÁöÑÂú∫ÊôØ‰∏ãÔºåËÉΩÂ§üÊòæËëóÊèêÂçáÊÄßËÉΩ„ÄÇ</li>
</ul>
<h3 id="style-loader">style-loader
</h3><p>Ëøô‰∏™ÂáΩÊï∞(pitch)Âú®Â∏∏ËßÑÁöÑ loader ËΩ¨Êç¢ÂáΩÊï∞ÊâßË°å‰πãÂâçË¢´Ë∞ÉÁî®ÔºåÊèê‰æõ‰∫Ü‰∏Ä‰∏™Êú∫‰ºöÊù•ÂÜ≥ÂÆöÊòØÂê¶Ë∑≥ËøáÂêéÁª≠ÁöÑ loader ÊàñËÄÖÂú®Ê≤°ÊúâÂ§ÑÁêÜËµÑÊ∫êÁöÑÊÉÖÂÜµ‰∏ãÁõ¥Êé•ËøîÂõûÁªìÊûú„ÄÇ</p>
<p><code>pitch</code>ÂáΩÊï∞Êé•Êî∂‰ª•‰∏ãÂèÇÊï∞Ôºö</p>
<ol>
<li><strong>remainingRequest</strong>Ôºö‰∏Ä‰∏™ÂåÖÂê´‰∫ÜÊâÄÊúâÂâ©‰ΩôËØ∑Ê±ÇÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇËøô‰∫õÂâ©‰ΩôÁöÑËØ∑Ê±ÇÂåÖÊã¨‰∫Ü loader Èìæ‰∏≠‰Ωç‰∫éÂΩìÂâç loader ÂêéÈù¢ÁöÑ loaderÔºå‰ª•ÂèäÊúÄÁªàÁöÑËµÑÊ∫êË∑ØÂæÑ„ÄÇËøô‰∏™Â≠óÁ¨¶‰∏≤ÂèØ‰ª•Áõ¥Êé•Ë¢´ webpack ‰ΩøÁî®Ôºå‰ª•‰æøÂú®Êüê‰∫õÂú∫ÊôØ‰∏ãÈáçÊñ∞ÂêØÂä® loader Â§ÑÁêÜÊµÅÁ®ã„ÄÇ</li>
<li><strong>precedingRequest</strong>Ôºö‰∏Ä‰∏™ÂåÖÂê´‰∫ÜÊâÄÊúâÂâçÁΩÆËØ∑Ê±ÇÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇËøô‰∫õÂâçÁΩÆËØ∑Ê±ÇÂåÖÊã¨‰∫Ü loader Èìæ‰∏≠‰Ωç‰∫éÂΩìÂâç loader ÂâçÈù¢ÁöÑÊâÄÊúâ loader„ÄÇËøô‰∏™‰ø°ÊÅØÂèØ‰ª•Áî®Êù•‰∫ÜËß£ËµÑÊ∫êÂú®Âà∞ËææÂΩìÂâç loader ‰πãÂâçÂ∑≤ÁªèÁªèËøá‰∫ÜÂì™‰∫õÂ§ÑÁêÜ„ÄÇ</li>
<li><strong>data</strong>Ôºö‰∏Ä‰∏™ÂèØ‰ª•Âú® pitch ÂíåÊôÆÈÄö loader ËΩ¨Êç¢ÂáΩÊï∞‰πãÈó¥ÂÖ±‰∫´Êï∞ÊçÆÁöÑÂØπË±°„ÄÇËøô‰∏™ÂØπË±°ÊòØÁ©∫ÁöÑÔºåÂèØ‰ª•Ë¢´ÂΩìÂâç loader ÁöÑ<code>pitch</code>ÂáΩÊï∞Âíå‰∏ª‰ΩìÔºànormalÔºâÂáΩÊï∞‰ΩøÁî®Ôºå‰ª•Âú®‰∏§ËÄÖ‰πãÈó¥ÂÖ±‰∫´‰ø°ÊÅØ„ÄÇ</li>
</ol>
<p>ÂáΩÊï∞ÁöÑËøîÂõûÂÄºÊúâÁâπÂà´ÁöÑÂê´‰πâÔºö</p>
<ul>
<li>Â¶ÇÊûú<code>pitch</code>ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™ÂÄºÔºà‰∏çÊòØ<code>undefined</code>ÔºâÔºåËøô‰∏™ËøîÂõûÁöÑÁªìÊûú‰ºöË¢´Áî®Êù•Ë∑≥ËøáÂâ©‰ΩôÁöÑ loader Âπ∂Áõ¥Êé•Â§ÑÁêÜËøô‰∏™ÁªìÊûúÔºåÂ∞±ÂÉèÊòØËøô‰∏™ÁªìÊûúÂ∑≤ÁªèÈÄöËøá‰∫ÜÊâÄÊúâÂâ©‰ΩôÁöÑ loader ‰∏ÄÊ†∑„ÄÇ</li>
<li>Â¶ÇÊûúÊ≤°ÊúâËøîÂõûÂÄºÔºàÊàñËÄÖËøîÂõû<code>undefined</code>ÔºâÔºåwebpack Â∞±‰ºöÁªßÁª≠ÊâßË°åÂâ©‰ΩôÁöÑ loader ÈìæÔºåÊúÄÂêéÂ§ÑÁêÜËµÑÊ∫ê„ÄÇ</li>
</ul>
<p><code>pitch</code>ÂáΩÊï∞ÁöÑ‰ΩøÁî®Âú∫ÊôØÂåÖÊã¨‰ΩÜ‰∏çÈôê‰∫éÔºö</p>
<ul>
<li>Ê†πÊçÆÁâπÂÆöÊù°‰ª∂ÊèêÂâçÁªìÊùü loader Â§ÑÁêÜ„ÄÇ</li>
<li>Âú®ËµÑÊ∫êË¢´ÂÆûÈôÖÂ§ÑÁêÜ‰πãÂâçÔºå‰øÆÊîπÊàñÊ∑ªÂä†ÂøÖË¶ÅÁöÑÈ¢ÑÂ§ÑÁêÜÊ≠•È™§„ÄÇ</li>
<li>Âú®‰∏çÂêå loader ‰πãÈó¥ÂÖ±‰∫´Êï∞ÊçÆ„ÄÇ</li>
</ul>
<p>ÈÄöËøá‰ΩøÁî®<code>pitch</code>ÂáΩÊï∞ÔºåÂèØ‰ª•Âú®ËµÑÊ∫êÂä†ËΩΩÂíåËΩ¨Êç¢ËøáÁ®ã‰∏≠Ê∑ªÂä†Êõ¥Â§öÁöÑÊéßÂà∂ÈÄªËæëÔºå‰ΩøÂæóËµÑÊ∫êÁöÑÂ§ÑÁêÜÊõ¥Âä†ÁÅµÊ¥ªÂíåÈ´òÊïà„ÄÇ</p>
<ul>
<li>previousRequest ÂâçÈù¢ÁöÑ loader</li>
<li>currentRequest Ëá™Â∑±ÂíåÂêéÈù¢ÁöÑ loader+ËµÑÊ∫êË∑ØÂæÑ</li>
<li>remainingRequest ÂêéÈù¢ÁöÑ loader+ËµÑÊ∫êË∑ØÂæÑ</li>
<li>data: ÂíåÊôÆÈÄöÁöÑ loader ÂáΩÊï∞ÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞‰∏ÄÊ†∑,ËÄå‰∏î loader ÊâßË°åÁöÑÂÖ®Á®ãÁî®ÁöÑÊòØÂêå‰∏Ä‰∏™ÂØπË±°</li>
<li>Ê≥®ÊÑè<code>sourceMaps</code>ÊúÄÂêéÊúâ‰∏™<code>s</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//cssÊñáÊú¨‰ª£Á†Å export default
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">normalize</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">path</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\\/g</span><span class="p">,</span> <span class="s2">&#34;/&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">loader</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// pitchÊòØloaderÁöÑ‰∏Ä‰∏™ÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">loader</span><span class="p">.</span><span class="nx">pitch</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">remainingRequest</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;remainingRequest&#34;</span><span class="p">,</span> <span class="nx">remainingRequest</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;context&#34;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">);</span> <span class="c1">//index.lessÊ®°ÂùóÊâÄÂú®ÁöÑÁõÆÂΩï ÂèØ‰ª•Áî®‰ΩúËß£ÊûêÂÖ∂‰ªñÊ®°ÂùóÊàêÂëòÁöÑ‰∏ä‰∏ãÊñá
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//1.Ëé∑ÂèñÂâ©‰∏ãÁöÑËØ∑Ê±Ç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//2.Áî®!ÂàÜÂâ≤ÂæóÂà∞ÂêÑ‰∏™ÈÉ®ÂàÜÁöÑÁªùÂØπË∑ØÂæÑÔºåÂâçÈù¢ÊòØloaderË∑ØÂæÑÔºåÂêéÈù¢ÊòØÊñá‰ª∂Ë∑ØÂæÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//3.ÊääË∑ØÂæÑ‰ªéÁªùÂØπË∑ØÂæÑÂèòÊàêÁõ∏ÂØπ‰∫éÊ†πÁõÆÂΩïÁöÑÁõ∏ÂØπË∑ØÂæÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//Ë∑ØÂæÑÁöÑÂâçÈù¢Ë¶ÅÂä†‰∏ä!!,Âè™‰ΩøÁî®Ë°åÂÜÖloader,‰∏ç‰ΩøÁî®ruleÈáåÈù¢ÈÖçÁΩÆÁöÑloader,‰∏çÁÑ∂Â∞±‰ºöÊ≠ªÂæ™ÁéØ‰∫Ü
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="cm">/*   
</span></span></span><span class="line"><span class="cl"><span class="cm">  	const request = &#34;!!&#34;+(remainingRequest.split(&#39;!&#39;).map(
</span></span></span><span class="line"><span class="cl"><span class="cm">    //Ëøô‰∏™Ë∑ØÂæÑÂÖ∂ÂÆûÂ∞±ÊòØÊ®°ÂùóÁöÑID
</span></span></span><span class="line"><span class="cl"><span class="cm">    requestAbsPath =&gt; (&#34;./&#34; + path.posix.relative(normalize(this.context), 							normalize(requestAbsPath)))).join(&#39;!&#39;));
</span></span></span><span class="line"><span class="cl"><span class="cm">  console.log(&#39;request&#39;, request);
</span></span></span><span class="line"><span class="cl"><span class="cm">    */</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;!!&#34;</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">    <span class="nx">remainingRequest</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&#34;!&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">request</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">contextify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">,</span> <span class="nx">request</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&#34;!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;request&#34;</span><span class="p">,</span> <span class="nx">request</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">script</span> <span class="o">=</span> <span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">     let styleCSS = require(</span><span class="si">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span><span class="si">}</span><span class="sb">);
</span></span></span><span class="line"><span class="cl"><span class="sb">     let style = document.createElement(&#39;style&#39;);
</span></span></span><span class="line"><span class="cl"><span class="sb">     style.innerHTML =styleCSS;
</span></span></span><span class="line"><span class="cl"><span class="sb">     document.head.appendChild(style);
</span></span></span><span class="line"><span class="cl"><span class="sb">   `</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">script</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">loader</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//require(&#34;!!../loaders/less-loader.js!./index.less&#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">[
</span></span></span><span class="line"><span class="cl"><span class="cm">  C:\aproject\webpack202208\5.loader\loaders\less-loader.js,
</span></span></span><span class="line"><span class="cl"><span class="cm"> C:\aproject\webpack202208\5.loader\src\index.less
</span></span></span><span class="line"><span class="cl"><span class="cm">]
</span></span></span><span class="line"><span class="cl"><span class="cm">request=[
</span></span></span><span class="line"><span class="cl"><span class="cm"> ./loaders\less-loader.js,
</span></span></span><span class="line"><span class="cl"><span class="cm"> .\src\index.less
</span></span></span><span class="line"><span class="cl"><span class="cm">]
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="less-loader">less-loader
</h3><p>less-loader ËøîÂõûÁöÑÊòØ css ‰ª£Á†ÅÔºå‰ΩÜÊòØÂ¶ÇÊûúËøîÂõûÁöÑ‰∏çÊòØ‰∏ÄÊÆµ css ‰ª£Á†ÅËÄåÊòØ js ‰ª£Á†ÅÁöÑËØùÔºåÂ∞±ÈúÄË¶ÅÂêéÁª≠ÁöÑ loader ÂØπËøîÂõûÁöÑÊòØ js ‰ª£Á†Å‰πüË¶ÅÊèê‰æõÊîØÊåÅ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">less</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;less&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">loader</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ËØ•loaderÂáΩÊï∞‰∏≠ÁöÑthisÂ∞±ÊòØÁî±loader-runnerÂ∫ìÁªëÂÆöÁöÑÔºåÈáåÈù¢Êúâ‰∏Ä‰∫õÊñπÊ≥ïÂíåÂ±ûÊÄß
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">callback</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="kr">async</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="nx">less</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="p">{</span> <span class="nx">filename</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">resource</span> <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">output</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// callback(err,output.css)  // Áõ¥Êé•ËøîÂõûcss‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="sb">`module.exports = </span><span class="si">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">css</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span> <span class="c1">// ËøîÂõûjs‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">loader</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="loader-runner-ÂÆûÁé∞">loader-runner ÂÆûÁé∞
</h3><p>loader-runner ÁöÑ‰ΩøÁî®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">runLoaders</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./loader-runner&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;fs&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">entryFile</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;src/index.js&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="sb">`inline-loader1!inline-loader2!</span><span class="si">${</span><span class="nx">entryFile</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">rules</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;normal-loader1&#34;</span><span class="p">,</span> <span class="s2">&#34;normal-loader2&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">enforce</span><span class="o">:</span> <span class="s2">&#34;pre&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;pre-loader1&#34;</span><span class="p">,</span> <span class="s2">&#34;pre-loader2&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">enforce</span><span class="o">:</span> <span class="s2">&#34;post&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;post-loader1&#34;</span><span class="p">,</span> <span class="s2">&#34;post-loader2&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">parts</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^-?!+/</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">&#34;!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">resource</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">inlineLoaders</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">preLoaders</span> <span class="o">=</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">postLoaders</span> <span class="o">=</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">normalLoaders</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">rules</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">rule</span> <span class="o">=</span> <span class="nx">rules</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">resource</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">rule</span><span class="p">.</span><span class="nx">test</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">rule</span><span class="p">.</span><span class="nx">enforce</span> <span class="o">==</span> <span class="s2">&#34;pre&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">preLoaders</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">rule</span><span class="p">.</span><span class="nx">use</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">rule</span><span class="p">.</span><span class="nx">enforce</span> <span class="o">==</span> <span class="s2">&#34;post&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">postLoaders</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">rule</span><span class="p">.</span><span class="nx">use</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">normalLoaders</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">rule</span><span class="p">.</span><span class="nx">use</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">loaders</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="s2">&#34;!!&#34;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">loaders</span> <span class="o">=</span> <span class="nx">inlineLoaders</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="s2">&#34;-!&#34;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">loaders</span> <span class="o">=</span> <span class="p">[...</span><span class="nx">postLoaders</span><span class="p">,</span> <span class="p">...</span><span class="nx">inlineLoaders</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="s2">&#34;!&#34;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">loaders</span> <span class="o">=</span> <span class="p">[...</span><span class="nx">postLoaders</span><span class="p">,</span> <span class="p">...</span><span class="nx">inlineLoaders</span><span class="p">,</span> <span class="p">...</span><span class="nx">preLoaders</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">loaders</span> <span class="o">=</span> <span class="p">[...</span><span class="nx">postLoaders</span><span class="p">,</span> <span class="p">...</span><span class="nx">inlineLoaders</span><span class="p">,</span> <span class="p">...</span><span class="nx">normalLoaders</span><span class="p">,</span> <span class="p">...</span><span class="nx">preLoaders</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">//Êääloader‰ªé‰∏Ä‰∏™ÂêçÁß∞ÂèòÊàê‰∏Ä‰∏™ÁªùÂØπË∑ØÂæÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">loaders</span> <span class="o">=</span> <span class="nx">loaders</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">loader</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;loader-chain&#34;</span><span class="p">,</span> <span class="nx">loader</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">debugger</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">runLoaders</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">resource</span><span class="p">,</span> <span class="c1">//Ë¶ÅÂ§ÑÁêÜÁöÑËµÑÊ∫êÊñá‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">loaders</span><span class="p">,</span> <span class="c1">//ËµÑÊ∫êÊñá‰ª∂ÈúÄË¶ÅÁªèËøáÂèë‰∫õloaderÁöÑÂ§ÑÁêÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">context</span><span class="o">:</span> <span class="p">{</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span> <span class="nx">author</span><span class="o">:</span> <span class="s2">&#34;zhufeng&#34;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">readResource</span><span class="o">:</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">,</span> <span class="c1">//ËØªÊñá‰ª∂Áî®Âì™‰∏™ÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//finalCallback
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">result</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">toString</span><span class="p">());</span> <span class="c1">//ËΩ¨Êç¢ÂêéÁöÑÁªìÊûú
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//ËΩ¨Êç¢ÂâçÊ∫êÊñá‰ª∂ÁöÑÂÜÖÂÆπ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">resourceBuffer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="nx">result</span><span class="p">.</span><span class="nx">resourceBuffer</span> <span class="o">?</span> <span class="nx">result</span><span class="p">.</span><span class="nx">resourceBuffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">:</span> <span class="kc">null</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>loader ÁöÑËøêË°åÊµÅÁ®ã</strong></p>
<p><img src="http://static.zhufengpeixun.com/loaderflow1_1661312752787.jpg"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></p>
<p><strong>ÂÆûÁé∞</strong></p>
<ul>
<li><a class="link" href="https://github.com/webpack/loader-runner/blob/v2.4.0/lib/LoaderRunner.js"  target="_blank" rel="noopener"
    >LoaderRunner.js</a></li>
<li><a class="link" href="https://github.com/webpack/webpack/blob/v4.39.3/lib/NormalModuleFactory.js#L180"  target="_blank" rel="noopener"
    >NormalModuleFactory.js</a></li>
<li><a class="link" href="https://github.com/webpack/webpack/blob/v4.39.3/lib/NormalModule.js#L292"  target="_blank" rel="noopener"
    >NormalModule.js</a></li>
</ul>
<p><img src="/blogs/post/webpack/images/image-20240217143955675.png"
	width="597"
	height="882"
	srcset="/blogs/post/webpack/images/image-20240217143955675_hu_f5f4f1eea21c161d.png 480w, /blogs/post/webpack/images/image-20240217143955675_hu_21345f4a993fb86b.png 1024w"
	loading="lazy"
	
		alt="image-20240217143955675"
	
	
		class="gallery-image" 
		data-flex-grow="67"
		data-flex-basis="162px"
	
></p>
<p><img src="/blogs/post/webpack/images/image-20240217144031893.png"
	width="1325"
	height="507"
	srcset="/blogs/post/webpack/images/image-20240217144031893_hu_8ce6265748fcacb9.png 480w, /blogs/post/webpack/images/image-20240217144031893_hu_29eacbd904f5ea4c.png 1024w"
	loading="lazy"
	
		alt="image-20240217144031893"
	
	
		class="gallery-image" 
		data-flex-grow="261"
		data-flex-basis="627px"
	
></p>
<p>ÊØè‰∏™ loader ÂØºÂá∫ÁöÑÂáΩÊï∞‰∏≠ÁöÑ this ÈÉΩÊòØÁî± loader-runner Ëøô‰∏™Â∫ìÁªëÂÆöÁöÑ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Ê†πÊçÆloaderÁöÑÁªùÂØπË∑ØÂæÑÂàõÂª∫loaderÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param {*} loaderAbsPath
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">createLoaderObject</span><span class="p">(</span><span class="nx">loaderAbsPath</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">normal</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="nx">loaderAbsPath</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">pitch</span> <span class="o">=</span> <span class="nx">normal</span><span class="p">.</span><span class="nx">pitch</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//Â¶ÇÊûúËÆæÁΩÆnormal.rawÂ±ûÊÄß‰∏∫trueÁöÑËØùÔºåÈÇ£‰πàloaderÁöÑnormalÂáΩÊï∞ÂèÇÊï∞Â∞±ÊòØ‰∏Ä‰∏™Buffer,Âê¶ÂàôÂ∞±ÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">raw</span> <span class="o">=</span> <span class="nx">normal</span><span class="p">.</span><span class="nx">raw</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span> <span class="nx">loaderAbsPath</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">normal</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">pitch</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">raw</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">:</span> <span class="p">{},</span> <span class="c1">//ÊØè‰∏™loaderÈÉΩÊúâ‰∏Ä‰∏™Ëá™Â∑≤ÁöÑËá™ÂÆöÂØπË±°ÔºåÂèØ‰ª•ÊúâÁî®Êù•‰øùÂ≠òÂíå‰º†ÈÄíÊï∞ÊçÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">pitchExecuted</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">//Ë°®Á§∫Ê≠§loaderÁöÑpitchÂ∑≤ÁªèÊâßË°åËøá‰∫Ü
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">normalExecuted</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">//Ë°®Á§∫Ê≠§loaderÁöÑnormalÂáΩÊï∞Â∑≤ÁªèÊâßË°åËøá‰∫Ü
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ËΩ¨Êç¢loaderÁöÑÂèÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param {*} args ÂèÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param {*} raw Â∏ÉÂ∞îÂÄºÔºåË°®Á§∫loaderÊÉ≥Ë¶ÅÂ≠óÁ¨¶‰∏≤ËøòÊòØÊÉ≥Ë¶ÅBuffer
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">convertArgs</span><span class="p">(</span><span class="nx">args</span><span class="p">,</span> <span class="nx">raw</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">raw</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">Buffer</span><span class="p">.</span><span class="nx">isBuffer</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">raw</span> <span class="o">&amp;&amp;</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">isBuffer</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">toString</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">iterateNormalLoaders</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">processOptions</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">loaderContext</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">args</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">pitchingCallback</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaderIndex</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">pitchingCallback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">currentLoader</span> <span class="o">=</span> <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaders</span><span class="p">[</span><span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaderIndex</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">currentLoader</span><span class="p">.</span><span class="nx">normalExecuted</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaderIndex</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">iterateNormalLoaders</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="nx">processOptions</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">loaderContext</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">args</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">pitchingCallback</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">fn</span> <span class="o">=</span> <span class="nx">currentLoader</span><span class="p">.</span><span class="nx">normal</span><span class="p">;</span> <span class="c1">//Â∞±ÊòØloaderÈáåÁöÑnormalÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">currentLoader</span><span class="p">.</span><span class="nx">normalExecuted</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">convertArgs</span><span class="p">(</span><span class="nx">args</span><span class="p">,</span> <span class="nx">currentLoader</span><span class="p">.</span><span class="nx">raw</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//Ë¶Å‰ª•ÂêåÊ≠•ÊàñËÄÖÂºÇÊ≠•ÁöÑÊñπÂºèÊâßË°åfn
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">runSyncOrAsync</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">loaderContext</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="p">...</span><span class="nx">returnArgs</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="nx">pitchingCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">iterateNormalLoaders</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="nx">processOptions</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">loaderContext</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">returnArgs</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">pitchingCallback</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">runSyncOrAsync</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">loaderContext</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">runCallback</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">isSync</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">//ÈªòËÆ§fnÁöÑÁöÑÊâßË°åÊòØÂêåÊ≠•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">isDone</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">//Ë°®Á§∫ÂΩìÂâçÁöÑÂáΩÊï∞ÊòØÂê¶Â∑≤ÁªèÂÆåÊàê‰∫Ü
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">callback</span> <span class="o">=</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="p">...</span><span class="nx">args</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">isDone</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&#34;callback(): The callback was already called.&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isDone</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//callback ÊòØ‰∏çÊòØË¶ÅÂà§Êñ≠‰∏ãisSyncÁöÑÂÄºÂïä
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">runCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="p">...</span><span class="nx">args</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="nx">loaderContext</span><span class="p">.</span><span class="kr">async</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isSync</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">callback</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//Â¶ÇÊûúÂΩìÂâçÁöÑÊâßË°åÊòØÂêåÊ≠•ÁöÑËØù
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">isSync</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isDone</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">runCallback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//Â¶ÇÊûúÊòØÂºÇÊ≠•Ôºå‰∏ç‰ºöÁ´ãÂàªË∞ÉÁî®runCallback,ÈúÄË¶Å‰Ω†Âú®loaderÁöÑÂÜÖÈÉ®ÊâãÂ∑•Ëß¶Âèëcallback,ÁÑ∂ÂêéÊâßË°årunCallback
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">processResource</span><span class="p">(</span><span class="nx">processOptions</span><span class="p">,</span> <span class="nx">loaderContext</span><span class="p">,</span> <span class="nx">pitchingCallback</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">processOptions</span><span class="p">.</span><span class="nx">readResource</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">.</span><span class="nx">resource</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resourceBuffer</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">processOptions</span><span class="p">.</span><span class="nx">resourceBuffer</span> <span class="o">=</span> <span class="nx">resourceBuffer</span><span class="p">;</span> <span class="c1">//Ë¶ÅÂä†ËΩΩÁöÑËµÑÊ∫êÁöÑ‰∫åËøõÂà∂Êï∞ÁªÑ Buffer
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaderIndex</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">iterateNormalLoaders</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="nx">processOptions</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">loaderContext</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="nx">resourceBuffer</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nx">pitchingCallback</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">iteratePitchingLoaders</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">processOptions</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">loaderContext</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">pitchingCallback</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaderIndex</span> <span class="o">&gt;=</span> <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaders</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">processResource</span><span class="p">(</span><span class="nx">processOptions</span><span class="p">,</span> <span class="nx">loaderContext</span><span class="p">,</span> <span class="nx">pitchingCallback</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//Ëé∑ÂèñÂΩìÂâçÁ¥¢ÂºïÂØπÂ∫îÁöÑloaderÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">currentLoader</span> <span class="o">=</span> <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaders</span><span class="p">[</span><span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaderIndex</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">currentLoader</span><span class="p">.</span><span class="nx">pitchExecuted</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaderIndex</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">iteratePitchingLoaders</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="nx">processOptions</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">loaderContext</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">pitchingCallback</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//Âõ†‰∏∫Êàë‰ª¨Ë¶Å‰øùËØÅ‰∏Ä‰∏™loader pitchÊàñËÄÖËØ¥normalÂè™Ëµ∞‰∏ÄÊ¨°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//Ëé∑ÂèñÂΩìÂâçloaderÂØπÂ∫îÁöÑpitchÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">fn</span> <span class="o">=</span> <span class="nx">currentLoader</span><span class="p">.</span><span class="nx">pitch</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">currentLoader</span><span class="p">.</span><span class="nx">pitchExecuted</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">iteratePitchingLoaders</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="nx">processOptions</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">loaderContext</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">pitchingCallback</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">runSyncOrAsync</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fn</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">loaderContext</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">remainingRequest</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">previousRequest</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="p">...</span><span class="nx">returnArgs</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//Âà§Êñ≠pitchÊñπÊ≥ïÁöÑËøîÂõûÂÄºÊúâÊ≤°ÊúâÔºåÂ¶ÇÊûúÊúâÂàôË∑≥ËøáÂêéÈù¢ÁöÑloader,ËøîÂõûÂ§¥ÊâßË°åÂâç‰∏Ä‰∏™loader
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="nx">returnArgs</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">returnArgs</span><span class="p">.</span><span class="nx">some</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">item</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaderIndex</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">iterateNormalLoaders</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="nx">processOptions</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">loaderContext</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">args</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">pitchingCallback</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">iteratePitchingLoaders</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="nx">processOptions</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">loaderContext</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">pitchingCallback</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">runLoaders</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">finalCallback</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//resourceË¶ÅÂ§ÑÁêÜÁöÑËµÑÊ∫êÔºåÊàñËÄÖËØ¥Ë¶ÅÁºñËØëÁöÑÊ®°ÂùóË∑ØÂæÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//loadersÂ§ÑÁêÜÊ≠§Ë∑ØÂæÑÁöÑloaders
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//contextÊåáÁöÑÊòØloaderÂáΩÊï∞Âú®ÊâßË°åÁöÑÊó∂ÂÄôthisÊåáÈíà
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//readResourceËØªÂèñÊñá‰ª∂ÁöÑÊñπÊ≥ïfs.readFile
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="p">{</span> <span class="nx">resource</span><span class="p">,</span> <span class="nx">loaders</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">context</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">readResource</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">options</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//loadersÁé∞Âú®ÊòØ‰∏Ä‰∏™loaderÊ®°ÂùóÁöÑÁªùÂØπË∑ØÂæÑÔºåËΩ¨Êàê‰∏Ä‰∏™ÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">loaderObjects</span> <span class="o">=</span> <span class="nx">loaders</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">createLoaderObject</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">loaderContext</span> <span class="o">=</span> <span class="nx">context</span><span class="p">;</span> <span class="c1">//Ëøô‰∏™ÂØπË±°Â∞±ÊòØloaderÊâßË°åÁöÑÊó∂ÂÄôÁöÑthisÊåáÈíà
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">resource</span> <span class="o">=</span> <span class="nx">resource</span><span class="p">;</span> <span class="c1">//Âä†ËΩΩÁöÑÊ®°Âùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">readResource</span> <span class="o">=</span> <span class="nx">readResource</span><span class="p">;</span> <span class="c1">//ËØªÂèñÊñá‰ª∂ÁöÑÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaders</span> <span class="o">=</span> <span class="nx">loaderObjects</span><span class="p">;</span> <span class="c1">//Â≠òÊîæloadersÂØπË±°Êï∞ÁªÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaderIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">//ÂΩìÂâçÊ≠£Âú®Â§ÑÁêÜÁöÑloaderÁöÑÁ¥¢Âºï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">callback</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">//ÂèØ‰ª•ÊâãÂ∑•Ë∞ÉÁî®Ê≠§ÊñπÊ≥ïÂêëÂêéÊâßË°å‰∏ã‰∏Ä‰∏™loader
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">loaderContext</span><span class="p">.</span><span class="kr">async</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">//ÂèØ‰ª•ÊääloaderËøêË°å‰ªéÂêåÊ≠•Âèò‰∏∫ÂºÇÊ≠•,Âπ∂ËøîÂõûthis.callback
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//‰ª£Ë°®Êï¥‰∏™ËØ∑Ê±Ç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span> <span class="s2">&#34;request&#34;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">get</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//ÊääloaderÁöÑÁªùÂØπË∑ØÂæÑÂíåË¶ÅÂä†ËΩΩÁöÑËµÑÊ∫êÁöÑÁªùÂØπË∑ØÂæÑÁî®!ÊãºÂú®‰∏ÄËµ∑
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">return</span> <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaders</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">loader</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">loader</span><span class="p">.</span><span class="nx">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">.</span><span class="nx">resource</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&#34;!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span> <span class="s2">&#34;remainingRequest&#34;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">get</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaders</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaderIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">loader</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">loader</span><span class="p">.</span><span class="nx">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">.</span><span class="nx">resource</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&#34;!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span> <span class="s2">&#34;currentRequest&#34;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">get</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaders</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaderIndex</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">loader</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">loader</span><span class="p">.</span><span class="nx">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">.</span><span class="nx">resource</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&#34;!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span> <span class="s2">&#34;previousRequest&#34;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">get</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaders</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaderIndex</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">loader</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">loader</span><span class="p">.</span><span class="nx">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&#34;!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span> <span class="s2">&#34;data&#34;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">get</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaders</span><span class="p">[</span><span class="nx">loaderContext</span><span class="p">.</span><span class="nx">loaderIndex</span><span class="p">].</span><span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">processOptions</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">readResource</span><span class="p">,</span> <span class="c1">//fs.readFile
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">resourceBuffer</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">//Ë¶ÅËØªÂèñÁöÑËµÑÊ∫êÁöÑÊ∫ê‰ª£Á†ÅÔºåÂÆÉÊòØ‰∏Ä‰∏™Buffer,Â∞±‰∫åËøõÂà∂Â≠óËäÇÊï∞ÁªÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="nx">iteratePitchingLoaders</span><span class="p">(</span><span class="nx">processOptions</span><span class="p">,</span> <span class="nx">loaderContext</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//pitchingCallback
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">finalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">result</span><span class="p">,</span> <span class="c1">//ÊòØÊúÄÁªàÂ§ÑÁêÜÁöÑÁªìÊûú ,ÂÖ∂ÂÆûÂ∞±ÊòØÊúÄÂ∑¶ÂàôÁöÑloaderÁöÑnormal ËøîÂõûÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">resourceBuffer</span><span class="o">:</span> <span class="nx">processOptions</span><span class="p">.</span><span class="nx">resourceBuffer</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">exports</span><span class="p">.</span><span class="nx">runLoaders</span> <span class="o">=</span> <span class="nx">runLoaders</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏Ä‰∏™Èù¢ËØïÈ¢òÔºåÊúâ‰∏§‰∏™ÂáΩÊï∞ A Âíå BÔºåÂÖ∂‰∏≠ B ÂáΩÊï∞ÔºåÊúâÊó∂ÂÄôÂ∏åÊúõÂÆÉÊòØÂú® A ÊâßË°åÂêéÂêåÊ≠•ÊâßË°åÁöÑÔºåÊúâÊó∂ÂÄôÂ∏åÊúõÂÆÉÊòØÂú® A ÊâßË°åÂêéÂºÇÊ≠•ÊâßË°åÁöÑÔºåÂ¶Ç‰ΩïÂÆûÁé∞Ëøô‰∏™Â∑•ÂÖ∑ÂáΩÊï∞ÔºåÂÆÉÊé•Âèó AÔºåB ‰Ωú‰∏∫ÂÆûÂèÇÔºü</p>
<p>Â¶ÇÊûúËØ•ÂáΩÊï∞ÊòØÂêåÊ≠•ÁöÑÔºåÈÇ£‰πàËøô‰∏§‰∏™ÂáΩÊï∞‰ºö‰æùÊ¨°ÊâßË°åÔºåÂ¶ÇÊûúËøô‰∏™ÂáΩÊï∞ÊòØÂºÇÊ≠•ÁöÑÔºåÈÇ£‰πàÂ∏åÊúõÂêéÈù¢ÈÇ£‰∏™ÂáΩÊï∞Âú®ËØ•ÂºÇÊ≠•ÂáΩÊï∞ÊâßË°åÂÆåÂêéÂÜçÊâßË°åÔºåÁé∞Âú®ÈúÄË¶ÅÂÆûÁé∞‰∏Ä‰∏™Â∑•ÂÖ∑ÂáΩÊï∞Êù•ËææÂà∞Ëøô‰∏™ÁõÆÁöÑ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">runSyncOrAsync</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span><span class="nx">loaderContent</span><span class="p">,</span><span class="nx">args</span><span class="p">,</span><span class="nx">runCallback</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">isSync</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span><span class="c1">// ÈªòËÆ§ÂêåÊ≠•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">let</span> <span class="nx">isDone</span> <span class="o">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">    <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">callback</span> <span class="o">=</span> <span class="p">(</span><span class="nx">err</span><span class="p">,...</span><span class="nx">args</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="nx">isDone</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="nx">thorow</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Â∑≤ÁªèÊâßË°åËøácallbackÂáΩÊï∞ÔºåÊó†Ê≥ïÂÜçÊ¨°ÊâßË°å&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nx">isDone</span> <span class="o">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">runCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,...</span><span class="nx">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">loaderContext</span><span class="p">.</span><span class="kr">async</span> <span class="o">=</span> <span class="p">()=&gt;{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">isSync</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">loaderContext</span><span class="p">.</span><span class="nx">callback</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span><span class="nx">args</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="nx">isSync</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="nx">isDone</span> <span class="o">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">        <span class="nx">runCallback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">result</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê®°ÊãüÂêåÊ≠•Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">normal</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;normal&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="s2">&#34;normal&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">cons</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;callback&#34;</span> <span class="o">+</span> <span class="nx">value</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">runSyncOrAsync</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="nx">callback</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">runSyncOrAsync</span><span class="p">(</span><span class="nx">normal</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê®°ÊãüÂºÇÊ≠•Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">normal</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;normal&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">callback</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="kr">async</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">callback</span><span class="p">(</span><span class="s2">&#34;normal&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;callback&#34;</span> <span class="o">+</span> <span class="nx">value</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">runSyncOrAsync</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">contextFn</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sync</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">contextFn</span><span class="p">.</span><span class="kr">async</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">contextFn</span><span class="p">.</span><span class="nx">sync</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">callback</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">contextFn</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">contextFn</span><span class="p">.</span><span class="nx">sync</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">callback</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">runSyncOrAsync</span><span class="p">(</span><span class="nx">normal</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Ê®°ÊãüÂÆûÁé∞ÂæÆÂûãÁöÑ-webpack">Ê®°ÊãüÂÆûÁé∞ÂæÆÂûãÁöÑ webpack
</h2><p>Ê®°Êãü‰∏Ä‰∏™Ê†∏ÂøÉÂäüËÉΩ‰ø±ÂÖ®ÁöÑÂæÆÂûã Webpack ÈúÄË¶ÅÂåÖÂê´‰ª•‰∏ãÂá†‰∏™ÂÖ≥ÈîÆÈÉ®ÂàÜÔºö</p>
<ol>
<li><strong>ÂÖ•Âè£Êñá‰ª∂ÁöÑËß£Êûê</strong>ÔºöÈÄöËøáÈÄíÂΩíÂàÜÊûê‰æùËµñÂÖ≥Á≥ªÔºåÊûÑÂª∫Ê®°Âùó‰æùËµñÂõæ„ÄÇ</li>
<li><strong>ÊâìÂåÖ</strong>ÔºöÂ∞ÜÊâÄÊúâÁöÑÊ®°ÂùóÂêàÂπ∂Êàê‰∏Ä‰∏™ÊàñÂ§ö‰∏™Êñá‰ª∂„ÄÇ</li>
<li><strong>Loader Êú∫Âà∂</strong>ÔºöÊîØÊåÅÂØπ‰∏çÂêåÁ±ªÂûãÁöÑÊñá‰ª∂ËøõË°åËΩ¨Êç¢ÔºåÂ¶ÇÂ∞Ü ES6 ËΩ¨Êç¢‰∏∫ ES5„ÄÇ</li>
<li><strong>Êèí‰ª∂Êú∫Âà∂</strong>ÔºöÈÄöËøáÁîüÂëΩÂë®ÊúüÈí©Â≠êÊâ©Â±ï Webpack ÂäüËÉΩ„ÄÇ</li>
</ol>
<p>Êàë‰ª¨‰ºö‰ΩøÁî® Node.js ÂÆûÁé∞‰∏Ä‰∏™ÂæÆÂûãÁöÑ WebpackÔºåËôΩÁÑ∂ÁÆÄÂåñ‰∫ÜÂæàÂ§öÂäüËÉΩÔºå‰ΩÜÂÆÉËÉΩÂ∏ÆÂä©ÁêÜËß£ Webpack ÁöÑÊ†∏ÂøÉËÆæËÆ°„ÄÇ</p>
<ol>
<li><strong>Ê®°Âùó‰æùËµñËß£Êûê</strong></li>
</ol>
<p>È¶ñÂÖàÔºåÈúÄË¶ÅÈÄíÂΩíËß£ÊûêÂÖ•Âè£Êñá‰ª∂ÂèäÂÖ∂‰æùËµñÊ®°Âùó„ÄÇËøôÈáåÂèØ‰ª•Áî® Node.js ÁöÑ <code>fs</code> Ê®°ÂùóÊù•ËØªÂèñÊñá‰ª∂ÔºåÂπ∂ÈÄöËøá <code>babel</code> Êù•Ëß£ÊûêÂπ∂ËΩ¨Êç¢Ê®°Âùó„ÄÇ</p>
<ol start="2">
<li><strong>Ê®°Êãü Loader Êú∫Âà∂</strong></li>
</ol>
<p>‰∏∫‰∫ÜÊ®°Êãü LoaderÔºå‰ºöÂÖÅËÆ∏ÈÖçÁΩÆ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂáΩÊï∞ÈìæÔºåÂ§ÑÁêÜÊØè‰∏™Ê®°ÂùóÁöÑÂÜÖÂÆπ„ÄÇ</p>
<ol start="3">
<li><strong>Ê®°ÊãüÊèí‰ª∂Á≥ªÁªü</strong></li>
</ol>
<p>Êèí‰ª∂Á≥ªÁªüÂü∫‰∫é Webpack ÁöÑÁîüÂëΩÂë®ÊúüÈí©Â≠êÊú∫Âà∂ÔºåÁî®‰∫ã‰ª∂È©±Âä®Ê®°ÂûãÊù•ÂÆûÁé∞Êèí‰ª∂ÂäüËÉΩ„ÄÇ</p>
<p><strong>‰ª£Á†ÅÂÆûÁé∞</strong></p>
<p>‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂæÆÂûã Webpack ÁöÑÂÆûÁé∞„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// ÂæÆÂûãWebpackÁöÑÂÆûÁé∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;fs&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">babel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@babel/core&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">SyncHook</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;tapable&#34;</span><span class="p">);</span> <span class="c1">// ‰ΩøÁî®TapableÊù•Ê®°Êãü‰∫ã‰ª∂Êú∫Âà∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">MiniWebpack</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">constructor</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">entry</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">entry</span><span class="p">;</span> <span class="c1">// ÂÖ•Âè£Êñá‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">output</span><span class="p">;</span> <span class="c1">// ËæìÂá∫ÈÖçÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">modules</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// Ê®°Âùó‰æùËµñÊï∞ÁªÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">loaders</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">loaders</span> <span class="o">||</span> <span class="p">[];</span> <span class="c1">// Ê®°ÊãüLoaderÊï∞ÁªÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">plugins</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">plugins</span> <span class="o">||</span> <span class="p">[];</span> <span class="c1">// Êèí‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">hooks</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">beforeRun</span><span class="o">:</span> <span class="k">new</span> <span class="nx">SyncHook</span><span class="p">([</span><span class="s2">&#34;compiler&#34;</span><span class="p">]),</span> <span class="c1">// Ê≥®ÂÜåÈí©Â≠ê
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">afterCompile</span><span class="o">:</span> <span class="k">new</span> <span class="nx">SyncHook</span><span class="p">([</span><span class="s2">&#34;compiler&#34;</span><span class="p">]),</span>
</span></span><span class="line"><span class="cl">      <span class="nx">emit</span><span class="o">:</span> <span class="k">new</span> <span class="nx">SyncHook</span><span class="p">([</span><span class="s2">&#34;compiler&#34;</span><span class="p">]),</span>
</span></span><span class="line"><span class="cl">      <span class="nx">done</span><span class="o">:</span> <span class="k">new</span> <span class="nx">SyncHook</span><span class="p">([</span><span class="s2">&#34;stats&#34;</span><span class="p">]),</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Â∫îÁî®Êèí‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">plugin</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">plugin</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ËØªÂèñÊñá‰ª∂ÂÜÖÂÆπÂπ∂Ëß£Êûê
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">parseModule</span><span class="p">(</span><span class="nx">filename</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="s2">&#34;utf-8&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Â§ÑÁêÜ Loader
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">loaders</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">loader</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">loader</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">filename</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">content</span> <span class="o">=</span> <span class="nx">loader</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ‰ΩøÁî® Babel Â∞Ü ES6 ËΩ¨Êç¢‰∏∫ ES5
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="p">{</span> <span class="nx">ast</span><span class="p">,</span> <span class="nx">code</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">babel</span><span class="p">.</span><span class="nx">transformSync</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">ast</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">presets</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;@babel/preset-env&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÊèêÂèñ‰æùËµñÊ®°Âùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">dependencies</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="nx">babel</span><span class="p">.</span><span class="nx">traverse</span><span class="p">(</span><span class="nx">ast</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">ImportDeclaration</span><span class="p">({</span> <span class="nx">node</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">dependencies</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span> <span class="nx">filename</span><span class="p">,</span> <span class="nx">code</span><span class="p">,</span> <span class="nx">dependencies</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ÊûÑÂª∫Ê®°Âùó‰æùËµñÂõæ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">buildDependencyGraph</span><span class="p">(</span><span class="nx">entry</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">entryModule</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parseModule</span><span class="p">(</span><span class="nx">entry</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">graph</span> <span class="o">=</span> <span class="p">[</span><span class="nx">entryModule</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÈÄíÂΩíËß£ÊûêÊ®°Âùó‰æùËµñÁöÑÂÖ∂‰ªñÊ®°Âùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">mod</span> <span class="k">of</span> <span class="nx">graph</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">mod</span><span class="p">.</span><span class="nx">dependencies</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">dep</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">depPath</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">dirname</span><span class="p">(</span><span class="nx">mod</span><span class="p">.</span><span class="nx">filename</span><span class="p">),</span> <span class="nx">dep</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">depModule</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parseModule</span><span class="p">(</span><span class="nx">depPath</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">graph</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">depModule</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">graph</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ÁîüÊàêÊâìÂåÖÂêéÁöÑ‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">generateCode</span><span class="p">(</span><span class="nx">graph</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">modules</span> <span class="o">=</span> <span class="nx">graph</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">mod</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="sb">`&#34;</span><span class="si">${</span><span class="nx">mod</span><span class="p">.</span><span class="nx">filename</span><span class="si">}</span><span class="sb">&#34;: function(require, module, exports) { </span><span class="si">${</span><span class="nx">mod</span><span class="p">.</span><span class="nx">code</span><span class="si">}</span><span class="sb"> }`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&#34;,&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">      (function(modules) {
</span></span></span><span class="line"><span class="cl"><span class="sb">        function require(filename) {
</span></span></span><span class="line"><span class="cl"><span class="sb">          const fn = modules[filename];
</span></span></span><span class="line"><span class="cl"><span class="sb">          const module = { exports: {} };
</span></span></span><span class="line"><span class="cl"><span class="sb">          fn(require, module, module.exports);
</span></span></span><span class="line"><span class="cl"><span class="sb">          return module.exports;
</span></span></span><span class="line"><span class="cl"><span class="sb">        }
</span></span></span><span class="line"><span class="cl"><span class="sb">        require(&#34;</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">entry</span><span class="si">}</span><span class="sb">&#34;);
</span></span></span><span class="line"><span class="cl"><span class="sb">      })({</span><span class="si">${</span><span class="nx">modules</span><span class="si">}</span><span class="sb">});
</span></span></span><span class="line"><span class="cl"><span class="sb">    `</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ÊâßË°åÊâìÂåÖ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">run</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">beforeRun</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÊûÑÂª∫‰æùËµñÂõæ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">graph</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">buildDependencyGraph</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">entry</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">afterCompile</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÁîüÊàê‰ª£Á†ÅÂπ∂ÂÜôÂÖ•Êñá‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">output</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">generateCode</span><span class="p">(</span><span class="nx">graph</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">emit</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">path</span><span class="p">,</span> <span class="nx">output</span><span class="p">,</span> <span class="s2">&#34;utf-8&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">done</span><span class="p">.</span><span class="nx">call</span><span class="p">({</span> <span class="nx">output</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">MiniWebpack</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰ΩøÁî®ÊñπÂºè">‰ΩøÁî®ÊñπÂºè
</h3><h4 id="1-ÂÆö‰πâ-loader">1. ÂÆö‰πâ Loader
</h4><p>Âú®Ëøô‰∏™ÂæÆÂûã Webpack ‰∏≠ÔºåLoader Âè™ÊòØÁÆÄÂçïÁöÑÂáΩÊï∞ËΩ¨Êç¢„ÄÇÊàë‰ª¨ÂèØ‰ª•‰º†ÂÖ•‰∏Ä‰∏™ÂåπÈÖçÊñá‰ª∂Á±ªÂûãÁöÑÊ≠£ÂàôË°®ËææÂºèÂíåÂ§ÑÁêÜÂáΩÊï∞„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">jsÂ§çÂà∂‰ª£Á†Å</span><span class="o">//</span> <span class="n">loader‰æãÂ≠ê</span>
</span></span><span class="line"><span class="cl"><span class="n">module</span><span class="o">.</span><span class="n">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">test</span><span class="p">:</span> <span class="o">/</span>\<span class="o">.</span><span class="n">js</span><span class="o">$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="n">use</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">//</span> <span class="err">ÁÆÄÂçïÁöÑËΩ¨Êç¢</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">/</span><span class="n">console</span>\<span class="o">.</span><span class="n">log</span><span class="o">/</span><span class="n">g</span><span class="p">,</span> <span class="s1">&#39;alert&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="2-ÂÆö‰πâÊèí‰ª∂">2. ÂÆö‰πâÊèí‰ª∂
</h4><p>Êàë‰ª¨ÂèØ‰ª•ÈÄöËøáÊèí‰ª∂Êù•Êâ©Â±ï Webpack ÁöÑÂäüËÉΩÔºå‰æãÂ¶ÇÂú®ÊâìÂåÖÁöÑ‰∏çÂêåÈò∂ÊÆµÊâßË°åËá™ÂÆö‰πâÈÄªËæë„ÄÇÊèí‰ª∂ÈÄöËøá <code>apply</code> ÊñπÊ≥ïÊ≥®ÂÜåÂà∞ Webpack ‰∏≠„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">jsÂ§çÂà∂‰ª£Á†Å</span><span class="o">//</span> <span class="n">plugin‰æãÂ≠ê</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="n">HelloWorldPlugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">apply</span><span class="p">(</span><span class="n">compiler</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">compiler</span><span class="o">.</span><span class="n">hooks</span><span class="o">.</span><span class="n">beforeRun</span><span class="o">.</span><span class="n">tap</span><span class="p">(</span><span class="s1">&#39;HelloWorldPlugin&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;Webpack ÊûÑÂª∫ÂºÄÂßãÔºÅ&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="n">compiler</span><span class="o">.</span><span class="n">hooks</span><span class="o">.</span><span class="n">done</span><span class="o">.</span><span class="n">tap</span><span class="p">(</span><span class="s1">&#39;HelloWorldPlugin&#39;</span><span class="p">,</span> <span class="n">stats</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;Webpack ÊûÑÂª∫ÂÆåÊàêÔºÅ&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">module</span><span class="o">.</span><span class="n">exports</span> <span class="o">=</span> <span class="n">HelloWorldPlugin</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="3-webpack-ÈÖçÁΩÆ">3. Webpack ÈÖçÁΩÆ
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">jsÂ§çÂà∂‰ª£Á†Åconst</span> <span class="n">MiniWebpack</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s1">&#39;./mini-webpack&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="n">HelloWorldPlugin</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s1">&#39;./hello-world-plugin&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="n">babelLoader</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s1">&#39;./babel-loader&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">entry</span><span class="p">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="n">output</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span><span class="p">:</span> <span class="s1">&#39;./dist/bundle.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="n">loaders</span><span class="p">:</span> <span class="p">[</span><span class="n">babelLoader</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="n">plugins</span><span class="p">:</span> <span class="p">[</span><span class="n">new</span> <span class="n">HelloWorldPlugin</span><span class="p">()],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="n">compiler</span> <span class="o">=</span> <span class="n">new</span> <span class="n">MiniWebpack</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">compiler</span><span class="o">.</span><span class="n">run</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ËøêË°åÊâìÂåÖÊµÅÁ®ã">ËøêË°åÊâìÂåÖÊµÅÁ®ã
</h3><p>ÂÅáËÆæÊàë‰ª¨Êúâ‰ª•‰∏ãÈ°πÁõÆÁªìÊûÑÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">bashÂ§çÂà∂‰ª£Á†Å</span><span class="o">/</span><span class="n">src</span>
</span></span><span class="line"><span class="cl">  <span class="n">index</span><span class="o">.</span><span class="n">js</span>
</span></span><span class="line"><span class="cl">  <span class="n">other</span><span class="o">.</span><span class="n">js</span>
</span></span><span class="line"><span class="cl"><span class="n">mini</span><span class="o">-</span><span class="n">webpack</span><span class="o">.</span><span class="n">js</span>
</span></span><span class="line"><span class="cl"><span class="n">babel</span><span class="o">-</span><span class="n">loader</span><span class="o">.</span><span class="n">js</span>
</span></span><span class="line"><span class="cl"><span class="n">hello</span><span class="o">-</span><span class="n">world</span><span class="o">-</span><span class="n">plugin</span><span class="o">.</span><span class="n">js</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>index.js</code> ÈÄöËøá <code>import</code> ‰æùËµñ‰∫Ü <code>other.js</code>„ÄÇÂΩìÊàë‰ª¨ËøêË°å <code>node build.js</code>ÔºåWebpack Â∞±‰ºöÊåâÁÖßÂ¶Ç‰∏ãÊµÅÁ®ãÊâßË°åÔºö</p>
<ol>
<li><strong>Ëß£ÊûêÂÖ•Âè£Êñá‰ª∂</strong>Ôºö‰ªé <code>entry</code> ÂºÄÂßãÔºåËß£Êûê‰ª£Á†ÅÔºåÊèêÂèñ‰æùËµñÂÖ≥Á≥ªÔºåÂπ∂ÈÄöËøá Loader Â§ÑÁêÜÊñá‰ª∂„ÄÇ</li>
<li><strong>ÊûÑÂª∫‰æùËµñÂõæ</strong>ÔºöÈÄíÂΩíËß£ÊûêÊâÄÊúâÁöÑ‰æùËµñÊñá‰ª∂ÔºåÊûÑÂª∫ÂÆåÊï¥ÁöÑÊ®°Âùó‰æùËµñÂõæ„ÄÇ</li>
<li><strong>ÁîüÊàê‰ª£Á†Å</strong>ÔºöÊ†πÊçÆ‰æùËµñÂõæÔºåÂ∞ÜÊâÄÊúâÊ®°ÂùóÊâìÂåÖÊàê‰∏Ä‰∏™Êñá‰ª∂Ôºå‰ΩøÁî®Ëá™ÂÆö‰πâÁöÑ <code>require</code> ÂáΩÊï∞Êù•Âä†ËΩΩÊ®°Âùó„ÄÇ</li>
<li><strong>Ëß¶ÂèëÊèí‰ª∂</strong>ÔºöÊèí‰ª∂‰ºöÂú®ÊûÑÂª∫ÁöÑ‰∏çÂêåÈò∂ÊÆµÈÄöËøáÈí©Â≠êÁ≥ªÁªüÊâßË°åËá™ÂÆö‰πâÈÄªËæë„ÄÇ</li>
</ol>
<h2 id="Êèí‰ª∂">Êèí‰ª∂
</h2><h3 id="ÂâçÁΩÆÁü•ËØÜ">ÂâçÁΩÆÁü•ËØÜ
</h3><p>Èù¢ËØïÁöÑÊó∂ÂÄôÊâãÂÜôÂπ∂ÂèëÊéßÂà∂ÔºåÂºÇÊ≠•Êú∫Âà∂‰ª£Á†ÅÔºåÈÉΩÂèØ‰ª•ÂèÇËÄÉ tapable Â∫ìÁöÑËøô‰∫õÊñπÊ≥ï„ÄÇtapable ÂèØ‰ª•Áã¨Á´ã‰ΩøÁî®„ÄÇ</p>
<p>ÂºÇÊ≠•‰ªªÂä°ÁöÑÂπ∂ÂèëÊï∞ÊéßÂà∂ÂáΩÊï∞„ÄÇ</p>
<p>‰æãÈ¢òÔºö</p>
<blockquote>
<p>ËØ∑ÂÆûÁé∞Â¶Ç‰∏ãÁöÑÂáΩÊï∞ÔºåÂèØ‰ª•ÊâπÈáèËØ∑Ê±ÇÊï∞ÊçÆÔºåÊâÄÊúâÁöÑ URL Âú∞ÂùÄÂú® urls ÂèÇÊï∞‰∏≠ÔºåÂêåÊó∂ÂèØ‰ª•ÈÄöËøá max ÂèÇÊï∞ÊéßÂà∂ËØ∑Ê±ÇÁöÑÂπ∂ÂèëÂ∫¶ÔºåÂΩìÊâÄÊúâËØ∑Ê±ÇÁªìÊùü‰πãÂêéÔºåÈúÄË¶ÅÊâßË°å callback ÂõûË∞ÉÂáΩÊï∞ÔºåÂèëËØ∑Ê±ÇÁöÑÂáΩÊï∞ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî® fetch Âç≥ÂèØ„ÄÇ</p>
<p>function sendRequest(urls:string[],max:number,callback:()=&gt;void){ }</p></blockquote>
<p>Âú® webpack ‰∏≠Ôºå<code>Compiler</code>Âíå<code>Compilation</code>ÂÆû‰æã‰∏äÁöÑ hooks ‰ΩøÁî®‰∫ÜÂ§öÁßçÁ±ªÂûãÔºå‰ª•Êèê‰æõ‰∏çÂêåÁöÑÊèí‰ª∂Êú∫Âà∂Ôºå‰ªéËÄåÂÖÅËÆ∏Êèí‰ª∂ÂºÄÂèëËÄÖÂú® webpack ÁöÑÁºñËØëËøáÁ®ã‰∏≠ÁöÑ‰∏çÂêåÈò∂ÊÆµ‰ª•‰∏çÂêåÁöÑÊñπÂºèÂèÇ‰∏éËøõÊù•„ÄÇÊØèÁßçÁ±ªÂûãÁöÑ hook ÈÉΩÊúâÂÖ∂ÁâπÂÆöÁöÑË°å‰∏∫ÂíåÁî®ÈÄîÔºåËøô‰ΩøÂæó webpack ÁöÑÊèí‰ª∂Á≥ªÁªüÈùûÂ∏∏ÁÅµÊ¥ªÂíåÂº∫Â§ß„ÄÇ</p>
<p>Webpack Êú¨Ë¥®‰∏äÊòØ‰∏ÄÁßç‰∫ã‰ª∂ÊµÅÊú∫Âà∂ÔºåÂÆÉÁöÑÊ†∏ÂøÉÊû∂ÊûÑËÆæËÆ°Â∞±ÊòØÂõ¥ÁªïÁùÄ <strong>‰∫ã‰ª∂È©±Âä®</strong> Âíå <strong>Êèí‰ª∂Á≥ªÁªü</strong> Êù•ÊûÑÂª∫ÁöÑ„ÄÇËøôÁßçËÆæËÆ°ËÆ© Webpack Êú¨Ë∫´ÈùûÂ∏∏ÁÅµÊ¥ªÔºåËÉΩÂ§üÈÄöËøáÊèí‰ª∂Á≥ªÁªüÊâ©Â±ïÂÖ∂ÂäüËÉΩÔºåÂºÄÂèëËÄÖÂèØ‰ª•‰ΩøÁî®Êèí‰ª∂Ê∑±ÂÖ•ÊéßÂà∂ Webpack ÁöÑÊâìÂåÖËøáÁ®ã„ÄÇ</p>
<p><strong>Webpack ÁöÑÊ†∏ÂøÉËÆæËÆ°ÁêÜÂøµ</strong></p>
<ol>
<li><strong>Tapable</strong>ÔºöWebpack Â∫ïÂ±Ç‰ΩøÁî®‰∫Ü‰∏Ä‰∏™Âêç‰∏∫ <code>Tapable</code> ÁöÑÂ∫ìÔºåËøôÊòØ Webpack ÁöÑ‰∫ã‰ª∂È©±Âä®Êú∫Âà∂ÁöÑÊ†∏ÂøÉ„ÄÇ<code>Tapable</code> Êèê‰æõ‰∫ÜÈí©Â≠êÔºàHooksÔºâÊú∫Âà∂ÔºåÁ±ª‰ºº‰∫éÂèëÂ∏É-ËÆ¢ÈòÖÊ®°ÂºèÔºåÂèØ‰ª•Âú® Webpack ÁîüÂëΩÂë®ÊúüÁöÑÂêÑ‰∏™ÂÖ≥ÈîÆËäÇÁÇπ‰∏äÊåÇËΩΩ‰∫ã‰ª∂ÔºåÂπ∂Ëß¶Âèë‰∫ã‰ª∂„ÄÇ</li>
<li><strong>ÁîüÂëΩÂë®ÊúüÈí©Â≠êÔºàHooksÔºâ</strong>ÔºöWebpack ÁöÑÊï¥‰∏™ÊâìÂåÖËøáÁ®ãË¢´ÂàíÂàÜ‰∏∫Â§ö‰∏™Èò∂ÊÆµÔºåÊØè‰∏™Èò∂ÊÆµÈÉΩÊúâÁîüÂëΩÂë®ÊúüÈí©Â≠êÔºàHooksÔºâÔºåÂ¶ÇÔºö<code>compile</code>„ÄÅ<code>emit</code>„ÄÅ<code>done</code> Á≠â„ÄÇÊèí‰ª∂ÂèØ‰ª•Âú®Ëøô‰∫õÈí©Â≠ê‰∏äÊåÇËΩΩËá™ÂÆö‰πâÈÄªËæëÔºåÊâ©Â±ï Webpack ÁöÑÂäüËÉΩ„ÄÇ</li>
<li><strong>Êèí‰ª∂Á≥ªÁªüÔºàPluginsÔºâ</strong>ÔºöWebpack ÁöÑÊèí‰ª∂Á≥ªÁªü‰ΩøÂæóÊèí‰ª∂ÂèØ‰ª•Âú®ÊâìÂåÖËøáÁ®ã‰∏≠‰ªª‰ΩïÊó∂Âàª‚ÄúÊèíÂÖ•‚ÄùÂÆöÂà∂ÂåñÁöÑÂäüËÉΩ„ÄÇÊèí‰ª∂ÈÄöËøáÈí©Â≠ê‰∏é Webpack ÁöÑ‰∫ã‰ª∂ÊµÅËøõË°å‰∫§‰∫íÔºå‰ªéËÄå‰øÆÊîπ„ÄÅÂ¢ûÂº∫ Webpack ÁöÑË°å‰∏∫„ÄÇ</li>
<li><strong>Loader Êú∫Âà∂</strong>ÔºöWebpack ‰∏≠ loader ÊòØ‰∏ìÈó®Â§ÑÁêÜÊ®°ÂùóËΩ¨Êç¢ÁöÑÔºåloader ÊòØ‰ΩúÁî®‰∫éÊ®°ÂùóÁöÑÔºå‰ΩÜÂíåÊèí‰ª∂ÁöÑËÆæËÆ°ÁêÜÂøµÁõ∏ÂêåÔºåloader ‰πüÂèØ‰ª•Ë¢´ËÆ§‰∏∫ÊòØ webpack Êèí‰ª∂Á≥ªÁªüÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇÂÆÉ‰ª¨‰∏ÄËµ∑ÂÆåÊàê‰∫ÜÂØπÊñá‰ª∂ÁöÑËΩ¨ÂåñÂíåÊâìÂåÖÂ∑•‰Ωú„ÄÇ</li>
</ol>
<p><strong>Webpack Â∫ïÂ±ÇÊû∂ÊûÑËÆæËÆ°ÁöÑ‰∏ªË¶ÅÁªÑ‰ª∂</strong></p>
<ol>
<li><strong>Tapable Â∫ì</strong></li>
</ol>
<p>Webpack ‰∏≠ÁöÑ <code>Tapable</code> ÊòØÊ†∏ÂøÉÂ∫ìÔºåÂÆÉÁ±ª‰ºº‰∫é‰∏Ä‰∏™‰∫ã‰ª∂ÂèëÂ∏ÉËÆ¢ÈòÖÁ≥ªÁªüÔºåWebpack ÁöÑÊâÄÊúâ‰∫ã‰ª∂ÈÉΩÊòØÈÄöËøá Tapable ÁöÑ hooks Êù•ÁÆ°ÁêÜ„ÄÇ<code>Tapable</code> Êèê‰æõ‰∫ÜÂ§öÁßçÁ±ªÂûãÁöÑ hooksÔºåÂ∏∏Áî®ÁöÑÂ¶Ç <code>SyncHook</code>„ÄÅ<code>AsyncSeriesHook</code>„ÄÅ<code>AsyncParallelHook</code>ÔºåËøô‰∫õ hooks ÊéßÂà∂ÁùÄÂêåÊ≠•„ÄÅÂºÇÊ≠•ÁöÑÊèí‰ª∂ÊâßË°åÊµÅÁ®ã„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">SyncHook</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;tapable&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">MyPlugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">apply</span><span class="p">(</span><span class="nx">compiler</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">compiler</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">compile</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;MyPlugin&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Compile is starting...&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Ëøô‰∏™‰æãÂ≠êÂ±ïÁ§∫‰∫ÜÂ¶Ç‰ΩïÂú® compile Èí©Â≠ê‰∏äÊ≥®ÂÜå‰∏Ä‰∏™ÂêåÊ≠•Èí©Â≠êÊù•ÊâßË°åËá™ÂÆö‰πâ‰ª£Á†Å„ÄÇ
</span></span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li><strong>Webpack ÁîüÂëΩÂë®ÊúüÂíåÈí©Â≠ê</strong></li>
</ol>
<p>Webpack ÁöÑËøêË°åÂàÜ‰∏∫Â§ö‰∏™Èò∂ÊÆµÔºåÊØîÂ¶ÇÔºö</p>
<ul>
<li><strong>Initialization</strong>ÔºöÂàùÂßãÂåñ Webpack ÈÖçÁΩÆÊñá‰ª∂„ÄÅËß£ÊûêÊ®°Âùó‰æùËµñ</li>
<li><strong>Compilation</strong>ÔºöÈÄíÂΩíÂ§ÑÁêÜÊ®°Âùó‰æùËµñÂõæÔºåÁîüÊàêÊúÄÁªàÁöÑ‰ª£Á†ÅÂåÖ</li>
<li><strong>Optimization</strong>Ôºö‰ª£Á†Å‰ºòÂåñÔºåÂ¶Ç Tree Shaking„ÄÅ‰ª£Á†ÅÂéãÁº©Á≠â</li>
<li><strong>Emit</strong>ÔºöÂ∞ÜÊâìÂåÖÂ•ΩÁöÑËµÑÊ∫êËæìÂá∫Âà∞Êñá‰ª∂Á≥ªÁªü</li>
</ul>
<p>ÊØè‰∏™Èò∂ÊÆµÈÉΩÊúâÁîüÂëΩÂë®ÊúüÈí©Â≠êÔºå‰æãÂ¶Ç <code>beforeCompile</code>„ÄÅ<code>afterCompile</code>„ÄÅ<code>emit</code> Á≠âÔºåÂºÄÂèëËÄÖÂèØ‰ª•ÈÄöËøáÊèí‰ª∂Á≥ªÁªüÂú®Ëøô‰∫õÁîüÂëΩÂë®Êúü‰∏≠Ê≥®ÂÜåÈí©Â≠êÔºåÊâ©Â±ïÂäüËÉΩ„ÄÇ</p>
<ol start="3">
<li><strong>Compiler Âíå Compilation</strong></li>
</ol>
<ul>
<li><strong>Compiler</strong> ÊòØ Webpack ÁöÑÊ†∏ÂøÉÂØπË±°ÔºåË¥üË¥£ÂêØÂä® Webpack ÁöÑÊï¥‰∏™ÊâìÂåÖËøáÁ®ã„ÄÇÊâÄÊúâÊèí‰ª∂ÈÄöËøá <code>compiler</code> ÂØπË±°‰∏é Webpack ËøõË°å‰∫§‰∫í„ÄÇ</li>
<li><strong>Compilation</strong> ‰ª£Ë°®‰∫Ü Webpack ÊâìÂåÖËøáÁ®ã‰∏≠ÊØè‰∏ÄÊ¨°ÊûÑÂª∫ÁöÑÁä∂ÊÄÅÔºåÂåÖÂê´‰∫ÜÊâÄÊúâÁöÑÊ®°Âùó„ÄÅËµÑÊ∫êÂíåÁîüÊàê‰ª£Á†ÅÁöÑËØ¶ÁªÜ‰ø°ÊÅØ„ÄÇÊèí‰ª∂ÂèØ‰ª•ÈÄöËøá <code>compilation</code> ÂØπË±°Êù•ËÆøÈóÆÂíå‰øÆÊîπÊ®°ÂùóÁöÑÂÖ∑‰ΩìÊâìÂåÖÁªìÊûú„ÄÇ</li>
</ul>
<p><strong>Compiler Âíå Compilation ÁöÑÂÖ≥Á≥ª</strong>Ôºö</p>
<ul>
<li><code>Compiler</code> ÊòØÂÖ®Â±ÄÁöÑÔºåÂÆÉË¥üË¥£ÁÆ°ÁêÜÊï¥‰∏™ Webpack ÊûÑÂª∫ÁîüÂëΩÂë®Êúü„ÄÇ</li>
<li><code>Compilation</code> ÊòØÊØèÊ¨°ÊâìÂåÖÁöÑ‰∏ä‰∏ãÊñáÔºåÂÆÉÁÆ°ÁêÜÊûÑÂª∫ÁöÑÁªÜËäÇÔºàÂåÖÊã¨ÊØè‰∏™Ê®°ÂùóÁöÑ‰æùËµñ„ÄÅÂ§ÑÁêÜ„ÄÅ‰ºòÂåñÁ≠âÔºâ„ÄÇ</li>
</ul>
<ol start="4">
<li><strong>Êèí‰ª∂Êú∫Âà∂</strong></li>
</ol>
<p>Webpack ÁöÑÊèí‰ª∂Êú∫Âà∂ÈÄöËøá <code>Compiler</code> Âíå <code>Compilation</code> Êèê‰æõÁöÑÈí©Â≠êÊú∫Âà∂ÂÖÅËÆ∏ÂºÄÂèëËÄÖÂú®ÊâìÂåÖËøáÁ®ã‰∏≠‚ÄúÊã¶Êà™‚ÄùÊàñ‚Äú‰øÆÊîπ‚Äù Webpack ÁöÑË°å‰∏∫„ÄÇÊèí‰ª∂ÈÄöËøá <code>apply</code> ÊñπÊ≥ïÊåÇËΩΩÂà∞ <code>compiler</code> ‰∏äÔºåÂπ∂Âà©Áî®ÁîüÂëΩÂë®ÊúüÈí©Â≠êÊâßË°åËá™ÂÆö‰πâÈÄªËæë„ÄÇ</p>
<ol start="5">
<li><strong>Loader Á≥ªÁªü</strong></li>
</ol>
<ul>
<li><strong>Loader</strong> ÊòØÁî®Êù•ËΩ¨Êç¢Ê®°ÂùóÁöÑÔºåÊØîÂ¶ÇÂ∞Ü <code>.scss</code> ËΩ¨Êç¢‰∏∫ <code>.css</code>ÔºåÂ∞Ü ES6+ ËΩ¨Êç¢‰∏∫ ES5„ÄÇLoader Ë¥üË¥£Â∞Ü‰∏çÂêåÁ±ªÂûãÁöÑÊñá‰ª∂ÔºàÂ¶Ç CSS„ÄÅÂõæÁâáÁ≠âÔºâËΩ¨‰∏∫ Webpack ÂèØ‰ª•ÁêÜËß£ÁöÑÊ®°Âùó„ÄÇ</li>
<li>Loader Âè™‰ΩúÁî®‰∫éÂçï‰∏™Êñá‰ª∂ÔºåËÄåÊèí‰ª∂ÂàôÂèØ‰ª•‰ΩúÁî®‰∫éÊï¥‰∏™ÊûÑÂª∫ËøáÁ®ãÔºåLoader ÂèØ‰ª•ÁªÑÂêà‰ΩøÁî®ÂΩ¢ÊàêÈìæÂºèÂ§ÑÁêÜÔºåLoader ÁöÑÈ°∫Â∫èÂíåÊèí‰ª∂ÁöÑÊú∫Âà∂ÈÉΩÂèØ‰ª•ÈÄöËøá Webpack ÈÖçÁΩÆÁÅµÊ¥ªÊéßÂà∂„ÄÇ</li>
</ul>
<p><strong>Webpack Êèí‰ª∂Á≥ªÁªüÁöÑ‰ºòÂäø</strong></p>
<ol>
<li><strong>ÁÅµÊ¥ªÊÄß</strong>ÔºöÈÄöËøáÊèí‰ª∂ÔºåÂºÄÂèëËÄÖÂèØ‰ª•ÈùûÂ∏∏ËΩªÊùæÂú∞Êâ©Â±ï Webpack ÁöÑÂäüËÉΩÔºåËÄå‰∏çÈúÄË¶ÅÂéª‰øÆÊîπ Webpack Ê†∏ÂøÉ‰ª£Á†Å„ÄÇ</li>
<li><strong>Âº∫Â§ßÁöÑÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜ</strong>ÔºöWebpack Êèê‰æõ‰∫Ü‰ºóÂ§öÁöÑÁîüÂëΩÂë®ÊúüÈí©Â≠êÔºåÂºÄÂèëËÄÖÂèØ‰ª•Âú®ÊâìÂåÖËøáÁ®ãÁöÑ‰ªª‰ΩïÊó∂ÂàªÊèíÂÖ•Ëá™Â∑±ÁöÑÈÄªËæëÔºåÁ≤æÁªÜÂú∞ÊéßÂà∂ÊâìÂåÖËøáÁ®ã„ÄÇ</li>
<li><strong>Êèí‰ª∂ÁîüÊÄÅ‰∏∞ÂØå</strong>ÔºöWebpack ÁöÑÊèí‰ª∂ÁîüÊÄÅÈùûÂ∏∏‰∏∞ÂØåÔºå‰ªé‰ª£Á†Å‰ºòÂåñ„ÄÅÊñá‰ª∂ÂéãÁº©Âà∞Ê®°ÂùóÁÉ≠Êõ¥Êñ∞ÔºåWebpack Êèí‰ª∂Âá†‰πéË¶ÜÁõñ‰∫ÜÊâÄÊúâÂ∏∏ËßÅÁöÑÈúÄÊ±Ç„ÄÇ</li>
<li><strong>‰∫ã‰ª∂È©±Âä®Ê®°Âûã</strong>ÔºöWebpack ÈÄöËøá‰∫ã‰ª∂È©±Âä®ÁöÑÊû∂ÊûÑÂÆûÁé∞‰∫ÜÈ´òÂ∫¶ÁöÑÊ®°ÂùóÂåñÂíåËß£ËÄ¶ÔºåÊèí‰ª∂ÂèØ‰ª•ÈÄöËøáËÆ¢ÈòÖ‰∏çÂêåÁöÑÈí©Â≠êÊù•ÊéßÂà∂Êï¥‰∏™ÊâìÂåÖËøáÁ®ãÔºåËøôÁßçËÆæËÆ°Â∏¶Êù•‰∫ÜÂæàÈ´òÁöÑÂèØÁª¥Êä§ÊÄßÂíåÊâ©Â±ïÊÄß„ÄÇ</li>
</ol>
<p><strong>Êèí‰ª∂Á≥ªÁªüÁöÑÂÆûÈôÖÂ∫îÁî®Âú∫ÊôØ</strong></p>
<ul>
<li><strong>‰ª£Á†ÅÂéãÁº©</strong>ÔºöÈÄöËøáÊèí‰ª∂Âú® <code>emit</code> Èò∂ÊÆµÂ∞ÜÁîüÊàêÁöÑÊñá‰ª∂ËøõË°åÂéãÁº©Ôºå‰æãÂ¶Ç <code>TerserPlugin</code>„ÄÇ</li>
<li><strong>‰ª£Á†ÅÂàÜÁ¶ª</strong>ÔºöÈÄöËøáÊèí‰ª∂ÂèØ‰ª•ÂÆûÁé∞‰ª£Á†ÅÁöÑÊåâÈúÄÂä†ËΩΩÊàñÂàÜÁ¶ªÔºå<code>SplitChunksPlugin</code> Â∞±ÊòØ‰∏Ä‰∏™ÁªèÂÖ∏ÁöÑÂàÜÁ¶ª‰ª£Á†ÅÁöÑÊèí‰ª∂„ÄÇ</li>
<li><strong>Ëá™Âä®ÁîüÊàê HTML Êñá‰ª∂</strong>Ôºö‰æãÂ¶Ç <code>HtmlWebpackPlugin</code> ÂèØ‰ª•Ëá™Âä®ÁîüÊàêÂ∏¶ÊúâÊ≠£Á°Æ‰æùËµñÁöÑ HTML Êñá‰ª∂„ÄÇ</li>
<li><strong>ÁÉ≠Ê®°ÂùóÊõøÊç¢</strong>ÔºöÈÄöËøá <code>HotModuleReplacementPlugin</code> ÂèØ‰ª•ÂÆûÁé∞Ê®°ÂùóÁöÑÁÉ≠Êõ¥Êñ∞ËÄå‰∏çÈúÄË¶ÅÈáçÊñ∞Âä†ËΩΩÊï¥‰∏™È°µÈù¢„ÄÇ</li>
</ul>
<h4 id="Êèí‰ª∂Ê†∏ÂøÉ-tapable">Êèí‰ª∂Ê†∏ÂøÉ tapable
</h4><p>webpack Êèí‰ª∂Êú∫Âà∂Ôºö</p>
<ul>
<li>
<p>webpack ÂÆûÁé∞Êèí‰ª∂Êú∫Âà∂ÁöÑÂ§ß‰ΩìÊñπÂºèÊòØÔºö</p>
<ul>
<li>ÂàõÂª∫ - webpack Âú®ÂÖ∂ÂÜÖÈÉ®ÂØπË±°‰∏äÂàõÂª∫ÂêÑÁßçÈí©Â≠êÔºõÔºàÂ¶Ç compiler ÂØπË±°‰∏äÁöÑ hooks ‰∏äÁöÑ run ÊàñËÄÖ doneÔºâ</li>
<li>Ê≥®ÂÜå - Êèí‰ª∂Â∞ÜËá™Â∑±ÁöÑÊñπÊ≥ïÊ≥®ÂÜåÂà∞ÂØπÂ∫îÈí©Â≠ê‰∏äÔºå‰∫§Áªô webpackÔºõ</li>
<li>Ë∞ÉÁî® - webpack ÁºñËØëËøáÁ®ã‰∏≠Ôºå‰ºöÈÄÇÊó∂Âú∞Ëß¶ÂèëÁõ∏Â∫îÈí©Â≠êÔºåÂõ†Ê≠§‰πüÂ∞±Ëß¶Âèë‰∫ÜÊèí‰ª∂ÁöÑÊñπÊ≥ï„ÄÇ</li>
</ul>
</li>
<li>
<p>Webpack Êú¨Ë¥®‰∏äÊòØ‰∏ÄÁßç<strong>‰∫ã‰ª∂ÊµÅÁöÑÊú∫Âà∂</strong>ÔºåÂÆÉÁöÑÂ∑•‰ΩúÊµÅÁ®ã‰ºöÂ∞ÜÂêÑ‰∏™Êèí‰ª∂‰∏≤ËÅîËµ∑Êù•ÔºåËÄåÂÆûÁé∞Ëøô‰∏ÄÂàáÁöÑÊ†∏ÂøÉÂ∞±ÊòØ TapableÔºåwebpack ‰∏≠ÊúÄÊ†∏ÂøÉÁöÑË¥üË¥£ÁºñËØëÁöÑ Compiler ÂíåË¥üË¥£ÂàõÂª∫ bundle ÁöÑ Compilation ÈÉΩÁªßÊâøËá™ Tapable</p>
<p>ÊâÄ‰ª• webpack ‰∏≠Êèí‰ª∂ÁöÑÂãæÂ≠êÂáΩÊï∞ÂàÜÂ∏ÉÂú® Compiler ÔºåCompilation Á≠âÂÆû‰æãÂØπË±°‰∏äÔºå‰πüÂ∞±ÂèØ‰ª•ÈÄâÊã©Âú®Ëøô‰∫õÂØπË±°ÁöÑÂãæÂ≠ê‰∏äÊ≥®ÂÜåËá™Â∑±ÁöÑÊèí‰ª∂„ÄÇ</p>
</li>
<li>
<p>ÈÄöËøá‰∫ã‰ª∂Ê≥®ÂÜåÂíåÁõëÂê¨ÔºåËß¶Âèë webpack ÁîüÂëΩÂë®Êúü‰∏≠ÁöÑÂáΩÊï∞ÊñπÊ≥ï</p>
</li>
</ul>
<p>webpack Êèí‰ª∂Èí©Â≠êÔºàÁîüÂëΩÂë®ÊúüÂáΩÊï∞ÔºâÂèØËßÜÂåñÂ∑•ÂÖ∑Ôºö<a class="link" href="https://www.npmjs.com/package/wepback-plugin-visualizer"  target="_blank" rel="noopener"
    >wepback-plugin-visualizer</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">SyncHook</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">SyncBailHook</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">SyncWaterfallHook</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">SyncLoopHook</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">AsyncParallelHook</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">AsyncParallelBailHook</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">AsyncSeriesHook</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">AsyncSeriesBailHook</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">AsyncSeriesWaterfallHook</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;tapable&#34;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="tapable-ÂàÜÁ±ª">tapable ÂàÜÁ±ª
</h4><ol>
<li>
<h5 id="ÊåâÂêåÊ≠•ÂºÇÊ≠•ÂàÜÁ±ª">ÊåâÂêåÊ≠•ÂºÇÊ≠•ÂàÜÁ±ª
</h5><ul>
<li>
<p>Hook Á±ªÂûãÂèØ‰ª•ÂàÜ‰∏∫<code>ÂêåÊ≠•Sync</code>Âíå<code>ÂºÇÊ≠•Async</code>ÔºåÂºÇÊ≠•ÂèàÂàÜ‰∏∫<code>Âπ∂Ë°å</code>(‰∏ÄËµ∑ÂºÄÂßãÔºåÂÖ®ÈÉ®ÁªìÊùüÊâçÁªìÊùü)Âíå<code>‰∏≤Ë°å</code>ÔºàÂâç‰∏Ä‰∏™ÁªìÊùüÂêé‰∏Ä‰∏™ÊâçÂºÄÂßãÔºâ</p>
<p><img src="/blogs/post/webpack/images/image-20230410195505070.png"
	width="1342"
	height="291"
	srcset="/blogs/post/webpack/images/image-20230410195505070_hu_6c03bc759587ef6.png 480w, /blogs/post/webpack/images/image-20230410195505070_hu_769b6e0d770aa904.png 1024w"
	loading="lazy"
	
		alt="image-20230410195505070"
	
	
		class="gallery-image" 
		data-flex-grow="461"
		data-flex-basis="1106px"
	
></p>
</li>
</ul>
</li>
<li>
<p><strong>ÊåâËøîÂõûÂÄºÂàÜÁ±ª</strong></p>
<p><img src="/blogs/post/webpack/images/image-20230410195529852.png"
	width="1207"
	height="296"
	srcset="/blogs/post/webpack/images/image-20230410195529852_hu_3e6ff94fcc4f4d88.png 480w, /blogs/post/webpack/images/image-20230410195529852_hu_6c80dd9dd2214a91.png 1024w"
	loading="lazy"
	
		alt="image-20230410195529852"
	
	
		class="gallery-image" 
		data-flex-grow="407"
		data-flex-basis="978px"
	
></p>
<ul>
<li>
<p>basicÔºöÊâßË°åÊØè‰∏Ä‰∏™‰∫ã‰ª∂ÂáΩÊï∞Ôºå‰∏çÂÖ≥ÂøÉÂáΩÊï∞ÁöÑËøîÂõûÂÄºÔºåÊúâ SyncHook„ÄÅAsyncParallelHook„ÄÅAsyncSeriesHook</p>
<p><img src="/blogs/post/webpack/images/image-20230410200044645.png"
	width="266"
	height="1391"
	srcset="/blogs/post/webpack/images/image-20230410200044645_hu_126b09258223200c.png 480w, /blogs/post/webpack/images/image-20230410200044645_hu_af3218e7bf92ca8e.png 1024w"
	loading="lazy"
	
		alt="image-20230410200044645"
	
	
		class="gallery-image" 
		data-flex-grow="19"
		data-flex-basis="45px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">SyncHook</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;tapable&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">hook</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SyncHook</span><span class="p">([</span><span class="s2">&#34;name&#34;</span><span class="p">,</span> <span class="s2">&#34;age&#34;</span><span class="p">]);</span> <span class="c1">// ÂΩ¢ÂèÇÊï∞ÁªÑÔºåÂÖ∂‰∏≠ÁöÑÂÖÉÁ¥†ÁöÑÂêçÂ≠óÊ≤°Êúâ‰ªÄ‰πàÊÑè‰πâÔºåÈáçË¶ÅÁöÑÊòØËøô‰∏™Êï∞ÁªÑÁöÑÈïøÂ∫¶Ôºå‰ªñÁöÑÈïøÂ∫¶‰ºöÊòØ‰∏ãÈù¢ÂõûË∞ÉÂáΩÊï∞Êé•ÂèóÂà∞ÁöÑÂÆûÈôÖÂèÇÊï∞ÁöÑ‰∏™Êï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// tapÂáΩÊï∞Êé•ÂèóÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØË°®Á§∫ÂõûË∞ÉÁöÑÂêçÂ≠óÔºåÂÖ∂ÂÆû‰πüÊ≤°Êúâ‰ªÄ‰πàÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">hook</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;1&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">hook</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;2&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">hook</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;3&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">hook</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&#34;tom&#34;</span><span class="p">,</span> <span class="mi">18</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>waterfallÔºöÂ¶ÇÊûúÂâç‰∏Ä‰∏™‰∫ã‰ª∂ÂáΩÊï∞ÁöÑÁªìÊûú <code>result !== undefined</code>ÔºåÂàô result ‰ºö‰Ωú‰∏∫Âêé‰∏Ä‰∏™‰∫ã‰ª∂ÂáΩÊï∞ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞,Êúâ SyncWaterfallHookÔºåAsyncSeriesWaterfallHook</p>
<p><img src="/blogs/post/webpack/images/image-20230410200145319.png"
	width="366"
	height="1648"
	srcset="/blogs/post/webpack/images/image-20230410200145319_hu_8454303809c83b40.png 480w, /blogs/post/webpack/images/image-20230410200145319_hu_bd0cbe4ee3c25a83.png 1024w"
	loading="lazy"
	
		alt="image-20230410200145319"
	
	
		class="gallery-image" 
		data-flex-grow="22"
		data-flex-basis="53px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">SyncWaterfallHook</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;tapable&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ÂΩ¢ÂèÇÊï∞ÁªÑ
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ÂΩ¢ÂèÇÁöÑÂêç‰πâÊ≤°ÊúâÊÑè‰πâ
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">hook</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SyncWaterfallHook</span><span class="p">([</span><span class="s2">&#34;name&#34;</span><span class="p">,</span> <span class="s2">&#34;age&#34;</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * tapÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØÂõûË∞ÉÂáΩÊï∞ÁöÑÂêçÁß∞Ôºå‰ΩÜÊòØËøô‰∏™ÂêçÂ≠óÂè™ÊòØÁªôÁ®ãÂ∫èÂëòÁúãÁöÑ
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="nx">hook</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;1&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">);</span> <span class="c1">// &#39;zhufeng&#39;, 18
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">return</span> <span class="s2">&#34;result1&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">hook</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;2&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">);</span> <span class="c1">// &#39;result1&#39;, 18
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">return</span> <span class="s2">&#34;result2&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">hook</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;3&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">);</span> <span class="c1">// &#39;result2&#39;, 18
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">hook</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&#34;zhufeng&#34;</span><span class="p">,</span> <span class="mi">18</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>bailÔºöÊâßË°åÊØè‰∏Ä‰∏™‰∫ã‰ª∂ÂáΩÊï∞ÔºåÈÅáÂà∞Á¨¨‰∏Ä‰∏™Èí©Â≠êÁöÑËøîÂõûÂÄºÁªìÊûú <code>result !== undefined</code> ÔºåÂàô‰∏çÂÜçÁªßÁª≠ÂæÄÂêéÊâßË°å„ÄÇÊúâÔºöSyncBailHook„ÄÅAsyncSeriesBailHook, AsyncParallelBailHook</p>
<p><img src="/blogs/post/webpack/images/image-20230410200127561.png"
	width="459"
	height="1558"
	srcset="/blogs/post/webpack/images/image-20230410200127561_hu_6cebd2ed9105b670.png 480w, /blogs/post/webpack/images/image-20230410200127561_hu_fb67a17575b93159.png 1024w"
	loading="lazy"
	
		alt="image-20230410200127561"
	
	
		class="gallery-image" 
		data-flex-grow="29"
		data-flex-basis="70px"
	
></p>
</li>
<li>
<p>loopÔºö‰∏çÂÅúÁöÑÂæ™ÁéØÊâßË°å‰∫ã‰ª∂ÂáΩÊï∞ÔºåÁõ¥Âà∞ÊâÄÊúâÂáΩÊï∞ÁªìÊûú <code>result === undefined</code>ÔºåÊúâ SyncLoopHook Âíå AsyncSeriesLoopHook</p>
<p><img src="/blogs/post/webpack/images/image-20230410200204253.png"
	width="407"
	height="1597"
	srcset="/blogs/post/webpack/images/image-20230410200204253_hu_fcdf5458d9893e2e.png 480w, /blogs/post/webpack/images/image-20230410200204253_hu_ff0a2df7b39e25ba.png 1024w"
	loading="lazy"
	
		alt="image-20230410200204253"
	
	
		class="gallery-image" 
		data-flex-grow="25"
		data-flex-basis="61px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">SyncLoopHook</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;tapable&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ‰∏çÂÅúÁöÑÊâßË°åÂõûË∞ÉÂáΩÊï∞ÔºåÁõ¥Âà∞ÁªìÊûúÁ≠â‰∫éundefined
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">hook</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SyncLoopHook</span><span class="p">([</span><span class="s2">&#34;name&#34;</span><span class="p">,</span> <span class="s2">&#34;age&#34;</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">counter1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">counter2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">counter3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">hook</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;1&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&#34;counter1&#34;</span><span class="p">,</span> <span class="nx">counter1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">++</span><span class="nx">counter1</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">counter1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">hook</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;2&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&#34;counter2&#34;</span><span class="p">,</span> <span class="nx">counter2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">++</span><span class="nx">counter2</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">counter2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">hook</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;3&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&#34;counter3&#34;</span><span class="p">,</span> <span class="nx">counter3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">++</span><span class="nx">counter3</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">counter3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">hook</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&#34;zhufeng&#34;</span><span class="p">,</span> <span class="mi">18</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
</ol>
<p>ÂºÇÊ≠•ÁöÑ hookÔºåÊ≥®ÂÜåÊñπÂºèÊúâ 3 ÁßçÔºö</p>
<ol>
<li>tapÔºöÊ≥®ÂÜåÂêåÊ≠•ÂõûË∞ÉÂáΩÊï∞</li>
<li>tapAsyncÔºöÊ≥®ÂÜåÂºÇÊ≠•ÂõûË∞ÉÂáΩÊï∞ÔºåËØ•ÂáΩÊï∞Êé•Êî∂ÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞ÊòØ‰∏Ä‰∏™ callback ÂáΩÊï∞ÔºåË∞ÉÁî®Ëøô‰∏™ callback ÂáΩÊï∞Ë°®Á§∫ËØ•ÂºÇÊ≠•ÊâßË°åÂÆåÊàê‰∫Ü</li>
<li>tapPromiseÔºöÊ≥®ÂÜå promise ÁöÑÂõûË∞ÉÂáΩÊï∞ÔºåÂõûË∞ÉÂáΩÊï∞ÁöÑËøîÂõûÂÄºÂøÖÈ°ªÊòØ promise ÂÆû‰æã</li>
<li>Ëß¶ÂèëÂ∞±Ê≤°Êúâ callÔºåÂè™Êúâ callAsync„ÄÅpromise</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">AsyncParallelHook</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;tapable&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">hook</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AsyncParallelHook</span><span class="p">([</span><span class="s2">&#34;name&#34;</span><span class="p">,</span> <span class="s2">&#34;age&#34;</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//ÂºÇÊ≠•ÁöÑhookÔºåÊ≥®ÂÜåÊñπÂºèÊúâ3Áßç  tap tapAsync tapPromise
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cm">/* hook.tap(&#39;1&#39;, (name,age) =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="cm">  console.log(1, name, age);
</span></span></span><span class="line"><span class="cl"><span class="cm">});
</span></span></span><span class="line"><span class="cl"><span class="cm">hook.tap(&#39;2&#39;, (name,age) =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="cm">  console.log(2, name, age);
</span></span></span><span class="line"><span class="cl"><span class="cm">});
</span></span></span><span class="line"><span class="cl"><span class="cm">hook.tap(&#39;3&#39;, (name,age) =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="cm">  console.log(3,name,age);
</span></span></span><span class="line"><span class="cl"><span class="cm">});
</span></span></span><span class="line"><span class="cl"><span class="cm">// Ëß¶ÂèëÂ∞±Ê≤°Êúâcall ÔºåÊúâcallAsync promise
</span></span></span><span class="line"><span class="cl"><span class="cm">hook.callAsync(&#39;zhufeng&#39;, 18, () =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="cm">  console.log(&#39;done&#39;);
</span></span></span><span class="line"><span class="cl"><span class="cm">}); */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/* console.time(&#39;cost&#39;);
</span></span></span><span class="line"><span class="cl"><span class="cm">hook.tapAsync(&#39;1&#39;, (name,age,callback) =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="cm">  setTimeout(() =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="cm">    console.log(1, name, age);
</span></span></span><span class="line"><span class="cl"><span class="cm">    callback();
</span></span></span><span class="line"><span class="cl"><span class="cm">  }, 1000);
</span></span></span><span class="line"><span class="cl"><span class="cm">});
</span></span></span><span class="line"><span class="cl"><span class="cm">hook.tapAsync(&#39;2&#39;, (name,age,callback) =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="cm">  setTimeout(() =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="cm">    console.log(2, name, age);
</span></span></span><span class="line"><span class="cl"><span class="cm">    callback();
</span></span></span><span class="line"><span class="cl"><span class="cm">  }, 2000);
</span></span></span><span class="line"><span class="cl"><span class="cm">});
</span></span></span><span class="line"><span class="cl"><span class="cm">hook.tapAsync(&#39;3&#39;, (name,age,callback) =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="cm">  setTimeout(() =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="cm">    console.log(3, name, age);
</span></span></span><span class="line"><span class="cl"><span class="cm">    callback();
</span></span></span><span class="line"><span class="cl"><span class="cm">  }, 3000);
</span></span></span><span class="line"><span class="cl"><span class="cm">});
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">//Ëß¶ÂèëÂ∞±Ê≤°ÊúâcallÔºåÂè™ÊúâcallAsync„ÄÅpromise
</span></span></span><span class="line"><span class="cl"><span class="cm">hook.callAsync(&#39;zhufeng&#39;, 18, () =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="cm">  console.log(&#39;done&#39;);
</span></span></span><span class="line"><span class="cl"><span class="cm">  console.timeEnd(&#39;cost&#39;);
</span></span></span><span class="line"><span class="cl"><span class="cm">}); */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">time</span><span class="p">(</span><span class="s2">&#34;cost&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">hook</span><span class="p">.</span><span class="nx">tapPromise</span><span class="p">(</span><span class="s2">&#34;1&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nx">resolve</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">hook</span><span class="p">.</span><span class="nx">tapPromise</span><span class="p">(</span><span class="s2">&#34;2&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nx">resolve</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span> <span class="mi">2000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">hook</span><span class="p">.</span><span class="nx">tapPromise</span><span class="p">(</span><span class="s2">&#34;3&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nx">resolve</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">hook</span><span class="p">.</span><span class="nx">promise</span><span class="p">(</span><span class="s2">&#34;zhufeng&#34;</span><span class="p">,</span> <span class="mi">18</span><span class="p">).</span><span class="nx">then</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;done&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">timeEnd</span><span class="p">(</span><span class="s2">&#34;cost&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="tapable-ÂéüÁêÜ">tapable ÂéüÁêÜ
</h4><h3 id="Êèí‰ª∂-1">Êèí‰ª∂
</h3><p>Âú® webpack ÁöÑÊèí‰ª∂ÂºÄÂèë‰∏≠ÔºåÈÄâÊã©ÂêàÈÄÇÁöÑ hook Á±ªÂûãÂØπ‰∫éÂÆûÁé∞Êèí‰ª∂ÁöÑÂäüËÉΩÈùûÂ∏∏ÂÖ≥ÈîÆ„ÄÇ‰∏çÂêåÁöÑ hooks ÂÖÅËÆ∏Êèí‰ª∂Âú®ÁºñËØëÊµÅÁ®ãÁöÑ‰∏çÂêåÈò∂ÊÆµ‰ª•‰∏çÂêåÁöÑÊñπÂºè‰ªãÂÖ•„ÄÇ‰ª•‰∏ãÊòØ‰∏Ä‰∫õÂÖ∑‰ΩìÊèí‰ª∂Ê°à‰æãÔºåÂ±ïÁ§∫‰∫ÜÂÆÉ‰ª¨‰∏∫‰ªÄ‰πà‰ºöÈÄâÊã©Âú®Áõ∏Â∫îÁöÑ hook Á±ªÂûã‰∏≠Ê≥®ÂÜåÂáΩÊï∞Ôºö</p>
<ol>
<li>SyncHook Ê°à‰æã - <code>HtmlWebpackPlugin</code></li>
</ol>
<p><code>HtmlWebpackPlugin</code>‰ΩøÁî®<code>SyncHook</code>Êù•ÊìçÁ∫µÁîüÊàêÁöÑ HTML Êñá‰ª∂„ÄÇÂÆÉÂú®<code>compilation</code>ÁöÑ<code>html-webpack-plugin-before-html-generation</code>Èò∂ÊÆµÊ≥®ÂÜå‰∏Ä‰∏™ÂêåÊ≠•ÁöÑ hookÔºåËøôÂÖÅËÆ∏ÂÆÉÂú® HTML Êñá‰ª∂Ë¢´ÁîüÊàê‰πãÂâç‰øÆÊîπ HTML ÁöÑÂÜÖÂÆπ„ÄÇÁî±‰∫éËøô‰∏™ËøáÁ®ã‰∏çÈúÄË¶ÅÂºÇÊ≠•Êìç‰ΩúÔºå<code>SyncHook</code>Â∞±Ë∂≥Â§üÊª°Ë∂≥ÈúÄÊ±Ç„ÄÇ</p>
<ol start="2">
<li>SyncBailHook Ê°à‰æã - <code>MiniCssExtractPlugin</code></li>
</ol>
<p><code>MiniCssExtractPlugin</code>ÂèØËÉΩ‰ºöÂú®<code>normal-module-loader</code>Èò∂ÊÆµ‰ΩøÁî®<code>SyncBailHook</code>ÔºåËøôÊòØÂõ†‰∏∫ÂÆÉÈúÄË¶ÅÂà§Êñ≠ÊòØÂê¶Â∫îËØ•ÊèêÂèñ CSS Âà∞ÂçïÁã¨ÁöÑÊñá‰ª∂„ÄÇÂ¶ÇÊûúÊüê‰∏™Êù°‰ª∂Êª°Ë∂≥Ôºà‰æãÂ¶ÇÔºåÊ®°ÂùóÊòØ CSS Ê®°ÂùóÔºâÔºåÂÆÉÂèØ‰ª•Á´ãÂç≥ËøîÂõûÁªìÊûúÂπ∂ÈòªÊ≠¢ÂêéÁª≠Êèí‰ª∂ÁöÑÊâßË°åÔºåÂõ†Ê≠§<code>SyncBailHook</code>ÈÄÇÂêàËøôÁßçÂú∫ÊôØ„ÄÇ</p>
<ol start="3">
<li>SyncWaterfallHook Ê°à‰æã - <code>DefinePlugin</code></li>
</ol>
<p><code>DefinePlugin</code>‰ΩøÁî®<code>SyncWaterfallHook</code>Âú®Ê®°ÂùóÁöÑÊ∫ê‰ª£Á†Å‰∏≠ÊõøÊç¢ÂÖ®Â±ÄÂèòÈáè„ÄÇÂÆÉÂú®<code>compilation</code>ÁöÑ<code>compilation</code>Èò∂ÊÆµÊ≥®ÂÜåÂáΩÊï∞ÔºåÂÖÅËÆ∏ÂÆÉÊé•Êî∂Ââç‰∏Ä‰∏™Êèí‰ª∂Â§ÑÁêÜÁöÑÁªìÊûúÔºàÊ∫ê‰ª£Á†ÅÔºâÔºåÁÑ∂ÂêéÊ∑ªÂä†Êàñ‰øÆÊîπÂÆö‰πâÁöÑÂÖ®Â±ÄÂèòÈáèÔºåÂπ∂Â∞Ü‰øÆÊîπÂêéÁöÑÊ∫ê‰ª£Á†Å‰º†ÈÄíÁªôÈìæ‰∏≠ÁöÑ‰∏ã‰∏Ä‰∏™Êèí‰ª∂„ÄÇ</p>
<ol start="4">
<li>AsyncParallelHook Ê°à‰æã - <code>CopyWebpackPlugin</code></li>
</ol>
<p><code>CopyWebpackPlugin</code>ÈúÄË¶ÅÂ∞ÜÊñá‰ª∂‰ªé‰∏Ä‰∏™‰ΩçÁΩÆÂ§çÂà∂Âà∞Âè¶‰∏Ä‰∏™‰ΩçÁΩÆÔºåËøô‰∏™ËøáÁ®ãÂèØ‰ª•Âπ∂Ë°åÊâßË°å‰ª•ÊèêÈ´òÊïàÁéá„ÄÇÂõ†Ê≠§ÔºåÂÆÉÂú®<code>emit</code>Èò∂ÊÆµ‰ΩøÁî®<code>AsyncParallelHook</code>ÔºåËøôÊ†∑ÂèØ‰ª•ÂêåÊó∂ÂºÄÂßãÂ§çÂà∂Â§ö‰∏™Êñá‰ª∂ËÄå‰∏çÈòªÂ°ûÁºñËØëËøáÁ®ã„ÄÇ</p>
<ol start="5">
<li>AsyncSeriesHook Ê°à‰æã - <code>CleanWebpackPlugin</code></li>
</ol>
<p><code>CleanWebpackPlugin</code>Âú®ÁºñËØëÂºÄÂßã‰πãÂâçÈúÄË¶ÅÊ∏ÖÈô§<code>output</code>ÁõÆÂΩï‰∏≠ÁöÑÊóßÊñá‰ª∂„ÄÇËøô‰∏™ËøáÁ®ãÂ∫îËØ•Âú®ÂÖ∂‰ªñÂºÇÊ≠•‰ªªÂä°ÂºÄÂßã‰πãÂâçÂÆåÊàêÔºåÂõ†Ê≠§ÂÆÉ‰ΩøÁî®<code>AsyncSeriesHook</code>Âú®<code>compilation</code>ÁöÑ<code>emit</code>Èò∂ÊÆµÊ≥®ÂÜå‰∏Ä‰∏™ÂºÇÊ≠•ÂáΩÊï∞ÔºåÁ°Æ‰øùÊ∏ÖÈô§Êìç‰ΩúÂÆåÊàêÂêéÂÜçÊâßË°åÂêéÁª≠Êìç‰Ωú„ÄÇ</p>
<ol start="6">
<li>AsyncSeriesWaterfallHook Ê°à‰æã - <code>TerserWebpackPlugin</code></li>
</ol>
<p><code>TerserWebpackPlugin</code>Áî®‰∫éÂéãÁº© JavaScript ‰ª£Á†Å„ÄÇÂÆÉÂèØËÉΩÂú®<code>optimize-chunk-assets</code>Èò∂ÊÆµ‰ΩøÁî®<code>AsyncSeriesWaterfallHook</code>ÔºåËøôÊ†∑ÂèØ‰ª•Êé•Êî∂Âà∞Ââç‰∏Ä‰∏™Êèí‰ª∂Â§ÑÁêÜÁöÑ‰ª£Á†ÅÔºàÂ¶ÇÊûúÊúâÁöÑËØùÔºâÔºåÁÑ∂ÂêéËøõË°åÂéãÁº©Êìç‰ΩúÔºåÂπ∂Â∞ÜÁªìÊûú‰º†ÈÄíÁªôÈìæ‰∏≠ÁöÑ‰∏ã‰∏Ä‰∏™Êèí‰ª∂„ÄÇÁî±‰∫éËøô‰∏™ËøáÁ®ã‰∏≠ÊØè‰∏™Êèí‰ª∂ÁöÑËæìÂá∫ÈÉΩÂèØËÉΩÊàê‰∏∫‰∏ã‰∏Ä‰∏™Êèí‰ª∂ÁöÑËæìÂÖ•ÔºåÊâÄ‰ª•ÈÄâÊã©<code>AsyncSeriesWaterfallHook</code>ÊòØÂêàÈÄÇÁöÑ„ÄÇ</p>
<p>Ëøô‰∫õÊ°à‰æãÂ±ïÁ§∫‰∫Ü‰∏çÂêå hooks Á±ªÂûãÂú®ÂÆûÁé∞ webpack Êèí‰ª∂Êó∂ÁöÑÂ∫îÁî®„ÄÇÈÄâÊã©Ê≠£Á°ÆÁöÑ hook Á±ªÂûãÂØπ‰∫éÊèí‰ª∂ËÉΩÂ§üÊ≠£Á°ÆÂπ∂È´òÊïàÂú∞Â∑•‰ΩúËá≥ÂÖ≥ÈáçË¶Å„ÄÇÈÄöËøáËøô‰∫õ hooksÔºåÊèí‰ª∂ËÉΩÂ§üÂú®ÁºñËØëÊµÅÁ®ãÁöÑÈÄÇÂΩìÈò∂ÊÆµ‰ª•ÊúüÊúõÁöÑÊñπÂºèÊâßË°åÊìç‰ΩúÔºå‰ªéËÄåÂÆûÁé∞Â§çÊùÇÁöÑÊûÑÂª∫Âíå‰ºòÂåñ‰ªªÂä°„ÄÇ</p>
<p>Êèí‰ª∂ÂêëÁ¨¨‰∏âÊñπÂºÄÂèëËÄÖÊèê‰æõ‰∫Ü webpack ÂºïÊìé‰∏≠ÂÆåÊï¥ÁöÑËÉΩÂäõ„ÄÇ‰ΩøÁî®Èò∂ÊÆµÂºèÁöÑÊûÑÂª∫ÂõûË∞ÉÔºåÂºÄÂèëËÄÖÂèØ‰ª•ÂºïÂÖ•ÂÆÉ‰ª¨Ëá™Â∑±ÁöÑË°å‰∏∫Âà∞ webpack ÊûÑÂª∫ÊµÅÁ®ã‰∏≠„ÄÇwebpack ÂÜÖÈÉ®‰πüÊòØÈÄöËøáÂ§ßÈáèÂÜÖÈÉ®Êèí‰ª∂ÂÆûÁé∞ÁöÑÔºåÊèí‰ª∂Âá†‰πéËÉΩÂ§ü‰ªªÊÑèÊõ¥Êîπ webpack ÁºñËØëÁªìÊûú„ÄÇ</p>
<p>Âú® webpack ‰∏≠Ôºå‰∏çÂêåÁ±ªÂûãÁöÑÂÆû‰æãÂØπË±°ÂæàÂ§öÔºåÂØπË±°‰∏äÁöÑÈí©Â≠ê‰πüÊúâÂæàÂ§ö„ÄÇ</p>
<p>webpack ÂÜÖÈÉ®ÂèØ‰ª•Âä†ËΩΩÊèí‰ª∂ÁöÑÂ∏∏Áî®ÂØπË±°Ôºö</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">ÂØπË±°</th>
          <th style="text-align: left">Èí©Â≠ê</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><a class="link" href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js"  target="_blank" rel="noopener"
    >Compiler</a></td>
          <td style="text-align: left">run,compile,compilation,make,emit,done&hellip;</td>
      </tr>
      <tr>
          <td style="text-align: left"><a class="link" href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js"  target="_blank" rel="noopener"
    >Compilation</a></td>
          <td style="text-align: left">buildModule,normalModuleLoader,succeedModule,finishModules,seal,optimize,after-seal&hellip;</td>
      </tr>
      <tr>
          <td style="text-align: left"><a class="link" href="https://github.com/webpack/webpack/blob/master/lib/ModuleFactory.js"  target="_blank" rel="noopener"
    >Module Factory</a></td>
          <td style="text-align: left">beforeResolver,afterResolver,module,parser&hellip;</td>
      </tr>
      <tr>
          <td style="text-align: left">Module</td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"><a class="link" href="https://github.com/webpack/webpack/blob/master/lib/Parser.js"  target="_blank" rel="noopener"
    >Parser</a></td>
          <td style="text-align: left">program,statement,call,expression&hellip;</td>
      </tr>
      <tr>
          <td style="text-align: left"><a class="link" href="https://github.com/webpack/webpack/blob/master/lib/Template.js"  target="_blank" rel="noopener"
    >Template</a></td>
          <td style="text-align: left">hash,bootstrap,localVars,render&hellip;</td>
      </tr>
  </tbody>
</table></div>
<p><a class="link" href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js"  target="_blank" rel="noopener"
    >Compiler</a>(ÁºñËØëÂô®ÂØπË±°)</p>
<ul>
<li>runÔºöÂºÄÂêØÁºñËØë</li>
<li>compileÔºöÂºÄÂßãÁºñËØë</li>
<li>compilationÔºöÂºÄÂßãÂàõÂª∫‰∏ÄÊ¨°Êñ∞ÁöÑÁºñËØë</li>
<li>makeÔºöÊûÑÂª∫ÂÖ•Âè£</li>
<li>emitÔºöÂáÜÂ§áËæìÂá∫ÁªìÊûú</li>
<li>doneÔºöÂÆåÊàêÁºñËØëÔºåÊòØ‰∏Ä‰∏™ asyncSeriesHook</li>
</ul>
<p><a class="link" href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js"  target="_blank" rel="noopener"
    >Compilation</a>ÔºàÁºñËØëÂô®ÂØπË±°ÔºâÔºåÊØèÂΩìÂºÄÂêØ‰∏ÄÊ¨°Êñ∞ÁöÑÁºñËØëÂ∞±ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ compilation</p>
<ul>
<li>buildModuleÔºöÊûÑÂª∫Ê®°Âùó</li>
<li>normalModuleLoaderÔºöÂä†ËΩΩÊôÆÈÄöÊ®°Âùó</li>
<li>succeedModuleÔºöÊàêÂäüÁºñËØë‰∏Ä‰∏™Ê®°Âùó</li>
<li>finishModulesÔºöÊâÄÊúâÊ®°ÂùóÈÉΩÁºñËØëÂÆåÊàê</li>
<li>sealÔºöÂ∞ÅË£Ö‰ª£Á†ÅÂùó</li>
<li>optimizeÔºö‰ºòÂåñ</li>
<li>after-sealÔºöÂ∞ÅË£ÖÂÆåÊàê</li>
</ul>
<p><a class="link" href="https://github.com/webpack/webpack/blob/master/lib/ModuleFactory.js"  target="_blank" rel="noopener"
    >Module Factory</a> ÔºàÊ®°ÂùóÂ∑•ÂéÇÔºâ</p>
<ul>
<li>beforeResolverÔºöËß£Êûê‰πãÂâçÔºàËß£ÊûêÔºöÊãøÂà∞ÂØπÂ∫îÊ®°ÂùóÁöÑÈúÄË¶ÅË¢´ÈÇ£‰∫õ loader Â§ÑÁêÜÁöÑ loader Êñá‰ª∂ÁöÑË∑ØÂæÑÂíåËØ•Ê®°ÂùóËµÑÊ∫êÊú¨Ë∫´Ôºâ</li>
<li>afterResolverÔºöËß£ÊûêÂêéÔºàËß£ÊûêÔºöÊãøÂà∞ÂØπÂ∫îÊ®°ÂùóÁöÑÈúÄË¶ÅË¢´ÈÇ£‰∫õ loader Â§ÑÁêÜÁöÑ loader Êñá‰ª∂ÁöÑË∑ØÂæÑÂíåËØ•Ê®°ÂùóËµÑÊ∫êÊú¨Ë∫´Ôºâ</li>
<li>moduleÔºöÂàõÂª∫Ê®°Âùó</li>
<li>parserÔºöÈÄöËøáËØ≠Ê≥ïÊ†ëËß£ÊûêÊ®°Âùó‰æùËµñ</li>
</ul>
<p><a class="link" href="https://github.com/webpack/webpack/blob/master/lib/Parser.js"  target="_blank" rel="noopener"
    >Parser</a> ÔºàËß£ÊûêËØ≠Ê≥ïÊ†ëÔºâ</p>
<p>ÈÅçÂéÜËØ≠Ê≥ïÊ†ëÊó∂ÈÅáÂà∞‰∏ãÈù¢Ëøô‰∫õËäÇÁÇπÂ∞±Ëß¶ÂèëËøô‰∫õËäÇÁÇπÂêçÂáΩÊï∞</p>
<ul>
<li>program</li>
<li>statement</li>
<li>call</li>
<li>expression</li>
</ul>
<p><a class="link" href="https://github.com/webpack/webpack/blob/master/lib/Template.js"  target="_blank" rel="noopener"
    >Template</a>ÔºåÊ†πÊçÆÊ®°ÊùøÁîüÊàêÊúÄÂêéÁöÑÊ∫ê‰ª£Á†Å</p>
<ul>
<li>hash</li>
<li>bootstrap</li>
<li>localVars</li>
<li>render</li>
</ul>
<p><strong>ÂàõÂª∫Êèí‰ª∂</strong></p>
<ul>
<li>Êèí‰ª∂ÊòØ‰∏Ä‰∏™Á±ª</li>
<li>Á±ª‰∏äÊúâ‰∏Ä‰∏™ apply ÁöÑÂÆû‰æãÊñπÊ≥ï</li>
<li>apply ÁöÑÂèÇÊï∞ÊòØ compiler</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">DonePlugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">constructor</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">apply</span><span class="p">(</span><span class="nx">compiler</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">DonePlugin</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Êèí‰ª∂ÂºÄÂèë‰∏≠ÊúÄÈáçË¶ÅÁöÑ‰∏§‰∏™ËµÑÊ∫êÂ∞±ÊòØ<code>compiler</code>Âíå<code>compilation</code>ÂØπË±°„ÄÇ</p>
<ul>
<li>compiler ÂØπË±°‰ª£Ë°®‰∫ÜÂÆåÊï¥ÁöÑ webpack ÁéØÂ¢ÉÈÖçÁΩÆ„ÄÇËøô‰∏™ÂØπË±°Âú®ÂêØÂä® webpack Êó∂Ë¢´‰∏ÄÊ¨°ÊÄßÂª∫Á´ãÔºåÂπ∂ÈÖçÁΩÆÂ•ΩÊâÄÊúâÂèØÊìç‰ΩúÁöÑËÆæÁΩÆÔºåÂåÖÊã¨ optionsÔºåloader Âíå plugin„ÄÇÂΩìÂú® webpack ÁéØÂ¢É‰∏≠Â∫îÁî®‰∏Ä‰∏™Êèí‰ª∂Êó∂ÔºåÊèí‰ª∂Â∞ÜÊî∂Âà∞Ê≠§ compiler ÂØπË±°ÁöÑÂºïÁî®„ÄÇÂèØ‰ª•‰ΩøÁî®ÂÆÉÊù•ËÆøÈóÆ webpack ÁöÑ‰∏ªÁéØÂ¢É„ÄÇ</li>
<li>compilation ÂØπË±°‰ª£Ë°®‰∫Ü‰∏ÄÊ¨°ËµÑÊ∫êÁâàÊú¨ÊûÑÂª∫„ÄÇÂΩìËøêË°å webpack ÂºÄÂèëÁéØÂ¢É‰∏≠Èó¥‰ª∂Êó∂ÔºåÊØèÂΩìÊ£ÄÊµãÂà∞‰∏Ä‰∏™Êñá‰ª∂ÂèòÂåñÔºåÂ∞±‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ compilationÔºå‰ªéËÄåÁîüÊàê‰∏ÄÁªÑÊñ∞ÁöÑÁºñËØëËµÑÊ∫ê„ÄÇ‰∏Ä‰∏™ compilation ÂØπË±°Ë°®Áé∞‰∫ÜÂΩìÂâçÁöÑÊ®°ÂùóËµÑÊ∫ê„ÄÅÁºñËØëÁîüÊàêËµÑÊ∫ê„ÄÅÂèòÂåñÁöÑÊñá‰ª∂„ÄÅ‰ª•ÂèäË¢´Ë∑üË∏™‰æùËµñÁöÑÁä∂ÊÄÅ‰ø°ÊÅØ„ÄÇcompilation ÂØπË±°‰πüÊèê‰æõ‰∫ÜÂæàÂ§öÂÖ≥ÈîÆÊó∂Êú∫ÁöÑÂõûË∞ÉÔºå‰ª•‰æõÊèí‰ª∂ÂÅöËá™ÂÆö‰πâÂ§ÑÁêÜÊó∂ÈÄâÊã©‰ΩøÁî®„ÄÇ</li>
</ul>
<p><strong>compiler ‰∏äÁöÑÊèí‰ª∂Ôºö</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">DonePlugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">apply</span><span class="p">(</span><span class="nx">compiler</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂêåÊ≠•ÂõûË∞É
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">compiler</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">done</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;DonePlugin&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">stats</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;DonePlugin.tap&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂºÇÊ≠•ÂõûË∞É
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">compiler</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">done</span><span class="p">.</span><span class="nx">tapAsync</span><span class="p">(</span><span class="s2">&#34;DonePlugin&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">stats</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;DonePlugin.tapAsync&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">DonePlugin</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>compilation ‰∏äÁöÑÊèí‰ª∂Ôºö</strong></p>
<p>Ë¶ÅËé∑Âèñ compilation ÂÆû‰æãÁöÑËØùÔºåÈúÄË¶ÅÈÄöËøá compiler.hooks.compilation Ëøô‰∏™ hook Êù•Ëé∑ÂèñÔºåËÆ¢ÈòÖËøô‰∏™ hook ÂêéÔºåËØ•ËÆ¢ÈòÖÂáΩÊï∞ÁöÑÂõûË∞ÉÂèÇÊï∞Â∞±ÊòØÊé•Êî∂ webpack ÂÜÖÈÉ®‰º†ÈÄíÁöÑ compilation ÂÆû‰æã„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Âú®ÁºñËØëÂÆåÊàêÂêéÔºåÂ∏åÊúõÊäädistÁõÆÂΩï‰∏ãÊâÄÊúâÁöÑÊñá‰ª∂ÊâìÂú®‰∏Ä‰∏™ÂéãÁº©ÂåÖÔºå‰øùÂ≠òÂà∞ËæìÂá∫ÁõÆÂΩïÈáå
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">jszip</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;jszip&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">RawSource</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;webpack-sources&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">ArchivePlugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">apply</span><span class="p">(</span><span class="nx">compiler</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">compiler</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">compilation</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;ArchivePlugin&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">compilation</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">compilation</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">processAssets</span><span class="p">.</span><span class="nx">tapAsync</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;ArchivePlugin&#34;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nx">assets</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="kr">const</span> <span class="nx">zip</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jszip</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">          <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">pathname</span> <span class="k">in</span> <span class="nx">assets</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kr">const</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">assets</span><span class="p">[</span><span class="nx">pathname</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="kr">const</span> <span class="nx">sourceCode</span> <span class="o">=</span> <span class="nx">source</span><span class="p">.</span><span class="nx">source</span><span class="p">();</span> <span class="c1">//ËøîÂõûÊ∫ê‰ª£Á†ÅÂ≠óÁ¨¶‰∏≤
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="nx">pathname</span><span class="p">,</span> <span class="nx">sourceCode</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="k">return</span> <span class="nx">zip</span><span class="p">.</span><span class="nx">generateAsync</span><span class="p">({</span> <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;nodebuffer&#34;</span> <span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">content</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">assets</span><span class="p">[</span><span class="sb">`</span><span class="si">${</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span><span class="si">}</span><span class="sb">.zip`</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RawSource</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="cm">/*  assets[`${Date.now()}.zip`] = {
</span></span></span><span class="line"><span class="cl"><span class="cm">            source() {
</span></span></span><span class="line"><span class="cl"><span class="cm">              return content;
</span></span></span><span class="line"><span class="cl"><span class="cm">            }
</span></span></span><span class="line"><span class="cl"><span class="cm">          } */</span>
</span></span><span class="line"><span class="cl">          <span class="p">});</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">ArchivePlugin</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="Ëá™Âä®Â§ñËÅîÊèí‰ª∂"><strong>Ëá™Âä®Â§ñËÅîÊèí‰ª∂</strong>
</h4><ul>
<li><a class="link" href="https://github.com/webpack/webpack/blob/0d4607c68e04a659fa58499e1332c97d5376368a/lib/ExternalsPlugin.js"  target="_blank" rel="noopener"
    >ExternalsPlugin.js</a></li>
<li><a class="link" href="https://github.com/webpack/webpack/blob/eeafeee32ad5a1469e39ce66df671e3710332608/lib/ExternalModuleFactoryPlugin.js"  target="_blank" rel="noopener"
    >ExternalModuleFactoryPlugin</a></li>
<li><a class="link" href="https://github.com/webpack/webpack/blob/eeafeee32ad5a1469e39ce66df671e3710332608/lib/ExternalModule.js"  target="_blank" rel="noopener"
    >ExternalModule.js</a></li>
<li><a class="link" href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/NormalModuleFactory.js#L87"  target="_blank" rel="noopener"
    >parser</a></li>
<li><a class="link" href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/NormalModuleFactory.js#L66"  target="_blank" rel="noopener"
    >factory</a></li>
<li><a class="link" href="https://github.com/jantimon/html-webpack-plugin/blob/v3.2.0/index.js#L62"  target="_blank" rel="noopener"
    >htmlWebpackPluginAlterAssetTags</a></li>
</ul>
<p>‰º†ÁªüÂú® wabpack ‰∏≠ÈÖçÁΩÆ cdnÔºå‰∏ÄËà¨Âú®È°πÁõÆ‰∏≠ÂºïÂÖ•‰∏Ä‰∫õËëóÂêçÁöÑÂÖ¨ÂÖ±Â∫ìÁöÑËØùÔºåÂ¶ÇÊûú‰∏çÂÅö‰ªª‰ΩïÂ§ÑÁêÜÔºåËØ•ÂÖ¨ÂÖ±Â∫ìÁöÑÊ∫ê‰ª£Á†Å‰ºöË¢´‰∏ÄÂπ∂ÊâìÂåÖÂà∞ÊúÄÁªàÁîüÊàêÁöÑÊñá‰ª∂‰∏≠ÔºåÂ¢ûÂä†ÊâìÂåÖÊñá‰ª∂ÁöÑ‰ΩìÁßØ„ÄÇ ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÂèØ‰ª•ÈÄöËøá cdn Êù•Ëß£ÂÜ≥Ôºå‰∏ÄËà¨Ê≠•È™§Â¶Ç‰∏ãÔºö</p>
<ol>
<li>
<p>Âú® html-webpack-plugin Êèí‰ª∂ÁöÑÊ®°Êùø html ‰∏≠Ê∑ªÂä† cdn Â§ñÈìæËÑöÊú¨Ôºå‰ªñ‰ª¨‰ºöÂú®ÂÖ®Â±Ä window ÂØπË±°‰∏äÊåÇËΩΩÂ±ûÊÄßÔºåÊØîÂ¶Ç vueÔºå_Ôºå$Á≠âÔºåËá™Â∑±ÂøÖÈ°ªÁü•ÈÅìËøô‰∏™ÂèòÈáèÂêçÂ≠óÊâçË°å</p>
</li>
<li>
<p>Âú® webpakc ÈÖçÁΩÆ‰∏≠ÁöÑ externals ÈÄâÈ°π‰∏≠ÈÖçÁΩÆÈúÄË¶ÅÊéíÈô§ÁöÑ‰æùËµñÂ∫ìÔºåÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;externals&#34;</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;jquery&#39;</span><span class="o">:</span><span class="s1">&#39;$&#39;</span><span class="p">,</span>  <span class="c1">// ÂΩìÈ°πÁõÆ‰∏≠ÂºïÂÖ•jqueryÂêéÔºåÂºïÂÖ•ÁöÑjqueryÂØπÂ∫îÁöÑÂèòÈáèÂêçÂ≠ó‰∏çÂÜçÂéªnode_modules‰∏≠Êâæ‰∫ÜÔºåÁõ¥Êé•Âéªwindow.$‰∏äÊâæ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="s1">&#39;lodash&#39;</span><span class="o">:</span><span class="s1">&#39;_&#39;</span><span class="err">Ôºå</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;vue&#39;</span><span class="o">:</span><span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p>Áé∞Âú®Ëá™Â∑±Êù•ÂÜô‰∏Ä‰∏™Êèí‰ª∂Â∞Ü‰∏äÈù¢ÁöÑ‰∏§Ê≠•ÈÄöËøáÊèí‰ª∂Êù•ÂÆûÁé∞„ÄÇ</p>
<p>‰ΩøÁî®Êèí‰ª∂Â¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">plugins</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="nx">AutoExternalPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">            <span class="nx">jquery</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">url</span><span class="o">:</span><span class="s1">&#39;http://xxx.cdn/xxx/xxx.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">variable</span><span class="o">:</span><span class="s1">&#39;$&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="c1">// ....
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        	<span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËØ•Êèí‰ª∂Èô§‰∫ÜË¶ÅËØÜÂà´Ê∫êÁ†ÅÂÜÖÈÉ®ÊòØÂê¶ÂºïÂÖ•ÈúÄË¶ÅË¢´ÊéíÈô§ÊâìÂåÖÁöÑÂ∫ìÔºåËøòÈúÄË¶ÅÂíå‰ΩøÁî® html-webpack-plugin ÁîüÊàêÁöÑ html Ê®°ÊùøÂÜÖÂÆπËøõË°å‰∫§‰∫í„ÄÇ</p>
<ul>
<li><code>Ê£ÄÊµã‰æùËµñ</code> ÂΩìÊ£ÄÊµãÂà∞Êúâ<code>importÊàñËÄÖrequire</code>ËØ•ÊåáÂÆöÁöÑ<code>library</code>Êó∂ÔºåÂ∞ÜÂÖ∂ËÆæÁΩÆ‰∏∫‰∏çÊâìÂåÖÁ±ª‰ºº<code>exteral</code>,Âπ∂Âú®ÊåáÂÆöÊ®°Áâà‰∏≠Âä†ÂÖ• script,ÈÇ£‰πàÂ¶Ç‰ΩïÊ£ÄÊµãÊüê‰∏™Ê®°Âùó‰∏≠ÈÄöËøá import ÊàñËÄÖ require ÊñπÊ≥ïÂºïÂÖ•‰∫ÜÈúÄË¶ÅÊéíÈô§ÁöÑÊ®°Âùó‰∫ÜÔºüËøôÈáåÂ∞±Áî®<code>Parser</code></li>
<li><code>external‰æùËµñ</code> ÈúÄË¶Å‰∫ÜËß£ external ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºåwebpack ÁöÑ external ÊòØÈÄöËøáÊèí‰ª∂<code>ExternalsPlugin</code>ÂÆûÁé∞ÁöÑÔºåExternalsPlugin ÈÄöËøá<code>tap</code> <code>NormalModuleFactory</code> Âú®ÊØèÊ¨°ÂàõÂª∫ Module ÁöÑÊó∂ÂÄôÂà§Êñ≠ÊòØÂê¶ÊòØ<code>ExternalModule</code>ÔºåÂ¶ÇÊûúÊòØÂàôÂàõÂª∫Â§ñÈÉ®Ê®°ÂùóÔºåÂ¶ÇÊûú‰∏çÊòØÂàôÂàõÂª∫ÊôÆÈÄöÊ®°ÂùóÔºåÊâÄ‰ª•Â∞±Áî®Âà∞‰∫Ü AsyncSeriesBailHookss</li>
<li>webpack4 Âä†ÂÖ•‰∫ÜÊ®°ÂùóÁ±ªÂûã‰πãÂêéÔºå<code>Parser</code>Ëé∑ÂèñÈúÄË¶ÅÊåáÂÆöÁ±ªÂûã moduleType,‰∏ÄËà¨‰ΩøÁî®<code>javascript/auto</code>Âç≥ÂèØ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">ExternalModule</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;webpack&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;html-webpack-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">AutoExternalPlugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">constructor</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">externalModules</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">importedModules</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Set</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">apply</span><span class="p">(</span><span class="nx">compiler</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Ëé∑ÂèñÂà∞ÊôÆÈÄöÊ®°ÂùóÂ∑•ÂéÇ,Ê≠§Â∑•ÂéÇÂú®CompilerÂàõÂª∫ÁöÑÊó∂ÂÄôÂ∞±Áõ¥Êé•ÂàõÂª∫Â•Ω‰∫Ü„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//È•≠Â∫ó=Compiler ÊãõËÅò‰∏Ä‰∏™Âé®Â∏à normalModuleFactory
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//ÊØèÂΩìÊé•Âà∞ËÆ¢ÂçïÔºåÈ°æÂÆ¢ÁÇπ‰∏™ËõãÁÇíÈ•≠ÔºåÊàñËÄÖËØ¥ÂàõÂª∫‰∏Ä‰∏™Ê®°ÂùóÔºå‰ºöÁî±Âé®Â∏ànormalModuleFactoryÂàõÂª∫Ëøô‰∏™Ê®°Âùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">compiler</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">normalModuleFactory</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;AutoExternalPlugin&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nx">normalModuleFactory</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//Ê®°ÂùóÂ∑•ÂéÇ‰ºöË¥üË¥£ÂàõÂª∫Ê®°ÂùóÔºåÂàõÂª∫ÂÆåÊ®°ÂùóË¶ÅÁºñËØëÊ®°ÂùóÔºåÂ∞±ÊòØÊääÊ®°ÂùóÊ∫êÁ†ÅËΩ¨ÊàêËØ≠Ê≥ïÊ†ëASTÔºåÁÑ∂ÂêéÈÅçÂéÜËØ≠Ê≥ïÊ†ëÊâæ‰æùËµñ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//Âú®ÈÅçÂéÜËØ≠Ê≥ïÊ†ëÁöÑÊó∂ÂÄôÔºåÈÅáÂà∞‰∏çÂêåÁöÑÁÇπËäÇ‰ºöËß¶Âèë‰∏çÂêåÁöÑ‰∫ã‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">normalModuleFactory</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">parser</span>
</span></span><span class="line"><span class="cl">          <span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="s2">&#34;javascript/auto&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;AutoExternalPlugin&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">parser</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">parser</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="kr">import</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="s2">&#34;AutoExternalPlugin&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="nx">statement</span><span class="p">,</span> <span class="nx">source</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">externalModules</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">source</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                  <span class="k">this</span><span class="p">.</span><span class="nx">importedModules</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">source</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">              <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//callÊòØ‰∏Ä‰∏™hookMap {key:Hook} Âà§Êñ≠callËøô‰∏™hookMapÈáåÊúâÊ≤°ÊúârequireËøô‰∏™keyÂØπÂ∫îÁöÑhook,Â¶ÇÊûúÊúâËøîÂõûÔºåÊ≤°ÊúâÂàôÂàõÂª∫ÂÜçËøîÂõû
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">parser</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">call</span>
</span></span><span class="line"><span class="cl">              <span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="s2">&#34;require&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">              <span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;AutoExternalPlugin&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">expression</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kr">const</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">expression</span><span class="p">.</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">externalModules</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">source</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                  <span class="k">this</span><span class="p">.</span><span class="nx">importedModules</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">source</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">              <span class="p">});</span>
</span></span><span class="line"><span class="cl">          <span class="p">});</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//2.ÊîπÈÄ†Ê®°ÂùóÁöÑÁîü‰∫ßËøáÁ®ãÔºåÊã¶Êà™ÁîüÊàêËøáÁ®ãÔºåÂà§Êñ≠Â¶ÇÊûúÊòØÂ§ñÈÉ®Ê®°ÂùóÁöÑËØùÔºåÁîü‰∫ß‰∏Ä‰∏™Â§ñÈÉ®Ê®°ÂùóÂπ∂ËøîÂõû
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">normalModuleFactory</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">factorize</span><span class="p">.</span><span class="nx">tapAsync</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;AutoExternalPlugin&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nx">resolveData</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kr">const</span> <span class="p">{</span> <span class="nx">request</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">resolveData</span><span class="p">;</span> <span class="c1">//Ëé∑ÂèñÂä†ËΩΩÁöÑÊ®°ÂùóÂêç request = jquery
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">//Â¶ÇÊûúËøô‰∏™Ë¶ÅÂàõÂª∫ÁöÑÊ®°ÂùóÊòØÂ§ñÈÉ®Ê®°ÂùóÁöÑËØù
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">externalModules</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">request</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="kd">let</span> <span class="p">{</span> <span class="nx">variable</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">request</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">              <span class="c1">// ExternalModuleÂ∞±ÊòØÂéüÁîüÁöÑexternalÈÖçÁΩÆÈ°πÂú®Ê∫êÁ†Å‰∏≠‰ΩøÁî®Âà∞ÁöÑÂ∑•ÂÖ∑Á±ª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>              <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="k">new</span> <span class="nx">ExternalModule</span><span class="p">(</span><span class="nx">variable</span><span class="p">,</span> <span class="s2">&#34;window&#34;</span><span class="p">,</span> <span class="nx">request</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//3.Âêë‰∫ßÂá∫ÁöÑhtmlÈáåÊèíÂÖ•CDNÁöÑËÑöÊú¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">compiler</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">compilation</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;AutoExternalPlugin&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">compilation</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">HtmlWebpackPlugin</span><span class="p">.</span><span class="nx">getHooks</span><span class="p">(</span><span class="nx">compilation</span><span class="p">).</span><span class="nx">alterAssetTags</span><span class="p">.</span><span class="nx">tapAsync</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;AutoExternalPlugin&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="kr">const</span> <span class="p">{</span> <span class="nx">assetTags</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">key</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">importedModules</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">assetTags</span><span class="p">.</span><span class="nx">scripts</span><span class="p">.</span><span class="nx">unshift</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">              <span class="nx">tagName</span><span class="o">:</span> <span class="s2">&#34;script&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">voidTag</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">attributes</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">defer</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">src</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">url</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">});</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">assetTags</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">AutoExternalPlugin</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ÂÆûÁé∞ÊÄùË∑Ø
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 1.ÊâæÂà∞Êú¨È°πÁõÆ‰∏≠ÁöÑÊâÄÊúâ‰æùËµñÁöÑÊ®°ÂùóÔºåÁúãÁúãÂì™‰∫õÂú®AutoExternalPluginÈÖçÁΩÆ‰∫Ü
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ‰πüÂ∞±ÊòØËØ¥ÁúãÁúãÈ°πÁõÆÈáåÊúâÊ≤°Êúâ‰ΩøÁî®jqueryÂíålodash
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Âõ†‰∏∫Áî®Âà∞‰∫ÜÊâçÈúÄË¶ÅÂ§ÑÁêÜ‰∏∫Â§ñÈÉ®Ê®°ÂùóÔºåÂ¶ÇÊûúÊ≤°ÊúâÁî®ËøáÂ∞±‰∏çÈúÄË¶Å‰ªª‰ΩïÂ§ÑÁêÜ
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 2.Â¶Ç‰ΩïÊâæÊú¨È°πÁõÆ‰æùËµñ‰∫ÜÂì™‰∫õÊ®°Âùó?
</span></span></span><span class="line"><span class="cl"><span class="cm"> * import &#39;lodash&#39;
</span></span></span><span class="line"><span class="cl"><span class="cm"> * require(&#39;query&#39;); callExpression
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ÊâÄ‰ª•ÊàëË¶ÅÊâæÈ°πÁõÆ‰∏≠ÁöÑimportÂíårequireËØ≠Âè•ÔºåÊàñËÄÖËØ¥ËäÇÁÇπ
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Compiler=&gt;NormalModuleFactory=&gt;Parser=&gt;import/require
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * HtmlWebpackPluginÊ†∏ÂøÉÂäüËÉΩ
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 1.ÁºñËØëHTMLÊ®°Êùø
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 2.Ê†πÊçÆwebpack‰º†ÈÄíËøáÊù•ÁöÑËµÑÊ∫ê‰ø°ÊÅØassets,ÁîüÊàêÊ†áÁ≠æ.js=&gt;script,css=&gt;link
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 3.ÊääÊ†áÁ≠æÊ≥®ÂÖ•HTMLÊñá‰ª∂‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 4.ÂÜôÂÖ•Á°¨Áõò emitÂ∞±ÊòØÊåáÂÜôÂÖ•Á°¨Áõò
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>html-webpack-plugin ËØ•Êèí‰ª∂‰ºöÂêë compilation ‰∏äÊåÇËΩΩ‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑ hook ÂÆû‰æã„ÄÇ</p>
<h2 id="asyncqueue">AsyncQueue
</h2><p>ÂºÇÊ≠•ÈòüÂàó„ÄÇÈÄöËøáÂÆÉÂèØ‰ª•ÂÆûÁé∞Âπ∂Ë°åÊâßË°å‰ªªÂä°„ÄÇ</p>
<p>Âú® <strong>Webpack</strong> ‰∏≠Ôºå<strong>AsyncQueue</strong> ÊòØ‰∏Ä‰∏™Áî®‰∫éÂ§ÑÁêÜÂºÇÊ≠•‰ªªÂä°ÁöÑÂÜÖÈÉ®Êú∫Âà∂„ÄÇÂÆÉÁÆ°ÁêÜÂíåË∞ÉÂ∫¶ÂºÇÊ≠•Êìç‰ΩúÔºåÂπ∂Á°Æ‰øùËøô‰∫õÊìç‰ΩúÂú®ÂêàÈÄÇÁöÑÊó∂Êú∫ÊâßË°å„ÄÇWebpack ÈúÄË¶ÅÂú®ÊûÑÂª∫ÊµÅÁ®ã‰∏≠Â§ÑÁêÜÂ§ßÈáèÁöÑÂºÇÊ≠•‰ªªÂä°ÔºàÂ¶ÇÊ®°ÂùóËß£Êûê„ÄÅÊñá‰ª∂ËØªÂèñ„ÄÅÊèí‰ª∂Êìç‰ΩúÁ≠âÔºâÔºåËÄå <strong>AsyncQueue</strong> ÈÄöËøá‰∏ÄÁßçÈòüÂàóÊú∫Âà∂ÔºåÂ∏ÆÂä©ÁÆ°ÁêÜËøô‰∫õ‰ªªÂä°ÔºåÁ°Æ‰øùÂÆÉ‰ª¨ÊåâÁÖß‰∏ÄÂÆöÈ°∫Â∫èÊâßË°åÔºåÂπ∂ÈÅøÂÖçÈáçÂ§çÊìç‰Ωú„ÄÇ</p>
<p><strong>AsyncQueue ÁöÑÊ†∏ÂøÉÊ¶ÇÂøµ</strong></p>
<p><strong>AsyncQueue</strong> ÂÆûË¥®‰∏äÊòØ‰∏Ä‰∏™‰ªªÂä°ÈòüÂàóÁ≥ªÁªüÔºåÂÆÉÁöÑ‰∏ªË¶Å‰ΩúÁî®ÊòØÔºö</p>
<ul>
<li><strong>ÁºìÂ≠ò‰ªªÂä°ÁªìÊûú</strong>ÔºöÂØπÂ∑≤ÁªèÂ§ÑÁêÜËøáÁöÑ‰ªªÂä°ËøõË°åÁºìÂ≠òÔºåÈÅøÂÖçÈáçÂ§çÊâßË°å„ÄÇ</li>
<li><strong>‰ªªÂä°ÂéªÈáç</strong>ÔºöÂêå‰∏Ä‰∏™‰ªªÂä°Âú®Êú™ÂÆåÊàê‰πãÂâçÔºåÂè™ÂÖÅËÆ∏Ë¢´ÊâßË°å‰∏ÄÊ¨°ÔºåÂêéÁª≠Áõ∏ÂêåÁöÑ‰ªªÂä°‰ºöË¢´ÁºìÂ≠òËµ∑Êù•ÔºåÁ≠â‰ªªÂä°ÂÆåÊàêÂêéÁªü‰∏ÄÂ§ÑÁêÜ„ÄÇ</li>
<li><strong>‰ªªÂä°Âπ∂ÂèëÁÆ°ÁêÜ</strong>ÔºöÊéßÂà∂‰ªªÂä°ÁöÑÂπ∂ÂèëÊâßË°åÔºåÁ°Æ‰øùÂú®ÂêàÈÄÇÁöÑÊó∂Êú∫Ë∞ÉÂ∫¶‰ªªÂä°ÔºåÈÅøÂÖçËµÑÊ∫êËÄóÂ∞ΩÊàñ‰∏çÂøÖË¶ÅÁöÑÂπ∂ÂèëÊìç‰Ωú„ÄÇ</li>
</ul>
<p><strong>AsyncQueue ÁöÑ‰ΩøÁî®Âú∫ÊôØ</strong></p>
<ol>
<li><strong>Ê®°ÂùóËß£Êûê</strong>Ôºö
<ul>
<li>Webpack Âú®Ëß£Êûê‰æùËµñÊ®°ÂùóÊó∂Ôºå‰ΩøÁî® <strong>AsyncQueue</strong> Êù•ÁÆ°ÁêÜÊ®°ÂùóËß£Êûê‰ªªÂä°„ÄÇÂΩìÊüê‰∏™Ê®°ÂùóÊ≠£Âú®Ë¢´Ëß£ÊûêÊó∂ÔºåÂÖ∂‰ªñ‰æùËµñ‰∫éËØ•Ê®°ÂùóÁöÑ‰ªªÂä°Â∞ÜË¢´ÊöÇÊó∂ÊåÇËµ∑ÔºåÁõ¥Âà∞ËØ•Ê®°ÂùóËß£ÊûêÂÆåÊàê„ÄÇ</li>
</ul>
</li>
<li><strong>Êñá‰ª∂Â§ÑÁêÜ</strong>Ôºö
<ul>
<li>Âú®ÊûÑÂª∫ËøáÁ®ã‰∏≠ÔºåWebpack ÈúÄË¶ÅËØªÂèñÂíåÂ§ÑÁêÜÂ§ö‰∏™Êñá‰ª∂ÔºàÂ¶Ç JS Êñá‰ª∂„ÄÅCSS Êñá‰ª∂Á≠âÔºâ„ÄÇËøô‰∫õÊñá‰ª∂ÁöÑËØªÂèñÂæÄÂæÄÊòØÂºÇÊ≠•ÁöÑ„ÄÇÈÄöËøá <strong>AsyncQueue</strong>ÔºåWebpack ÂèØ‰ª•ÊúâÊïàÂú∞ÁÆ°ÁêÜËøô‰∫õÊñá‰ª∂ËØªÂèñÊìç‰ΩúÔºåÈÅøÂÖçÈáçÂ§çËØªÂèñÔºåÂπ∂Á°Æ‰øùÂú®Êñá‰ª∂ËØªÂèñÂÆåÊØïÂêéÂÜçÊâßË°åÂêéÁª≠Êìç‰Ωú„ÄÇ</li>
</ul>
</li>
<li><strong>Êèí‰ª∂Á≥ªÁªü</strong>Ôºö
<ul>
<li>Webpack Êèí‰ª∂Âú®ÊâßË°åËøáÁ®ã‰∏≠ÂèØËÉΩ‰ºöÊ∂âÂèäÂ§ßÈáèÂºÇÊ≠•Êìç‰ΩúÔºå‰æãÂ¶ÇÂéãÁº©Êñá‰ª∂„ÄÅËæìÂá∫Êñá‰ª∂Á≠â„ÄÇ<strong>AsyncQueue</strong> Â∏ÆÂä©Êèí‰ª∂Á≥ªÁªüÁÆ°ÁêÜËøô‰∫õÂºÇÊ≠•‰ªªÂä°Ôºå‰ΩøÂæóÊèí‰ª∂‰πãÈó¥ËÉΩÂ§üÊúâÊïàÂçèÂêåÂ∑•‰Ωú„ÄÇ</li>
</ul>
</li>
</ol>
<p><strong>AsyncQueue ÁöÑÊ†∏ÂøÉÊñπÊ≥ïÂíåÂ∑•‰ΩúÊµÅÁ®ã</strong></p>
<ol>
<li><strong>enqueue</strong>ÔºöÂ∞Ü‰ªªÂä°ÊîæÂÖ•ÈòüÂàó‰∏≠Á≠âÂæÖÊâßË°å„ÄÇ
<ul>
<li>ÊØè‰∏™‰ªªÂä°Âú®Ë¢´ÊîæÂÖ•ÈòüÂàóÂêé‰ºöË¢´Á´ãÂç≥ÊâßË°åÔºåÊàñÂú®ÂâçÁΩÆ‰ªªÂä°ÂÆåÊàêÂêéÊâßË°å„ÄÇ</li>
</ul>
</li>
<li><strong>process</strong>ÔºöÂ§ÑÁêÜ‰ªªÂä°ÔºåÂπ∂Â∞Ü‰ªªÂä°ÁöÑÁªìÊûúÁºìÂ≠òÔºåÈÅøÂÖçÈáçÂ§çÊâßË°å„ÄÇ
<ul>
<li>Â§ÑÁêÜ‰ªªÂä°Êó∂ÔºåËã•ÂèëÁé∞‰ªªÂä°Â∑≤ÁªèÂ≠òÂú®ÁºìÂ≠òÔºå‰ºöÁõ¥Êé•ËøîÂõûÁºìÂ≠òÁªìÊûúÔºåËÄå‰∏ç‰ºöÈáçÊñ∞ÊâßË°å„ÄÇ</li>
</ul>
</li>
<li><strong>resolve</strong>ÔºöÂΩì‰ªªÂä°ÂÆåÊàêÊó∂ÔºåÈÄöÁü•ÈòüÂàóËØ•‰ªªÂä°Â∑≤ÁªèÂ§ÑÁêÜÂÆåÊØïÔºåÂπ∂Âî§ÈÜíÂêéÁª≠‰æùËµñËØ•‰ªªÂä°ÁöÑ‰ªªÂä°„ÄÇ</li>
</ol>
<p><strong>AsyncQueue ÁöÑÂ∑•‰ΩúÊµÅÁ®ã</strong></p>
<ol>
<li><strong>‰ªªÂä°ÂÖ•Èòü</strong>ÔºöÂΩì Webpack ÈúÄË¶ÅÊâßË°åÊüê‰∏™ÂºÇÊ≠•Êìç‰ΩúÔºàÂ¶ÇÊ®°ÂùóËß£ÊûêÔºâÊó∂ÔºåÈ¶ñÂÖàÊ£ÄÊü•ËØ•‰ªªÂä°ÊòØÂê¶Â∑≤ÁªèÂ≠òÂú®ÁºìÂ≠òÔºåËã•‰∏çÂ≠òÂú®ÂàôÂ∞Ü‰ªªÂä°ÊîæÂÖ•ÈòüÂàó„ÄÇ</li>
<li><strong>‰ªªÂä°ÊâßË°å</strong>ÔºöÈòüÂàóÊåâÁÖß‰∏ÄÂÆöÈ°∫Â∫èÊâßË°å‰ªªÂä°ÔºåÂπ∂ËÆ∞ÂΩïÊØè‰∏™‰ªªÂä°ÁöÑÊâßË°åÁªìÊûú„ÄÇËã•Êüê‰∏™‰ªªÂä°‰æùËµñÂÖ∂‰ªñ‰ªªÂä°ÔºåÂàô‰ºöÁ≠âÂæÖ‰æùËµñ‰ªªÂä°ÂÆåÊàêÂêéÂÜçÊâßË°å„ÄÇ</li>
<li><strong>‰ªªÂä°ÁºìÂ≠ò</strong>Ôºö‰∏ÄÊó¶‰ªªÂä°ÊâßË°åÂÆåÊàêÔºåÁªìÊûú‰ºöË¢´ÁºìÂ≠òËµ∑Êù•ÔºåÂêéÁª≠Áõ∏ÂêåÁöÑ‰ªªÂä°‰∏ç‰ºöÈáçÂ§çÊâßË°åÔºåËÄåÊòØÁõ¥Êé•ËøîÂõûÁºìÂ≠òÁªìÊûú„ÄÇ</li>
<li><strong>‰ªªÂä°ÂÆåÊàê</strong>ÔºöÂΩìÊâÄÊúâ‰ªªÂä°ÂÆåÊàêÂêéÔºåWebpack ÁªßÁª≠ÂêéÁª≠ÁöÑÊûÑÂª∫ÊµÅÁ®ã„ÄÇ</li>
</ol>
<p><strong>AsyncQueue ÁöÑÂÆûÈôÖÂ∫îÁî®Âú∫ÊôØ</strong></p>
<ul>
<li><strong>Ê®°ÂùóËß£Êûê‰∏éÊñá‰ª∂ËØªÂèñ</strong>ÔºöWebpack ÈúÄË¶ÅÂºÇÊ≠•Âä†ËΩΩÊ®°ÂùóÂíåËØªÂèñÊñá‰ª∂ÂÜÖÂÆπÔºå<strong>AsyncQueue</strong> ËÉΩÁ°Æ‰øùÊØè‰∏™Ê®°ÂùóÊàñÊñá‰ª∂Âè™Ë¢´Ëß£Êûê‰∏ÄÊ¨°ÔºåÈÅøÂÖçÈáçÂ§çËß£ÊûêÂíåËØªÂèñÔºåÊèêÂçáÊûÑÂª∫ÊÄßËÉΩ„ÄÇ</li>
<li><strong>Â§ö‰ªªÂä°Ë∞ÉÂ∫¶</strong>ÔºöWebpack Êèí‰ª∂Á≥ªÁªü‰∏≠ÔºåÂ§ö‰∏™Êèí‰ª∂‰πãÈó¥ÁöÑ‰ªªÂä°Ë∞ÉÂ∫¶ÂèØËÉΩÂ≠òÂú®‰æùËµñÔºå<strong>AsyncQueue</strong> ËÉΩÂ§üÂ∏ÆÂä©ÁÆ°ÁêÜËøô‰∫õÂ§çÊùÇÁöÑ‰ªªÂä°‰æùËµñÂíåÊâßË°åÈ°∫Â∫è„ÄÇ</li>
</ul>
<h3 id="ÊÄªÁªì-1"><strong>ÊÄªÁªì</strong>
</h3><p><strong>AsyncQueue</strong> ÊòØ Webpack ÂÜÖÈÉ®ÁöÑ‰∏Ä‰∏™ÂºÇÊ≠•‰ªªÂä°ÈòüÂàóÊú∫Âà∂ÔºåÂÆÉÂ∏ÆÂä©ÁÆ°ÁêÜÂíåË∞ÉÂ∫¶ÂºÇÊ≠•‰ªªÂä°ÔºåÈÅøÂÖçÈáçÂ§çÊâßË°åÔºåÊèêÂçáÊûÑÂª∫ÁöÑÊïàÁéá„ÄÇÂÆÉÁöÑ‰∏ªË¶Å‰ΩøÁî®Âú∫ÊôØÂåÖÊã¨Ê®°ÂùóËß£Êûê„ÄÅÊñá‰ª∂Â§ÑÁêÜÂíåÊèí‰ª∂ÊâßË°åÔºåÈÄöËøáÂÆÉÁöÑÈòüÂàóÊú∫Âà∂ÔºåWebpack ËÉΩÊúâÊïàÁÆ°ÁêÜÂ§çÊùÇÁöÑÂºÇÊ≠•Êìç‰ΩúÔºåÁ°Æ‰øù‰ªªÂä°ÁöÑÊ≠£Á°ÆÊâßË°åÈ°∫Â∫èÂíåËµÑÊ∫êÁöÑÈ´òÊïàÂà©Áî®„ÄÇ</p>
<p>ÈááÁî®ÁºìÂ≠òÔºåÊáíÁºñËØëÂíåÂπ∂Ë°åÁºñËØëÁ≠âÊñπÂºèÊèêÂçáÁºñËØëÈÄüÂ∫¶„ÄÇËÄå AsyncQueue ÊòØ webpack5 ‰∏≠Êñ∞Â¢ûÂä†ÁöÑ‰ºòÂåñÊú∫Âà∂„ÄÇAsyncQueue ÂèØ‰ª•ÂÆûÁé∞Âπ∂Ë°åÊâßË°åÊåáÂÆöÊï∞ÈáèÁöÑÂºÇÊ≠•‰ªªÂä°„ÄÇÂÜÖÈÉ®ÂØπ‰ªªÂä°ËøõË°åÂπ∂ÂèëÁöÑÊéßÂà∂ÊàñËÄÖËØ¥ÁÆ°ÁêÜ„ÄÇ</p>
<p>Áªô‰Ω†‰∏ÄÁ≥ªÂàóÁöÑÂºÇÊ≠•‰ªªÂä°ÔºåË¶ÅÊ±ÇÂÜô‰∏Ä‰∏™ÁÆ°ÁêÜÂô®ÂéªÂπ∂ÂèëÊéßÂà∂‰ªñ‰ª¨ÁöÑÊâßË°åÔºåÂêåÊó∂ËÉΩÊåáÂÆöÂπ∂ÂèëÁöÑÊï∞Èáè„ÄÇ</p>
<p>‰ΩøÁî®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//webpack ÁºìÂ≠ò ÊáíÁºñËØë Âπ∂Ë°åÁºñËØë
</span></span></span><span class="line"><span class="cl"><span class="c1">//AsyncQueue ÂèØ‰ª•ÂÆûÁé∞Âπ∂Ë°åÊâßË°å‰ªªÂä°
</span></span></span><span class="line"><span class="cl"><span class="c1">//‰ªªÂä°ÁöÑÂπ∂ÂèëÊéßÂà∂ÊàñËÄÖËØ¥ÁÆ°ÁêÜÂ∑•ÂÖ∑ AsyncQueue
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">AsyncQueue</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;webpack/lib/util/AsyncQueue&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">processor</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//ÂºÇÊ≠•ÊòØÊ®°ÊãüÂºÇÊ≠•ÂàõÂª∫Ê®°ÂùóÁöÑËøáÁ®ã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;process &#34;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span> <span class="p">...</span><span class="nx">module</span><span class="p">,</span> <span class="nx">content</span><span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">key</span> <span class="o">+</span> <span class="s2">&#34;ÂÜÖÂÆπ&#34;</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">getKey</span> <span class="o">=</span> <span class="p">(</span><span class="nx">module</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">key</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">queue</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AsyncQueue</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;createModule&#34;</span><span class="p">,</span> <span class="c1">// ÈòüÂàóÁöÑÂêçÂ≠ó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">parallelism</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span> <span class="c1">// ÂÖÅËÆ∏ÁöÑÂπ∂ÂèëÊï∞Èáè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">processor</span><span class="p">,</span> <span class="c1">// Â§ÑÁêÜÊ®°ÂùóÁöÑÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">getKey</span><span class="p">,</span> <span class="c1">// ÈÄöËøáËøô‰∏™ÊñπÊ≥ïËé∑ÂèñÊØè‰∏™‰ªªÂä°ÂîØ‰∏ÄÊ†áËØÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">start</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÂêëÈòüÂàó‰∏≠Ê∑ªÂä†‰ªªÂä°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">queue</span><span class="p">.</span><span class="nx">add</span><span class="p">({</span> <span class="nx">key</span><span class="o">:</span> <span class="s2">&#34;module1&#34;</span> <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">createdModule</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">createdModule</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">queue</span><span class="p">.</span><span class="nx">add</span><span class="p">({</span> <span class="nx">key</span><span class="o">:</span> <span class="s2">&#34;module2&#34;</span> <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">createdModule</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">createdModule</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">queue</span><span class="p">.</span><span class="nx">add</span><span class="p">({</span> <span class="nx">key</span><span class="o">:</span> <span class="s2">&#34;module3&#34;</span> <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">createdModule</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">createdModule</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">queue</span><span class="p">.</span><span class="nx">add</span><span class="p">({</span> <span class="nx">key</span><span class="o">:</span> <span class="s2">&#34;module4&#34;</span> <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">createdModule</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">createdModule</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">queue</span><span class="p">.</span><span class="nx">add</span><span class="p">({</span> <span class="nx">key</span><span class="o">:</span> <span class="s2">&#34;module5&#34;</span> <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">createdModule</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">createdModule</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">queue</span><span class="p">.</span><span class="nx">add</span><span class="p">({</span> <span class="nx">key</span><span class="o">:</span> <span class="s2">&#34;module1&#34;</span> <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">createdModule</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">createdModule</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê∫êÁ†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">QUEUED_STATE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">//Â∑≤Áªè ÂÖ•ÈòüÔºåÂæÖÊâßË°å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">PROCESSING_STATE</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">//Â§ÑÁêÜ‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">DONE_STATE</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">//Â§ÑÁêÜÂÆåÊàê
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">class</span> <span class="nx">ArrayQueue</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">_list</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">enqueue</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">_list</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span> <span class="c1">//[1,2,3]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">dequeue</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_list</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span> <span class="c1">//ÁßªÈô§Âπ∂ËøîÂõûÊï∞ÁªÑ‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">AsyncQueueEntry</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">constructor</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">item</span> <span class="o">=</span> <span class="nx">item</span><span class="p">;</span> <span class="c1">//‰ªªÂä°ÁöÑÊèèËø∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">QUEUED_STATE</span><span class="p">;</span> <span class="c1">//Ëøô‰∏™Êù°ÁõÆÂΩìÂâçÁöÑÁä∂ÊÄÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">callback</span> <span class="o">=</span> <span class="nx">callback</span><span class="p">;</span> <span class="c1">//‰ªªÂä°ÂÆåÊàêÁöÑÂõûË∞É
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">AsyncQueue</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">constructor</span><span class="p">({</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">parallelism</span><span class="p">,</span> <span class="nx">processor</span><span class="p">,</span> <span class="nx">getKey</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span> <span class="c1">//ÈòüÂàóÁöÑÂêçÂ≠ó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">_parallelism</span> <span class="o">=</span> <span class="nx">parallelism</span><span class="p">;</span> <span class="c1">//Âπ∂ÂèëÊâßË°åÁöÑ‰ªªÂä°Êï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">_processor</span> <span class="o">=</span> <span class="nx">processor</span><span class="p">;</span> <span class="c1">//ÈíàÂØπÈòüÂàó‰∏≠ÁöÑÊØè‰∏™Êù°ÁõÆÊâßË°å‰ªÄ‰πàÊìç‰Ωú
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">_getKey</span> <span class="o">=</span> <span class="nx">getKey</span><span class="p">;</span> <span class="c1">//ÂáΩÊï∞ÔºåËøîÂõû‰∏Ä‰∏™keyÁî®Êù•ÂîØ‰∏ÄÊ†áËØÜÊØè‰∏™ÂÖÉÁ¥†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">_entries</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Map</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">_queued</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ArrayQueue</span><span class="p">();</span> <span class="c1">//Â∞ÜË¶ÅÊâßË°åÁöÑ‰ªªÂä°Êï∞ÁªÑÈòüÂàó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">_activeTasks</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">//ÂΩìÂâçÊ≠£Âú®ÊâßË°åÁöÑÊï∞ÔºåÈªòËÆ§ÂÄº1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">_willEnsureProcessing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">//ÊòØÂê¶Â∞ÜË¶ÅÂºÄÂßãÂ§ÑÁêÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">add</span> <span class="o">=</span> <span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getKey</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span> <span class="c1">//Ëé∑ÂèñËøô‰∏™Êù°ÁõÆÂØπÂ∫îÁöÑkey
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">entry</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_entries</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span> <span class="c1">//Ëé∑Âèñ Ëøô‰∏™keyÂØπÂ∫îÁöÑËÄÅÁöÑÊù°ÁõÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">entry</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">state</span> <span class="o">===</span> <span class="nx">DONE_STATE</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">process</span><span class="p">.</span><span class="nx">nextTick</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">result</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">callbacks</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">entry</span><span class="p">.</span><span class="nx">callbacks</span> <span class="o">=</span> <span class="p">[</span><span class="nx">callback</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">entry</span><span class="p">.</span><span class="nx">callbacks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">newEntry</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AsyncQueueEntry</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span> <span class="c1">//ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊù°ÁõÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">_entries</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">newEntry</span><span class="p">);</span> <span class="c1">//ÊîæÂà∞_entries
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">_queued</span><span class="p">.</span><span class="nx">enqueue</span><span class="p">(</span><span class="nx">newEntry</span><span class="p">);</span> <span class="c1">//ÊääËøô‰∏™Êñ∞Êù°ÁõÆÊîæÊîæÈòüÂàó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_willEnsureProcessing</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">_willEnsureProcessing</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setImmediate</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_ensureProcessing</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="nx">_ensureProcessing</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Â¶ÇÊûúÂΩìÂâçÁöÑÊøÄÊ¥ªÁöÑÊàñËÄÖ ËØ¥Ê≠£Âú®ÊâßË°å‰ªªÂä°Êï∞Ë°åÂ∞è‰∫éÂπ∂ÂèëÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">while</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_activeTasks</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_parallelism</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">entry</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_queued</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">();</span> <span class="c1">//Âá∫Èòü ÂÖàÂÖ•ÂÖàÂá∫
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="nx">entry</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">_activeTasks</span><span class="o">++</span><span class="p">;</span> <span class="c1">//ÂÖàËÆ©Ê≠£Âú®ÊâßË°åÁöÑ‰ªªÂä°Êï∞++
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">entry</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">PROCESSING_STATE</span><span class="p">;</span> <span class="c1">//Êù°ÁõÆÁöÑÁä∂ÊÄÅËÆæÁΩÆ‰∏∫ÊâßË°å‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">_startProcessing</span><span class="p">(</span><span class="nx">entry</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">_willEnsureProcessing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="nx">_startProcessing</span> <span class="o">=</span> <span class="p">(</span><span class="nx">entry</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">_processor</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">item</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">_handleResult</span><span class="p">(</span><span class="nx">entry</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">r</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="nx">_handleResult</span> <span class="o">=</span> <span class="p">(</span><span class="nx">entry</span><span class="p">,</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">callback</span> <span class="o">=</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">callback</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">callbacks</span> <span class="o">=</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">callbacks</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">entry</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">DONE_STATE</span><span class="p">;</span> <span class="c1">//ÊääÊù°ÁõÆÁöÑÁä∂ÊÄÅËÆæÁΩÆ‰∏∫Â∑≤ÁªèÂÆåÊàê
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">entry</span><span class="p">.</span><span class="nx">callback</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span> <span class="c1">//Êääcallback
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">entry</span><span class="p">.</span><span class="nx">callbacks</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">entry</span><span class="p">.</span><span class="nx">result</span> <span class="o">=</span> <span class="nx">result</span><span class="p">;</span> <span class="c1">//ÊääÁªìÊûúËµãÁªôentry
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">entry</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nx">error</span><span class="p">;</span> <span class="c1">//ÊääÈîôËØØÂØπË±°ËµãÁªôentry
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">callback</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">callbacks</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">callback</span> <span class="k">of</span> <span class="nx">callbacks</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">callback</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">_activeTasks</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_willEnsureProcessing</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">_willEnsureProcessing</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setImmediate</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_ensureProcessing</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">AsyncQueue</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="webpack-‰ºòÂåñ">webpack ‰ºòÂåñ
</h2><ol>
<li>
<p>Êü•ÊâæÊ®°ÂùóÊó∂ÔºåÂ∞ΩÈáèÁº©Â∞èÊü•ÊâæËåÉÂõ¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">resolve</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">extensions</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;.js&#39;</span><span class="p">,</span><span class="s1">&#39;.jsx&#39;</span><span class="p">,</span><span class="s1">&#39;.ts&#39;</span><span class="p">,</span><span class="s1">&#39;.json&#39;</span><span class="p">],</span>  <span class="c1">// ÈÖçÁΩÆÂêéÔºåÂú®È°πÁõÆ‰∏≠requireÊàñimportÂÖ∂‰ªñÊ®°ÂùóÊó∂ÔºåÂèØ‰ª•ÁúÅÁï•Êñá‰ª∂Êâ©Â±ïÂêç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">alias</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        	<span class="err">@</span><span class="o">:</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="s1">&#39;src&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        	<span class="nx">myLib</span><span class="o">:</span><span class="s1">&#39;ÂÖ∑‰ΩìÁöÑÂ∫ìÊâÄÂú®ÁõÆÂΩï&#39;</span>
</span></span><span class="line"><span class="cl">    	<span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="nx">modules</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;my_modules&#39;</span><span class="p">,</span><span class="s1">&#39;node_modules&#39;</span><span class="p">],</span> <span class="c1">// ÂØπ‰∫éÊü•ÊâæÁ¨¨‰∏âÊñπÂ∫ìÔºåwebpackÈªòËÆ§‰ΩøÁî®nodejsÁöÑÈªòËÆ§ËßÑÂàôÔºåÂç≥Âéªnode_modulesÁõÆÂΩï‰∏≠Êü•ÊâæÔºåÂ¶ÇÊûúËá™Â∑±ÁöÑÂ∫ìÊÉ≥Ê®°ÊãüËøô‰∏™Êü•ÊâæË∑ØÂæÑÔºåÂ∞±ÂèØ‰ª•Âú®Ëøô‰∏™Â≠óÊÆµ‰∏≠ÈÖçÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    	<span class="nx">mainFields</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;browser&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;main&#39;</span><span class="p">],</span> <span class="c1">// ÈªòËÆ§ÂÄºÔºåÊåáÁöÑÊòØÂØπ‰∫éÂºïÂÖ•‰∏Ä‰∏™ÂåÖÔºåÊü•ÊâæÊñá‰ª∂Êó∂Ôºå‰æùÊ¨°ÂèÇËÄÉpackage.jsonÊñá‰ª∂‰∏≠ÁöÑÂì™‰∏™Â≠óÊÆµÊåáÂêëÁöÑÊñá‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    	<span class="nx">mainFiles</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;index.js&#39;</span><span class="p">],</span> <span class="c1">// ÈªòËÆ§ÂÄºÔºåÂΩìÁõÆÂΩï‰∏ãÊ≤°Êúâ package.json Êñá‰ª∂Êó∂Ôºå‰ºöÈªòËÆ§‰ΩøÁî®ÁõÆÂΩï‰∏ãÁöÑ index.js Ëøô‰∏™Êñá‰ª∂ÂèØ‰ª•Âú®ËøôÈáåÈÖçÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// resolveLoader Áî®‰∫éÈÖçÁΩÆËß£Êûê loader Êó∂ÁöÑ resolve ÈÖçÁΩÆ,ÈªòËÆ§ÁöÑÈÖçÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">resolveLoader</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">modules</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;node_modules&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nx">extensions</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;.js&#39;</span><span class="p">,</span> <span class="s1">&#39;.json&#39;</span> <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nx">mainFields</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;loader&#39;</span><span class="p">,</span> <span class="s1">&#39;main&#39;</span> <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">module</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// ÂèØ‰ª•Áî®‰∫éÈÖçÁΩÆÂì™‰∫õÊ®°ÂùóÊñá‰ª∂ÁöÑÂÜÖÂÆπ‰∏çÈúÄË¶ÅËøõË°åËß£Êûê,‰∏çÈúÄË¶ÅËß£Êûê‰æùËµñÔºàÂç≥Êó†‰æùËµñÔºâ ÁöÑÁ¨¨‰∏âÊñπÂ§ßÂûãÁ±ªÂ∫ìÁ≠âÔºåÂèØ‰ª•ÈÄöËøáËøô‰∏™Â≠óÊÆµÊù•ÈÖçÁΩÆÔºå‰ª•ÊèêÈ´òÊï¥‰ΩìÁöÑÊûÑÂª∫ÈÄüÂ∫¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// ‰∏ÄËà¨Êù•ËØ¥Êàë‰ª¨ÊãøÂà∞Ê®°ÂùóÂêéË¶ÅÂàÜÊûêÈáåÈù¢ÁöÑ‰æùËµñÁöÑÊ®°Âùóimport/require
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// Êúâ‰∫õÊ®°ÂùóÊàë‰ª¨Áü•ÈÅìÂÆÉËÇØÂÆöÊ≤°Êúâ‰æùËµñÂà´ÁöÑÊ®°ÂùóÂ¶Çjquery lodash,ÊâÄ‰ª•ÂèØ‰ª•ÁúÅËøô‰∏ÄÊ≠•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">//noParse: /jquery|lodash/, // Ê≠£ÂàôË°®ËææÂºè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// ÊàñËÄÖ‰ΩøÁî®ÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">noParse</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="sr">/jquery|lodash/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">     <span class="p">},</span>
</span></span><span class="line"><span class="cl">     <span class="nx">plugins</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">         <span class="c1">// IgnorePluginÁî®‰∫éÂøΩÁï•Êüê‰∫õÁâπÂÆöÁöÑÊ®°ÂùóÔºåËÆ© webpack ‰∏çÊääËøô‰∫õÊåáÂÆöÁöÑÊ®°ÂùóÊâìÂåÖËøõÂéª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">IgnorePlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">             <span class="nx">contextRegExp</span><span class="o">:</span><span class="sr">/moment$/</span><span class="p">,</span>  <span class="c1">// ÁõÆÊ†áÂ∫ìÁöÑÊ≠£Âàô   ÂåπÈÖçÂºïÂÖ•Ê®°ÂùóË∑ØÂæÑÁöÑÊ≠£ÂàôË°®ËææÂºè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>             <span class="nx">resourceRegExp</span><span class="o">:</span> <span class="sr">/^\.\/locale/</span>   <span class="c1">// Â∫ì‰∏≠ÈúÄË¶ÅÂøΩÁï•Êñá‰ª∂Â§πÁöÑÊ≠£Âàô   ÂåπÈÖçÊ®°ÂùóÁöÑÂØπÂ∫î‰∏ä‰∏ãÊñáÔºåÂç≥ÊâÄÂú®ÁõÆÂΩïÂêç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="p">})</span>
</span></span><span class="line"><span class="cl">     <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p>IgnorePlugin ÁöÑÂÖ∏Âûã‰ΩøÁî®Â∞±ÊòØÁî®‰∫éÂøΩÁï• moment Ëøô‰∏™ÂåÖÁöÑËØ≠Ë®ÄÂ∫ìÊñá‰ª∂ÔºåÂØπ‰∫éËá™Â∑±ÈúÄË¶ÅÁöÑËØ≠Ë®ÄÊñá‰ª∂ÔºåËá™Â∑±Ëá™Ë°åÂçïÁã¨ÂØºÂÖ•Âà∞È°πÁõÆ‰∏≠Âç≥ÂèØ„ÄÇ</p>
<p><img src="/blogs/post/webpack/images/image-20230502192840848.png"
	width="1391"
	height="1216"
	srcset="/blogs/post/webpack/images/image-20230502192840848_hu_c9267a4470fa14a9.png 480w, /blogs/post/webpack/images/image-20230502192840848_hu_2051c0b35b4ab5c7.png 1024w"
	loading="lazy"
	
		alt="image-20230502192840848"
	
	
		class="gallery-image" 
		data-flex-grow="114"
		data-flex-basis="274px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">moment</span> <span class="nx">from</span> <span class="s2">&#34;moment&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;moment/locale/zh-cn&#34;</span><span class="p">;</span> <span class="c1">// Ëá™Ë°åÂØºÂÖ•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">moment</span><span class="p">().</span><span class="nx">format</span><span class="p">(</span><span class="s2">&#34;MMMM Do YYYY, h:mm:ss a&#34;</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>
<p>ÊâìÂåÖËÄóÊó∂ÂàÜÊûê</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">SpeedMeasureWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;speed-measure-webpack-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">smw</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SpeedMeasureWebpackPlugin</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">smw</span><span class="p">.</span><span class="nx">wrap</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ÊâìÂåÖ‰ΩìÁßØÂàÜÊûê</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">BundleAnalyzerPlugin</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;webpack-bundle-analyzer&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="k">new</span> <span class="nx">BundleAnalyzerPlugin</span><span class="p">()],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h2 id="webpack-ÊûÑÂª∫Â∫ì">webpack ÊûÑÂª∫Â∫ì
</h2><ul>
<li>
<p>webpack ÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑ output ÂØπË±°‰∏≠ÁöÑ library ÈÄâÈ°πÂÖÅËÆ∏Â∞ÜÊ®°ÂùóÂØºÂá∫ÁöÑÂÜÖÂÆπ‰Ωú‰∏∫Â∫ìÔºàlibraryÔºâÊö¥Èú≤ÁªôÂ§ñÈÉ®‰ΩøÁî®</p>
</li>
<li>
<p><code>library</code>Â±ûÊÄßÁî®‰∫éÊåáÂÆöÂ∫ìÁöÑÂêçÁß∞ÔºåÂèØ‰ª•ÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÊàñËÄÖ‰∏Ä‰∏™ÂØπË±°„ÄÇÂ¶ÇÊûúÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåÂàôÂ∞ÜÂÖ∂‰Ωú‰∏∫ÂÖ®Â±ÄÂèòÈáèÊö¥Èú≤ÁªôÊµèËßàÂô®ÁéØÂ¢É„ÄÇÂ¶ÇÊûúÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåÂàôÂèØ‰ª•Âú®ÂØπË±°‰∏≠ÊåáÂÆö library ÁöÑÂêçÁß∞ÂíåÂØºÂá∫ÊñπÂºèÁ≠âÁõ∏ÂÖ≥ÈÄâÈ°π</p>
</li>
<li>
<p><code>libraryExport</code>Â±ûÊÄßÁî®‰∫éÊåáÂÆöË¶ÅÂØºÂá∫ÁöÑÂÜÖÂÆπÔºåÂèØ‰ª•ÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤„ÄÅ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Êï∞ÁªÑÊàñËÄÖ‰∏Ä‰∏™ÂØπË±°„ÄÇÂ¶ÇÊûúÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåÂàôÂ∞ÜËØ•Â≠óÁ¨¶‰∏≤ÊåáÂÆöÁöÑÂØºÂá∫ÂÜÖÂÆπÊö¥Èú≤ÁªôÂ§ñÈÉ®‰ΩøÁî®„ÄÇÂ¶ÇÊûúÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Êï∞ÁªÑÔºåÂàôÂ∞ÜÊï∞ÁªÑ‰∏≠ÊåáÂÆöÁöÑÂØºÂá∫ÂÜÖÂÆπÊö¥Èú≤ÁªôÂ§ñÈÉ®‰ΩøÁî®„ÄÇÂ¶ÇÊûúÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåÂàôÂèØ‰ª•Âú®ÂØπË±°‰∏≠ÊåáÂÆöË¶ÅÂØºÂá∫ÁöÑÂÜÖÂÆπÂíåÂØºÂá∫ÊñπÂºèÁ≠âÁõ∏ÂÖ≥ÈÄâÈ°π</p>
</li>
<li>
<p>libraryTarget Â±ûÊÄßÁî®‰∫éÊåáÂÆöÂ∫ìÁöÑÂØºÂá∫ÊñπÂºèÔºåÂèØ‰ª•ÊòØ‰ª•‰∏ãÂÄº‰πã‰∏ÄÔºö</p>
<ul>
<li><code>var</code>ÔºöÂ∞ÜÂ∫ìÂØºÂá∫‰∏∫‰∏Ä‰∏™ÂèòÈáèÔºåËØ•ÂèòÈáèÂú®ÂÖ®Â±Ä‰ΩúÁî®Âüü‰∏ãÂèØÁî®</li>
<li><code>assign</code>ÔºöÂ∞ÜÂ∫ìÂØºÂá∫‰∏∫‰∏Ä‰∏™ÂèòÈáèÔºåËØ•ÂèòÈáèÂú®ÂÖ®Â±Ä‰ΩúÁî®Âüü‰∏ãÂèØÁî®Ôºå‰ΩÜÂèØ‰ª•Ë¢´ÂÖ∂‰ªñÂ∫ìÊàñÊ®°ÂùóË¶ÜÁõñ</li>
<li><code>this</code>ÔºöÂ∞ÜÂ∫ìÂØºÂá∫‰∏∫‰∏Ä‰∏™ÂèòÈáèÔºåËØ•ÂèòÈáèÂú® this ÂØπË±°‰∏ãÂèØÁî®</li>
<li><code>window</code>ÔºöÂ∞ÜÂ∫ìÂØºÂá∫‰∏∫‰∏Ä‰∏™ÂèòÈáèÔºåËØ•ÂèòÈáèÂú® window ÂØπË±°‰∏ãÂèØÁî®Ôºà‰ªÖÂú®ÊµèËßàÂô®ÁéØÂ¢É‰∏ãÊúâÊïàÔºâ</li>
<li><code>global</code>ÔºöÂ∞ÜÂ∫ìÂØºÂá∫‰∏∫‰∏Ä‰∏™ÂèòÈáèÔºåËØ•ÂèòÈáèÂú® global ÂØπË±°‰∏ãÂèØÁî®Ôºà‰ªÖÂú® Node.js ÁéØÂ¢É‰∏ãÊúâÊïàÔºâ</li>
<li><code>commonjs</code>ÔºöÂ∞ÜÂ∫ìÂØºÂá∫‰∏∫‰∏Ä‰∏™ CommonJS Ê®°ÂùóÔºåËØ•Ê®°ÂùóÂú® Node.js ÁéØÂ¢É‰∏ãÂèØÁî®</li>
<li><code>commonjs2</code>ÔºöÂ∞ÜÂ∫ìÂØºÂá∫‰∏∫‰∏Ä‰∏™ CommonJS2 Ê®°ÂùóÔºåËØ•Ê®°ÂùóÂú® Node.js ÁéØÂ¢É‰∏ãÂèØÁî®</li>
<li><code>amd</code>ÔºöÂ∞ÜÂ∫ìÂØºÂá∫‰∏∫‰∏Ä‰∏™ AMD Ê®°ÂùóÔºåËØ•Ê®°ÂùóÂú®ÊµèËßàÂô®ÁéØÂ¢É‰∏ãÂèØÁî®</li>
<li><code>umd</code>ÔºöÂ∞ÜÂ∫ìÂØºÂá∫‰∏∫‰∏Ä‰∏™ UMD Ê®°ÂùóÔºåËØ•Ê®°ÂùóÊó¢ÂèØÂú®ÊµèËßàÂô®ÁéØÂ¢É‰∏ãÔºå‰πüÂèØÂú® Node.js ÁéØÂ¢É‰∏ã‰ΩøÁî®</li>
</ul>
</li>
<li>
<p><a class="link" href="https://webpack.js.org/configuration/output/#outputlibrarytarget"  target="_blank" rel="noopener"
    >output librarytarget</a></p>
</li>
<li>
<p>Âú®‰ΩøÁî® webpack ÁºñÂÜôËá™Â∑±ÂºÄÂèëÁöÑÂ∫ìÁªôÂà´‰∫∫‰ΩøÁî®Êó∂ÔºåÈúÄË¶ÅÈÖçÁΩÆËøô‰∏™Â≠óÊÆµ‰∏≠ÁöÑÂÄº</p>
</li>
<li>
<p>ÂΩìÁî® Webpack ÂéªÊûÑÂª∫‰∏Ä‰∏™ÂèØ‰ª•Ë¢´ÂÖ∂‰ªñÊ®°ÂùóÂØºÂÖ•‰ΩøÁî®ÁöÑÂ∫ìÊó∂ÈúÄË¶ÅÁî®Âà∞</p>
</li>
<li>
<p><code>output.library</code> ÈÖçÁΩÆÂØºÂá∫Â∫ìÁöÑÂêçÁß∞</p>
</li>
<li>
<p><code>output.libraryExport</code> ÈÖçÁΩÆË¶ÅÂØºÂá∫ÁöÑÊ®°Âùó‰∏≠Âì™‰∫õÂ≠êÊ®°ÂùóÈúÄË¶ÅË¢´ÂØºÂá∫„ÄÇ ÂÆÉÂè™ÊúâÂú® output.libraryTarget Ë¢´ËÆæÁΩÆÊàê commonjs ÊàñËÄÖ commonjs2 Êó∂‰ΩøÁî®ÊâçÊúâÊÑè‰πâ</p>
</li>
<li>
<p><code>output.libraryTarget</code> ÈÖçÁΩÆ‰ª•‰ΩïÁßçÊñπÂºèÂØºÂá∫Â∫ì,ÊòØÂ≠óÁ¨¶‰∏≤ÁöÑÊûö‰∏æÁ±ªÂûãÔºåÊîØÊåÅ‰ª•‰∏ãÈÖçÁΩÆ</p>
</li>
</ul>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">libraryTarget</th>
          <th style="text-align: left">‰ΩøÁî®ËÄÖÁöÑÂºïÂÖ•ÊñπÂºè</th>
          <th style="text-align: left">‰ΩøÁî®ËÄÖÊèê‰æõÁªôË¢´‰ΩøÁî®ËÄÖÁöÑÊ®°ÂùóÁöÑÊñπÂºè</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">var</td>
          <td style="text-align: left">Âè™ËÉΩ‰ª• script Ê†áÁ≠æÁöÑÂΩ¢ÂºèÂºïÂÖ•Êàë‰ª¨ÁöÑÂ∫ì</td>
          <td style="text-align: left">Âè™ËÉΩ‰ª•ÂÖ®Â±ÄÂèòÈáèÁöÑÂΩ¢ÂºèÊèê‰æõËøô‰∫õË¢´‰æùËµñÁöÑÊ®°Âùó</td>
      </tr>
      <tr>
          <td style="text-align: left">commonjs</td>
          <td style="text-align: left">Âè™ËÉΩÊåâÁÖß commonjs ÁöÑËßÑËåÉÂºïÂÖ•Êàë‰ª¨ÁöÑÂ∫ì</td>
          <td style="text-align: left">Ë¢´‰æùËµñÊ®°ÂùóÈúÄË¶ÅÊåâÁÖß commonjs ËßÑËåÉÂºïÂÖ•</td>
      </tr>
      <tr>
          <td style="text-align: left">commonjs2</td>
          <td style="text-align: left">Âè™ËÉΩÊåâÁÖß commonjs2 ÁöÑËßÑËåÉÂºïÂÖ•Êàë‰ª¨ÁöÑÂ∫ì</td>
          <td style="text-align: left">Ë¢´‰æùËµñÊ®°ÂùóÈúÄË¶ÅÊåâÁÖß commonjs2 ËßÑËåÉÂºïÂÖ•</td>
      </tr>
      <tr>
          <td style="text-align: left">amd</td>
          <td style="text-align: left">Âè™ËÉΩÊåâ amd ËßÑËåÉÂºïÂÖ•</td>
          <td style="text-align: left">Ë¢´‰æùËµñÁöÑÊ®°ÂùóÈúÄË¶ÅÊåâÁÖß amd ËßÑËåÉÂºïÂÖ•</td>
      </tr>
      <tr>
          <td style="text-align: left">this</td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">window</td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">global</td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">umd</td>
          <td style="text-align: left">ÂèØ‰ª•Áî® script„ÄÅcommonjs„ÄÅamd ÂºïÂÖ•</td>
          <td style="text-align: left">ÊåâÂØπÂ∫îÁöÑÊñπÂºèÂºïÂÖ•</td>
      </tr>
  </tbody>
</table></div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span> <span class="s2">&#34;./src/index.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s2">&#34;build&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;[name].js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">library</span><span class="o">:</span> <span class="s2">&#34;myTools&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">libraryTarget</span><span class="o">:</span> <span class="s2">&#34;var&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áé∞‰ª£ÂåñÁöÑ npm ÂåÖÈÉΩ‰ºöÊâìÂåÖËæìÂá∫Â§öÁßçÊ®°ÂùóÂåñËßÑËåÉÁöÑÊñá‰ª∂</p>
<p>webpack ÁõÆÂâç‰∏çÊîØÊåÅÊâìÂåÖÊàê esmodule Ê†ºÂºèÁöÑÂ∫ì„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">merge</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;webpack-merge&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">baseConfig</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s2">&#34;development&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">devtool</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span> <span class="s2">&#34;./src/index.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">externals</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//nodeExternals()  //ÊéíÈô§ÊâÄÊúâÁöÑÁ¨¨‰∏âÊñπÊ®°ÂùóÔºåÂ∞±ÊòØÊäänode_modulesÈáåÁöÑÊ®°ÂùóÂÖ®ÈÉ®ËÆæÁΩÆ‰∏∫Â§ñÈÉ®Ê®°Âùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//library:&#39;math&#39;,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//libraryExport:&#39;add&#39;,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">clean</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="nx">merge</span><span class="p">(</span><span class="nx">baseConfig</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;[name]-window.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">libraryTarget</span><span class="o">:</span> <span class="s2">&#34;window&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">}),</span>
</span></span><span class="line"><span class="cl">  <span class="nx">merge</span><span class="p">(</span><span class="nx">baseConfig</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;[name]-commonjs.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">libraryTarget</span><span class="o">:</span> <span class="s2">&#34;commonjs2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">}),</span>
</span></span><span class="line"><span class="cl">  <span class="nx">merge</span><span class="p">(</span><span class="nx">baseConfig</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;[name]-umd.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">libraryTarget</span><span class="o">:</span> <span class="s2">&#34;umd&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">}),</span>
</span></span><span class="line"><span class="cl">  <span class="nx">merge</span><span class="p">(</span><span class="nx">baseConfig</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;[name]-amd.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">libraryTarget</span><span class="o">:</span> <span class="s2">&#34;amd&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">}),</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>externals</strong></p>
<p>‰∏ÄËà¨ÁºñÂÜô‰∏Ä‰∏™Â∫ìÁöÑÊó∂ÂÄôÔºåËá™Â∑±ÁöÑÈ°πÁõÆ‰∏≠Âπ∂‰∏çË¶ÅÊâìÂåÖÁ¨¨‰∏âÊñπ‰æùËµñÂà∞Ëá™Â∑±ÊúÄÂêéÊâìÂåÖÁöÑÊñá‰ª∂‰∏≠ÔºåËÄåÊòØÂú® package.json ‰∏≠ÈÄöËøáÂêåÁ≠â‰æùËµñÈÖçÁΩÆÈ°πÊù•ËøõË°åËÆæÁΩÆ„ÄÇÂú®Áî®Êà∑ÂÆâË£Ö‰∫ÜËá™Â∑±ÁöÑÂåÖ‰πãÂêéÔºåÁõ¥Êé•‰ΩøÁî®Áî®Êà∑È°πÁõÆÁéØÂ¢É‰∏≠ÂÆâË£ÖÁöÑÂêåÁ≠â‰æùËµñÂåÖ„ÄÇ</p>
<ul>
<li><code>externals</code>ÈÄâÈ°πÁî®‰∫éÊåáÂÆöÂì™‰∫õÊ®°ÂùóÂ∫îËØ•Ë¢´ËßÜ‰∏∫Â§ñÈÉ®Ê®°ÂùóÔºå‰∏çÂ∫îËØ•Ë¢´ÊâìÂåÖËøõËæìÂá∫ÁöÑ bundle ‰∏≠</li>
<li>externals ÈÄâÈ°πÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÂØπË±°„ÄÅ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤„ÄÅ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÊàñËÄÖ‰∏Ä‰∏™ÂáΩÊï∞
<ul>
<li>Â¶ÇÊûúÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåÂàôË°®Á§∫Ë¶ÅÊéíÈô§ÁöÑÊ®°ÂùóÂêçÁß∞</li>
<li>Â¶ÇÊûúÊòØ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÔºåÂàôË°®Á§∫Ë¶ÅÊéíÈô§ÁöÑÊ®°ÂùóÂêçÁß∞‰∏éËØ•Ê≠£ÂàôË°®ËææÂºèÂåπÈÖçÁöÑÊâÄÊúâÊ®°Âùó„ÄÇ</li>
<li>Â¶ÇÊûúÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂàôÂú®ÂáΩÊï∞‰∏≠ÂèØ‰ª•Ëá™ÂÆö‰πâÂà§Êñ≠Âì™‰∫õÊ®°ÂùóÂ∫îËØ•Ë¢´ÊéíÈô§Âú®ÊâìÂåÖ‰πãÂ§ñÔºåÈúÄË¶ÅËøîÂõû‰∏Ä‰∏™Â∏ÉÂ∞îÂÄºÊù•Ë°®Á§∫ÊòØÂê¶ÊéíÈô§ËØ•Ê®°Âùó</li>
</ul>
</li>
<li>Â¶ÇÊûúÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåËØ•ÂØπË±°ÁöÑÈîÆË°®Á§∫Ë¶ÅÊéíÈô§ÁöÑÊ®°ÂùóÂêçÁß∞ÔºåÂÄºË°®Á§∫Âú®Âì™ÁßçÁéØÂ¢É‰∏ã‰ΩøÁî®ËØ•Ê®°Âùó„ÄÇÂèØ‰ª•ÊåáÂÆö<code>commonjs</code>„ÄÅ<code>commonjs2</code>„ÄÅ<code>amd</code>ÊàñËÄÖ<code>root</code>Á≠âÈÄâÈ°πÊù•ÊåáÂÆöÂú®‰∏çÂêåÁöÑÁéØÂ¢É‰∏ã‰ΩøÁî®ËØ•Ê®°ÂùóÊó∂ÁöÑÂêçÁß∞</li>
</ul>
<p><img src="/blogs/post/webpack/images/image-20241227191314855.png"
	width="481"
	height="459"
	srcset="/blogs/post/webpack/images/image-20241227191314855_hu_e0cbfa95afe7fecc.png 480w, /blogs/post/webpack/images/image-20241227191314855_hu_a41c94aaeed6baf.png 1024w"
	loading="lazy"
	
		alt="image-20241227191314855"
	
	
		class="gallery-image" 
		data-flex-grow="104"
		data-flex-basis="251px"
	
></p>
<p>Â¶ÇÊûú‰æùËµñ‰∫ÜÂæàÂ§öÁ¨¨‰∏âÊñπÊ®°ÂùóÔºåÂèØ‰ª•‰ΩøÁî® webpack-node-externals Êèí‰ª∂Âç≥ÂèØ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="err">externals:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="err">nodeExternals()</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span><span class="err">,</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>webpack-node-externals</code>ÊòØ‰∏Ä‰∏™ npm ÂåÖÔºåÂÆÉÂèØ‰ª•Â∏ÆÂä©ÊéíÈô§ Node.js Â∫îÁî®Á®ãÂ∫è‰∏≠‰∏çÈúÄË¶ÅÊâìÂåÖÁöÑÁ¨¨‰∏âÊñπÊ®°Âùó„ÄÇ‰∏é webpack ÁöÑ externals ÈÄâÈ°πÁ±ª‰ººÔºåwebpack-node-externals ‰πüÂèØ‰ª•Â∞ÜÊåáÂÆöÁöÑÊ®°ÂùóÊéíÈô§Âú® webpack ÊâìÂåÖ‰πãÂ§ñÔºå‰ªéËÄåÂáèÂ∞èËæìÂá∫ÁöÑ bundle ‰ΩìÁßØÔºåÊèêÈ´òÂ∫îÁî®Á®ãÂ∫èÁöÑÂä†ËΩΩÈÄüÂ∫¶</li>
<li><code>nodeExternals</code>ÂáΩÊï∞Â∞ÜËøîÂõû‰∏Ä‰∏™ÊéíÈô§ÊâÄÊúâ<code>node_modules</code>‰∏≠ÁöÑÊ®°ÂùóÁöÑ externals ÂØπË±°„ÄÇËøôÊ†∑ÔºåÊâÄÊúâÁöÑ<code>node_modules</code>‰∏≠ÁöÑÊ®°ÂùóÈÉΩÂ∞ÜË¢´ÊéíÈô§Âú® webpack ÊâìÂåÖ‰πãÂ§ñ</li>
</ul>
<h2 id="ÊèêÂèñ-css">ÊèêÂèñ CSS
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install  mini-css-extract-plugin --save-dev
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">const path = require(&#39;path&#39;);
</span></span><span class="line"><span class="cl">const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);
</span></span><span class="line"><span class="cl"><span class="gi">+const MiniCssExtractPlugin = require(&#39;mini-css-extract-plugin&#39;);
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>module.exports = {
</span></span><span class="line"><span class="cl">  mode: &#39;development&#39;,
</span></span><span class="line"><span class="cl">  devtool: false,
</span></span><span class="line"><span class="cl">  entry: &#39;./src/index.js&#39;,
</span></span><span class="line"><span class="cl">  output: {
</span></span><span class="line"><span class="cl">    path: path.resolve(__dirname, &#39;dist&#39;),
</span></span><span class="line"><span class="cl">    filename: &#39;[name].js&#39;,
</span></span><span class="line"><span class="cl"><span class="gi">+    publicPath: &#39;/&#39;
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>  },
</span></span><span class="line"><span class="cl">  module: {
</span></span><span class="line"><span class="cl">    rules: [
</span></span><span class="line"><span class="cl"><span class="gi">+      { test: /\.css$/, use: [MiniCssExtractPlugin.loader, &#39;css-loader&#39;] },
</span></span></span><span class="line"><span class="cl"><span class="gi">+      { test: /\.less$/, use: [MiniCssExtractPlugin.loader, &#39;css-loader&#39;, &#39;less-loader&#39;] },
</span></span></span><span class="line"><span class="cl"><span class="gi">+      { test: /\.scss$/, use: [MiniCssExtractPlugin.loader, &#39;css-loader&#39;, &#39;sass-loader&#39;] },
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>    ]
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">  plugins: [
</span></span><span class="line"><span class="cl">    new HtmlWebpackPlugin({ template: &#39;./src/index.html&#39; }),
</span></span><span class="line"><span class="cl"><span class="gi">+   new MiniCssExtractPlugin({
</span></span></span><span class="line"><span class="cl"><span class="gi">+      filename: &#39;style/[name].css&#39;
</span></span></span><span class="line"><span class="cl"><span class="gi">+   })
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>  ]
</span></span><span class="line"><span class="cl">};
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÂºÄÂèëÊ®°Âºè‰∏ãÂéãÁº©Êñá‰ª∂">ÂºÄÂèëÊ®°Âºè‰∏ãÂéãÁº©Êñá‰ª∂
</h2><ul>
<li><a class="link" href="https://www.npmjs.com/package/optimize-css-assets-webpack-plugin"  target="_blank" rel="noopener"
    >optimize-css-assets-webpack-plugin</a>ÊòØ‰∏Ä‰∏™‰ºòÂåñÂíåÂéãÁº© CSS ËµÑÊ∫êÁöÑÊèí‰ª∂</li>
<li><a class="link" href="https://www.npmjs.com/package/terser-webpack-plugin"  target="_blank" rel="noopener"
    >terser-webpack-plugin</a>ÊòØ‰∏Ä‰∏™‰ºòÂåñÂíåÂéãÁº© JS ËµÑÊ∫êÁöÑÊèí‰ª∂</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">const path = require(&#39;path&#39;);
</span></span><span class="line"><span class="cl">const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);
</span></span><span class="line"><span class="cl">const MiniCssExtractPlugin = require(&#39;mini-css-extract-plugin&#39;);
</span></span><span class="line"><span class="cl"><span class="gi">+ const OptimizeCssAssetsWebpackPlugin = require(&#39;optimize-css-assets-webpack-plugin&#39;);
</span></span></span><span class="line"><span class="cl"><span class="gi">+ const TerserPlugin = require(&#39;terser-webpack-plugin&#39;);
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>
</span></span><span class="line"><span class="cl">module.exports = {
</span></span><span class="line"><span class="cl"><span class="gi">+  mode: &#39;none&#39;,   // Â¶ÇÊûúmodeÊòØproduction,‰ºöËá™Âä®ÂêØÁî®ÂéãÁº©Êèí‰ª∂,Â¶ÇÊûúÈÖçÁΩÆ‰∏∫noneË°®Á§∫‰∏ç‰ºöÂêØÁî®ÂéãÁº©Êèí‰ª∂Ôºå‰ΩÜÂèØ‰ª•Ëá™Â∑±ÈÖç
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>  devtool: false,
</span></span><span class="line"><span class="cl">  entry: &#39;./src/index.js&#39;,
</span></span><span class="line"><span class="cl"><span class="gi">+  // jsÊñá‰ª∂ÁöÑÂéãÁº©
</span></span></span><span class="line"><span class="cl"><span class="gi">+  optimization: {
</span></span></span><span class="line"><span class="cl"><span class="gi">+    minimize: true,
</span></span></span><span class="line"><span class="cl"><span class="gi">+    minimizer: [
</span></span></span><span class="line"><span class="cl"><span class="gi">+      new TerserPlugin(),
</span></span></span><span class="line"><span class="cl"><span class="gi">+    ],
</span></span></span><span class="line"><span class="cl"><span class="gi">+  },
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>  output: {
</span></span><span class="line"><span class="cl">    path: path.resolve(__dirname, &#39;dist&#39;),
</span></span><span class="line"><span class="cl">    filename: &#39;[name].js&#39;,
</span></span><span class="line"><span class="cl">    publicPath: &#39;/&#39;,
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">  devServer: {
</span></span><span class="line"><span class="cl">    contentBase: path.resolve(__dirname, &#39;dist&#39;),
</span></span><span class="line"><span class="cl">    compress: true,
</span></span><span class="line"><span class="cl">    port: 8080,
</span></span><span class="line"><span class="cl">    open: true,
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">  module: {
</span></span><span class="line"><span class="cl">    rules: [
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        test: /\.(jpg|png|gif|bmp|svg)$/,
</span></span><span class="line"><span class="cl">        type:&#39;asset/resource&#39;,
</span></span><span class="line"><span class="cl">        generator:{
</span></span><span class="line"><span class="cl">          filename:&#39;images/[contenthash][ext]&#39;
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">      },
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        test: /\.html$/,
</span></span><span class="line"><span class="cl">        loader: &#39;html-loader&#39;,
</span></span><span class="line"><span class="cl">      },
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">  plugins: [
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gi">+   // htmlÊñá‰ª∂ÂéãÁº©
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>    new HtmlWebpackPlugin({
</span></span><span class="line"><span class="cl">    template: &#39;./src/index.html&#39;,
</span></span><span class="line"><span class="cl"><span class="gi">+     minify: {
</span></span></span><span class="line"><span class="cl"><span class="gi">+        collapseWhitespace: true,
</span></span></span><span class="line"><span class="cl"><span class="gi">+        removeComments: true
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>      }
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">    new MiniCssExtractPlugin({
</span></span><span class="line"><span class="cl">      filename: &#39;css/[name].css&#39;,
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl"><span class="gi">+    new OptimizeCssAssetsWebpackPlugin(),  // cssÊñá‰ª∂ÂéãÁº©
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>  ],
</span></span><span class="line"><span class="cl">};
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="cdn">CDN
</h2><ul>
<li>
<p><a class="link" href="https://webpack.js.org/guides/public-path/#root"  target="_blank" rel="noopener"
    >public-path</a></p>
</li>
<li>
<p><a class="link" href="https://npmmirror.com/package/external-remotes-plugin"  target="_blank" rel="noopener"
    >external-remotes-plugin</a></p>
</li>
<li>
<p>HTML Êñá‰ª∂‰∏çÁºìÂ≠òÔºåÊîæÂú®Ëá™Â∑±ÁöÑÊúçÂä°Âô®‰∏äÔºåÂÖ≥Èó≠Ëá™Â∑±ÊúçÂä°Âô®ÁöÑÁºìÂ≠òÔºåÈùôÊÄÅËµÑÊ∫êÁöÑ URL ÂèòÊàêÊåáÂêë CDN ÊúçÂä°Âô®ÁöÑÂú∞ÂùÄ</p>
</li>
<li>
<p>ÈùôÊÄÅÁöÑ JavaScript„ÄÅCSS„ÄÅÂõæÁâáÁ≠âÊñá‰ª∂ÂºÄÂêØ CDN ÂíåÁºìÂ≠òÔºåÂπ∂‰∏îÊñá‰ª∂ÂêçÂ∏¶‰∏ä HASH ÂÄº</p>
</li>
<li>
<p>‰∏∫‰∫ÜÂπ∂Ë°åÂä†ËΩΩ‰∏çÈòªÂ°ûÔºåÊää‰∏çÂêåÁöÑÈùôÊÄÅËµÑÊ∫êÂàÜÈÖçÂà∞‰∏çÂêåÁöÑ CDN ÊúçÂä°Âô®‰∏ä</p>
</li>
<li>
<p>ÂèØ‰ª•ÈÄöËøáÂú® HTML HEAD Ê†áÁ≠æ‰∏≠ Âä†ÂÖ•<code>&lt;link rel=&quot;dns-prefetch&quot; href=&quot;http://img.zhufengpeixun.cn&quot;&gt;</code>ÂéªÈ¢ÑËß£ÊûêÂüüÂêçÔºå‰ª•Èôç‰ΩéÂüüÂêçËß£ÊûêÂ∏¶Êù•ÁöÑÂª∂Ëøü</p>
</li>
</ul>
<h2 id="Êñá‰ª∂ÊåáÁ∫π">Êñá‰ª∂ÊåáÁ∫π
</h2><ul>
<li>ÊâìÂåÖÂêéËæìÂá∫ÁöÑÊñá‰ª∂ÂêçÂíåÂêéÁºÄ</li>
<li>hash ‰∏ÄËà¨ÊòØÁªìÂêà CDN ÁºìÂ≠òÊù•‰ΩøÁî®ÔºåÈÄöËøá webpack ÊûÑÂª∫‰πãÂêéÔºåÁîüÊàêÂØπÂ∫îÊñá‰ª∂ÂêçËá™Âä®Â∏¶‰∏äÂØπÂ∫îÁöÑ MD5 ÂÄº„ÄÇÂ¶ÇÊûúÊñá‰ª∂ÂÜÖÂÆπÊîπÂèòÁöÑËØùÔºåÈÇ£‰πàÂØπÂ∫îÊñá‰ª∂ÂìàÂ∏åÂÄº‰πü‰ºöÊîπÂèòÔºåÂØπÂ∫îÁöÑ HTML ÂºïÁî®ÁöÑ URL Âú∞ÂùÄ‰πü‰ºöÊîπÂèòÔºåËß¶Âèë CDN ÊúçÂä°Âô®‰ªéÊ∫êÊúçÂä°Âô®‰∏äÊãâÂèñÂØπÂ∫îÊï∞ÊçÆÔºåËøõËÄåÊõ¥Êñ∞Êú¨Âú∞ÁºìÂ≠ò„ÄÇ</li>
<li><strong>Â¶ÇÊûú webpack ÊâìÂåÖÊó∂‰ªª‰ΩïÊñá‰ª∂ÈÉΩÊ≤°ÊúâÂèòÂä®ÔºåÂàôÊú¨Ê¨°ÊâìÂåÖÁöÑ hash Âíå‰∏ä‰∏ÄÊ¨°ÁöÑ hash ‰∏ÄÊ†∑</strong></li>
</ul>
<p>ÊåáÁ∫πÂç†‰ΩçÁ¨¶</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">Âç†‰ΩçÁ¨¶ÂêçÁß∞</th>
          <th style="text-align: left">Âê´‰πâ</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">ext</td>
          <td style="text-align: left">ËµÑÊ∫êÂêéÁºÄÂêç</td>
      </tr>
      <tr>
          <td style="text-align: left">name</td>
          <td style="text-align: left">Êñá‰ª∂ÂêçÁß∞</td>
      </tr>
      <tr>
          <td style="text-align: left">path</td>
          <td style="text-align: left">Êñá‰ª∂ÁöÑÁõ∏ÂØπË∑ØÂæÑ</td>
      </tr>
      <tr>
          <td style="text-align: left">folder</td>
          <td style="text-align: left">Êñá‰ª∂ÊâÄÂú®ÁöÑÊñá‰ª∂Â§π</td>
      </tr>
      <tr>
          <td style="text-align: left">hash</td>
          <td style="text-align: left">ÊØèÊ¨° webpack ÊûÑÂª∫Êó∂ÁîüÊàê‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ hash ÂÄº</td>
      </tr>
      <tr>
          <td style="text-align: left">chunkhash</td>
          <td style="text-align: left">Ê†πÊçÆ chunk ÁîüÊàê hash ÂÄºÔºåÊù•Ê∫ê‰∫éÂêå‰∏Ä‰∏™ chunkÔºåÂàô chunkhash ÂÄºÂ∞±‰∏ÄÊ†∑</td>
      </tr>
      <tr>
          <td style="text-align: left">contenthash</td>
          <td style="text-align: left">Ê†πÊçÆÂÜÖÂÆπÁîüÊàê hash ÂÄºÔºåÊñá‰ª∂ÂÜÖÂÆπÁõ∏Âêå hash ÂÄºÂ∞±Áõ∏Âêå</td>
      </tr>
  </tbody>
</table></div>
<ul>
<li>hashÔºöÊØèÊ¨°ÊûÑÂª∫È°πÁõÆÁîüÊàêÁöÑÂîØ‰∏Ä hash ÂÄºÔºåÊâÄÊúâÊñá‰ª∂ÂÖ±‰∫´Âêå‰∏Ä‰∏™ hash ÂÄº„ÄÇÂè™Ë¶ÅÈ°πÁõÆÊñá‰ª∂Êúâ‰ªª‰ΩïÊîπÂèòÔºåÊï¥‰∏™È°πÁõÆÁöÑ hash ÂÄºÈÉΩ‰ºöÊîπÂèò„ÄÇÂõ†Ê≠§ÔºåÂ¶ÇÊûú‰Ω†‰ΩøÁî®‰∫Ü hash Âπ∂‰∏îÂè™ÊòØÊîπÂèò‰∫ÜÈ°πÁõÆ‰∏≠ÁöÑ‰∏Ä‰∏™Êñá‰ª∂ÔºåÊâÄÊúâÊñá‰ª∂ÈÉΩ‰ºöÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑ hashÔºåËøôÂ∞ÜÂØºËá¥ÂÆ¢Êà∑Á´ØÈúÄË¶ÅÈáçÊñ∞‰∏ãËΩΩÊâÄÊúâÊñá‰ª∂ÔºåÂç≥‰ΩøÂ§ßÈÉ®ÂàÜÊñá‰ª∂ÂÆûÈôÖ‰∏äÂπ∂Êú™ÊîπÂèò„ÄÇ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">const path = require(&#34;path&#34;);
</span></span><span class="line"><span class="cl">const glob = require(&#34;glob&#34;);
</span></span><span class="line"><span class="cl">const PurgecssPlugin = require(&#34;purgecss-webpack-plugin&#34;);  // Âà†Èô§Â§ö‰ΩôÁöÑcss
</span></span><span class="line"><span class="cl">const MiniCssExtractPlugin = require(&#39;mini-css-extract-plugin&#39;);
</span></span><span class="line"><span class="cl">const PATHS = {
</span></span><span class="line"><span class="cl">  src: path.join(__dirname, &#39;src&#39;)
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">module.exports = {
</span></span><span class="line"><span class="cl">  mode: &#34;production&#34;,
</span></span><span class="line"><span class="cl"><span class="gi">+  entry: {
</span></span></span><span class="line"><span class="cl"><span class="gi">+    main: &#39;./src/index.js&#39;,
</span></span></span><span class="line"><span class="cl"><span class="gi">+    vender:[&#39;lodash&#39;]
</span></span></span><span class="line"><span class="cl"><span class="gi">+  },
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>  output:{
</span></span><span class="line"><span class="cl">    path:path.resolve(__dirname,&#39;dist&#39;),
</span></span><span class="line"><span class="cl"><span class="gi">+    filename:&#39;[name].[hash:8].js&#39;
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>  },
</span></span><span class="line"><span class="cl">  module: {
</span></span><span class="line"><span class="cl">    rules: [
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        test: /\.css$/,
</span></span><span class="line"><span class="cl">        include: path.resolve(__dirname, &#34;src&#34;),
</span></span><span class="line"><span class="cl">        exclude: /node_modules/,
</span></span><span class="line"><span class="cl">        use: [
</span></span><span class="line"><span class="cl">          {
</span></span><span class="line"><span class="cl">            loader: MiniCssExtractPlugin.loader,
</span></span><span class="line"><span class="cl">          },
</span></span><span class="line"><span class="cl">          &#34;css-loader&#34;,
</span></span><span class="line"><span class="cl">        ],
</span></span><span class="line"><span class="cl">      },
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">  plugins: [
</span></span><span class="line"><span class="cl">    new MiniCssExtractPlugin({
</span></span><span class="line"><span class="cl"><span class="gi">+      filename: &#34;[name].[hash:8].css&#34;
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>    }),
</span></span><span class="line"><span class="cl">    new PurgecssPlugin({
</span></span><span class="line"><span class="cl">      paths: glob.sync(`${PATHS.src}/**/*`,  { nodir: true }),
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">  ],
</span></span><span class="line"><span class="cl">};
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>chunkhashÔºöÂÆÉÊ†πÊçÆ‰∏çÂêåÁöÑÂÖ•Âè£Êñá‰ª∂(Entry)ÊàñËÄÖ‰∏çÂêåÁöÑ chunk ËøõË°å‰æùËµñÊñá‰ª∂Ëß£Êûê„ÄÅÊûÑÂª∫ÂØπÂ∫îÁöÑ chunkÔºåÁîüÊàêÂØπÂ∫îÁöÑÂìàÂ∏åÂÄº„ÄÇÂú®Áîü‰∫ßÁéØÂ¢ÉÈáåÊää‰∏Ä‰∫õÂÖ¨ÂÖ±Â∫ìÂíåÁ®ãÂ∫èÂÖ•Âè£Êñá‰ª∂Âå∫ÂàÜÂºÄÔºåÂçïÁã¨ÊâìÂåÖÊûÑÂª∫ÔºåÊé•ÁùÄÈááÁî® chunkhash ÁöÑÊñπÂºèÁîüÊàêÂìàÂ∏åÂÄºÔºåÈÇ£‰πàÂè™Ë¶Å‰∏çÊîπÂä®ÂÖ¨ÂÖ±Â∫ìÁöÑ‰ª£Á†ÅÔºåÂ∞±ÂèØ‰ª•‰øùËØÅÂÖ∂ÂìàÂ∏åÂÄº‰∏ç‰ºöÂèóÂΩ±Âìç„ÄÇ
Âè™ÊúâÊâÄÂ±û chunk ÁöÑÂÜÖÂÆπÊîπÂèòÊó∂Ôºåhash ÂÄºÊâç‰ºöÊîπÂèò„ÄÇËøôÂ∞±ÊÑèÂë≥ÁùÄÔºåÂ¶ÇÊûú‰Ω†Âú®È°πÁõÆ‰∏≠ÊîπÂèò‰∫Ü‰∏Ä‰∏™Êñá‰ª∂ÔºåÂè™ÊúâËøô‰∏™Êñá‰ª∂ÊâÄÂú®ÁöÑ chunk ÁöÑ hash ÂÄº‰ºöÊîπÂèòÔºåÂÖ∂‰ªñÁöÑ chunk ‰∏ç‰ºöÊîπÂèò„ÄÇËøôÂÆûÈôÖ‰∏äÂèØ‰ª•ËÆ©ÂÆ¢Êà∑Á´ØÂè™‰∏ãËΩΩÊîπÂèò‰∫ÜÁöÑÊñá‰ª∂ÔºåËÄå‰∏çÊòØÊâÄÊúâÊñá‰ª∂„ÄÇ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">const path = require(&#34;path&#34;);
</span></span><span class="line"><span class="cl">const glob = require(&#34;glob&#34;);
</span></span><span class="line"><span class="cl">const PurgecssPlugin = require(&#34;purgecss-webpack-plugin&#34;);
</span></span><span class="line"><span class="cl">const MiniCssExtractPlugin = require(&#39;mini-css-extract-plugin&#39;);
</span></span><span class="line"><span class="cl">const PATHS = {
</span></span><span class="line"><span class="cl">  src: path.join(__dirname, &#39;src&#39;)
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">module.exports = {
</span></span><span class="line"><span class="cl">  mode: &#34;production&#34;,
</span></span><span class="line"><span class="cl">  entry: {
</span></span><span class="line"><span class="cl">    main: &#39;./src/index.js&#39;,
</span></span><span class="line"><span class="cl">    vender:[&#39;lodash&#39;]
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">  output:{
</span></span><span class="line"><span class="cl">    path:path.resolve(__dirname,&#39;dist&#39;),
</span></span><span class="line"><span class="cl"><span class="gi">+    filename:&#39;[name].[chunkhash].js&#39;
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>  },
</span></span><span class="line"><span class="cl">  plugins: [
</span></span><span class="line"><span class="cl">    new MiniCssExtractPlugin({
</span></span><span class="line"><span class="cl"><span class="gi">+      filename: &#34;[name].[chunkhash].css&#34;
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>    })
</span></span><span class="line"><span class="cl">  ],
</span></span><span class="line"><span class="cl">};
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>contenthashÔºö‰ΩøÁî® chunkhash Â≠òÂú®‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ∞±ÊòØÂΩìÂú®‰∏Ä‰∏™ JS Êñá‰ª∂‰∏≠ÂºïÂÖ• CSS Êñá‰ª∂ÔºåÁºñËØëÂêéÂÆÉ‰ª¨ÁöÑ chunkhash ÊòØÁõ∏ÂêåÁöÑÔºåËÄå‰∏îÂè™Ë¶Å js Êñá‰ª∂ÂèëÁîüÊîπÂèò ÔºåÂÖ≥ËÅîÁöÑ css Êñá‰ª∂ chunkhash ‰πü‰ºöÊîπÂèòÔºåËøô‰∏™Êó∂ÂÄôÂèØ‰ª•‰ΩøÁî®<code>mini-css-extract-plugin</code>ÈáåÁöÑ<code>contenthash</code>ÂÄºÔºå‰øùËØÅÂç≥‰Ωø css Êñá‰ª∂ÊâÄÂ§ÑÁöÑÊ®°ÂùóÈáåÂ∞±ÁÆóÂÖ∂‰ªñÊñá‰ª∂ÂÜÖÂÆπÊîπÂèòÔºåÂè™Ë¶Å css Êñá‰ª∂ÂÜÖÂÆπ‰∏çÂèòÔºåÈÇ£‰πà‰∏ç‰ºöÈáçÂ§çÊûÑÂª∫</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">const path = require(&#34;path&#34;);
</span></span><span class="line"><span class="cl">const MiniCssExtractPlugin = require(&#39;mini-css-extract-plugin&#39;);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">module.exports = {
</span></span><span class="line"><span class="cl">  output:{
</span></span><span class="line"><span class="cl">    path:path.resolve(__dirname,&#39;dist&#39;),
</span></span><span class="line"><span class="cl">    filename:&#39;[name].[chunkhash].js&#39;
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">  plugins: [
</span></span><span class="line"><span class="cl">    new MiniCssExtractPlugin({
</span></span><span class="line"><span class="cl"><span class="gi">+      filename: &#34;[name].[contenthash].css&#34;
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>    }),
</span></span><span class="line"><span class="cl">  ],
</span></span><span class="line"><span class="cl">};
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâìÂåÖÂêéÁöÑÂÜÖÂÆπ‰∏ä‰º†Âà∞Ëá™Â∑±ÁöÑÊúçÂä°Âô®ÂêéÔºåCDN ÊúçÂä°Âô®Âπ∂‰∏ç‰ºö‰∏ªÂä®ËØ∑Ê±ÇÊàë‰ª¨ÁöÑÊúçÂä°Âô®‰ª•Êõ¥Êñ∞ÊúÄÊñ∞ÁöÑËµÑÊ∫êÊñá‰ª∂Ôºå‰ΩÜÂèØ‰ª•ÂºÄÂèë‰∏Ä‰∏™Êèí‰ª∂ÔºåÂ∞ÜÊâìÂåÖÂêéÁöÑÊñá‰ª∂Ëá™Âä®Êé®ÈÄÅÂà∞ CDN ÊúçÂä°Âô®‰∏ä„ÄÇ</p>
<p>‰∏çÂêå hash ÁöÑÁâπÁÇπÔºö</p>
<p><img src="http://img.zhufengpeixun.com/variableHash.jpg"
	
	
	
	loading="lazy"
	
		alt="variableHash"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">createHash</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;crypto&#34;</span><span class="p">).</span><span class="nx">createHash</span><span class="p">(</span><span class="s2">&#34;md5&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ‰∏§‰∏™ÂÖ•Âè£Êñá‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">entry</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry1</span><span class="o">:</span> <span class="s2">&#34;entry1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry2</span><span class="o">:</span> <span class="s2">&#34;entry2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ‰∏§‰∏™Êñá‰ª∂ÂÜÖÈÉ®ÁöÑÂÖ∑‰ΩìÂÜÖÂÆπ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">entry1</span> <span class="o">=</span> <span class="s2">&#34;requir(&#39;depModule1&#39;)&#34;</span><span class="p">;</span> <span class="c1">//Ê®°Âùóentry1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">entry2</span> <span class="o">=</span> <span class="s2">&#34;require(&#39;depModule2&#39;)&#34;</span><span class="p">;</span> <span class="c1">//Ê®°Âùóentry2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ‰∏§‰∏™ÂÖ•Âè£Êñá‰ª∂ÂàÜÂà´‰æùËµñÁöÑÊ®°ÂùóÊñá‰ª∂‰∏≠ÁöÑÂÜÖÂÆπ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">depModule1</span> <span class="o">=</span> <span class="s2">&#34;depModule1&#34;</span><span class="p">;</span> <span class="c1">//Ê®°ÂùódepModule1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">depModule2</span> <span class="o">=</span> <span class="s2">&#34;depModule2&#34;</span><span class="p">;</span> <span class="c1">//Ê®°ÂùódepModule2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//Â¶ÇÊûúÈÉΩ‰ΩøÁî®hashÁöÑËØùÔºåÂõ†‰∏∫ËøôÊòØÂ∑•Á®ãÁ∫ßÂà´ÁöÑÔºåÂç≥ÊØèÊ¨°‰øÆÊîπ‰ªª‰Ωï‰∏Ä‰∏™Êñá‰ª∂ÔºåÊâÄÊúâÊñá‰ª∂ÂêçÁöÑhashËá≥ÈÉΩÂ∞ÜÊîπÂèò„ÄÇÊâÄ‰ª•‰∏ÄÊó¶‰øÆÊîπ‰∫Ü‰ªª‰Ωï‰∏Ä‰∏™Êñá‰ª∂ÔºåÊï¥‰∏™È°πÁõÆÁöÑÊñá‰ª∂ÁºìÂ≠òÈÉΩÂ∞ÜÂ§±Êïà
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">hash</span> <span class="o">=</span> <span class="nx">createHash</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s2">&#34;entry1ID&#34;</span><span class="p">)</span> <span class="c1">// Âπ∂‰∏çÊòØ‰ΩøÁî®ÁöÑÊ®°ÂùóÊñá‰ª∂‰∏≠ÁöÑÂÜÖÂÆπÁîüÊàêhashÔºåËÄåÊòØ‰ΩøÁî®ÁöÑÊ®°ÂùóÁöÑidÂêçÂ≠óÊù•ÁîüÊàêhashÔºå‰∏ÄÊó¶ÊúâÊñá‰ª∂ÂèòÂåñÔºåËøô‰∏™Ê®°ÂùóIDÂ∞±‰ºöÂèòÂåñ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s2">&#34;entry2ID&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s2">&#34;depModule1ID&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s2">&#34;depModule2ID&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="s2">&#34;hex&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;hash&#34;</span><span class="p">,</span> <span class="nx">hash</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//chunkhashÊ†πÊçÆ‰∏çÂêåÁöÑÂÖ•Âè£Êñá‰ª∂(Entry)ËøõË°å‰æùËµñÊñá‰ª∂Ëß£Êûê„ÄÅÊûÑÂª∫ÂØπÂ∫îÁöÑchunkÔºåÁîüÊàêÂØπÂ∫îÁöÑÂìàÂ∏åÂÄº„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1">//Âú®Áîü‰∫ßÁéØÂ¢ÉÈáåÊää‰∏Ä‰∫õÂÖ¨ÂÖ±Â∫ìÂíåÁ®ãÂ∫èÂÖ•Âè£Êñá‰ª∂Âå∫ÂàÜÂºÄÔºåÂçïÁã¨ÊâìÂåÖÊûÑÂª∫ÔºåÊé•ÁùÄÈááÁî®chunkhashÁöÑÊñπÂºèÁîüÊàêÂìàÂ∏åÂÄºÔºåÈÇ£‰πàÂè™Ë¶Å‰∏çÊîπÂä®ÂÖ¨ÂÖ±Â∫ìÁöÑ‰ª£Á†ÅÔºåÂ∞±ÂèØ‰ª•‰øùËØÅÂÖ∂ÂìàÂ∏åÂÄº‰∏ç‰ºöÂèóÂΩ±Âìç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">entry1ChunkHash</span> <span class="o">=</span> <span class="nx">createHash</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s2">&#34;entry1ID&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s2">&#34;depModule1ID&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="s2">&#34;hex&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;entry1ChunkHash&#34;</span><span class="p">,</span> <span class="nx">entry1ChunkHash</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">entry2ChunkHash</span> <span class="o">=</span> <span class="nx">createHash</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s2">&#34;entry2ID&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s2">&#34;depModule2ID&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="s2">&#34;hex&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;entry2ChunkHash&#34;</span><span class="p">,</span> <span class="nx">entry2ChunkHash</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">entry1ContentHash</span> <span class="o">=</span> <span class="nx">createHash</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">entry1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">depModule1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="s2">&#34;hex&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;entry1ContentHash&#34;</span><span class="p">,</span> <span class="nx">entry1ContentHash</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">entry2File</span> <span class="o">=</span> <span class="nx">entry2</span> <span class="o">+</span> <span class="nx">depModule2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">entry2ContentHash</span> <span class="o">=</span> <span class="nx">createHash</span><span class="p">().</span><span class="nx">update</span><span class="p">(</span><span class="nx">entry2File</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s2">&#34;hex&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;entry2ContentHash&#34;</span><span class="p">,</span> <span class="nx">entry2ContentHash</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëá™Â∑±ÂÜôÁöÑ‰øÆÊîπ hash ÁöÑ pluginÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">HashPlugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">constructor</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">apply</span><span class="p">(</span><span class="nx">compiler</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">compiler</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">compilation</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;HashPlugin&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">compilation</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//Â¶ÇÊûú‰Ω†ÊÉ≥ÊîπÂèòhashÂÄºÔºåÂèØ‰ª•Âú®hashÁîüÊàêËøôÂêé‰øÆÊîπ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">compilation</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">afterHash</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;HashPlugin&#34;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nx">fullhash</span> <span class="o">=</span> <span class="s2">&#34;fullhash&#34;</span><span class="p">;</span> <span class="c1">//Êó∂Èó¥Êà≥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Êú¨Ê¨°ÁºñËØëÁöÑcompilation.hash&#34;</span><span class="p">,</span> <span class="nx">compilation</span><span class="p">.</span><span class="nx">hash</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">compilation</span><span class="p">.</span><span class="nx">hash</span> <span class="o">=</span> <span class="nx">fullhash</span><span class="p">;</span> <span class="c1">//output.filename [fullhash]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">chunk</span> <span class="k">of</span> <span class="nx">compilation</span><span class="p">.</span><span class="nx">chunks</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;chunk.hash&#34;</span><span class="p">,</span> <span class="nx">chunk</span><span class="p">.</span><span class="nx">hash</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="nx">chunk</span><span class="p">.</span><span class="nx">renderedHash</span> <span class="o">=</span> <span class="s2">&#34;chunkHash&#34;</span><span class="p">;</span> <span class="c1">//ÂèØ‰ª•ÊîπÂèòchunkhash  renderedHashÂ∞±ÊòØchunkhash
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;chunk.contentHash&#34;</span><span class="p">,</span> <span class="nx">chunk</span><span class="p">.</span><span class="nx">contentHash</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="nx">chunk</span><span class="p">.</span><span class="nx">contentHash</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">javascript</span><span class="o">:</span> <span class="s2">&#34;javascriptContentHash&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;css/mini-extract&#34;</span><span class="o">:</span> <span class="s2">&#34;cssContentHash&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">HashPlugin</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ‰∏âÁßçhash
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 1. hash compilation.hash
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 2. chunkHash ÊØè‰∏™chunkÈÉΩ‰ºöÊúâ‰∏Ä‰∏™hash
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 3. contentHash ÂÜÖÂÆπhash ÊØè‰∏™Êñá‰ª∂‰ºöÂèØËÉΩÊúâ‰∏Ä‰∏™hashÂÄº
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="moduleids--chunkids-ÁöÑ‰ºòÂåñ">moduleIds &amp; chunkIds ÁöÑ‰ºòÂåñ
</h2><ul>
<li>module: ÊØè‰∏Ä‰∏™Êñá‰ª∂(js,css,jpg,Â≠ó‰ΩìÁ≠â)ÂÖ∂ÂÆûÈÉΩÂèØ‰ª•ÁúãÊàê‰∏Ä‰∏™ module</li>
<li>chunk: webpack ÊâìÂåÖÊúÄÁªàÁöÑ‰ª£Á†ÅÂùóÔºå‰ª£Á†ÅÂùó‰ºöÁîüÊàêÊñá‰ª∂Ôºå‰∏Ä‰∏™ chunk ÂØπÂ∫î‰∏Ä‰∏™Êñá‰ª∂ÔºåÂêåÊó∂ÊØè‰∏™ entry ÂÖ•Âè£ÈÉΩ‰ºöÂØπÂ∫î‰∏Ä‰∏™ chunkÔºå‰∏Ä‰∏™ chunk ÈÉΩ‰ºöÂØπÂ∫îÁöÑ‰∏Ä‰∏™Êñá‰ª∂„ÄÇ‰ΩÜÊòØÂèç‰πãÔºå‰∏Ä‰∏™Êñá‰ª∂Âπ∂‰∏ç‰∏ÄÂÆöÈÉΩÊòØÊ†πÊçÆ entry Êù•ÁîüÊàêÁöÑÔºåÊúâÂèØËÉΩÊòØ import Âä®ÊÄÅÂØºÂÖ•ÂØºËá¥‰ª£Á†ÅÂàÜÂâ≤ÁîüÊàêÁöÑÊñá‰ª∂</li>
<li>Âú® webpack5 ‰πãÂâçÔºå‰∏çÊòØÊ†πÊçÆ entry ÈÖçÁΩÆÊâìÂåÖÁîüÊàêÁöÑ chunk Êñá‰ª∂Ôºà<strong>ÈÄöËøá import ÊñπÊ≥ïÂä®ÊÄÅÂØºÂÖ•ÁöÑÊ®°Âùó</strong>ÔºâÔºåÈÉΩ‰ºö‰ª• 1„ÄÅ2„ÄÅ3&hellip;ÁöÑÊñá‰ª∂ÂëΩÂêçÊñπÂºèËæìÂá∫ÔºåÂà†Èô§Êüê‰∫õÊñá‰ª∂ÂèØËÉΩ‰ºöÂØºËá¥ÁºìÂ≠òÂ§±Êïà</li>
<li>Âú®Áîü‰∫ßÊ®°Âºè‰∏ãÔºåÈªòËÆ§ÂêØÁî®Ëøô‰∫õÂäüËÉΩ chunkIds: &ldquo;deterministic&rdquo;, moduleIds: &ldquo;deterministic&rdquo;ÔºåÊ≠§ÁÆóÊ≥ïÈááÁî®<code>Á°ÆÂÆöÊÄß</code>ÁöÑÊñπÂºèÂ∞ÜÁü≠Êï∞Â≠ó ID(3 Êàñ 4 ‰∏™Â≠óÁ¨¶)ÔºåÁü≠ hash ÂÄºÂàÜÈÖçÁªô modules Âíå chunks</li>
<li>chunkId ËÆæÁΩÆ‰∏∫ deterministicÔºåÂàô output ‰∏≠ chunkFilename ÈáåÁöÑ[name]‰ºöË¢´ÊõøÊç¢ÊàêÁ°ÆÂÆöÊÄßÁü≠Êï∞Â≠ó ID</li>
<li>ËôΩÁÑ∂ chunkId ‰∏çÂèò(‰∏çÁÆ°ÂÄºÊòØ deterministic | natural | named)Ôºå‰ΩÜÊõ¥Êîπ chunk ÂÜÖÂÆπÔºåchunkhash ËøòÊòØ‰ºöÊîπÂèòÁöÑ</li>
</ul>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">ÂèØÈÄâÂÄº</th>
          <th style="text-align: left">Âê´‰πâ</th>
          <th style="text-align: left">Á§∫‰æã</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">naturalÔºàÈªòËÆ§ÂÄºÔºâËá™ÁÑ∂Êï∞</td>
          <td style="text-align: left">Êåâ‰ΩøÁî®È°∫Â∫èÁöÑÊï∞Â≠ó ID</td>
          <td style="text-align: left">1</td>
      </tr>
      <tr>
          <td style="text-align: left">named</td>
          <td style="text-align: left">Êñπ‰æøË∞ÉËØïÁöÑÈ´òÂèØËØªÊÄß id</td>
          <td style="text-align: left">src_two_js.js</td>
      </tr>
      <tr>
          <td style="text-align: left">deterministic</td>
          <td style="text-align: left">Ê†πÊçÆÊ®°ÂùóÂêçÁß∞ÁîüÊàêÁÆÄÁü≠ÁöÑ hash ÂÄº</td>
          <td style="text-align: left">915</td>
      </tr>
      <tr>
          <td style="text-align: left">size</td>
          <td style="text-align: left">Ê†πÊçÆÊ®°ÂùóÂ§ßÂ∞èÁîüÊàêÁöÑÊï∞Â≠ó id</td>
          <td style="text-align: left">0</td>
      </tr>
  </tbody>
</table></div>
<p>webpack.config.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">const path = require(&#39;path&#39;);
</span></span><span class="line"><span class="cl">module.exports = {
</span></span><span class="line"><span class="cl">    mode: &#39;development&#39;,
</span></span><span class="line"><span class="cl">    devtool:false,
</span></span><span class="line"><span class="cl"><span class="gi">+   optimization:{
</span></span></span><span class="line"><span class="cl"><span class="gi">+       moduleIds:&#39;deterministic&#39;,
</span></span></span><span class="line"><span class="cl"><span class="gi">+       chunkIds:&#39;deterministic&#39;
</span></span></span><span class="line"><span class="cl"><span class="gi">+   }
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>src\index.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span><span class="p">(</span><span class="s2">&#34;./one&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span><span class="p">(</span><span class="s2">&#34;./two&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span><span class="p">(</span><span class="s2">&#34;./three&#34;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>one.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="s2">&#34;one&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>two Âíå three ÁöÑÊñá‰ª∂ÂÜÖÂÆπÂíå one Á±ª‰ºº„ÄÇ</p>
<p>Âú® webpack ÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">+</span>   <span class="nx">optimization</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="o">+</span>       <span class="nx">moduleIds</span><span class="o">:</span><span class="s1">&#39;natural&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="o">+</span>       <span class="nx">chunkIds</span><span class="o">:</span><span class="s1">&#39;natural&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">+</span>   <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâìÂåÖÂêéÁîüÊàêÁöÑÊñá‰ª∂ÁöÑÂêçÂ≠óÂ¶Ç‰∏ãÔºà‰ª•ÂâçÈªòËÆ§Â∞±ÊòØ naturalÔºâÔºö</p>
<p><img src="/blogs/post/webpack/images/image-20241104145153320.png"
	width="718"
	height="478"
	srcset="/blogs/post/webpack/images/image-20241104145153320_hu_f09f7082675da6c.png 480w, /blogs/post/webpack/images/image-20241104145153320_hu_7b55f4263c6da060.png 1024w"
	loading="lazy"
	
		alt="image-20241104145153320"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>ÈááÁî® natural ÁöÑÁº∫ÁÇπÔºö</p>
<p>Â¶ÇÊûú‰ª£Á†Å‰∏≠ÁßªÈô§‰∫Ü two ÁöÑ‰æùËµñÔºåÈÇ£‰πàÂéüÊù•ÁöÑ three Â∞±‰ºöÂèòÊàêÊñ∞ÁöÑ 2ÔºåÂ¶ÇÊûúÂú®Ê≤°ÊúâÈááÁî® hash ÊàñËÄÖ chunkhash Á≠âÁöÑÊÉÖÂÜµ‰∏ãÔºå‰ºöÂØºËá¥Êñá‰ª∂ÁöÑÁºìÂ≠òÂ§±Êïà„ÄÇ</p>
<p>Âú® webpack ÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">+</span>   <span class="nx">optimization</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="o">+</span>       <span class="nx">moduleIds</span><span class="o">:</span><span class="s1">&#39;deterministic&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="o">+</span>       <span class="nx">chunkIds</span><span class="o">:</span><span class="s1">&#39;deterministic&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">+</span>   <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâìÂåÖÂêéÁîüÊàêÁöÑÊñá‰ª∂ÁöÑÂêçÂ≠óÂ¶Ç‰∏ãÔºàÁé∞Âú®ÈªòËÆ§Â∞±ÊòØ deterministicÔºâÔºö</p>
<p><img src="/blogs/post/webpack/images/image-20241104145716760.png"
	width="615"
	height="540"
	srcset="/blogs/post/webpack/images/image-20241104145716760_hu_6db833cae63e2df7.png 480w, /blogs/post/webpack/images/image-20241104145716760_hu_cf5f6ca5bc618e22.png 1024w"
	loading="lazy"
	
		alt="image-20241104145716760"
	
	
		class="gallery-image" 
		data-flex-grow="113"
		data-flex-basis="273px"
	
></p>
<p>ÈÇ£‰πàÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûúÊ∫êÁ†Å‰∏≠ÂÜçÊ¨°ÁßªÈô§ twoÔºåËøôÊó∂ÔºåÊâìÂåÖÂêéÁöÑÁªìÊûúÔºåone Âíå three ÂØπÂ∫î‰ªçÁÑ∂ÊòØÂéüÊù•ÁöÑÊñá‰ª∂ÂêçËÄåÊ≤°ÊúâÊîπÂèò„ÄÇ</p>
<p><img src="/blogs/post/webpack/images/image-20241104145858973.png"
	width="507"
	height="233"
	srcset="/blogs/post/webpack/images/image-20241104145858973_hu_ffca2a82a20cf534.png 480w, /blogs/post/webpack/images/image-20241104145858973_hu_a36de952530f8fc8.png 1024w"
	loading="lazy"
	
		alt="image-20241104145858973"
	
	
		class="gallery-image" 
		data-flex-grow="217"
		data-flex-basis="522px"
	
></p>
<p>ËøôÊ†∑Â∞±ËÉΩÈïøÊúüÁºìÂ≠ò„ÄÇ</p>
<p>Â¶ÇÊûúÊÉ≥ÊääÂä®ÊÄÅÂä†ËΩΩÁöÑÂ§ö‰∏™Ê®°ÂùóÊ†πÊçÆÈúÄË¶ÅÂêàÂπ∂‰∏∫‰∏Ä‰∏™Êñá‰ª∂ÔºåÈÇ£Â∞±ÈúÄË¶ÅÂÄüÂä© splitChunksPlugin ÈÖçÁΩÆÊù•ÂÆûÁé∞„ÄÇ</p>
<p>ÂÆûÁé∞ÂæÆÂâçÁ´ØÁöÑÊñπÂºèÔºö</p>
<ol>
<li>iframe</li>
<li>qiankun</li>
<li>Ê®°ÂùóËÅîÈÇ¶</li>
</ol>
<h2 id="Ê®°ÂùóËÅîÈÇ¶">Ê®°ÂùóËÅîÈÇ¶
</h2><p>‰∏ÄËà¨Áî®‰∫éÂÆûÁé∞ÂæÆÂâçÁ´Ø„ÄÇ ÂÖ∏ÂûãÁöÑ‰∫ßÂìÅÔºöqiankun„ÄÇ</p>
<ul>
<li>
<p>Module Federation ÁöÑÂä®Êú∫ÊòØ‰∏∫‰∫Ü‰∏çÂêåÂºÄÂèëÂ∞èÁªÑÈó¥ÂÖ±ÂêåÂºÄÂèë‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Â∫îÁî®</p>
</li>
<li>
<p>Â∫îÁî®Â∞ÜË¢´ÂàíÂàÜ‰∏∫Êõ¥Â∞èÁöÑÂ∫îÁî®ÂùóÔºå‰∏Ä‰∏™Â∫îÁî®ÂùóÔºåÂèØ‰ª•ÊòØÊØîÂ¶ÇÂ§¥ÈÉ®ÂØºËà™ÊàñËÄÖ‰æßËæπÊ†èÁöÑÂâçÁ´ØÁªÑ‰ª∂Ôºå‰πüÂèØ‰ª•ÊòØÊï∞ÊçÆËé∑ÂèñÈÄªËæëÁöÑÈÄªËæëÁªÑ‰ª∂</p>
</li>
<li>
<p>ÊØè‰∏™Â∫îÁî®ÂùóÁî±‰∏çÂêåÁöÑÁªÑÂºÄÂèë</p>
</li>
<li>
<p>Â∫îÁî®ÊàñÂ∫îÁî®ÂùóÂÖ±‰∫´ÂÖ∂‰ªñÂÖ∂‰ªñÂ∫îÁî®ÂùóÊàñËÄÖÂ∫ì</p>
</li>
<li>
<p><strong>‰ΩøÁî® Module Federation Êó∂ÔºåÊØè‰∏™Â∫îÁî®ÂùóÈÉΩÊòØ‰∏Ä‰∏™Áã¨Á´ãÁöÑÊûÑÂª∫ÔºåÊúâËá™Â∑±ÁöÑÊâìÂåÖÈÖçÁΩÆÔºåËøô‰∫õÊûÑÂª∫ÈÉΩÂ∞ÜÁºñËØë‰∏∫ÂÆπÂô®</strong></p>
</li>
<li>
<p>ÂÆπÂô®ÂèØ‰ª•Ë¢´ÂÖ∂‰ªñÂ∫îÁî®ÊàñËÄÖÂÖ∂‰ªñÂÆπÂô®Â∫îÁî®</p>
</li>
<li>
<p>‰∏Ä‰∏™Ë¢´ÂºïÁî®ÁöÑÂÆπÂô®Ë¢´Áß∞‰∏∫ remoteÔºåÂºïÁî®ËÄÖË¢´Áß∞‰∏∫ host Ôºå remote Êö¥Èú≤Ê®°ÂùóÁªô hostÔºåhost ÂàôÂèØ‰ª•‰ΩøÁî®Ëøô‰∫õÊö¥Èú≤ÁöÑÊ®°ÂùóÔºåËøô‰∫õÊ®°ÂùóË¢´Êàê‰∏∫ remote Ê®°Âùó</p>
</li>
</ul>
<p><img src="/blogs/post/webpack/images/image-20230503091426077.png"
	width="2189"
	height="565"
	srcset="/blogs/post/webpack/images/image-20230503091426077_hu_bcc1747f1c0d4cf4.png 480w, /blogs/post/webpack/images/image-20230503091426077_hu_1e1562a7d7c86036.png 1024w"
	loading="lazy"
	
		alt="image-20230503091426077"
	
	
		class="gallery-image" 
		data-flex-grow="387"
		data-flex-basis="929px"
	
></p>
<p><strong>Ê®°ÂùóËÅîÈÇ¶ÂøÖÈ°ªÂºÇÊ≠•ÂØºÂÖ•Ôºà import(&lsquo;xxxx.js&rsquo;) Ôºâ„ÄÇ</strong></p>
<p>‰ΩøÁî®‰∫ÜÊ®°ÂùóËÅîÈÇ¶ÂêéÁöÑÈ°πÁõÆÔºå‰∏çÂêåÁöÑÂÆπÂô®È°πÁõÆÂèØ‰ª•ÈÄâÊã©‰∏çÂêåÁöÑÊäÄÊúØÊ†àÔºå‰ΩÜÊòØÂèØËÉΩÊØîËæÉÈöæËøõË°å‰∏çÂêåÂ∫îÁî®Âùó‰πãÈó¥ÁöÑÁªÑ‰ª∂Èó¥ÈÄö‰ø°Ôºå‰ΩÜÊòØÂøÖÈ°ªÈÉΩ‰æùËµñ‰∫é webpack5„ÄÇ</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>Â≠óÊÆµ</th>
          <th>Á±ªÂûã</th>
          <th>Âê´‰πâ</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>name</td>
          <td>string</td>
          <td>ÂøÖ‰º†ÂÄºÔºåÂç≥ËæìÂá∫ÁöÑÊ®°ÂùóÂêçÔºåË¢´ËøúÁ®ãÂºïÁî®Êó∂Ë∑ØÂæÑ‰∏∫${name}/${expose}</td>
      </tr>
      <tr>
          <td>library</td>
          <td>object</td>
          <td>Â£∞ÊòéÂÖ®Â±ÄÂèòÈáèÁöÑÊñπÂºèÔºåname ‰∏∫ umd ÁöÑ name</td>
      </tr>
      <tr>
          <td>filename</td>
          <td>string</td>
          <td>ÊûÑÂª∫ËæìÂá∫ÁöÑÊñá‰ª∂Âêç</td>
      </tr>
      <tr>
          <td>remotes</td>
          <td>object</td>
          <td>ËøúÁ®ãÂºïÁî®ÁöÑÂ∫îÁî®ÂêçÂèäÂÖ∂Âà´ÂêçÁöÑÊò†Â∞ÑÔºå‰ΩøÁî®Êó∂‰ª• key ÂÄº‰Ωú‰∏∫ name</td>
      </tr>
      <tr>
          <td>exposes</td>
          <td>object</td>
          <td>Ë¢´ËøúÁ®ãÂºïÁî®Êó∂ÂèØÊö¥Èú≤ÁöÑËµÑÊ∫êË∑ØÂæÑÂèäÂÖ∂Âà´Âêç</td>
      </tr>
      <tr>
          <td>shared</td>
          <td>object</td>
          <td>‰∏éÂÖ∂‰ªñÂ∫îÁî®‰πãÈó¥ÂèØ‰ª•ÂÖ±‰∫´ÁöÑÁ¨¨‰∏âÊñπ‰æùËµñÔºå‰Ωø‰Ω†ÁöÑ‰ª£Á†Å‰∏≠‰∏çÁî®ÈáçÂ§çÂä†ËΩΩÂêå‰∏Ä‰ªΩ‰æùËµñ</td>
      </tr>
  </tbody>
</table></div>
<h2 id="‰ª£Á†ÅÂàÜÂâ≤">‰ª£Á†ÅÂàÜÂâ≤
</h2><h3 id="ÊñπÂºè‰∏Ä"><strong>ÊñπÂºè‰∏Ä</strong>
</h3><p>ÈÄöËøáÈÖçÁΩÆ entry ‰∏∫Â§ö‰∏™ÂÖ•Âè£ÂÆûÁé∞‰ª£Á†ÅÂàÜÂâ≤ÔºåÊØè‰∏™ÂÖ•Âè£ÂíåÂÆÉÁöÑ‰æùËµñÈÉΩ‰ºöÁîüÊàê‰∏Ä‰∏™‰ª£Á†ÅÂùóËÄåÁîüÊàêÂçïÁã¨ÁöÑÊñá‰ª∂</p>
<p>ËøôÁßçÊñπÂºèÁöÑ‰∏çË∂≥Ôºö</p>
<ol>
<li>‰∏çÂ§üÁÅµÊ¥ªÔºå‰∏Ä‰∏™ÂÖ•Âè£ÂØπÂ∫î‰∏Ä‰∏™‰ª£Á†ÅÂùóÔºåÂØπÂ∫î‰∏Ä‰∏™Êñá‰ª∂Ôºå‰∏çËÉΩÂ∞ÜÊ†∏ÂøÉÁöÑÂ∫îÁî®Á®ãÂ∫èËøõË°åÊãÜÂàÜ</li>
<li>Â¶ÇÊûúÂÖ•Âè£ chunks ‰πãÈó¥ÂåÖÂê´ÈáçÂ§çÁöÑÊ®°Âùó(Â¶ÇÔºölodash)ÔºåÈÇ£‰∫õÈáçÂ§çÊ®°ÂùóÈÉΩ‰ºöË¢´ÂºïÂÖ•Âà∞ÂêÑËá™ÁîüÊàêÁöÑÊñá‰ª∂‰∏≠</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">entry1</span><span class="o">:</span> <span class="s2">&#34;./src/entry1.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">entry2</span><span class="o">:</span> <span class="s2">&#34;./src/entry2.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>entry1.js Âíå entry.js ‰ª£Á†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./title&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>title.js:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="s2">&#34;title&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâìÂåÖÁîüÊàê‰∏§‰∏™Êñá‰ª∂ entry1.js Âíå entry2.jsÔºåÂÆÉ‰ª¨ÂÜÖÈÉ®ÈÉΩÊúâ‰ª•‰∏ã‰ª£Á†ÅÊÆµÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">webpackModules</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;./src/title.js&#34;</span><span class="o">:</span> <span class="p">(</span><span class="nx">module</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="s2">&#34;title&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>html ‰∏≠Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">defer</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;entry1.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">defer</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;entry2.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÊñπÂºè‰∫å"><strong>ÊñπÂºè‰∫å</strong>
</h3><p>Âä®ÊÄÅÂØºÂÖ•ÂíåÊáíÂä†ËΩΩ„ÄÇ</p>
<p>import()ÊòØ‰∏Ä‰∏™ JS ËØ≠Ê≥ïÔºåwebpack Âú®ÊâìÂåÖÁºñËØëÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÈÅáÂà∞ import ËØ≠Ê≥ï‰ºöÊääÂÆÉËΩ¨Êç¢Êàê require.eÔºårequire.e ÊòØÈÄöËøáÂä®ÊÄÅÂàõÂª∫ script Ê†áÁ≠æÂÆûÁé∞ÁöÑ„ÄÇ</p>
<ul>
<li>Áî®Êà∑ÂΩìÂâçÈúÄË¶ÅÁî®‰ªÄ‰πàÂäüËÉΩÂ∞±Âè™Âä†ËΩΩËøô‰∏™ÂäüËÉΩÂØπÂ∫îÁöÑ‰ª£Á†ÅÔºå‰πüÂ∞±ÊòØÊâÄË∞ìÁöÑÊåâÈúÄÂä†ËΩΩÔºåÂú®ÁªôÂçïÈ°µÂ∫îÁî®ÂÅöÊåâÈúÄÂä†ËΩΩ‰ºòÂåñÊó∂</li>
<li>‰∏ÄËà¨ÈááÁî®‰ª•‰∏ãÂéüÂàôÔºö
<ul>
<li>ÂØπÁΩëÁ´ôÂäüËÉΩËøõË°åÂàíÂàÜÔºåÊØè‰∏ÄÁ±ª‰∏Ä‰∏™ chunk</li>
<li>ÂØπ‰∫éÈ¶ñÊ¨°ÊâìÂºÄÈ°µÈù¢ÈúÄË¶ÅÁöÑÂäüËÉΩÁõ¥Êé•Âä†ËΩΩÔºåÂ∞ΩÂø´Â±ïÁ§∫ÁªôÁî®Êà∑,Êüê‰∫õ‰æùËµñÂ§ßÈáè‰ª£Á†ÅÁöÑÂäüËÉΩÁÇπÂèØ‰ª•ÊåâÈúÄÂä†ËΩΩ</li>
<li>Ë¢´ÂàÜÂâ≤Âá∫ÂéªÁöÑ‰ª£Á†ÅÈúÄË¶Å‰∏Ä‰∏™ÊåâÈúÄÂä†ËΩΩÁöÑÊó∂Êú∫</li>
</ul>
</li>
</ul>
<p>webpack.config.jsÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;html-webpack-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">clean</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s2">&#34;development&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">devtool</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">template</span><span class="o">:</span> <span class="s2">&#34;./src/index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>video.jsÔºåÂÅáËÆæËøô‰∏™Êñá‰ª∂ÈùûÂ∏∏Â§ß</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="s2">&#34;video&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>index.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;btn&#34;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;click&#34;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span><span class="p">(</span><span class="s2">&#34;./video&#34;</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>index.html</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;play&#34;</span><span class="p">&gt;</span>Êí≠Êîæ<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ª•‰∏äÈù¢ÁöÑ‰ª£Á†ÅÊâìÂåÖÂêéÔºåÁîüÊàêÊñá‰ª∂ÊîæÂà∞ÊµèËßàÂô®‰∏≠ËøêË°åÊó∂ÔºåÊµèËßàÂô®ÂÖàËØ∑Ê±Ç html Êñá‰ª∂Ôºåhtml Êñá‰ª∂ÂÜÖÂÆπÊúâÂ¶Ç‰∏ã‰ª£Á†ÅÊÆµÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">defer</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;main.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;btn&#34;</span><span class="p">&gt;</span>ÊåâÈíÆ<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰ºöÂÜçÂéªËØ∑Ê±Ç main.js Êñá‰ª∂ÔºåËØ•Êñá‰ª∂ËØ∑Ê±ÇÂõûÊù•ÂêéËøõË°åÊâßË°åÔºåÁªô button ÁªëÂÆö‰∏ä click ‰∫ã‰ª∂Ôºå‰ΩÜÊòØÂõ†‰∏∫Ê≤°ÊúâËß¶ÂèëËØ•ÁÇπÂáª‰∫ã‰ª∂ÔºåÊâÄ‰ª•‰∏ç‰ºöËá™Âä®ÁöÑÂéªÂä†ËΩΩÂØπÂ∫îÁöÑÊáíÂä†ËΩΩÊñá‰ª∂ÔºåÂΩìÁÇπÂáªÂêéÊâç‰ºöÂèëËµ∑ÁΩëÁªúËØ∑Ê±ÇÂπ∂Âä†ËΩΩÂØπÂ∫îÁöÑÊñá‰ª∂„ÄÇ</p>
<p>ÁÇπÂáªÊåâÈíÆÂâçÁöÑÁΩëÁªúÈù¢ÊùøËØ∑Ê±ÇÈù¢ÊùøÂ¶Ç‰∏ãÔºö</p>
<p><img src="/blogs/post/webpack/images/image-20230522224854354.png"
	width="2053"
	height="297"
	srcset="/blogs/post/webpack/images/image-20230522224854354_hu_ae745b08033174cd.png 480w, /blogs/post/webpack/images/image-20230522224854354_hu_efc7c8e45e38ecee.png 1024w"
	loading="lazy"
	
		alt="image-20230522224854354"
	
	
		class="gallery-image" 
		data-flex-grow="691"
		data-flex-basis="1658px"
	
></p>
<p>ÁÇπÂáªÊåâÈíÆÂêéÔºåÁΩëÁªúÈù¢ÊùøÂ¶Ç‰∏ãÔºö</p>
<p><img src="/blogs/post/webpack/images/image-20230522224927703.png"
	width="1982"
	height="347"
	srcset="/blogs/post/webpack/images/image-20230522224927703_hu_c5f92f96b071b26c.png 480w, /blogs/post/webpack/images/image-20230522224927703_hu_973139749773feec.png 1024w"
	loading="lazy"
	
		alt="image-20230522224927703"
	
	
		class="gallery-image" 
		data-flex-grow="571"
		data-flex-basis="1370px"
	
></p>
<p><strong>‰∏éÊñπÂºè‰∫åÁõ∏ÂÖ≥ÁöÑ preload Âíå prefetch</strong></p>
<p>import(/*_ webpackPreload:true _/ &ldquo;./video&rdquo;)‰∏≠ÁöÑÂç≥‰Ωø‰ΩøÁî®‰∫ÜÈ≠îÊ≥ïÊ≥®Èáä‰πü‰∏ç‰ºöÁîüÊïàÔºåÂøÖÈ°ªÈÖçÁΩÆ‰∏Ä‰∏™Êèí‰ª∂ÊâçË°å„ÄÇ<code>@vue/preload-webpack-plugin </code>„ÄÇ</p>
<p><img src="/blogs/post/webpack/images/image-20241104195759783.png"
	width="1006"
	height="297"
	srcset="/blogs/post/webpack/images/image-20241104195759783_hu_8ad34be8a7011937.png 480w, /blogs/post/webpack/images/image-20241104195759783_hu_2482310b7a37a5af.png 1024w"
	loading="lazy"
	
		alt="image-20241104195759783"
	
	
		class="gallery-image" 
		data-flex-grow="338"
		data-flex-basis="812px"
	
></p>
<p>‰∏∫‰ªÄ‰πàÈÖçÁΩÆ‰∫Ü webpackPreload:true Ê≤°ÊúâÊïàÊûúÔºü</p>
<p>Â¶ÇÊûúÊÉ≥‰∏Ä‰∏™ script ËÑöÊú¨ËÆæÁΩÆ‰∏∫ preloadÔºåÈ¢ÑÂÖàÊãâÂèñÔºåÂÆÉÁöÑ‰ºòÂÖàÁ∫ßÊòØÈùûÂ∏∏È´òÁöÑÔºåÂÆÉÂ∫îËØ•Âíå main.js Âπ∂Ë°åÂä†ËΩΩÔºåÊâÄ‰ª•ËØ¥‰∏çÂèØËÉΩÊääÊèí preload ÁöÑ link Ê†áÁ≠æÁöÑÊìç‰ΩúÂä®‰ΩúÊîæÂú® main.js ÈáåÈù¢ÊâßË°åÔºåÂè™ËÉΩÊääËøô‰∏™Â∑•‰Ωú‰∫§Áªô html-webpack-pluginÔºåÂä®ÊÄÅÁöÑÂêë html Êñá‰ª∂ÈáåÊèíÂÖ•ÈìæÊé•„ÄÇ</p>
<p>‰∏∫‰∫ÜËÉΩÂ∞ΩÂø´ÁöÑÂä†ËΩΩÈúÄË¶ÅÁöÑÊñá‰ª∂ÔºàÊØîÂ¶ÇÂä†ËΩΩÂÆå‰∏ªË¶ÅÊñá‰ª∂ÂêéÔºåËá™Âä®ÂéªÂä†ËΩΩ‰∏Ä‰∫õÊáíÂä†ËΩΩÊñá‰ª∂Ôºå‰∏çÁî®ÁÇπÂáªÊåâÈíÆÂÜçÂä†ËΩΩÈÇ£‰∫õÊáíÂä†ËΩΩÊñá‰ª∂ÔºâÔºåËøôÊòØÂ∞±ÈúÄË¶Å‰ΩøÁî® prefetch ÊàñËÄÖ preload Ëß£ÂÜ≥ÊñπÊ°à‰∫Ü„ÄÇÂÖ∑‰ΩìÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install @vue/preload-webpack-plugin -D
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ª•ÂâçÁöÑÂ∞±ÂåÖÂêçÂè´Ôºö webpackpreload-webpack-plugin„ÄÇ@vue/preload-webpack-plugin ÂàôÊòØÊñ∞ÂåÖÂêç„ÄÇ</p>
<p><strong>preload</strong></p>
<ul>
<li>preload ÈÄöÂ∏∏Áî®‰∫éÊú¨È°µÈù¢Ë¶ÅÁî®Âà∞ÁöÑÂÖ≥ÈîÆËµÑÊ∫êÔºåÂåÖÊã¨ÂÖ≥ÈîÆ js„ÄÅÂ≠ó‰Ωì„ÄÅcss Êñá‰ª∂ÔºåÈúÄË¶Å preload ÁöÑËµÑÊ∫ê‰ºöÂú®Âä†ËΩΩÂà∞ html Êñá‰ª∂ÂêéÔºåÂíåÂÖ∂‰ªñÈÄöËøá script ÂºïÂÖ•ÁöÑËÑöÊú¨Êúâ‰∏ÄÊ†∑ÁöÑ‰ºòÂÖàÁ∫ßÔºåÂπ∂Ë°åÂä†ËΩΩ</li>
<li>preload Â∞Ü‰ºöÊääËµÑÊ∫êÁöÑ‰∏ãËΩΩÈ°∫Â∫èÊùÉÈáçÊèêÈ´òÔºå‰ΩøÂæóÂÖ≥ÈîÆÊï∞ÊçÆÊèêÂâç‰∏ãËΩΩÂ•Ω,‰ºòÂåñÈ°µÈù¢ÊâìÂºÄÈÄüÂ∫¶</li>
<li>Âú®ËµÑÊ∫ê‰∏äÊ∑ªÂä†È¢ÑÂÖàÂä†ËΩΩÁöÑÊ≥®ÈáäÔºå‰Ω†ÊåáÊòéËØ•Ê®°ÂùóÈúÄË¶ÅÁ´ãÂç≥Ë¢´‰ΩøÁî®</li>
<li>‰∏Ä‰∏™ËµÑÊ∫êÁöÑÂä†ËΩΩÁöÑ‰ºòÂÖàÁ∫ßË¢´ÂàÜ‰∏∫‰∫î‰∏™Á∫ßÂà´,ÂàÜÂà´ÊòØ
<ul>
<li>Highest ÊúÄÈ´ò</li>
<li>High È´ò</li>
<li>Medium ‰∏≠Á≠â</li>
<li>Low ‰Ωé</li>
<li>Lowest ÊúÄ‰Ωé</li>
</ul>
</li>
<li>Êú™‰Ωú preload ÊàñËÄÖ prefetch Â§ÑÁêÜÁöÑÂºÇÊ≠•/Âª∂Ëøü/ÊèíÂÖ•ÁöÑËÑöÊú¨ÔºàÊó†ËÆ∫Âú®‰ªÄ‰πà‰ΩçÁΩÆÔºâÂú®ÁΩëÁªú‰ºòÂÖàÁ∫ß‰∏≠ÊòØ <code>Low</code></li>
<li><a class="link" href="https://medium.com/webpack/link-rel-prefetch-preload-in-webpack-51a52358f84c"  target="_blank" rel="noopener"
    >link-rel-prefetch-preload-in-webpack</a></li>
<li><a class="link" href="https://github.com/jantimon/html-webpack-plugin/issues/1317"  target="_blank" rel="noopener"
    >Support for webpackPrefetch and webpackPreload</a></li>
<li><a class="link" href="https://www.npmjs.com/package/@vue/preload-webpack-plugin"  target="_blank" rel="noopener"
    >preload-webpack-plugin</a></li>
<li><a class="link" href="https://www.npmjs.com/package/webpackpreload-webpack-plugin"  target="_blank" rel="noopener"
    >webpackpreload-webpack-plugin</a></li>
<li><a class="link" href="https://github.com/webpack/webpack/blob/c181294865dca01b28e6e316636fef5f2aad4eb6/lib/dependencies/ImportParserPlugin.js#L108-L121"  target="_blank" rel="noopener"
    >ImportPlugin.js</a></li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/prefetchpreload.png"
	
	
	
	loading="lazy"
	
		alt="prefetchpreload"
	
	
></p>
<p>webpack.config.jsÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">const HtmlWebpackPlugin = require(&#34;html-webpack-plugin&#34;);
</span></span><span class="line"><span class="cl"><span class="gi">+ const PreloadWebpackPlugin = require(&#34;@vue/preload-webpack-plugin&#34;);
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>
</span></span><span class="line"><span class="cl">module.exports = {
</span></span><span class="line"><span class="cl">  output: {
</span></span><span class="line"><span class="cl">    clean: true,
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">  mode: &#34;development&#34;,
</span></span><span class="line"><span class="cl">  devtool: false,
</span></span><span class="line"><span class="cl">  plugins: [
</span></span><span class="line"><span class="cl">    new HtmlWebpackPlugin({
</span></span><span class="line"><span class="cl">      template: &#34;./src/index.html&#34;,
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl"><span class="gi">+    new PreloadWebpackPlugin(),
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>  ],
</span></span><span class="line"><span class="cl">};
</span></span></code></pre></td></tr></table>
</div>
</div><p>index.jsÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;btn&#34;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;click&#34;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span><span class="p">(</span><span class="s2">&#34;./video&#34;</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∂‰ªñÁöÑ video.jsÔºåhtml Ê®°ÊùøÊñá‰ª∂ÈÉΩÊ≤°Âèò„ÄÇ</p>
<p>ÊâßË°åÊâìÂåÖÊìç‰ΩúÂêéÁîüÊàêÁöÑ html Êñá‰ª∂‰∏≠ÊúâÂ¶Ç‰∏ã‰ª£Á†ÅÊÆµÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">script</span> <span class="na">defer</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;main.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;src_video_js.js&#34;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;preload&#34;</span> <span class="na">as</span><span class="o">=</span><span class="s">&#34;script&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">link</span><span class="p">&gt;</span>  // Â§öÂá∫‰∫ÜËøôË°åÈ¢ÑÂä†ËΩΩ‰ª£Á†ÅÔºåËøôÂ∞±ÊòØÈÇ£‰∏™Êèí‰ª∂ÁöÑÂéüÁêÜ
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;btn&#34;</span><span class="p">&gt;</span>ÊåâÈíÆ<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>È°πÁõÆÂú®ÊµèËßàÂô®‰∏≠ÊâìÂºÄÂêéÔºåÁΩëÁªúÈù¢ÊùøÁöÑÊÉÖÂÜµÔºö</p>
<p><img src="/blogs/post/webpack/images/image-20230522230333865.png"
	width="2064"
	height="293"
	srcset="/blogs/post/webpack/images/image-20230522230333865_hu_5e1f32991fc310bf.png 480w, /blogs/post/webpack/images/image-20230522230333865_hu_9d3af0031e675e71.png 1024w"
	loading="lazy"
	
		alt="image-20230522230333865"
	
	
		class="gallery-image" 
		data-flex-grow="704"
		data-flex-basis="1690px"
	
></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÂú®Ê≤°ÊúâÁÇπÂáªÊåâÈíÆÁöÑÊÉÖÂÜµ‰∏ãÔºåÊáíÂä†ËΩΩÊñá‰ª∂Â∞±Ë¢´È¢ÑÂÖàÂä†ËΩΩÂà∞Êú¨Âú∞‰∫ÜÔºå‰ΩÜÊòØÊåâÈíÆÁöÑÁÇπÂáª‰∫ã‰ª∂Âπ∂Ê≤°ÊúâÊâßË°åÔºåÊéßÂà∂Âè∞Âπ∂Ê≤°ÊúâÊâìÂç∞ÂÜÖÂÆπÔºåÂΩìÁÇπÂáªÊåâÈíÆÂêéÔºåÊ≤°ÊúâÂÜçÂèëËµ∑ÁΩëÁªúÊÉÖÂÜµÔºåËÄåÁõ¥Êé•ÊâìÂç∞‰∫ÜÊáíÂä†ËΩΩÊñá‰ª∂ÁöÑÂÜÖÂÆπ„ÄÇËøôÂ∞±Âä†ÈÄüÁöÑËµÑÊ∫êÊñá‰ª∂ÁöÑËé∑ÂèñÈÄüÂ∫¶ÔºåÂÆûÁé∞ÁöÑÊÉ≥Ë¶ÅÁöÑÁõÆÁöÑ„ÄÇ</p>
<p><strong>Ëá™Ë°åÂÆûÁé∞@vue/preload-webpack-plugin Êèí‰ª∂ÔºåÂÆåÂÖ®‰∏ÄÊë∏‰∏ÄÊ†∑ÁöÑÂÆûÁé∞„ÄÇËØ•Êèí‰ª∂‰∏ç‰ºöÂéªËØªÂèñ import ÂáΩÊï∞‰∏≠ÁºñÂÜôÁöÑÈ≠îÊ≥ïÊ≥®ÈáäÔºåÂè™Ë¶ÅÊòØ import ÊñπÊ≥ïÂä†ËΩΩÁöÑÊ®°ÂùóÔºåÈÉΩ‰ºöËá™Âä®Âä†‰∏äÂÖ∂ÂØπÂ∫î<code>&lt;link href=&quot;moduleID.js&quot; rel=&quot;preload&quot; as=&quot;script&quot;&gt;</code></strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ÂéüÁêÜÂíåÊÄùË∑Ø
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Ê≠§Êèí‰ª∂‰ºöÊü•ÊâæÊú¨È°πÁõÆ‰∏≠ÊâÄÊúâÁöÑÂºÇÊ≠•‰ª£Á†ÅÂùóÔºå
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ÊääËøô‰∫õÂºÇÊ≠•‰ª£Á†ÅÂùóÂØπÂ∫îÁöÑJSÊñá‰ª∂ÈÉΩÊ∑ªÂä†‰∏Ä‰∏™linkÊ†áÁ≠æ, &lt;link href=&#34;moduleID.js&#34; rel=&#34;preload&#34; as=&#34;script&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;html-webpack-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">PreloadWebpackPlugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">apply</span><span class="p">(</span><span class="nx">compiler</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÁõëÂê¨compilationÈí©Â≠êÔºåËé∑ÂèñcompilationÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">compiler</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">compilation</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;PreloadWebpackPlugin&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="kd">function</span> <span class="p">(</span><span class="nx">compilation</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Ëé∑ÂèñHtmlWebpackPluginÂêëcompilationÊ∑ªÂä†ÁöÑÈí©Â≠ê,alterAssetTags
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">HtmlWebpackPlugin</span><span class="p">.</span><span class="nx">getHooks</span><span class="p">(</span><span class="nx">compilation</span><span class="p">).</span><span class="nx">alterAssetTags</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;PreloadWebpackPlugin&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nx">htmlData</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kr">const</span> <span class="p">{</span> <span class="nx">chunks</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">compilation</span><span class="p">;</span> <span class="c1">// chunksË°®Á§∫ÁºñËØëÂæóÂà∞ÁöÑÊâÄÊúâ‰ª£Á†ÅÂùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kr">const</span> <span class="nx">files</span> <span class="o">=</span> <span class="nx">chunks</span>
</span></span><span class="line"><span class="cl">              <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="o">!</span><span class="nx">chunk</span><span class="p">.</span><span class="nx">canBeInitial</span><span class="p">())</span> <span class="c1">// chunk.canBeInitial()Ë°®Á§∫ÊòØÂê¶ÊòØÂêåÊ≠•ÂºïÂÖ•ÁöÑÊ®°Âùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>              <span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">files</span><span class="p">,</span> <span class="nx">chunk</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="nx">files</span><span class="p">.</span><span class="nx">add</span><span class="p">(...</span><span class="nx">chunk</span><span class="p">.</span><span class="nx">files</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">              <span class="p">},</span> <span class="k">new</span> <span class="nx">Set</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">            <span class="nx">files</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">file</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">htmlData</span><span class="p">.</span><span class="nx">assetTags</span><span class="p">.</span><span class="nx">styles</span><span class="p">.</span><span class="nx">unshift</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                <span class="nx">tagName</span><span class="o">:</span> <span class="s2">&#34;link&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">attributes</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">rel</span><span class="o">:</span> <span class="s2">&#34;preload&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">href</span><span class="o">:</span> <span class="nx">file</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">              <span class="p">});</span>
</span></span><span class="line"><span class="cl">            <span class="p">});</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">PreloadWebpackPlugin</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ªéÊèí‰ª∂ÁöÑÊ∫êÁ†ÅÂèØ‰ª•ÂæóÂà∞ preload ÁöÑÂéüÁêÜÊòØÂú® webpack ÊâìÂåÖÈò∂ÊÆµÂ∞±Â∞ÜÊâÄÊúâÁöÑÂºÇÊ≠•Âä†ËΩΩÁöÑÊñá‰ª∂ÔºåÁîüÊàê‰∏Ä‰∏ÄÂØπÂ∫îÁöÑ<code>&lt;link href=&quot;moduleID.js&quot; rel=&quot;preload&quot; as=&quot;script&quot;&gt;</code>ÔºåÁÑ∂ÂêéÁõ¥Êé•Ê∑ªÂä† html ÁöÑÂà∞ head Ê†áÁ≠æ‰∏≠„ÄÇÂΩìÊµèËßàÂô®‰∏ÄÂä†ËΩΩÂà∞ index.html ‰∏≠ÔºåÂú®Ëß£Êûê link Ê†áÁ≠æÊó∂Â∞±‰ºöÁõ¥Êé•Âéª<strong>ÈòªÂ°ûÂä†ËΩΩÂπ∂ÊâßË°å</strong>ÂØπÂ∫îÁöÑËÑöÊú¨Êñá‰ª∂„ÄÇ</p>
<p>preload ‰∏çÊòØ webpack ÂéüÁîüÊîØÊåÅÁöÑÔºåÂøÖÈ°ªÂÆâË£ÖÂØπÂ∫îÁöÑÊèí‰ª∂ÔºåÂπ∂‰∏îËØ•Êèí‰ª∂<strong>‰∏ç‰ºö</strong>Ê†πÊçÆ webpack È≠îÊ≥ïÊ≥®ÈáäÊù•ËÆæÁΩÆÊåáÂÆöËÑöÊú¨ÁöÑ preloadÔºåËÄåÊòØÁõ¥Êé•Â∞ÜÈ°πÁõÆ‰∏≠ÊâÄÊúâÁöÑÂºÇÊ≠•Âä†ËΩΩËÑöÊú¨ÈÉΩ preloadÔºåÊâÄ‰ª•ÈúÄË¶ÅÊÖéÁî®„ÄÇ</p>
<p><a class="link" href="https://webpack.docschina.org/api/module-methods#magic-comments"  target="_blank" rel="noopener"
    >https://webpack.docschina.org/api/module-methods#magic-comments</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// Âçï‰∏™ÁõÆÊ†á
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* webpackChunkName: &#34;my-chunk-name&#34; */</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* webpackMode: &#34;lazy&#34; */</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* webpackExports: [&#34;default&#34;, &#34;named&#34;] */</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;module&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Â§ö‰∏™ÂèØËÉΩÁöÑÁõÆÊ†á
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* webpackInclude: /\.json$/ */</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* webpackExclude: /\.noimport\.json$/ */</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* webpackChunkName: &#34;my-chunk-name&#34; */</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* webpackMode: &#34;lazy&#34; */</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* webpackPrefetch: true */</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* webpackPreload: true */</span>
</span></span><span class="line"><span class="cl">  <span class="sb">`./locale/</span><span class="si">${</span><span class="nx">language</span><span class="si">}</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="link" href="https://webpack.docschina.org/guides/code-splitting/#prefetchingpreloading-modules"  target="_blank" rel="noopener"
    >https://webpack.docschina.org/guides/code-splitting/#prefetchingpreloading-modules</a></p>
<p><strong>prefetch(È¢ÑÂÖàÊãâÂèñ)</strong></p>
<ul>
<li>prefetch Ë∑ü preload ‰∏çÂêåÔºåÂÆÉÁöÑ‰ΩúÁî®ÊòØÂëäËØâÊµèËßàÂô®Êú™Êù•ÂèØËÉΩ‰ºö‰ΩøÁî®Âà∞ÁöÑÊüê‰∏™ËµÑÊ∫êÔºåÊµèËßàÂô®Â∞±‰ºöÂú®<strong>Èó≤Êó∂</strong>ÔºàÂ∞±ÊòØËÑöÊú¨ÊâßË°åÂÆåÂêéÔºâÂéªÂä†ËΩΩÂØπÂ∫îÁöÑËµÑÊ∫êÔºåËã•ËÉΩÈ¢ÑÊµãÂà∞Áî®Êà∑ÁöÑË°å‰∏∫ÔºåÊØîÂ¶ÇÊáíÂä†ËΩΩÔºåÁÇπÂáªÂà∞ÂÖ∂ÂÆÉÈ°µÈù¢Á≠âÂàôÁõ∏ÂΩì‰∫éÊèêÂâçÈ¢ÑÂä†ËΩΩ‰∫ÜÈúÄË¶ÅÁöÑËµÑÊ∫ê</li>
<li>prefetch È≠îÊ≥ïÊ≥®ÈáäÊòØ webpack ÂéüÁîüÂ∞±ÊîØÊåÅÁöÑÔºå‰∏çÈúÄË¶ÅÈÖçÁΩÆ‰ªª‰ΩïÊèí‰ª∂ÔºåËÄå‰∏î webpack ÂØπ‰∫é<code>/* webpackPrefetch:true */</code>È≠îÊ≥ïÊ≥®ÈáäÊòØËÉΩËØÜÂà´ÁöÑÔºåÂè™ÊúâÂä†‰∫Ü<code>/* webpackPrefetch:true */</code>ÁöÑËÑöÊú¨Êâç‰ºöÊúâ prefetch ÁöÑÊïàÊûú</li>
<li>==prefetch ÁöÑÂéüÁêÜÊòØÔºåÂú®<strong>ÊâìÂåÖÁöÑËÑöÊú¨‰∏≠Âä®ÊÄÅ</strong>ÁöÑ‰∏∫ÈúÄË¶Å prefetch ÁöÑËÑöÊú¨ÂàõÂª∫ link Ê†áÁ≠æ<code>&lt;link rel=&quot;prefetch&quot; as=&quot;script&quot; href=&quot;url/moduleID&quot;&gt;</code>Âπ∂Ê∑ªÂä†Âà∞ head ‰∏≠ÔºåÂπ∂‰∏çÊòØÂú® webpack ÊâìÂåÖÈò∂ÊÆµÂ∞±ÂàõÂª∫Âπ∂Âä†ÂÖ•Âà∞ index.html ‰∏≠==</li>
</ul>
<p><strong>prefetch ÂÆû‰æã</strong></p>
<p>index.js:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;btn&#34;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;click&#34;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ‰∏Ä‰∏™ÊúâprefetchÈ≠îÊ≥ïÊ≥®ÈáäÔºå‰∏Ä‰∏™Ê≤°Êúâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">import</span><span class="p">(</span><span class="cm">/* webpackPrefetch:true  */</span> <span class="s2">&#34;./video&#34;</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span><span class="p">(</span><span class="s2">&#34;./title&#34;</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>title.js Âíå video.jsÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="s2">&#34;title&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="s2">&#34;video.js&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>index.html:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;X-UA-Compatible&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;IE=edge&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;viewport&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;width=device-width, initial-scale=1.0&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Document<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;btn&#34;</span><span class="p">&gt;</span>ÊåâÈíÆ<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>webpack.config.jsÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;html-webpack-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">clean</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s2">&#34;development&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">devtool</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">template</span><span class="o">:</span> <span class="s2">&#34;./src/index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâìÂåÖÂêéÁîüÊàêÁªìÊûúÔºö</p>
<p><img src="/blogs/post/webpack/images/image-20230523103333835.png"
	width="595"
	height="240"
	srcset="/blogs/post/webpack/images/image-20230523103333835_hu_1cf814ab0e9afb8b.png 480w, /blogs/post/webpack/images/image-20230523103333835_hu_19504c8dd26fd387.png 1024w"
	loading="lazy"
	
		alt="image-20230523103333835"
	
	
		class="gallery-image" 
		data-flex-grow="247"
		data-flex-basis="595px"
	
></p>
<p>index.htmlÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;X-UA-Compatible&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;IE=edge&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;viewport&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;width=device-width, initial-scale=1.0&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Document<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">defer</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;main.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;btn&#34;</span><span class="p">&gt;</span>ÊåâÈíÆ<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>main.js:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span><span class="lnt">324
</span><span class="lnt">325
</span><span class="lnt">326
</span><span class="lnt">327
</span><span class="lnt">328
</span><span class="lnt">329
</span><span class="lnt">330
</span><span class="lnt">331
</span><span class="lnt">332
</span><span class="lnt">333
</span><span class="lnt">334
</span><span class="lnt">335
</span><span class="lnt">336
</span><span class="lnt">337
</span><span class="lnt">338
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">webpackModules</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">webpackModuleCache</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">webpackRequire</span><span class="p">(</span><span class="nx">moduleId</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">cachedModule</span> <span class="o">=</span> <span class="nx">webpackModuleCache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">cachedModule</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">cachedModule</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">module</span> <span class="o">=</span> <span class="p">(</span><span class="nx">webpackModuleCache</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">exports</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="nx">webpackModules</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">](</span><span class="nx">module</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">webpackRequire</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">m</span> <span class="o">=</span> <span class="nx">webpackModules</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">deferred</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">O</span> <span class="o">=</span> <span class="p">(</span><span class="nx">result</span><span class="p">,</span> <span class="nx">chunkIds</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">priority</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">chunkIds</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">priority</span> <span class="o">=</span> <span class="nx">priority</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">deferred</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">deferred</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nx">priority</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">deferred</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">deferred</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="nx">deferred</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">chunkIds</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">priority</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">notFulfilled</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">deferred</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="p">[</span><span class="nx">chunkIds</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">priority</span><span class="p">]</span> <span class="o">=</span> <span class="nx">deferred</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">fulfilled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">chunkIds</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nx">priority</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="nx">notFulfilled</span> <span class="o">&gt;=</span> <span class="nx">priority</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">O</span><span class="p">).</span><span class="nx">every</span><span class="p">((</span><span class="nx">key</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">O</span><span class="p">[</span><span class="nx">key</span><span class="p">](</span><span class="nx">chunkIds</span><span class="p">[</span><span class="nx">j</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">chunkIds</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">j</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fulfilled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">priority</span> <span class="o">&lt;</span> <span class="nx">notFulfilled</span><span class="p">)</span> <span class="nx">notFulfilled</span> <span class="o">=</span> <span class="nx">priority</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">fulfilled</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">deferred</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">F</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">E</span> <span class="o">=</span> <span class="p">(</span><span class="nx">chunkId</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">F</span><span class="p">).</span><span class="nx">map</span><span class="p">((</span><span class="nx">key</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">F</span><span class="p">[</span><span class="nx">key</span><span class="p">](</span><span class="nx">chunkId</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">getProto</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span>
</span></span><span class="line"><span class="cl">  <span class="o">?</span> <span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">:</span> <span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">proto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">leafPrototypes</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">t</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">mode</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">mode</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">mode</span> <span class="o">&amp;</span> <span class="mi">8</span><span class="p">)</span> <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&#34;object&#34;</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">mode</span> <span class="o">&amp;</span> <span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">esmodule</span><span class="p">)</span> <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">mode</span> <span class="o">&amp;</span> <span class="mi">16</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">value</span><span class="p">.</span><span class="nx">then</span> <span class="o">===</span> <span class="s2">&#34;function&#34;</span><span class="p">)</span> <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">ns</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">r</span><span class="p">(</span><span class="nx">ns</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">def</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">  <span class="nx">leafPrototypes</span> <span class="o">=</span> <span class="nx">leafPrototypes</span> <span class="o">||</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">getProto</span><span class="p">({}),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">getProto</span><span class="p">([]),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">getProto</span><span class="p">(</span><span class="nx">getProto</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">current</span> <span class="o">=</span> <span class="nx">mode</span> <span class="o">&amp;</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">typeof</span> <span class="nx">current</span> <span class="o">==</span> <span class="s2">&#34;object&#34;</span> <span class="o">&amp;&amp;</span> <span class="o">!~</span><span class="nx">leafPrototypes</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">current</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">current</span> <span class="o">=</span> <span class="nx">getProto</span><span class="p">(</span><span class="nx">current</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">current</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">(</span><span class="nx">def</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">value</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">def</span><span class="p">[</span><span class="s2">&#34;default&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">d</span><span class="p">(</span><span class="nx">ns</span><span class="p">,</span> <span class="nx">def</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">ns</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">definition</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">definition</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">definition</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">key</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">get</span><span class="o">:</span> <span class="nx">definition</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">f</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">e</span> <span class="o">=</span> <span class="p">(</span><span class="nx">chunkId</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">f</span><span class="p">).</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">promises</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">f</span><span class="p">[</span><span class="nx">key</span><span class="p">](</span><span class="nx">chunkId</span><span class="p">,</span> <span class="nx">promises</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="nx">promises</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span> <span class="p">[])</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">u</span> <span class="o">=</span> <span class="p">(</span><span class="nx">chunkId</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="s2">&#34;&#34;</span> <span class="o">+</span> <span class="nx">chunkId</span> <span class="o">+</span> <span class="s2">&#34;.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">g</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">globalThis</span> <span class="o">===</span> <span class="s2">&#34;object&#34;</span><span class="p">)</span> <span class="k">return</span> <span class="nx">globalThis</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">this</span> <span class="o">||</span> <span class="k">new</span> <span class="nb">Function</span><span class="p">(</span><span class="s2">&#34;return this&#34;</span><span class="p">)();</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">window</span> <span class="o">===</span> <span class="s2">&#34;object&#34;</span><span class="p">)</span> <span class="k">return</span> <span class="nb">window</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">})();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">o</span> <span class="o">=</span> <span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">prop</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">prop</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">inProgress</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">dataWebpackPrefix</span> <span class="o">=</span> <span class="s2">&#34;01split:&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">l</span> <span class="o">=</span> <span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">done</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">chunkId</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">inProgress</span><span class="p">[</span><span class="nx">url</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">inProgress</span><span class="p">[</span><span class="nx">url</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">done</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">script</span><span class="p">,</span> <span class="nx">needAttach</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">key</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">scripts</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&#34;script&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">scripts</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">scripts</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nx">s</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&#34;src&#34;</span><span class="p">)</span> <span class="o">==</span> <span class="nx">url</span> <span class="o">||</span>
</span></span><span class="line"><span class="cl">        <span class="nx">s</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&#34;data-webpack&#34;</span><span class="p">)</span> <span class="o">==</span> <span class="nx">dataWebpackPrefix</span> <span class="o">+</span> <span class="nx">key</span>
</span></span><span class="line"><span class="cl">      <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">script</span> <span class="o">=</span> <span class="nx">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">script</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">needAttach</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">script</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&#34;script&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">script</span><span class="p">.</span><span class="nx">charset</span> <span class="o">=</span> <span class="s2">&#34;utf-8&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">script</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">=</span> <span class="mi">120</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">nc</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">script</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&#34;nonce&#34;</span><span class="p">,</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">nc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">script</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&#34;data-webpack&#34;</span><span class="p">,</span> <span class="nx">dataWebpackPrefix</span> <span class="o">+</span> <span class="nx">key</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">script</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">url</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">inProgress</span><span class="p">[</span><span class="nx">url</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">done</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">onScriptComplete</span> <span class="o">=</span> <span class="p">(</span><span class="nx">prev</span><span class="p">,</span> <span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">script</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="nx">script</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timeout</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">doneFns</span> <span class="o">=</span> <span class="nx">inProgress</span><span class="p">[</span><span class="nx">url</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="k">delete</span> <span class="nx">inProgress</span><span class="p">[</span><span class="nx">url</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="nx">script</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">&amp;&amp;</span> <span class="nx">script</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">script</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">doneFns</span> <span class="o">&amp;&amp;</span> <span class="nx">doneFns</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">fn</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">event</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">prev</span><span class="p">)</span> <span class="k">return</span> <span class="nx">prev</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">timeout</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">onScriptComplete</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;timeout&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">target</span><span class="o">:</span> <span class="nx">script</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="mi">120000</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">script</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="nx">onScriptComplete</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">script</span><span class="p">.</span><span class="nx">onerror</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">script</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">onScriptComplete</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">script</span><span class="p">.</span><span class="nx">onload</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">needAttach</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">script</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">r</span> <span class="o">=</span> <span class="p">(</span><span class="nx">exports</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">Symbol</span> <span class="o">!==</span> <span class="s2">&#34;undefined&#34;</span> <span class="o">&amp;&amp;</span> <span class="nx">Symbol</span><span class="p">.</span><span class="nx">toStringTag</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">Symbol</span><span class="p">.</span><span class="nx">toStringTag</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">value</span><span class="o">:</span> <span class="s2">&#34;Module&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="s2">&#34;esmodule&#34;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">value</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">scriptUrl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">g</span><span class="p">.</span><span class="nx">importScripts</span><span class="p">)</span> <span class="nx">scriptUrl</span> <span class="o">=</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">g</span><span class="p">.</span><span class="nx">location</span> <span class="o">+</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nb">document</span> <span class="o">=</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">g</span><span class="p">.</span><span class="nb">document</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">scriptUrl</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">currentScript</span><span class="p">)</span> <span class="nx">scriptUrl</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">currentScript</span><span class="p">.</span><span class="nx">src</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">scriptUrl</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">scripts</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&#34;script&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">scripts</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">scripts</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">scriptUrl</span><span class="p">)</span> <span class="nx">scriptUrl</span> <span class="o">=</span> <span class="nx">scripts</span><span class="p">[</span><span class="nx">i</span><span class="o">--</span><span class="p">].</span><span class="nx">src</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">scriptUrl</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&#34;Automatic publicPath is not supported in this browser&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">scriptUrl</span> <span class="o">=</span> <span class="nx">scriptUrl</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/#.*$/</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\?.*$/</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\/[^\/]+$/</span><span class="p">,</span> <span class="s2">&#34;/&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="nx">scriptUrl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">installedChunks</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">f</span><span class="p">.</span><span class="nx">j</span> <span class="o">=</span> <span class="p">(</span><span class="nx">chunkId</span><span class="p">,</span> <span class="nx">promises</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">installedChunkData</span> <span class="o">=</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">installedChunks</span><span class="p">,</span> <span class="nx">chunkId</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">?</span> <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">installedChunkData</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">installedChunkData</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">promises</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">installedChunkData</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">var</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nx">installedChunkData</span> <span class="o">=</span> <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">promises</span><span class="p">.</span><span class="nx">push</span><span class="p">((</span><span class="nx">installedChunkData</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">promise</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">p</span> <span class="o">+</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">u</span><span class="p">(</span><span class="nx">chunkId</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kd">var</span> <span class="nx">loadingEnded</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">if</span> <span class="p">(</span><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">installedChunks</span><span class="p">,</span> <span class="nx">chunkId</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">installedChunkData</span> <span class="o">=</span> <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nx">installedChunkData</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">]</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nx">installedChunkData</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="kd">var</span> <span class="nx">errorType</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">                <span class="nx">event</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&#34;load&#34;</span> <span class="o">?</span> <span class="s2">&#34;missing&#34;</span> <span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">              <span class="kd">var</span> <span class="nx">realSrc</span> <span class="o">=</span> <span class="nx">event</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">src</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">              <span class="nx">error</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;Loading chunk &#34;</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">                <span class="nx">chunkId</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34; failed.\n(&#34;</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">                <span class="nx">errorType</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;: &#34;</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">                <span class="nx">realSrc</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;)&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">              <span class="nx">error</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&#34;ChunkLoadError&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">              <span class="nx">error</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">errorType</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">              <span class="nx">error</span><span class="p">.</span><span class="nx">request</span> <span class="o">=</span> <span class="nx">realSrc</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">              <span class="nx">installedChunkData</span><span class="p">[</span><span class="mi">1</span><span class="p">](</span><span class="nx">error</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">l</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">loadingEnded</span><span class="p">,</span> <span class="s2">&#34;chunk-&#34;</span> <span class="o">+</span> <span class="nx">chunkId</span><span class="p">,</span> <span class="nx">chunkId</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">F</span><span class="p">.</span><span class="nx">j</span> <span class="o">=</span> <span class="p">(</span><span class="nx">chunkId</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="o">!</span><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">installedChunks</span><span class="p">,</span> <span class="nx">chunkId</span><span class="p">)</span> <span class="o">||</span>
</span></span><span class="line"><span class="cl">      <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
</span></span><span class="line"><span class="cl">    <span class="kc">true</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">link</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&#34;link&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">nc</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">link</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&#34;nonce&#34;</span><span class="p">,</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">nc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">link</span><span class="p">.</span><span class="nx">rel</span> <span class="o">=</span> <span class="s2">&#34;prefetch&#34;</span><span class="p">;</span> <span class="c1">// Êú¨Ë°åÂ∞±‰ΩìÁé∞‰∫ÜprefetchÁöÑÂÖ∑‰ΩìÂéüÁêÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">link</span><span class="p">.</span><span class="nx">as</span> <span class="o">=</span> <span class="s2">&#34;script&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">link</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">p</span> <span class="o">+</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">u</span><span class="p">(</span><span class="nx">chunkId</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nb">document</span><span class="p">.</span><span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">link</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">O</span><span class="p">.</span><span class="nx">j</span> <span class="o">=</span> <span class="p">(</span><span class="nx">chunkId</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">]</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">webpackJsonpCallback</span> <span class="o">=</span> <span class="p">(</span><span class="nx">parentChunkLoadingFunction</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="p">[</span><span class="nx">chunkIds</span><span class="p">,</span> <span class="nx">moreModules</span><span class="p">,</span> <span class="nx">runtime</span><span class="p">]</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">moduleId</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">chunkId</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">chunkIds</span><span class="p">.</span><span class="nx">some</span><span class="p">((</span><span class="nx">id</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="nx">moduleId</span> <span class="k">in</span> <span class="nx">moreModules</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">moreModules</span><span class="p">,</span> <span class="nx">moduleId</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">m</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">]</span> <span class="o">=</span> <span class="nx">moreModules</span><span class="p">[</span><span class="nx">moduleId</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">runtime</span><span class="p">)</span> <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">runtime</span><span class="p">(</span><span class="nx">webpackRequire</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">parentChunkLoadingFunction</span><span class="p">)</span> <span class="nx">parentChunkLoadingFunction</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">chunkIds</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">chunkId</span> <span class="o">=</span> <span class="nx">chunkIds</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">installedChunks</span><span class="p">,</span> <span class="nx">chunkId</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">][</span><span class="mi">0</span><span class="p">]();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">O</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">chunkLoadingGlobal</span> <span class="o">=</span> <span class="p">(</span><span class="nx">self</span><span class="p">[</span><span class="s2">&#34;webpackChunk_01split&#34;</span><span class="p">]</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">  <span class="nx">self</span><span class="p">[</span><span class="s2">&#34;webpackChunk_01split&#34;</span><span class="p">]</span> <span class="o">||</span> <span class="p">[]);</span>
</span></span><span class="line"><span class="cl"><span class="nx">chunkLoadingGlobal</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">webpackJsonpCallback</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="nx">chunkLoadingGlobal</span><span class="p">.</span><span class="nx">push</span> <span class="o">=</span> <span class="nx">webpackJsonpCallback</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">chunkLoadingGlobal</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">chunkLoadingGlobal</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">O</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">[</span><span class="s2">&#34;main&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">E</span><span class="p">(</span><span class="s2">&#34;src_video_js&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="mi">5</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">webpackExports</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;btn&#34;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;click&#34;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">webpackRequire</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">e</span><span class="p">(</span><span class="s2">&#34;src_video_js&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">t</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">webpackRequire</span><span class="p">,</span> <span class="s2">&#34;./src/video.js&#34;</span><span class="p">,</span> <span class="mi">23</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="nx">webpackRequire</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">e</span><span class="p">(</span><span class="s2">&#34;src_title_js&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">webpackRequire</span><span class="p">,</span> <span class="s2">&#34;./src/title.js&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">webpackExports</span> <span class="o">=</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">O</span><span class="p">(</span><span class="nx">webpackExports</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∂‰∏≠ main.js ‰∏≠ÊúâÊÆµ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">F</span><span class="p">.</span><span class="nx">j</span> <span class="o">=</span> <span class="p">(</span><span class="nx">chunkId</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="o">!</span><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">installedChunks</span><span class="p">,</span> <span class="nx">chunkId</span><span class="p">)</span> <span class="o">||</span>
</span></span><span class="line"><span class="cl">      <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
</span></span><span class="line"><span class="cl">    <span class="kc">true</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">installedChunks</span><span class="p">[</span><span class="nx">chunkId</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">link</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&#34;link&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">nc</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">link</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&#34;nonce&#34;</span><span class="p">,</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">nc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">link</span><span class="p">.</span><span class="nx">rel</span> <span class="o">=</span> <span class="s2">&#34;prefetch&#34;</span><span class="p">;</span> <span class="c1">// ++++++++++++++++++++++++++++
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">link</span><span class="p">.</span><span class="nx">as</span> <span class="o">=</span> <span class="s2">&#34;script&#34;</span><span class="p">;</span> <span class="c1">// ++++++++++++++++++++++++++++
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">link</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">p</span> <span class="o">+</span> <span class="nx">webpackRequire</span><span class="p">.</span><span class="nx">u</span><span class="p">(</span><span class="nx">chunkId</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nb">document</span><span class="p">.</span><span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">link</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ªéËøôÊÆµ‰ª£Á†ÅÂ∞±ËÉΩÁúãÂá∫ prefetch ÁöÑÂ∑•‰ΩúÂéüÁêÜÂíå preload ÁöÑ‰∏çÂêå‰∫Ü„ÄÇprefetch ÊòØÂú®Âä†ËΩΩ main Âπ∂ÊâßË°åÁöÑÊó∂ÂÄôÈááÂèñÈÄöËøá js ÂéªÂàõÂª∫ link Ê†áÁ≠æÂπ∂Âä†ËΩΩÈúÄË¶Å prefetch ÁöÑÊñá‰ª∂ÁöÑÔºåËÄå preload ÂàôÊòØÁõ¥Êé•ÈÄöËøá html-webpack-plugin Ëøô‰∏™Êèí‰ª∂Áõ¥Êé•ÁîüÊàêÂØπÂ∫îÁöÑ link Ê†áÁ≠æÊù•È¢ÑÂÖàÂä†ËΩΩÂØπÂ∫îÁöÑÊñá‰ª∂ÁöÑ„ÄÇ</p>
<p><img src="/blogs/post/webpack/images/image-20231209103803358.png"
	width="1074"
	height="523"
	srcset="/blogs/post/webpack/images/image-20231209103803358_hu_66baa0463018429f.png 480w, /blogs/post/webpack/images/image-20231209103803358_hu_35b9cbc02081df2c.png 1024w"
	loading="lazy"
	
		alt="image-20231209103803358"
	
	
		class="gallery-image" 
		data-flex-grow="205"
		data-flex-basis="492px"
	
></p>
<p>ÂΩìÊâìÂºÄ index.html Êó∂ÔºåÁΩëÁªúÈù¢ÊùøÁöÑÊÉÖÂÜµÔºö</p>
<p><img src="/blogs/post/webpack/images/image-20230523104427230.png"
	width="1354"
	height="250"
	srcset="/blogs/post/webpack/images/image-20230523104427230_hu_77764aabb9242471.png 480w, /blogs/post/webpack/images/image-20230523104427230_hu_d3e9641187225f86.png 1024w"
	loading="lazy"
	
		alt="image-20230523104427230"
	
	
		class="gallery-image" 
		data-flex-grow="541"
		data-flex-basis="1299px"
	
></p>
<p>ÂΩìÁÇπÂáªÊåâÈíÆÂêéÔºåÁΩëÁªúÈù¢ÊùøÁöÑÊÉÖÂÜµÔºö</p>
<p><img src="/blogs/post/webpack/images/image-20230523104535086.png"
	width="1332"
	height="298"
	srcset="/blogs/post/webpack/images/image-20230523104535086_hu_fa45f347c84f0442.png 480w, /blogs/post/webpack/images/image-20230523104535086_hu_fd8d34c3a8919af8.png 1024w"
	loading="lazy"
	
		alt="image-20230523104535086"
	
	
		class="gallery-image" 
		data-flex-grow="446"
		data-flex-basis="1072px"
	
></p>
<p>video.js Âõ†‰∏∫ prefetch ËÄåÁõ¥Êé•Ëµ∞Êú¨Âú∞ÁºìÂ≠ò‰∫ÜÔºåËÄå title.js Âõ†‰∏∫Ê≤°ÊúâÈÖçÁΩÆ prefetchÔºåÊâÄ‰ª•Ëµ∞ÁöÑÊòØÁΩëÁªúËØ∑Ê±Ç„ÄÇ</p>
<p><strong>prefetch Âíå preload Ê∑∑Áî®ÁöÑÊÉÖÂÜµ</strong></p>
<p><img src="/blogs/post/webpack/images/image-20230523110716387.png"
	width="963"
	height="398"
	srcset="/blogs/post/webpack/images/image-20230523110716387_hu_f610b155fa1dc183.png 480w, /blogs/post/webpack/images/image-20230523110716387_hu_29ef6d1b2dd4ca1b.png 1024w"
	loading="lazy"
	
		alt="image-20230523110716387"
	
	
		class="gallery-image" 
		data-flex-grow="241"
		data-flex-basis="580px"
	
></p>
<p><img src="/blogs/post/webpack/images/image-20230523111357293.png"
	width="1361"
	height="296"
	srcset="/blogs/post/webpack/images/image-20230523111357293_hu_b933bd023cf5370c.png 480w, /blogs/post/webpack/images/image-20230523111357293_hu_a3ebeb05da091c09.png 1024w"
	loading="lazy"
	
		alt="image-20230523111357293"
	
	
		class="gallery-image" 
		data-flex-grow="459"
		data-flex-basis="1103px"
	
></p>
<p>ÂØπ‰∫é@vue/preload-webpack-plugin Êèí‰ª∂ÔºåÂç≥‰Ωø‰∏çÂÜô‰∫Ü preload ÁöÑÈ≠îÊ≥ïÊ≥®Èáä‰πü‰ºöÁîüÊïàÔºåÈªòËÆ§ËøòÊòØÂ∞ÜÂÖ®ÈÉ®ÊáíÂä†ËΩΩÁöÑÊ®°ÂùóÈÉΩËÆæÁΩÆ‰∏∫ preload„ÄÇËøôÊ†∑ÊâÄÊúâÊáíÂä†ËΩΩËµÑÊ∫ê‰ºòÂÖàÁ∫ßÈÉΩÊèêÈ´ò‰∫ÜÂæàÂ§öÔºåÂ≠òÂú®ÈöêÊÇ£„ÄÇÔºàÂ¶ÇÊûúÊÉ≥‰∏Ä‰∏™ script ËÑöÊú¨ËÆæÁΩÆ‰∏∫ preloadÔºåÈ¢ÑÂÖàÊãâÂèñÔºå‰ªñÁöÑ‰ºòÂÖàÁ∫ßÊòØÈùûÂ∏∏È´òÁöÑÔºåÂÆÉÂ∫îËØ•Âíå main.js Âπ∂Ë°åÂä†ËΩΩÔºåÊâÄ‰ª•ËØ¥‰∏çÂèØËÉΩÊääÊèí‰ª∂ preload ËÑöÊú¨ÁöÑÁöÑÂä®‰ΩúÊîæÂú® main.js ÈáåÈù¢ÊâßË°åÊó∂Âä†ËΩΩÔºåÂè™ËÉΩÊääËøô‰∏™Â∑•‰Ωú‰∫§Áªô html-webpack-plugin,Âä®ÊÄÅÁöÑÂêë html Êñá‰ª∂ÈáåÊèíÂÖ•ÈìæÊé•Ôºâ„ÄÇ</p>
<p>‰∏∫‰∫ÜËß£ÂÜ≥ preload Êó†Ê≥ïÁîüÊïàÁöÑÈóÆÈ¢òÔºåËá™Â∑±ÂÜô‰∫Ü‰∏Ä‰∏™Êèí‰ª∂Ôºöwebpackpreload-webpack-plugin„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;html-webpack-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">WebpackPreloadWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;webpackpreload-webpack-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">clean</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s2">&#34;development&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">devtool</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">template</span><span class="o">:</span> <span class="s2">&#34;./src/index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">WebpackPreloadWebpackPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>webpackpreload-webpack-pluginÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;html-webpack-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">WebpackpreloadWebpackPlugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">apply</span><span class="p">(</span><span class="nx">compiler</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">compiler</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">compilation</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;PreloadWebpackPlugin&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">compilation</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">HtmlWebpackPlugin</span><span class="p">.</span><span class="nx">getHooks</span><span class="p">(</span><span class="nx">compilation</span><span class="p">).</span><span class="nx">alterAssetTags</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;PreloadWebpackPlugin&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nx">htmlData</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="kr">const</span> <span class="p">{</span> <span class="nx">publicPath</span><span class="p">,</span> <span class="nx">assetTags</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">htmlData</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="kr">const</span> <span class="p">{</span> <span class="nx">entrypoints</span><span class="p">,</span> <span class="nx">moduleGraph</span><span class="p">,</span> <span class="nx">chunkGraph</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">compilation</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">entrypoint</span> <span class="k">of</span> <span class="nx">entrypoints</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// webpackÂÜÖÈÉ®Â∑≤ÁªèËØÜÂà´Â•ΩÈ≠îÊ≥ïÊ≥®Èáä‰∏≠ÁöÑprefetchÂíåpreload‰∫ÜÔºåÂπ∂Â∞ÜpreloadÊîæÁΩÆÂú®getChildrenByOrdersÊñπÊ≥ïÁöÑËøîÂõûÂÄº‰∏≠‰∫Ü
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kr">const</span> <span class="nx">preloaded</span> <span class="o">=</span> <span class="nx">entrypoint</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">getChildrenByOrders</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="nx">moduleGraph</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">chunkGraph</span>
</span></span><span class="line"><span class="cl">            <span class="p">).</span><span class="nx">preload</span><span class="p">;</span> <span class="c1">// is ChunkGroup[] | undefined
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">preloaded</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kr">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Set</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">group</span> <span class="k">of</span> <span class="nx">preloaded</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">chunk</span> <span class="k">of</span> <span class="nx">group</span><span class="p">.</span><span class="nx">chunks</span><span class="p">)</span> <span class="nx">chunks</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="kr">const</span> <span class="nx">files</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Set</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">chunk</span> <span class="k">of</span> <span class="nx">chunks</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">file</span> <span class="k">of</span> <span class="nx">chunk</span><span class="p">.</span><span class="nx">files</span><span class="p">)</span> <span class="nx">files</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="kr">const</span> <span class="nx">links</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">file</span> <span class="k">of</span> <span class="nx">files</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">links</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                <span class="nx">tagName</span><span class="o">:</span> <span class="s2">&#34;link&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">attributes</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">rel</span><span class="o">:</span> <span class="s2">&#34;preload&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">href</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">publicPath</span><span class="si">}${</span><span class="nx">file</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">              <span class="p">});</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="nx">assetTags</span><span class="p">.</span><span class="nx">styles</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(...</span><span class="nx">links</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">WebpackpreloadWebpackPlugin</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>webpack Ëé∑ÂèñÂà∞Ê∫ê‰ª£Á†ÅÂêéÔºåÂ∞ÜÊ∫ê‰ª£Á†ÅËΩ¨‰∏∫ËØ≠Ê≥ïÊ†ëËøõË°åÈÅçÂéÜÔºåÈÅçÂéÜÊó∂ÊçïËé∑ import ËäÇÁÇπÔºåÂÜÖÈÉ®‰ºöËá™Ë°åËØÜÂà´È≠îÊ≥ïÊ≥®Èáä„ÄÇ</p>
<p>plugins\ImportPlugin.jsÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">ImportPlugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">apply</span><span class="p">(</span><span class="nx">compiler</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">compiler</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">compilation</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;ImportPlugin&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nx">compilation</span><span class="p">,</span> <span class="p">{</span> <span class="nx">normalModuleFactory</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">normalModuleFactory</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">parser</span>
</span></span><span class="line"><span class="cl">          <span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="s2">&#34;javascript/auto&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;ImportPlugin&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">parser</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">parser</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">importCall</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;ImportParserPlugin&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">expr</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="kr">const</span> <span class="p">{</span> <span class="nx">options</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">parser</span><span class="p">.</span><span class="nx">parseCommentOptions</span><span class="p">(</span><span class="nx">expr</span><span class="p">.</span><span class="nx">range</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">              <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">});</span>
</span></span><span class="line"><span class="cl">          <span class="p">});</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">ImportPlugin</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏™ webpack Êèí‰ª∂ÁöÑ‰ΩúÁî®ÊòØ‰∏∫‰∫ÜËß£Êûê JavaScript Ê∫ê‰ª£Á†Å‰∏≠ÁöÑ import ËØ≠Âè•ÔºåÂπ∂‰∏îÊèêÂèñÂá∫Ê≥®Èáä‰∏≠ÁöÑÈÄâÈ°π‰ø°ÊÅØ„ÄÇ</p>
<p>ÂÖ∑‰ΩìÊù•ËØ¥ÔºåËØ•Êèí‰ª∂Âú® Webpack ÁºñËØëËøáÁ®ã‰∏≠ÁöÑ&quot;compilation&quot;Èò∂ÊÆµÔºåÊ≥®ÂÜå‰∫Ü‰∏Ä‰∏™Èí©Â≠êÂáΩÊï∞Áî®‰∫éÂ§ÑÁêÜÊôÆÈÄöÊ®°ÂùóÂ∑•ÂéÇ(normalModuleFactory)‰∏≠ÁöÑ JavaScript Ê®°Âùó„ÄÇÂΩìËß£Êûê JavaScript Ê∫ê‰ª£Á†ÅÊó∂ÔºåËØ•Êèí‰ª∂‰ºöÂú® import Ë∞ÉÁî®ÁöÑËØ≠Ê≥ïÊ†ëËäÇÁÇπ‰∏≠Ê≥®ÂÜå‰∏Ä‰∏™Èí©Â≠êÂáΩÊï∞ÔºåÁî®‰∫éËß£ÊûêÊ≥®Èáä‰∏≠ÁöÑÈÄâÈ°π‰ø°ÊÅØÔºåÂπ∂Â∞ÜÂÖ∂ËæìÂá∫Âà∞ÊéßÂà∂Âè∞‰∏≠„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåËøô‰∏™Êèí‰ª∂ÁöÑ‰ΩúÁî®Âπ∂‰∏çÊòØ‰øÆÊîπ‰ª£Á†ÅÁöÑË°å‰∏∫ÔºåËÄåÊòØÊèê‰æõ‰∫Ü‰∏ÄÁßçÂú® Webpack ÁºñËØëËøáÁ®ã‰∏≠ÂØπ‰ª£Á†ÅËøõË°åÈùôÊÄÅÂàÜÊûêÁöÑÊñπÂºèÔºå‰ª•‰æø‰∫éËøõË°å‰ª£Á†ÅÊûÑÂª∫Âíå‰ºòÂåñ„ÄÇ</p>
<h3 id="ÊñπÂºè‰∏â">ÊñπÂºè‰∏â
</h3><p><strong>ÊèêÂèñÂÖ¨ÂÖ±‰ª£Á†Å</strong></p>
<ul>
<li><a class="link" href="https://webpack.js.org/plugins/split-chunks-plugin"  target="_blank" rel="noopener"
    >split-chunks-plugin</a></li>
<li><a class="link" href="https://webpack.docschina.org/plugins/split-chunks-plugin/"  target="_blank" rel="noopener"
    >split-chunks-plugin</a></li>
<li><a class="link" href="https://github.com/webpack/webpack/tree/master/examples/common-chunk-and-vendor-chunk"  target="_blank" rel="noopener"
    >common-chunk-and-vendor-chunk</a></li>
<li>ÈÖçÁΩÆÂçïÈ°µÂ∫îÁî®ÔºåÈÖçÁΩÆÂ§öÈ°µÂ∫îÁî®</li>
</ul>
<p><strong>‰∏∫‰ªÄ‰πàÈúÄË¶ÅÊèêÂèñÂÖ¨ÂÖ±‰ª£Á†Å</strong></p>
<ul>
<li>Â§ßÁΩëÁ´ôÊúâÂ§ö‰∏™È°µÈù¢ÔºåÊØè‰∏™È°µÈù¢Áî±‰∫éÈááÁî®Áõ∏ÂêåÊäÄÊúØÊ†àÂíåÊ†∑Âºè‰ª£Á†ÅÔºå‰ºöÂåÖÂê´ÂæàÂ§öÂÖ¨ÂÖ±‰ª£Á†ÅÔºåÂ¶ÇÊûúÈÉΩÂåÖÂê´ËøõÊù•‰ºöÊúâÈóÆÈ¢ò</li>
<li>Áõ∏ÂêåÁöÑËµÑÊ∫êË¢´ÈáçÂ§çÁöÑÂä†ËΩΩÔºåÊµ™Ë¥πÁî®Êà∑ÁöÑÊµÅÈáèÂíåÊúçÂä°Âô®ÁöÑÊàêÊú¨Ôºõ</li>
<li>ÊØè‰∏™È°µÈù¢ÈúÄË¶ÅÂä†ËΩΩÁöÑËµÑÊ∫êÂ§™Â§ßÔºåÂØºËá¥ÁΩëÈ°µÈ¶ñÂ±èÂä†ËΩΩÁºìÊÖ¢ÔºåÂΩ±ÂìçÁî®Êà∑‰ΩìÈ™å„ÄÇ</li>
<li>Â¶ÇÊûúËÉΩÊääÂÖ¨ÂÖ±‰ª£Á†ÅÊäΩÁ¶ªÊàêÂçïÁã¨Êñá‰ª∂ËøõË°åÂä†ËΩΩËÉΩËøõË°å‰ºòÂåñÔºåÂèØ‰ª•ÂáèÂ∞ëÁΩëÁªú‰º†ËæìÊµÅÈáèÔºåÈôç‰ΩéÊúçÂä°Âô®ÊàêÊú¨</li>
</ul>
<p><strong>Â¶Ç‰ΩïÊèêÂèñ</strong></p>
<ul>
<li>Âü∫Á°ÄÁ±ªÂ∫ìÔºåÊñπ‰æøÈïøÊúüÁºìÂ≠ò</li>
<li>È°µÈù¢‰πãÈó¥ÁöÑÂÖ¨Áî®‰ª£Á†Å</li>
<li>ÂêÑ‰∏™È°µÈù¢ÂçïÁã¨ÁîüÊàêÊñá‰ª∂</li>
</ul>
<p><strong>module chunk bundle</strong></p>
<ul>
<li>moduleÔºöÂ∞±ÊòØ js ÁöÑÊ®°ÂùóÂåñÔºà‰∏Ä‰∏™Êñá‰ª∂Â∞±ÊòØ‰∏Ä‰∏™Ê®°ÂùóÔºâÔºåwebpack ÊîØÊåÅ commonJS„ÄÅES6 Á≠âÊ®°ÂùóÂåñËßÑËåÉ</li>
<li>chunk: chunk ÊòØ webpack Ê†πÊçÆÂäüËÉΩÊãÜÂàÜÂá∫Êù•ÁöÑÔºåÂåÖÂê´‰∏âÁßçÊÉÖÂÜµ
<ul>
<li>È°πÁõÆÂÖ•Âè£ÔºàentryÔºâ</li>
<li>ÈÄöËøá import()Âä®ÊÄÅÂºïÂÖ•ÁöÑ‰ª£Á†Å</li>
<li>ÈÄöËøá splitChunks ÊãÜÂàÜÂá∫Êù•ÁöÑ‰ª£Á†Å</li>
</ul>
</li>
<li>bundleÔºöbundle ÊòØ webpack ÊâìÂåÖ‰πãÂêéÁöÑÂêÑ‰∏™Êñá‰ª∂Ôºå‰∏ÄËà¨Â∞±ÊòØÂíå chunk ÊòØ‰∏ÄÂØπ‰∏ÄÁöÑÂÖ≥Á≥ªÔºåbundle Â∞±ÊòØÂØπ chunk ËøõË°åÁºñËØëÂéãÁº©ÊâìÂåÖÁ≠âÂ§ÑÁêÜ‰πãÂêéÁöÑ‰∫ßÂá∫</li>
</ul>
<p><strong>splitChunks</strong></p>
<ul>
<li><a class="link" href="https://webpack.js.org/plugins/split-chunks-plugin"  target="_blank" rel="noopener"
    >split-chunks-plugin</a></li>
<li>Â∞Ü<a class="link" href="https://webpack.js.org/configuration/optimization/#optimizationruntimechunk"  target="_blank" rel="noopener"
    >optimization.runtimeChunk</a>ËÆæÁΩÆ‰∏∫ true Êàñ &lsquo;multiple&rsquo;Ôºå‰ºö‰∏∫ÊØè‰∏™ÂÖ•Âè£Ê∑ªÂä†‰∏Ä‰∏™Âè™Âê´Êúâ runtime ÁöÑÈ¢ùÂ§ñ chunk</li>
</ul>
<p><img src="/blogs/post/webpack/images/image-20230523223616658.png"
	width="1114"
	height="830"
	srcset="/blogs/post/webpack/images/image-20230523223616658_hu_51c54f3170259c48.png 480w, /blogs/post/webpack/images/image-20230523223616658_hu_2ab28658ac53020d.png 1024w"
	loading="lazy"
	
		alt="image-20230523223616658"
	
	
		class="gallery-image" 
		data-flex-grow="134"
		data-flex-basis="322px"
	
></p>
<p><strong>ÈªòËÆ§ÂÄº</strong></p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂÆÉÂè™‰ºöÂΩ±ÂìçÂà∞ÊåâÈúÄÂä†ËΩΩÁöÑ chunksÔºåÂõ†‰∏∫‰øÆÊîπ initial chunks ‰ºöÂΩ±ÂìçÂà∞È°πÁõÆÁöÑ HTML Êñá‰ª∂‰∏≠ÁöÑËÑöÊú¨Ê†áÁ≠æ„ÄÇ</p>
<p>webpack Â∞ÜÊ†πÊçÆ‰ª•‰∏ãÊù°‰ª∂Ëá™Âä®ÊãÜÂàÜ chunksÔºö</p>
<ul>
<li>Êñ∞ÁöÑ chunk ÂèØ‰ª•Ë¢´ÂÖ±‰∫´ÔºåÊàñËÄÖÊ®°ÂùóÊù•Ëá™‰∫é <code>node_modules</code> Êñá‰ª∂Â§π</li>
<li>Êñ∞ÁöÑ chunk ‰ΩìÁßØÂ§ß‰∫é 20kbÔºàÂú®ËøõË°å min+gz ‰πãÂâçÁöÑ‰ΩìÁßØÔºâ</li>
<li>ÂΩìÊåâÈúÄÂä†ËΩΩ chunks Êó∂ÔºåÂπ∂Ë°åËØ∑Ê±ÇÁöÑÊúÄÂ§ßÊï∞ÈáèÂ∞è‰∫éÊàñÁ≠â‰∫é 30</li>
<li>ÂΩìÂä†ËΩΩÂàùÂßãÂåñÈ°µÈù¢Êó∂ÔºåÂπ∂ÂèëËØ∑Ê±ÇÁöÑÊúÄÂ§ßÊï∞ÈáèÂ∞è‰∫éÊàñÁ≠â‰∫é 30</li>
</ul>
<p>ÂΩìÂ∞ùËØïÊª°Ë∂≥ÊúÄÂêé‰∏§‰∏™Êù°‰ª∂Êó∂ÔºåÊúÄÂ•Ω‰ΩøÁî®ËæÉÂ§ßÁöÑ chunks„ÄÇ</p>
<p>webpack.config.js Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">entry</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">page1</span><span class="o">:</span> <span class="s2">&#34;./src/page1.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">page2</span><span class="o">:</span> <span class="s2">&#34;./src/page2.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">page3</span><span class="o">:</span> <span class="s2">&#34;./src/page3.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">optimization</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ‰∏ãÈù¢ÊòØÈªòËÆ§ÁöÑsplitChunks
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">splitChunks</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">chunks</span><span class="o">:</span> <span class="s2">&#34;all&#34;</span><span class="p">,</span> <span class="c1">// ÈªòËÆ§‰ΩúÁî®‰∫éÂºÇÊ≠•chunkÔºåÂÄº‰∏∫all/initial/async
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">minSize</span><span class="o">:</span> <span class="mi">30000</span><span class="p">,</span> <span class="c1">// ÈªòËÆ§ÂÄºÊòØ30kb,‰ª£Á†ÅÂùóÁöÑÊúÄÂ∞èÂ∞∫ÂØ∏
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">minRemainingSize</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">minChunks</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// Ë°®Á§∫Âú®ÊèêÂèñÂÖ¨ÂÖ±‰ª£Á†ÅÁöÑÊó∂ÂÄôÔºå‰∏Ä‰∏™Ê®°ÂùóË¢´Â§öÂ∞ë‰∏™ÂÖ•Âè£Áî®ÂÖ•Êâç‰ºöËøõË°åÊèêÂèñ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">maxAsyncRequests</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span> <span class="c1">//ÈôêÂà∂ÂºÇÊ≠•Ê®°ÂùóÂÜÖÈÉ®ÁöÑÂπ∂Ë°åÊúÄÂ§ßËØ∑Ê±ÇÊï∞ÁöÑÔºåËØ¥ÁôΩ‰∫Ü‰Ω†ÂèØ‰ª•ÁêÜËß£‰∏∫ÊòØÊØè‰∏™import()ÂÆÉÈáåÈù¢ÁöÑÊúÄÂ§ßÂπ∂Ë°åËØ∑Ê±ÇÊï∞Èáè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">maxInitialRequests</span><span class="o">:</span> <span class="mi">8</span><span class="p">,</span> <span class="c1">//ÈôêÂà∂ÂÖ•Âè£ÁöÑÊãÜÂàÜÊï∞Èáè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">enforceSizeThreshold</span><span class="o">:</span> <span class="mi">50000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">name</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">//ÊâìÂåÖÂêéÁöÑÂêçÁß∞ÔºåÈªòËÆ§ÊòØchunkÁöÑÂêçÂ≠óÈÄöËøáÂàÜÈöîÁ¨¶ÔºàÈªòËÆ§ÊòØÔΩûÔºâÂàÜÈöîÂºÄÔºåÂ¶Çvendor~
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">automaticNameDelimiter</span><span class="o">:</span> <span class="s2">&#34;~&#34;</span><span class="p">,</span> <span class="c1">//ÈªòËÆ§webpackÂ∞Ü‰ºö‰ΩøÁî®ÂÖ•Âè£ÂêçÂíå‰ª£Á†ÅÂùóÁöÑÂêçÁß∞ÁîüÊàêÂëΩÂêç,ÊØîÂ¶Ç &#39;vendors~main.js&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">cacheGroups</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ÁºìÂ≠òÁªÑ Ôºå ÂΩì‰∏Ä‰∏™Ê®°ÂùóÂëΩ‰∏≠Â§ö‰∏™ÁºìÂ≠òÁªÑÁöÑËßÑÂàôÊó∂ÔºåÂàôÊ†πÊçÆpriorityÁöÑÂÄºËøõË°åÊãÜÂåÖ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">defaultVendors</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">test</span><span class="o">:</span> <span class="sr">/[\\/]node_modules[\\/]/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">priority</span><span class="o">:</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="c1">// Ë∂äÂ§ßÔºå‰ºòÂÖàÁ∫ßÈ´ò
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="nx">reuseExistingChunk</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="k">default</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">minChunks</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">// ËøôÈáåÂ¶ÇÊûúÈÖçÁΩÆ‰∫ÜÔºåÂàôËøôÈáåÁöÑminChunks‰ºöË¶ÜÁõñÂ§ñÂ±ÇÁöÑminChunks
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="nx">priority</span><span class="o">:</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">reuseExistingChunk</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// .. ÂÖ∂‰ªñËá™ÂÆö‰πâËßÑÂàôÂç≥ÊãÜÂåÖÂêçÂ≠ó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//ÊääËøêË°åÊó∂ÂΩìÊàê‰∏Ä‰∏™‰ª£Á†ÅÂùóËøõË°åÂçïÁã¨ÊèêÂèñ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//runtime ‰∏∫‰∫ÜËÆ©ÊâìÂåÖÂêéÁöÑ‰ª£Á†ÅÂú®ÊµèËßàÂô®ÈáåËÉΩËøêË°å Ë¶ÅÊ®°Êãü‰∏Ä‰∏™requireÊñπÊ≥ï Ëøô‰∏™Â∞±Âè´ËøêË°åÊó∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//ÂèØ‰ª•ÊääruntimeChunkËÆæÁΩÆ‰∏∫trueÂ∞±ÂèØ‰ª•ÊääËøêË°åÊó∂‰ª£Á†ÅÂùóÂçïÁã¨ÊèêÂèñÔºåÂÆûÁé∞ÈïøÊúüÁºìÂ≠ò
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//Âõ†‰∏∫ËøêË°åÊó∂‰ª£Á†ÅÂè™ÊòØ‰∏Ä‰∏™Â∑•ÂÖ∑‰ª£Á†ÅÔºåË∑ü‰∏öÂä°Êó†ÂÖ≥Ôºå‰∏çÁÆ°‰Ω†ÁöÑ‰∏öÂä°Â¶Ç‰ΩïÂÜôÔºåÂÆÉÂßãÁªà‰∏çÂèò
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">runtimeChunk</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">template</span><span class="o">:</span> <span class="s2">&#34;./src/index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;page1.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">chunks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;page1&#34;</span><span class="p">],</span> <span class="c1">// Êääpage1Âíåpage1ÂàÜÊãÜÂá∫ÂéªÁöÑ‰ª£Á†ÅÂùóÁîüÊàêÁöÑÊñá‰ª∂ÊèíÂÖ•Ê≠§Ê®°Âùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">template</span><span class="o">:</span> <span class="s2">&#34;./src/index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;page2.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">chunks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;page2&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">template</span><span class="o">:</span> <span class="s2">&#34;./src/index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;page3.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">chunks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;page3&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">webpackPreloadWebpackPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">ImportPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">AssetWebpackPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/blogs/post/webpack/images/image-20230523231023734.png"
	width="856"
	height="423"
	srcset="/blogs/post/webpack/images/image-20230523231023734_hu_811bd2662e2974fc.png 480w, /blogs/post/webpack/images/image-20230523231023734_hu_4529b789206f9075.png 1024w"
	loading="lazy"
	
		alt="image-20230523231023734"
	
	
		class="gallery-image" 
		data-flex-grow="202"
		data-flex-basis="485px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">optimization</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//ÊåáÂÆö‰ª£Á†ÅÂùóÁöÑÂàÜÂâ≤ÊñπÂºè Ë°®Á§∫ÈÄâÊã©Âì™‰∫õ‰ª£Á†ÅÂùóËøõË°åÂàÜÂâ≤Ôºåasync(ÂºÇÊ≠•import) initial(ÂêåÊ≠•) allÔºàÂÖ®ÈÉ®Ôºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">splitChunks</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">chunks</span><span class="o">:</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//Ë°®Á§∫ÂàÜÂâ≤Âá∫ÂéªÁöÑ‰ª£Á†ÅÂùóÊúÄÂ∞èÁöÑ‰ΩìÁßØ 0Â∞±ÊòØ‰∏çÈôêÂà∂ÂàÜÂâ≤Âá∫ÂéªÁöÑ‰ª£Á†ÅÂùóÁöÑ‰ΩìÁßØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">minSize</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//Âä†ËΩΩÂÖ•Âè£Êñá‰ª∂Êó∂ÔºåÂπ∂Ë°åËØ∑Ê±ÇÁöÑÊúÄÂ§ßÊï∞Èáè ÈªòËÆ§‰∏∫5
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">maxInitialRequests</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span><span class="c1">//‰∏Ä‰∏™chunkÊúÄÂ§öÊãÜÊàê5‰∏™ÂåÖ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// page1 module1 module2 jquery
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">//ÊåâÈúÄÂä†ËΩΩÊñá‰ª∂Êó∂ÔºåÂπ∂Ë°åËØ∑Ê±ÇÁöÑÊúÄÂ§ßÊï∞Èáè ÈªòËÆ§‰∏∫3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">maxAsyncRequests</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//Ë°®Á§∫Âú®ÊèêÂèñÂÖ¨ÂÖ±‰ª£Á†ÅÁöÑÊó∂ÂÄôÔºå‰∏Ä‰∏™Ê®°ÂùóË¢´Â§öÂ∞ë‰∏™ÂÖ•Âè£Áî®ÂÖ•Êâç‰ºöËøõË°åÊèêÂèñ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">minChunks</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">//Âú®‰ª•ÂâçÊòØÊ≤°ÊúâcacheGroupsËøô‰∏™Ê¶ÇÂøµ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">//ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÊúâ‰∫å‰∏™ÁºìÂ≠òÁªÑ defaultVendors default
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">cacheGroups</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">defaultVendors</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="k">default</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">xxx</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">minChunks</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span><span class="c1">//ÊåâËøô‰∏™Êù°‰ª∂ÔºåÂ¶ÇÊûú‰∏Ä‰∏™Ê®°ÂùóË¢´ ÂºïÁî®‰∫Ü1Ê¨°‰ª•‰∏äÔºåÂ∞±ÈúÄË¶ÅË¢´ ÊèêÂèñÂà∞ÂçïÁã¨ÁöÑ‰ª£Á†ÅÂùó‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="c1">//ÈúÄË¶ÅÊääindex.jsÊèêÂà∞Âà∞common‰ª£Á†ÅÂùó‰∏≠ÔºåÊèêÂèñ‰∫Ü‰ª•ÂêémainÈáåÂ∞±Ë¶ÅÂà†Èô§index.jsÊ®°Âùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="c1">//ÊúÄÁªà‰ºöÊúâ‰∏§‰∏™‰ª£Á†ÅÂùó 1‰∏™ÊòØÁ©∫ÁöÑmain,‰∏Ä‰∏™ÊòØÂåÖÊã¨index.jsÁöÑcommon
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="c1">//ÈáçÁî®Áé∞Âú®ÁöÑ‰ª£Á†ÅÂùó false ‰∏çÈáçÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="c1">//Êú¨Êù•ÊàëË¶ÅÊèêÂèñÂàÜÂâ≤index.js,ÈÇ£‰πàÊñ∞ÂàÜÂâ≤Âá∫ÂéªÁöÑ‰ª£Á†ÅÂùóÈáåÂè™Êúâ‰∏Ä‰∏™index.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="c1">//‰ΩÜÊòØÂèëÁé∞Âú®Áé∞Âú®mainÈáå‰πüÂàöÂ•ΩÊúâÊàëÊÉ≥ÊèêÂèñÁöÑ‰ª£Á†ÅÂùóÔºåÁõ¥Êé•ÊäämainÂΩìÊàêÂàÜÂâ≤Âá∫Âéª‰ª£Á†ÅÂ§çÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="nx">reuseExistingChunk</span><span class="o">:</span> <span class="kc">true</span><span class="c1">//Â¶ÇÊûúËÉΩÈáçÁî®ÔºåÂ∞±‰∏ç‰ºöÂÜçÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑcommon‰ª£Á†ÅÂùó‰∫ÜÔºåÁõ¥Êé•ÈáçÁî®main.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="c1">// reuseExistingChunkË°®Á§∫Â¶ÇÊûúÂΩìÂâçÁöÑ‰ª£Á†ÅÂåÖÂê´Â∑≤ÁªèË¢´‰ªé‰∏ªbundle‰∏≠ÂàÜÂâ≤Âá∫ÂéªÁöÑÊ®°ÂùóÔºåÂÆÉÂ∞Ü‰ºöË¢´ÈáçÁî®ÔºåËÄå‰∏ç‰ºöÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑ‰ª£Á†ÅÂùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">//Á¨¨‰∏âÊñπ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//Ë¶ÜÁõñÈªòËÆ§ÁºìÂ≠òÁªÑÔºåÂõ†‰∏∫Êàë‰ª¨Êúâ‰∏§‰∏™ÈªòËÆ§ÁºìÂ≠òÁªÑ defaultVendors,default
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="cm">/*  defaultVendors: {
</span></span></span><span class="line"><span class="cl"><span class="cm">           test: /node_modules/,//Â¶ÇÊûúÊ®°ÂùóÁöÑË∑ØÂæÑÈáåÊúânode_modulesÁöÑËØùÂ∞±Â±û‰∫éËøô‰∏™vendorÁºìÂ≠òÁªÑ
</span></span></span><span class="line"><span class="cl"><span class="cm">           priority: -10
</span></span></span><span class="line"><span class="cl"><span class="cm">         },
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">         default: {
</span></span></span><span class="line"><span class="cl"><span class="cm">           minChunks: 2,
</span></span></span><span class="line"><span class="cl"><span class="cm">           priority: -20
</span></span></span><span class="line"><span class="cl"><span class="cm">         } */</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">optimization</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">splitChunks</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Ë°®Á§∫ÈÄâÊã©Âì™‰∫õ chunks ËøõË°åÂàÜÂâ≤ÔºåÂèØÈÄâÂÄºÊúâÔºöasyncÔºåinitialÂíåall
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">chunks</span><span class="o">:</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Ë°®Á§∫Êñ∞ÂàÜÁ¶ªÂá∫ÁöÑchunkÂøÖÈ°ªÂ§ß‰∫éÁ≠â‰∫éminSizeÔºåÈªòËÆ§‰∏∫30000ÔºåÁ∫¶30kb„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">minSize</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span><span class="c1">//ÈªòËÆ§ÂÄºÊòØ20000,ÁîüÊàêÁöÑ‰ª£Á†ÅÂùóÁöÑÊúÄÂ∞èÂ∞∫ÂØ∏
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">cacheGroups</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">defaultVendors</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">test</span><span class="o">:</span> <span class="sr">/[\\/]node_modules[\\/]/</span><span class="p">,</span> <span class="c1">//Êù°‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="nx">priority</span><span class="o">:</span> <span class="o">-</span><span class="mi">10</span> <span class="c1">///‰ºòÂÖàÁ∫ßÔºå‰∏Ä‰∏™chunkÂæàÂèØËÉΩÊª°Ë∂≥Â§ö‰∏™ÁºìÂ≠òÁªÑÔºå‰ºöË¢´ÊäΩÂèñÂà∞‰ºòÂÖàÁ∫ßÈ´òÁöÑÁºìÂ≠òÁªÑ‰∏≠,‰∏∫‰∫ÜËÉΩÂ§üËÆ©Ëá™ÂÆö‰πâÁºìÂ≠òÁªÑÊúâÊõ¥È´òÁöÑ‰ºòÂÖàÁ∫ß(ÈªòËÆ§0),ÈªòËÆ§ÁºìÂ≠òÁªÑÁöÑpriorityÂ±ûÊÄß‰∏∫Ë¥üÂÄº.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="k">default</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">minChunks</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span><span class="c1">////Ë¢´Â§öÂ∞ëÊ®°ÂùóÂÖ±‰∫´,Âú®ÂàÜÂâ≤‰πãÂâçÊ®°ÂùóÁöÑË¢´ÂºïÁî®Ê¨°Êï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="nx">priority</span><span class="o">:</span> <span class="o">-</span><span class="mi">20</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâìÂåÖÁîüÊàêÊÉÖÂÜµÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//ÂÖ•Âè£‰ª£Á†ÅÂùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">page1</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl"><span class="nx">page2</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl"><span class="nx">page3</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl"><span class="c1">//ÂºÇÊ≠•Âä†ËΩΩ‰ª£Á†ÅÂùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">src_asyncModule1_js</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl"><span class="c1">//defaultVendorsÁºìÂ≠òÁªÑÂØπÂ∫îÁöÑ‰ª£Á†ÅÂùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">defaultVendors</span><span class="o">-</span><span class="nx">node_modules_jquery_dist_jquery_js</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl"><span class="nx">defaultVendors</span><span class="o">-</span><span class="nx">node_modules_lodash_lodash_js</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl"><span class="c1">//default‰ª£ÁºìÂ≠òÁªÑÂØπÂ∫îÁöÑ‰ª£Á†ÅÂùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">default</span><span class="o">-</span><span class="nx">src_module1_js</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl"><span class="k">default</span><span class="o">-</span><span class="nx">src_module2_js</span><span class="p">.</span><span class="nx">js</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê®°ÊãüËøáÁ®ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">page1Chunk</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;page1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">modules</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;A&#34;</span><span class="p">,</span> <span class="s2">&#34;B&#34;</span><span class="p">,</span> <span class="s2">&#34;C&#34;</span><span class="p">,</span> <span class="s2">&#34;lodash&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">page2Chunk</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;page2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;C&#34;</span><span class="p">,</span> <span class="s2">&#34;D&#34;</span><span class="p">,</span> <span class="s2">&#34;E&#34;</span><span class="p">,</span> <span class="s2">&#34;lodash&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">cacheGroups</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">vendor</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">test</span><span class="o">:</span> <span class="sr">/lodash/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="k">default</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">minChunks</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">vendorChunk</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span><span class="o">:</span> <span class="sb">`vendor~node_modules_lodash_js`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">modules</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;lodash&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">defaultChunk</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span><span class="o">:</span> <span class="sb">`default~page1~page2`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">modules</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;C&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Â∑•‰ΩúÊµÅÁ®ã</strong></p>
<ol>
<li>SplitChunksPlugi ÂÖàÂ∞ùËØïÊää<code>minChunks</code>ËßÑÂàôÁöÑÊ®°ÂùóÊäΩÂèñÂà∞ÂçïÁã¨ÁöÑ<code>Chunk</code>‰∏≠</li>
<li>Âà§Êñ≠ËØ• Chunk ÊòØÂê¶Êª°Ë∂≥<code>maxInitialRequests</code>ÈÖçÁΩÆÈ°πÁöÑË¶ÅÊ±Ç</li>
<li>Âà§Êñ≠‰ΩìÁßØÊòØÂê¶Êª°Ë∂≥<code>minSize</code>ÁöÑÂ§ßÂ∞èÔºåÂ¶ÇÊûúÂ∞è‰∫é<code>minSize</code>Âàô‰∏çÂàÜÂåÖÔºåÂ¶ÇÊûúÂ§ß‰∫é<code>minSize</code>Âà§Êñ≠ÊòØÂê¶Ë∂ÖËøá<code>maxSize</code>,Â¶ÇÊûúÂ§ß‰∫é<code>maxSize</code>ÂàôÁªßÁª≠ÊãÜÂàÜÊàêÊõ¥Â∞èÁöÑÂåÖ</li>
</ol>
<p><a class="link" href="http://www.zhufengpeixun.com/front/html/103.13.splitChunks.html"  target="_blank" rel="noopener"
    >maxInitialRequest</a>ÔºöÁî®‰∫éËÆæÁΩÆ Initial Chunk ÊúÄÂ§ßÂπ∂Ë°åËØ∑Ê±ÇÊï∞„ÄÇ</p>
<p><a class="link" href="http://www.zhufengpeixun.com/front/html/103.13.splitChunks.html"  target="_blank" rel="noopener"
    >maxAsyncRequests</a>ÔºöÁî®‰∫éËÆæÁΩÆ Async Chunk ÊúÄÂ§ßÂπ∂Ë°åËØ∑Ê±ÇÊï∞„ÄÇ</p>
<p>ËØ∑Ê±ÇÊï∞ÊòØÊåáÂä†ËΩΩ‰∏Ä‰∏™<code>Chunk</code>Êó∂ÊâÄÈúÄË¶ÅÂä†ËΩΩÁöÑÊâÄÊúâÁöÑÂàÜÂåÖÊï∞Èáè,ÂåÖÊã¨<code>Initial Chunk</code>Ôºå‰ΩÜ‰∏çÂåÖÊã¨<code>Async Chunk</code>Âíå<code>runtimeChunk</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;html-webpack-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">AssetPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./asset-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s2">&#34;development&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">devtool</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">page1</span><span class="o">:</span> <span class="s2">&#34;./src/page1.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">page2</span><span class="o">:</span> <span class="s2">&#34;./src/page2.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">page3</span><span class="o">:</span> <span class="s2">&#34;./src/page3.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">optimization</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">splitChunks</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// Ë°®Á§∫ÈÄâÊã©Âì™‰∫õ chunks ËøõË°åÂàÜÂâ≤ÔºåÂèØÈÄâÂÄºÊúâÔºöasyncÔºåinitialÂíåall
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">chunks</span><span class="o">:</span> <span class="s2">&#34;all&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// Ë°®Á§∫Êñ∞ÂàÜÁ¶ªÂá∫ÁöÑchunkÂøÖÈ°ªÂ§ß‰∫éÁ≠â‰∫éminSizeÔºåÈªòËÆ§‰∏∫30000ÔºåÁ∫¶30kb„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">minSize</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">//ÈªòËÆ§ÂÄºÊòØ20000,ÁîüÊàêÁöÑ‰ª£Á†ÅÂùóÁöÑÊúÄÂ∞èÂ∞∫ÂØ∏
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// Ë°®Á§∫‰∏Ä‰∏™Ê®°ÂùóËá≥Â∞ëÂ∫îË¢´minChunks‰∏™chunkÊâÄÂåÖÂê´ÊâçËÉΩÂàÜÂâ≤„ÄÇÈªòËÆ§‰∏∫1„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">minChunks</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// Ë°®Á§∫ÊåâÈúÄÂä†ËΩΩÊñá‰ª∂Êó∂ÔºåÂπ∂Ë°åËØ∑Ê±ÇÁöÑÊúÄÂ§ßÊï∞ÁõÆ„ÄÇÈªòËÆ§‰∏∫5„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">maxAsyncRequests</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// Ë°®Á§∫Âä†ËΩΩÂÖ•Âè£Êñá‰ª∂Êó∂ÔºåÂπ∂Ë°åËØ∑Ê±ÇÁöÑÊúÄÂ§ßÊï∞ÁõÆ„ÄÇÈªòËÆ§‰∏∫3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">maxInitialRequests</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// Ë°®Á§∫ÊãÜÂàÜÂá∫ÁöÑchunkÁöÑÂêçÁß∞ËøûÊé•Á¨¶„ÄÇÈªòËÆ§‰∏∫~„ÄÇÂ¶Çchunk~vendors.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">automaticNameDelimiter</span><span class="o">:</span> <span class="s2">&#34;~&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">cacheGroups</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">defaultVendors</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">test</span><span class="o">:</span> <span class="sr">/[\\/]node_modules[\\/]/</span><span class="p">,</span> <span class="c1">//Êù°‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="nx">priority</span><span class="o">:</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="c1">///‰ºòÂÖàÁ∫ßÔºå‰∏Ä‰∏™chunkÂæàÂèØËÉΩÊª°Ë∂≥Â§ö‰∏™ÁºìÂ≠òÁªÑÔºå‰ºöË¢´ÊäΩÂèñÂà∞‰ºòÂÖàÁ∫ßÈ´òÁöÑÁºìÂ≠òÁªÑ‰∏≠,‰∏∫‰∫ÜËÉΩÂ§üËÆ©Ëá™ÂÆö‰πâÁºìÂ≠òÁªÑÊúâÊõ¥È´òÁöÑ‰ºòÂÖàÁ∫ß(ÈªòËÆ§0),ÈªòËÆ§ÁºìÂ≠òÁªÑÁöÑpriorityÂ±ûÊÄß‰∏∫Ë¥üÂÄº.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="k">default</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">minChunks</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">////Ë¢´Â§öÂ∞ëÊ®°ÂùóÂÖ±‰∫´,Âú®ÂàÜÂâ≤‰πãÂâçÊ®°ÂùóÁöÑË¢´ÂºïÁî®Ê¨°Êï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="nx">priority</span><span class="o">:</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">runtimeChunk</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">template</span><span class="o">:</span> <span class="s2">&#34;./src/index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">chunks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;page1&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;page1.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">template</span><span class="o">:</span> <span class="s2">&#34;./src/index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">chunks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;page2&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;page2.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">template</span><span class="o">:</span> <span class="s2">&#34;./src/index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">chunks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;page3&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;page3.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">AssetPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>webpack-assets-plugin.js</p>
<p>plugins\webpack-assets-plugin.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">WebpackAssetsPlugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">constructor</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">apply</span><span class="p">(</span><span class="nx">compiler</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//ÊØèÂΩìwebpackÂºÄÂêØ‰∏ÄÊ¨°Êñ∞ÁöÑÁºñËØë ÔºåÂ∞±‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑcompilation
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">compiler</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">compilation</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="s2">&#34;WebpackAssetsPlugin&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">compilation</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//ÊØèÊ¨°Ê†πÊçÆchunkÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊñá‰ª∂Âêé‰ºöËß¶Âèë‰∏ÄÊ¨°chunkAsset
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">compilation</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">chunkAsset</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;WebpackAssetsPlugin&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nx">chunk</span><span class="p">,</span> <span class="nx">filename</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">chunk</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">filename</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">WebpackAssetsPlugin</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>page1.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">module1</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./module1&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">module2</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./module2&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;jquery&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">module1</span><span class="p">,</span> <span class="nx">module2</span><span class="p">,</span> <span class="nx">$</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span><span class="p">(</span><span class="cm">/* webpackChunkName: &#34;asyncModule1&#34; */</span> <span class="s2">&#34;./asyncModule1&#34;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>page2.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">module1</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./module1&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">module2</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./module2&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;jquery&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">module1</span><span class="p">,</span> <span class="nx">module2</span><span class="p">,</span> <span class="nx">$</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>page3.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">module1</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./module1&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">module3</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;./module3&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;jquery&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">module1</span><span class="p">,</span> <span class="nx">module3</span><span class="p">,</span> <span class="nx">$</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>module1.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="s2">&#34;module1&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>module2.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;module2&#34;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>module3.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;module3&#34;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>asyncModule1.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">_</span> <span class="nx">from</span> <span class="s2">&#34;lodash&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">_</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâìÂåÖÂêéÁöÑÁªìÊûú</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//ÂÖ•Âè£‰ª£Á†ÅÂùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">page1</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl"><span class="nx">page2</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl"><span class="nx">page3</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl"><span class="c1">//ÂºÇÊ≠•Âä†ËΩΩ‰ª£Á†ÅÂùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">src_asyncModule1_js</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl"><span class="c1">//defaultVendorsÁºìÂ≠òÁªÑÂØπÂ∫îÁöÑ‰ª£Á†ÅÂùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">defaultVendors</span><span class="o">-</span><span class="nx">node_modules_jquery_dist_jquery_js</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl"><span class="nx">defaultVendors</span><span class="o">-</span><span class="nx">node_modules_lodash_lodash_js</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl"><span class="c1">//default‰ª£ÁºìÂ≠òÁªÑÂØπÂ∫îÁöÑ‰ª£Á†ÅÂùó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">default</span><span class="o">-</span><span class="nx">src_module1_js</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl"><span class="k">default</span><span class="o">-</span><span class="nx">src_module2_js</span><span class="p">.</span><span class="nx">js</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËÆ°ÁÆóËøáÁ®ã</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">page1Chunk</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;page1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">modules</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;A&#34;</span><span class="p">,</span> <span class="s2">&#34;B&#34;</span><span class="p">,</span> <span class="s2">&#34;C&#34;</span><span class="p">,</span> <span class="s2">&#34;lodash&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">page2Chunk</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;page2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;C&#34;</span><span class="p">,</span> <span class="s2">&#34;D&#34;</span><span class="p">,</span> <span class="s2">&#34;E&#34;</span><span class="p">,</span> <span class="s2">&#34;lodash&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">cacheGroups</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">vendor</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">test</span><span class="o">:</span> <span class="sr">/lodash/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="k">default</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">minChunks</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">vendorChunk</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span><span class="o">:</span> <span class="sb">`vendor~node_modules_lodash_js`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">modules</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;lodash&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">defaultChunk</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span><span class="o">:</span> <span class="sb">`default~page1~page2`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">modules</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;C&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>reuseExistingChunk</p>
<ul>
<li><a class="link" href="https://webpack.js.org/plugins/split-chunks-plugin/#splitchunkscachegroupscachegroupreuseexistingchunk"  target="_blank" rel="noopener"
    >reuseExistingChunk</a>Ë°®Á§∫Â¶ÇÊûúÂΩìÂâçÁöÑ‰ª£Á†ÅÂåÖÂê´Â∑≤ÁªèË¢´‰ªé‰∏ª bundle ‰∏≠ÂàÜÂâ≤Âá∫ÂéªÁöÑÊ®°ÂùóÔºåÂÆÉÂ∞Ü‰ºöË¢´ÈáçÁî®ÔºåËÄå‰∏ç‰ºöÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑ‰ª£Á†ÅÂùó</li>
</ul>
<p>index.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"></code></pre></td></tr></table>
</div>
</div><p>webpack.config.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);
</span></span><span class="line"><span class="cl">const AssetPlugin = require(&#39;./asset-plugin&#39;);
</span></span><span class="line"><span class="cl">module.exports = {
</span></span><span class="line"><span class="cl">    mode: &#39;development&#39;,
</span></span><span class="line"><span class="cl">    devtool: false,
</span></span><span class="line"><span class="cl"><span class="gi">+   entry: &#39;./src/index.js&#39;,
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>    optimization: {
</span></span><span class="line"><span class="cl">        splitChunks: {
</span></span><span class="line"><span class="cl">            // Ë°®Á§∫ÈÄâÊã©Âì™‰∫õ chunks ËøõË°åÂàÜÂâ≤ÔºåÂèØÈÄâÂÄºÊúâÔºöasyncÔºåinitialÂíåall
</span></span><span class="line"><span class="cl">            chunks: &#39;all&#39;,
</span></span><span class="line"><span class="cl">            // Ë°®Á§∫Êñ∞ÂàÜÁ¶ªÂá∫ÁöÑchunkÂøÖÈ°ªÂ§ß‰∫éÁ≠â‰∫éminSizeÔºåÈªòËÆ§‰∏∫30000ÔºåÁ∫¶30kb„ÄÇ
</span></span><span class="line"><span class="cl">            minSize: 0,//ÈªòËÆ§ÂÄºÊòØ20000,ÁîüÊàêÁöÑ‰ª£Á†ÅÂùóÁöÑÊúÄÂ∞èÂ∞∫ÂØ∏
</span></span><span class="line"><span class="cl">            // Ë°®Á§∫‰∏Ä‰∏™Ê®°ÂùóËá≥Â∞ëÂ∫îË¢´minChunks‰∏™chunkÊâÄÂåÖÂê´ÊâçËÉΩÂàÜÂâ≤„ÄÇÈªòËÆ§‰∏∫1„ÄÇ
</span></span><span class="line"><span class="cl">            minChunks: 1,
</span></span><span class="line"><span class="cl">            // Ë°®Á§∫ÊåâÈúÄÂä†ËΩΩÊñá‰ª∂Êó∂ÔºåÂπ∂Ë°åËØ∑Ê±ÇÁöÑÊúÄÂ§ßÊï∞ÁõÆ„ÄÇÈªòËÆ§‰∏∫5„ÄÇ
</span></span><span class="line"><span class="cl">            maxAsyncRequests: 3,
</span></span><span class="line"><span class="cl">            // Ë°®Á§∫Âä†ËΩΩÂÖ•Âè£Êñá‰ª∂Êó∂ÔºåÂπ∂Ë°åËØ∑Ê±ÇÁöÑÊúÄÂ§ßÊï∞ÁõÆ„ÄÇÈªòËÆ§‰∏∫3
</span></span><span class="line"><span class="cl">            maxInitialRequests: 5,
</span></span><span class="line"><span class="cl">            // Ë°®Á§∫ÊãÜÂàÜÂá∫ÁöÑchunkÁöÑÂêçÁß∞ËøûÊé•Á¨¶„ÄÇÈªòËÆ§‰∏∫~„ÄÇÂ¶Çchunk~vendors.js
</span></span><span class="line"><span class="cl">            automaticNameDelimiter: &#39;~&#39;,
</span></span><span class="line"><span class="cl"><span class="gi">+           cacheGroups: {
</span></span></span><span class="line"><span class="cl"><span class="gi">+               defaultVendors: false,
</span></span></span><span class="line"><span class="cl"><span class="gi">+               default: false,
</span></span></span><span class="line"><span class="cl"><span class="gi">+               common: {
</span></span></span><span class="line"><span class="cl"><span class="gi">+                   minChunks: 1,
</span></span></span><span class="line"><span class="cl"><span class="gi">+                   reuseExistingChunk: false
</span></span></span><span class="line"><span class="cl"><span class="gi">+               }
</span></span></span><span class="line"><span class="cl"><span class="gi">+           }
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>        },
</span></span><span class="line"><span class="cl"><span class="gi">+       runtimeChunk: false
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>    },
</span></span><span class="line"><span class="cl">    plugins: [
</span></span><span class="line"><span class="cl">        new HtmlWebpackPlugin({
</span></span><span class="line"><span class="cl">            template: &#39;./src/index.html&#39;,
</span></span><span class="line"><span class="cl">            filename: &#39;index.html&#39;
</span></span><span class="line"><span class="cl">        })
</span></span><span class="line"><span class="cl">        new AssetPlugin()
</span></span><span class="line"><span class="cl">    ]
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÁªìÊûú</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//reuseExistingChunk: false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">main</span> <span class="nx">main</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl"><span class="nx">common</span><span class="o">-</span><span class="nx">src_index_js</span> <span class="nx">common</span><span class="o">-</span><span class="nx">src_index_js</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//reuseExistingChunk: true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">main</span> <span class="nx">main</span><span class="p">.</span><span class="nx">js</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/blogs/tags/webpack/">Webpack</a>
        
    </section>


    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
	const mainArticleElement = document.querySelector(".main-article");
        renderMathInElement(mainArticleElement, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>

    
</article>

    

    

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 ÊùúÂç°
    </section>
    
    <section class="powerby">
        ‰ΩøÁî® <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> ÊûÑÂª∫ <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.30.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/blogs/ts/main.e6066e313cf954ac738cc5eb0298b809aa98b05c52241bb9ec61e1e61ee898a3.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
